  
  
0000:0000	      ;
0000:0000	      ;	ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
0000:0000	      ;	º     This file	is generated by	The Interactive	Disassembler (IDA)	  º
0000:0000	      ;	º		       Licensed	to: Unknown User ;-)			  º
0000:0000	      ;	º     Copyright	(c) 1999 by DataRescue sa/nv, <ida@datarescue.com>	  º
0000:0000	      ;	ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
0000:0000	      ;
0000:0000	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0000	      ;	File Name   : Z:\opt\si\rom\invaders.bin
0000:0000	      ;	Format	    : Binary File
0000:0000	      ;	Base Address: 0000h Range: 0000h - 2000h Loaded	length:	2000h
0000:0000	      
0000:0000	      ;	Processor:	  z80
0000:0000	      ;	Target assembler: Table	Driven Assembler (TASM)	by Speech Technology Inc.
0000:0000	      
0000:0000	      ;	ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ
0000:0000	      
0000:0000	      ;	Segment	type: Pure code
0000:0000	      ;	segment	'seg000'
0000:0000	      
0000:0000	      reset:
0000:0000 00			      nop     
0000:0001 00			      nop     
0000:0002 00			      nop     
0000:0003 C3 D4	18		      jp      start
0000:0006	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0006 00			      nop     
0000:0007 00			      nop     
0000:0008	      
0000:0008	      RST8:							      ;	vblank interrupt
0000:0008 F5			      push    af
0000:0009 C5			      push    bc
0000:000A D5			      push    de
0000:000B E5			      push    hl
0000:000C C3 8C	00		      jp      rst8_body
0000:000F	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:000F 00			      nop     
0000:0010	      
0000:0010	      RST10:							      ;	general	60Hz interrupt
0000:0010 F5			      push    af
0000:0011 C5			      push    bc
0000:0012 D5			      push    de
0000:0013 E5			      push    hl
0000:0014 3E 80			      ld      a, 80h ; '€'                            ; $80 = RST10
0000:0016 32 72	20		      ld      (which_intr), a			      ;	flag inside RST10
0000:0019 21 C0	20		      ld      hl, 20C0h				      ;	timer
0000:001C 35			      dec     (hl)				      ;	count down
0000:001D CD CD	17		      call    handle_tilt			      ;	(not coming back)
0000:0020 DB 01			      in      a, (1)				      ;	read controller	1
0000:0022 0F			      rrca					      ;	any credits?
0000:0023 DA 67	00		      jp      c, debounce_credit		      ;	yes, debounce
0000:0026 3A EA	20		      ld      a, (debounced_credit_flag)	      ;	debounced credits
0000:0029 A7			      and     a					      ;	any credits?
0000:002A CA 42	00		      jp      z, loc_0_42			      ;	yes, skip
0000:002D 3A EB	20		      ld      a, (num_credits)			      ;	get number of credits
0000:0030 FE 99			      cp      99h ; '™'                               ; maximum?
0000:0032 CA 3E	00		      jp      z, loc_0_3E			      ;	yes, skip
0000:0035 C6 01			      add     a, 1				      ;	add credit
0000:0037 27			      daa     
0000:0038	      
0000:0038	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0038	      
0000:0038	      
0000:0038	      sub_0_38:
0000:0038 32 EB	20		      ld      (num_credits), a			      ;	save
0000:003B CD 47	19		      call    draw_credits
0000:003E	      
0000:003E	      loc_0_3E:							      ;	CODE XREF: 0000:0032j
0000:003E AF			      xor     a					      ;	reset debounced	credit flag
0000:003F	      
0000:003F	      loc_0_3F:							      ;	CODE XREF: sub_0_38+34j
0000:003F 32 EA	20		      ld      (debounced_credit_flag), a
0000:0042	      
0000:0042	      loc_0_42:							      ;	CODE XREF: 0000:002Aj
0000:0042 3A E9	20		      ld      a, (enable_vblank_code)
0000:0045 A7			      and     a					      ;	are we expecting a vblank intr?
0000:0046 CA 82	00		      jp      z, exit_intr			      ;	yes, exit
0000:0049 3A EF	20		      ld      a, (game_in_progress)
0000:004C A7			      and     a					      ;	game in	progress?
0000:004D C2 6F	00		      jp      nz, update_game			      ;	yes, handle game mechanics
0000:0050 3A EB	20		      ld      a, (num_credits)
0000:0053 A7			      and     a					      ;	any credits?
0000:0054 C2 5D	00		      jp      nz, prompt_player_to_start	      ;	yes, skip
0000:0057 CD BF	0A		      call    update_attract_animations		      ;	anything that involves moving invaders
0000:005A C3 82	00		      jp      exit_intr				      ;	exit NMI
0000:005D	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:005D	      
0000:005D	      prompt_player_to_start:					      ;	CODE XREF: sub_0_38+1Cj
0000:005D 3A 93	20		      ld      a, (coined_up)			      ;	already	started	game?
0000:0060 A7			      and     a
0000:0061 C2 82	00		      jp      nz, exit_intr			      ;	yes, exit NMI
0000:0064 C3 65	07		      jp      show_PUSH_PLAYER_BUTTON
0000:0067	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0067	      
0000:0067	      debounce_credit:						      ;	CODE XREF: 0000:0023j
0000:0067 3E 01			      ld      a, 1				      ;	catches	falling	edge of	credit pulse
0000:0069 32 EA	20		      ld      (debounced_credit_flag), a
0000:006C C3 3F	00		      jp      loc_0_3F				      ;	back to	loop
0000:006F	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:006F	      
0000:006F	      update_game:						      ;	CODE XREF: sub_0_38+15j
0000:006F CD 40	17		      call    do_update_invader_sound
0000:0072	      
0000:0072	      loc_0_72:							      ;	CODE XREF: 0000:0ABCj
0000:0072 3A 32	20		      ld      a, (byte_0_2032)
0000:0075 32 80	20		      ld      (byte_0_2080), a
0000:0078 CD 00	01		      call    draw_invader
0000:007B CD 48	02		      call    dispatch_vector_table@$2010	      ;	dispatch to jump vector
0000:007E CD 13	09		      call    handle_next_ufo_timer
0000:0081 00			      nop     
0000:0082	      
0000:0082	      exit_intr:						      ;	CODE XREF: sub_0_38+Ej
0000:0082 E1									      ;	sub_0_38+22j ...
0000:0082			      pop     hl
0000:0083 D1			      pop     de
0000:0084 C1			      pop     bc
0000:0085 F1			      pop     af
0000:0086 FB			      ei      
0000:0087 C9			      ret     
0000:0087	      ;	End of function	sub_0_38
0000:0087	      
0000:0087	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0088 00 00	00 00		      .db 0, 0,	0, 0
0000:008C	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:008C	      
0000:008C	      rst8_body:						      ;	CODE XREF: 0000:000Cj
0000:008C AF			      xor     a					      ;	$00 = vblank intr
0000:008D 32 72	20		      ld      (which_intr), a			      ;	flag inside RST8
0000:0090 3A E9	20		      ld      a, (enable_vblank_code)
0000:0093 A7			      and     a					      ;	vblank code enabled?
0000:0094 CA 82	00		      jp      z, exit_intr			      ;	no, exit
0000:0097 3A EF	20		      ld      a, (game_in_progress)
0000:009A A7			      and     a					      ;	game already started?
0000:009B C2 A5	00		      jp      nz, dispatch_vector_table@$2020	      ;	yes, skip
0000:009E 3A C1	20		      ld      a, (animation_type)
0000:00A1 0F			      rrca					      ;	is there an animation in progress?
0000:00A2 D2 82	00		      jp      nc, exit_intr			      ;	no, exit
0000:00A5	      
0000:00A5	      dispatch_vector_table@$2020:				      ;	CODE XREF: 0000:009Bj
0000:00A5 21 20	20		      ld      hl, 2020h
0000:00A8 CD 4B	02		      call    dispatch_jump_vector		      ;	dispatch to jump vector
0000:00AB CD 41	01		      call    update_next_invader_check_invasi	      ;	updates	the next invader and
0000:00AB									      ;	checks for an invasion
0000:00AE C3 82	00		      jp      exit_intr				      ;	exit NMI
0000:00B1	      
0000:00B1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:00B1	      
0000:00B1	      
0000:00B1	      restore_invader_params:					      ;	CODE XREF: 0000:0814p
0000:00B1 CD 86	08		      call    ptr_curr_p_bl_invader_coords	      ;	get pointer to invader coords
0000:00B4 E5			      push    hl
0000:00B5 7E			      ld      a, (hl)				      ;	get x coord
0000:00B6 23			      inc     hl
0000:00B7 66			      ld      h, (hl)				      ;	get y coord
0000:00B8 6F			      ld      l, a
0000:00B9 22 09	20		      ld      (bottom_left_invader_y), hl	      ;	init invader coords
0000:00BC 22 0B	20		      ld      (curr_invader_y),	hl		      ;	init current invader coords
0000:00BF E1			      pop     hl
0000:00C0 2B			      dec     hl
0000:00C1 7E			      ld      a, (hl)				      ;	get invader x increment
0000:00C2 FE 03			      cp      3
0000:00C4 C2 C8	00		      jp      nz, loc_0_C8
0000:00C7 3D			      dec     a
0000:00C8	      
0000:00C8	      loc_0_C8:							      ;	CODE XREF: restore_invader_params+13j
0000:00C8 32 08	20		      ld      (invader_x_inc), a		      ;	init invader x inc
0000:00CB FE FE			      cp      0FEh ; 'ş'                              ; left?
0000:00CD 3E 00			      ld      a, 0				      ;	flag invaders moving left
0000:00CF C2 D3	00		      jp      nz, loc_0_D3			      ;	no, skip
0000:00D2 3C			      inc     a					      ;	flag invaders moving right
0000:00D3	      
0000:00D3	      loc_0_D3:							      ;	CODE XREF: restore_invader_params+1Ej
0000:00D3 32 0D	20		      ld      (invader_left_right), a		      ;	store
0000:00D6 C9			      ret     
0000:00D6	      ;	End of function	restore_invader_params
0000:00D6	      
0000:00D7	      
0000:00D7	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:00D7	      
0000:00D7	      
0000:00D7	      init_invader_xinc_wipe_2p_score:				      ;	CODE XREF: 0000:07DAp
0000:00D7 3E 02			      ld      a, 2
0000:00D9 32 FB	21		      ld      (p1_invader_x_inc), a		      ;	init p1	invader	x inc
0000:00DC 32 FB	22		      ld      (p2_invader_x_inc), a		      ;	init p2	invader	x inc
0000:00DF C3 E4	08		      jp      wipe_2p_score
0000:00DF	      ;	End of function	init_invader_xinc_wipe_2p_score
0000:00DF	      
0000:00DF	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:00E2 00 00	00 00+		      .db 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
0000:00E2 00 00	00 00+		      .db 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
0000:0100	      
0000:0100	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0100	      
0000:0100	      
0000:0100	      draw_invader:						      ;	CODE XREF: sub_0_38+40p
0000:0100 21 02	20		      ld      hl, 2002h				      ;	ptr flag that player shot something
0000:0103 7E			      ld      a, (hl)
0000:0104 A7			      and     a					      ;	has player shot	something?
0000:0105 C2 38	15		      jp      nz, check_invader_finished_exploding    ;	yes, skip
0000:0105									      ;	- interesting -	invaders actually stop moving
0000:0105									      ;	  while	one of them is exploding
0000:0108 E5			      push    hl
0000:0109 3A 06	20		      ld      a, (next_invader_to_update)	      ;	get invader number (1-55)
0000:010C 6F			      ld      l, a
0000:010D 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:0110 67			      ld      h, a				      ;	hl = invader in	invader	map
0000:0111 7E			      ld      a, (hl)				      ;	invader	still alive?
0000:0112 A7			      and     a
0000:0113 E1			      pop     hl
0000:0114 CA 36	01		      jp      z, loc_0_136			      ;	no, exit
0000:0117 23			      inc     hl
0000:0118 23			      inc     hl
0000:0119 7E			      ld      a, (hl)				      ;	get invader row
0000:011A 23			      inc     hl
0000:011B 46			      ld      b, (hl)				      ;	invader	sprite (animation) # (0	or 1)
0000:011C E6 FE			      and     0FEh ; 'ş'                              ; derive type from row (0/2/4)
0000:011E 07			      rlca    
0000:011F 07			      rlca    
0000:0120 07			      rlca					      ;	x8 == type x 16
0000:0121 5F			      ld      e, a
0000:0122 16 00			      ld      d, 0				      ;	de = offset of invader sprite
0000:0124 21 00	1C		      ld      hl, 1C00h				      ;	invader	gfx table
0000:0127 19			      add     hl, de
0000:0128 EB			      ex      de, hl				      ;	de = invader sprite #1
0000:0129 78			      ld      a, b				      ;	sprite #
0000:012A A7			      and     a					      ;	draw sprite #2?
0000:012B C4 3B	01		      call    nz, add_30h_to_de			      ;	yes - sprite #2
0000:012E 2A 0B	20		      ld      hl, (curr_invader_y)		      ;	get pixel offset of invader
0000:0131 06 10			      ld      b, 10h				      ;	invader	bitmap length
0000:0133 CD D3	15		      call    draw_shifted_bitmap
0000:0136	      
0000:0136	      loc_0_136:						      ;	CODE XREF: draw_invader+14j
0000:0136 AF			      xor     a					      ;	flag invader as	not yet	updated	(drawn)
0000:0137 32 00	20		      ld      (curr_invader_needs_drawing), a
0000:013A C9			      ret     
0000:013A	      ;	End of function	draw_invader
0000:013A	      
0000:013B	      
0000:013B	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:013B	      
0000:013B	      
0000:013B	      add_30h_to_de:						      ;	CODE XREF: draw_invader+2Bp
0000:013B 21 30	00		      ld      hl, 30h ;	'0'
0000:013E 19			      add     hl, de
0000:013F EB			      ex      de, hl
0000:0140 C9			      ret     
0000:0140	      ;	End of function	add_30h_to_de
0000:0140	      
0000:0141	      
0000:0141	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0141	      
0000:0141	      
0000:0141	      update_next_invader_check_invasi:				      ;	CODE XREF: 0000:00ABp
0000:0141 3A 68	20		      ld      a, (byte_0_2068)
0000:0144 A7			      and     a
0000:0145 C8			      ret     z
0000:0146 3A 00	20		      ld      a, (curr_invader_needs_drawing)
0000:0149 A7			      and     a					      ;	has the	current	invader	been drawn yet?
0000:014A C0			      ret     nz				      ;	no, exit
0000:014B 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:014E 67			      ld      h, a				      ;	get ptr	to current player data
0000:014F 3A 06	20		      ld      a, (next_invader_to_update)
0000:0152 16 02			      ld      d, 2				      ;	don't want to trigger movement from here
0000:0152									      ;	- see check_time_to_move_bl_invader
0000:0154	      
0000:0154	      find_next_alive_invader:					      ;	CODE XREF: update_next_invader_check_invasi+1Cj
0000:0154 3C			      inc     a
0000:0155 FE 37			      cp      55				      ;	updated	all invaders?
0000:0157 CC A1	01		      call    z, check_time_to_move_bl_invader	      ;	yes, reset logic
0000:015A 6F			      ld      l, a				      ;	next invader to	update
0000:015B 46			      ld      b, (hl)				      ;	this invader in	invader	map
0000:015C 05			      dec     b					      ;	still alive?
0000:015D C2 54	01		      jp      nz, find_next_alive_invader	      ;	no, next invader
0000:0160 32 06	20		      ld      (next_invader_to_update),	a	      ;	set current invader to update
0000:0163 CD 7A	01		      call    get_alien_coords
0000:0166 61			      ld      h, c				      ;	x coord
0000:0167 22 0B	20		      ld      (curr_invader_y),	hl		      ;	save x and y coords of curr invader
0000:016A 7D			      ld      a, l				      ;	y coord
0000:016B FE 28			      cp      40				      ;	have we	been invaded?
0000:016D DA 71	19		      jp      c, handle_invasion		      ;	yes, handle
0000:0170 7A			      ld      a, d				      ;	invader	row
0000:0171 32 04	20		      ld      (curr_invader_updated_row), a	      ;	store as current row
0000:0174 3E 01			      ld      a, 1				      ;	flag invader as	needing	to be drawn
0000:0176 32 00	20		      ld      (curr_invader_needs_drawing), a
0000:0179 C9			      ret     
0000:0179	      ;	End of function	update_next_invader_check_invasi
0000:0179	      
0000:017A	      
0000:017A	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:017A	      
0000:017A	      
0000:017A	      get_alien_coords:						      ;	CODE XREF: update_next_invader_check_invasi+22p
0000:017A 16 00									      ;	handle_alien_bombing+46p
0000:017A			      ld      d, 0
0000:017C 7D			      ld      a, l				      ;	invader	offset in map
0000:017D 21 09	20		      ld      hl, 2009h				      ;	ptr bottom left	invader	y coord
0000:0180 46			      ld      b, (hl)				      ;	get y coord
0000:0181 23			      inc     hl
0000:0182 4E			      ld      c, (hl)				      ;	get x coord
0000:0183	      
0000:0183	      find_alien_y:						      ;	CODE XREF: get_alien_coords+17j
0000:0183 FE 0B			      cp      11				      ;	on this	row?
0000:0185 FA 94	01		      jp      m, find_alien_x			      ;	yes, skip
0000:0188 DE 0B			      sbc     a, 11				      ;	up 1 row
0000:018A 5F			      ld      e, a
0000:018B 78			      ld      a, b				      ;	y coord
0000:018C C6 10			      add     a, 10h				      ;	update to next row
0000:018E 47			      ld      b, a
0000:018F 7B			      ld      a, e
0000:0190 14			      inc     d					      ;	inc row	counter
0000:0191 C3 83	01		      jp      find_alien_y			      ;	loop
0000:0194	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0194	      
0000:0194	      find_alien_x:						      ;	CODE XREF: get_alien_coords+Bj
0000:0194 68			      ld      l, b				      ;	save y coord of	invader	for return
0000:0195	      
0000:0195	      find_alien_loop:						      ;	CODE XREF: get_alien_coords+24j
0000:0195 A7			      and     a					      ;	left-hand edge alien?
0000:0196 C8			      ret     z					      ;	yes, done - return
0000:0197 5F			      ld      e, a				      ;	invader	offset (1-10)
0000:0198 79			      ld      a, c
0000:0199 C6 10			      add     a, 10h				      ;	next alien along
0000:019B 4F			      ld      c, a				      ;	save x coord of	invader	for return
0000:019C 7B			      ld      a, e
0000:019D 3D			      dec     a					      ;	found alien?
0000:019E C3 95	01		      jp      find_alien_loop			      ;	no, loop
0000:019E	      ;	End of function	get_alien_coords
0000:019E	      
0000:01A1	      
0000:01A1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01A1	      
0000:01A1	      
0000:01A1	      check_time_to_move_bl_invader:				      ;	CODE XREF: update_next_invader_check_invasi+16p
0000:01A1 15			      dec     d					      ;	do we want to move inavders at this point?
0000:01A2 CA CD	01		      jp      z, pop_and_ret			      ;	no, return to parent context
0000:01A5 21 06	20		      ld      hl, 2006h				      ;	next invader to	update
0000:01A8 36 00			      ld      (hl), 0				      ;	reset invader update counter
0000:01AA 23			      inc     hl
0000:01AB 4E			      ld      c, (hl)				      ;	get invader y increment
0000:01AC 36 00			      ld      (hl), 0				      ;	next time will be zero
0000:01AE CD D9	01		      call    add_c_hl1_hl2_hl3			      ;	update bottom left invader x,y coords
0000:01B1 21 05	20		      ld      hl, 2005h				      ;	ptr invader animation frame no.
0000:01B4 7E			      ld      a, (hl)
0000:01B5 3C			      inc     a
0000:01B6 E6 01			      and     1					      ;	toggle animation frame 0/1
0000:01B8 77			      ld      (hl), a				      ;	save it
0000:01B9 AF			      xor     a					      ;	? gets over-written by callers?
0000:01BA 21 67	20		      ld      hl, 2067h				      ;	ptr curr player	data
0000:01BD 66			      ld      h, (hl)				      ;	get offset (==player)
0000:01BE C9			      ret     
0000:01BE	      ;	End of function	check_time_to_move_bl_invader
0000:01BE	      
0000:01BE	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:01BF 00			      .db    0 ;  
0000:01C0	      
0000:01C0	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01C0	      
0000:01C0	      
0000:01C0	      init_p1_invader_map:					      ;	CODE XREF: 0000:07E4p
0000:01C0 21 00	21								      ;	0000:0A36p ...
0000:01C0			      ld      hl, 2100h				      ;	player 1 invader map
0000:01C3	      
0000:01C3	      init_invader_map:						      ;	CODE XREF: init_p2_invader_map+3j
0000:01C3 06 37			      ld      b, 55				      ;	55 invaders
0000:01C5	      
0000:01C5	      fill_hl_with_1:						      ;	CODE XREF: init_p1_invader_map+9j
0000:01C5 36 01			      ld      (hl), 1
0000:01C7 23			      inc     hl
0000:01C8 05			      dec     b
0000:01C9 C2 C5	01		      jp      nz, fill_hl_with_1
0000:01CC C9			      ret     
0000:01CC	      ;	End of function	init_p1_invader_map
0000:01CC	      
0000:01CD	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:01CD	      
0000:01CD	      pop_and_ret:						      ;	CODE XREF: check_time_to_move_bl_invader+1j
0000:01CD E1			      pop     hl
0000:01CE C9			      ret     
0000:01CF	      
0000:01CF	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01CF	      
0000:01CF	      
0000:01CF	      draw_base_line:						      ;	CODE XREF: 0000:0804p
0000:01CF 3E 01									      ;	0000:0811p ...
0000:01CF			      ld      a, 1
0000:01D1 06 E0			      ld      b, 0E0h ;	'à'                           ; fill 224 bytes
0000:01D3 21 02	24		      ld      hl, 2402h				      ;	start of visible display
0000:01D6 C3 CC	14		      jp      fill_chr_hl_b_
0000:01D6	      ;	End of function	draw_base_line
0000:01D6	      
0000:01D9	      
0000:01D9	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01D9	      
0000:01D9	      
0000:01D9	      add_c_hl1_hl2_hl3:					      ;	CODE XREF: check_time_to_move_bl_invader+Dp
0000:01D9 23									      ;	0000:186Ep
0000:01D9			      inc     hl
0000:01DA 46			      ld      b, (hl)				      ;	b = [hl+1]
0000:01DB 23			      inc     hl
0000:01DC 79			      ld      a, c
0000:01DD 86			      add     a, (hl)
0000:01DE 77			      ld      (hl), a				      ;	[hl+2] = [hl+2]	+ c
0000:01DF 23			      inc     hl
0000:01E0 78			      ld      a, b
0000:01E1 86			      add     a, (hl)
0000:01E2 77			      ld      (hl), a				      ;	[hl+3] = [hl+3]	+ [hl+1]
0000:01E3 C9			      ret     
0000:01E3	      ;	End of function	add_c_hl1_hl2_hl3
0000:01E3	      
0000:01E4	      
0000:01E4	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01E4	      
0000:01E4	      
0000:01E4	      init_vars_192:						      ;	CODE XREF: 0000:0302p
0000:01E4 06 C0									      ;	0000:07F3p ...
0000:01E4			      ld      b, 0C0h ;	'À'                           ; 192 bytes to copy
0000:01E4	      ;	End of function	init_vars_192
0000:01E4	      
0000:01E6	      
0000:01E6	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01E6	      
0000:01E6	      
0000:01E6	      init_vars_b_:						      ;	CODE XREF: 0000:18D9p
0000:01E6 11 00	1B		      ld      de, 1B00h
0000:01E9 21 00	20		      ld      hl, 2000h				      ;	work ram
0000:01EC C3 32	1A		      jp      memcpy_hl_de_b_			      ;	init variables
0000:01EC	      ;	End of function	init_vars_b_
0000:01EC	      
0000:01EF	      
0000:01EF	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:01EF	      
0000:01EF	      
0000:01EF	      init_p1_shields:						      ;	CODE XREF: 0000:07CBp
0000:01EF 21 42	21								      ;	0000:0A33p ...
0000:01EF			      ld      hl, 2142h
0000:01F2 C3 F8	01		      jp      init_shields
0000:01F5	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:01F5	      
0000:01F5	      init_p2_shields:						      ;	CODE XREF: 0000:07CEp
0000:01F5 21 42	22								      ;	0000:0A2Ap
0000:01F5			      ld      hl, 2242h
0000:01F8	      
0000:01F8	      init_shields:						      ;	CODE XREF: init_p1_shields+3j
0000:01F8 0E 04			      ld      c, 4				      ;	4 shields
0000:01FA 11 20	1D		      ld      de, 1D20h				      ;	source data
0000:01FD	      
0000:01FD	      init_1_shield:						      ;	CODE XREF: init_p1_shields+16j
0000:01FD D5			      push    de
0000:01FE 06 2C			      ld      b, 44				      ;	copy 44	bytes
0000:0200 CD 32	1A		      call    memcpy_hl_de_b_
0000:0203 D1			      pop     de
0000:0204 0D			      dec     c
0000:0205 C2 FD	01		      jp      nz, init_1_shield			      ;	done? -	no, loop
0000:0208 C9			      ret     
0000:0208	      ;	End of function	init_p1_shields
0000:0208	      
0000:0209	      
0000:0209	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0209	      
0000:0209	      
0000:0209	      save_p1_shields:						      ;	CODE XREF: 0000:0332p
0000:0209 3E 01			      ld      a, 1				      ;	flag to	save shields
0000:020B C3 1B	02		      jp      draw_or_save_p1_shields
0000:020B	      ;	End of function	save_p1_shields
0000:020B	      
0000:020E	      
0000:020E	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:020E	      
0000:020E	      
0000:020E	      save_p2_shields:						      ;	CODE XREF: 0000:02F5p
0000:020E 3E 01			      ld      a, 1				      ;	flag to	save shields
0000:0210 C3 14	02		      jp      draw_or_save_p2_shields
0000:0210	      ;	End of function	save_p2_shields
0000:0210	      
0000:0213	      
0000:0213	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0213	      
0000:0213	      
0000:0213	      draw_p2_shields:						      ;	CODE XREF: 0000:080Ep
0000:0213 AF			      xor     a					      ;	flag to	restore	shields
0000:0214	      
0000:0214	      draw_or_save_p2_shields:					      ;	CODE XREF: save_p2_shields+2j
0000:0214 11 42	22		      ld      de, 2242h				      ;	ptr player 2 shields
0000:0217 C3 1E	02		      jp      draw_or_save_shields
0000:0217	      ;	End of function	draw_p2_shields
0000:0217	      
0000:021A	      
0000:021A	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:021A	      
0000:021A	      
0000:021A	      draw_p1_shields:						      ;	CODE XREF: 0000:0872p
0000:021A AF									      ;	0000:0B66p
0000:021A			      xor     a					      ;	flag to	restore	shields
0000:021B	      
0000:021B	      draw_or_save_p1_shields:					      ;	CODE XREF: save_p1_shields+2j
0000:021B 11 42	21		      ld      de, 2142h				      ;	ptr player 1 shields
0000:021E	      
0000:021E	      draw_or_save_shields:					      ;	CODE XREF: draw_p2_shields+4j
0000:021E 32 81	20		      ld      (draw_or_restore_shields_flag), a	      ;	save flag
0000:0221 01 02	16		      ld      bc, 1602h				      ;	22(b)x2(c)=44 bytes per	shield
0000:0224 21 06	28		      ld      hl, 2806h				      ;	screen loc of 1st shields
0000:0227 3E 04			      ld      a, 4				      ;	4 shields
0000:0229	      
0000:0229	      start_shield:						      ;	CODE XREF: draw_p1_shields+25j
0000:0229 F5			      push    af
0000:022A C5			      push    bc
0000:022B 3A 81	20		      ld      a, (draw_or_restore_shields_flag)
0000:022E A7			      and     a					      ;	drawing?
0000:022F C2 42	02		      jp      nz, loc_0_242			      ;	no, skip to save routine
0000:0232 CD 69	1A		      call    restore_1_shield
0000:0235	      
0000:0235	      next_shield:						      ;	CODE XREF: draw_p1_shields+2Bj
0000:0235 C1			      pop     bc
0000:0236 F1			      pop     af
0000:0237 3D			      dec     a					      ;	next shield
0000:0238 C8			      ret     z					      ;	return if done
0000:0239 D5			      push    de
0000:023A 11 E0	02		      ld      de, 736				      ;	offset on screen to next shield
0000:023D 19			      add     hl, de				      ;	screen loc of next shield
0000:023E D1			      pop     de
0000:023F C3 29	02		      jp      start_shield			      ;	loop
0000:0242	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0242	      
0000:0242	      loc_0_242:						      ;	CODE XREF: draw_p1_shields+15j
0000:0242 CD 7C	14		      call    save_1_shield
0000:0245 C3 35	02		      jp      next_shield
0000:0245	      ;	End of function	draw_p1_shields
0000:0245	      
0000:0248	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0248	      
0000:0248	      dispatch_vector_table@$2010:				      ;	CODE XREF: sub_0_38+43p
0000:0248 21 10	20		      ld      hl, 2010h				      ;	ptr jump vector	table
0000:024B	      
0000:024B	      dispatch_jump_vector:					      ;	CODE XREF: 0000:00A8p
0000:024B 7E									      ;	0000:0274j ...
0000:024B			      ld      a, (hl)
0000:024C FE FF			      cp      0FFh				      ;	execute	this vector?
0000:024E C8			      ret     z					      ;	no, exit
0000:024F FE FE			      cp      0FEh ; 'ş'                              ; execute next vector?
0000:0251 CA 81	02		      jp      z, get_ptr_next_vector		      ;	yes, handle
0000:0254 23			      inc     hl				      ;	$2011
0000:0255 46			      ld      b, (hl)
0000:0256 4F			      ld      c, a
0000:0257 B0			      or      b
0000:0258 79			      ld      a, c
0000:0259 C2 77	02		      jp      nz, loc_0_277
0000:025C 23			      inc     hl				      ;	$2012
0000:025D 7E			      ld      a, (hl)
0000:025E A7			      and     a
0000:025F C2 88	02		      jp      nz, loc_0_288
0000:0262 23			      inc     hl				      ;	$2013
0000:0263 5E			      ld      e, (hl)
0000:0264 23			      inc     hl
0000:0265 56			      ld      d, (hl)				      ;	de = [$2013] (jump vector - see	below)
0000:0265									      ;	hl = $2014
0000:0266 E5			      push    hl				      ;	stack: $2014
0000:0267 EB			      ex      de, hl				      ;	de = $2014, hl = [$2013]
0000:0268 E5			      push    hl				      ;	stack: [$2013] $2014
0000:0269 21 6F	02		      ld      hl, 26Fh
0000:026C E3			      ex      (sp), hl				      ;	stack: $26F $2014
0000:026D D5			      push    de				      ;	stack: $2014 $26F $2014
0000:026E E9			      jp      (hl)				      ;	jp [$2013]
0000:026F	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:026F E1			      pop     hl				      ;	$2014
0000:0270 11 0C	00		      ld      de, 0Ch
0000:0273 19			      add     hl, de				      ;	next jump vector
0000:0274 C3 4B	02		      jp      dispatch_jump_vector		      ;	loop
0000:0277	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0277	      
0000:0277	      loc_0_277:						      ;	CODE XREF: 0000:0259j
0000:0277 05			      dec     b
0000:0278 04			      inc     b
0000:0279 C2 7D	02		      jp      nz, loc_0_27D
0000:027C 3D			      dec     a
0000:027D	      
0000:027D	      loc_0_27D:						      ;	CODE XREF: 0000:0279j
0000:027D 05			      dec     b
0000:027E 70			      ld      (hl), b
0000:027F 2B			      dec     hl
0000:0280 77			      ld      (hl), a
0000:0281	      
0000:0281	      get_ptr_next_vector:					      ;	CODE XREF: 0000:0251j
0000:0281 11 10	00								      ;	0000:028Bj
0000:0281			      ld      de, 10h
0000:0284 19			      add     hl, de
0000:0285 C3 4B	02		      jp      dispatch_jump_vector
0000:0288	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0288	      
0000:0288	      loc_0_288:						      ;	CODE XREF: 0000:025Fj
0000:0288 35			      dec     (hl)
0000:0289 2B			      dec     hl
0000:028A 2B			      dec     hl
0000:028B C3 81	02		      jp      get_ptr_next_vector
0000:028E	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:028E E1			      pop     hl				      ;	jump vector #1
0000:028F 23			      inc     hl
0000:0290 7E			      ld      a, (hl)				      ;	get explosion #
0000:0291 FE FF			      cp      0FFh
0000:0293 CA 3B	03		      jp      z, loc_0_33B
0000:0296 23			      inc     hl
0000:0297 35			      dec     (hl)
0000:0298 C0			      ret     nz
0000:0299 47			      ld      b, a				      ;	save explosion #
0000:029A AF			      xor     a
0000:029B 32 68	20		      ld      (byte_0_2068), a
0000:029E 32 69	20		      ld      (byte_0_2069), a
0000:02A1 3E 30			      ld      a, 48
0000:02A3 32 6A	20		      ld      (byte_0_206A), a
0000:02A6 78			      ld      a, b				      ;	restore	explosion #
0000:02A7 36 05			      ld      (hl), 5
0000:02A9 23			      inc     hl
0000:02AA 35			      dec     (hl)				      ;	finished explosion?
0000:02AB C2 9B	03		      jp      nz, handle_ship_explosion		      ;	no, handle it
0000:02AE 2A 1A	20		      ld      hl, (player_ship_coord)
0000:02B1 06 10			      ld      b, 16				      ;	bitmap length
0000:02B3 CD 24	14		      call    clear_shifted_bitmap		      ;	wipe player ship
0000:02B6 21 10	20		      ld      hl, 2010h
0000:02B9 11 10	1B		      ld      de, 1B10h
0000:02BC 06 10			      ld      b, 16
0000:02BE CD 32	1A		      call    memcpy_hl_de_b_			      ;	re-init	vars (16 bytes)
0000:02C1 06 00			      ld      b, 0				      ;	stop all port 3	sounds
0000:02C3 CD DC	19		      call    stop_port3_sound
0000:02C6 3A 6D	20		      ld      a, (invaded)			      ;	ptr invaded flag
0000:02C9 A7			      and     a					      ;	invaded?
0000:02CA C0			      ret     nz				      ;	yes, let other code handle this
0000:02CB 3A EF	20		      ld      a, (game_in_progress)
0000:02CE A7			      and     a					      ;	game in	progress?
0000:02CF C8			      ret     z					      ;	no, exit
0000:02D0 31 00	24		      ld      sp, 2400h
0000:02D3 FB			      ei					      ;	reset context
0000:02D4 CD D7	19		      call    disable_vblank_code
0000:02D7 CD 2E	09		      call    get_curr_player_num_ships
0000:02DA A7			      and     a					      ;	any ships left?
0000:02DB CA 6D	16		      jp      z, prt_0_ships_left		      ;	no, exit
0000:02DE CD E7	18		      call    get_ptr_num_ships_other_player
0000:02E1 7E			      ld      a, (hl)
0000:02E2 A7			      and     a					      ;	any ships left?
0000:02E3 CA 2C	03		      jp      z, show_ships_and_ret		      ;	no, exit
0000:02E6 3A CE	20		      ld      a, (two_p_game)
0000:02E9 A7			      and     a					      ;	only 1 player?
0000:02EA CA 2C	03		      jp      z, show_ships_and_ret		      ;	yes, exit
0000:02ED	      
0000:02ED	      save_player_state:					      ;	CODE XREF: 0000:16C6j
0000:02ED 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:02F0 F5			      push    af				      ;	player data ($21=1,$22=2)
0000:02F1 0F			      rrca    
0000:02F2 DA 32	03		      jp      c, c_save_p1_shields		      ;	save p1	shields
0000:02F5 CD 0E	02		      call    save_p2_shields			      ;	save p2	shields
0000:02F8	      
0000:02F8	      shields_saved:						      ;	CODE XREF: 0000:0335j
0000:02F8 CD 78	08		      call    get_curr_and_player_invader_coor
0000:02FB 73			      ld      (hl), e				      ;	save bottom left invader y coord
0000:02FC 23			      inc     hl
0000:02FD 72			      ld      (hl), d				      ;	save bottom left invader x coord
0000:02FE 2B			      dec     hl
0000:02FF 2B			      dec     hl
0000:0300 70			      ld      (hl), b				      ;	save invader x increment
0000:0301 00			      nop     
0000:0302 CD E4	01		      call    init_vars_192
0000:0305 F1			      pop     af				      ;	ptr player data
0000:0306 0F			      rrca    
0000:0307 3E 21			      ld      a, 21h ; '!'                            ; set player = 1
0000:0309 06 00			      ld      b, 0
0000:030B D2 12	03		      jp      nc, loc_0_312			      ;	was p2,	skip
0000:030E 06 20			      ld      b, 20h ; ' '                            ; flip screen
0000:0310 3E 22			      ld      a, 22h ; '"'                            ; set player = 2
0000:0312	      
0000:0312	      loc_0_312:						      ;	CODE XREF: 0000:030Bj
0000:0312 32 67	20		      ld      (ptr_curr_player_data), a		      ;	set ptr	to player data ($21=1,$22=2)
0000:0315 CD B6	0A		      call    delay_0x80
0000:0318 AF			      xor     a
0000:0319 32 11	20		      ld      (byte_0_2011), a
0000:031C 78			      ld      a, b				      ;	flip screen bit
0000:031D D3 05			      out     (5), a				      ;	set screen flip
0000:031F 3C			      inc     a					      ;	fleet #1 sound?
0000:0320 32 98	20		      ld      (port_5_sound_shadow_reg), a	      ;	port5 sound register shadow
0000:0323 CD D6	09		      call    clear_visible_display
0000:0326 CD 7F	1A		      call    show_ships_left
0000:0329 C3 F9	07		      jp      start_player_new_ship
0000:032C	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:032C	      
0000:032C	      show_ships_and_ret:					      ;	CODE XREF: 0000:02E3j
0000:032C CD 7F	1A								      ;	0000:02EAj
0000:032C			      call    show_ships_left
0000:032F C3 17	08		      jp      loc_0_817
0000:0332	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0332	      
0000:0332	      c_save_p1_shields:					      ;	CODE XREF: 0000:02F2j
0000:0332 CD 09	02		      call    save_p1_shields
0000:0335 C3 F8	02		      jp      shields_saved
0000:0335	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0338 00			      .db    0 ;  
0000:0339 00			      .db    0 ;  
0000:033A 00			      .db    0 ;  
0000:033B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:033B	      
0000:033B	      loc_0_33B:						      ;	CODE XREF: 0000:0293j
0000:033B 21 68	20		      ld      hl, 2068h
0000:033E 36 01			      ld      (hl), 1
0000:0340 23			      inc     hl
0000:0341 7E			      ld      a, (hl)
0000:0342 A7			      and     a
0000:0343 C3 B0	03		      jp      loc_0_3B0
0000:0346	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0346	      
0000:0346	      loc_0_346:						      ;	CODE XREF: 0000:03B8j
0000:0346 00			      nop     
0000:0347 2B			      dec     hl
0000:0348 36 01			      ld      (hl), 1
0000:034A	      
0000:034A	      handle_ship:						      ;	CODE XREF: 0000:03B0j
0000:034A 3A 1B	20								      ;	0000:03B5j
0000:034A			      ld      a, (player_ship_coord_lsb_)
0000:034D 47			      ld      b, a
0000:034E 3A EF	20		      ld      a, (game_in_progress)
0000:0351 A7			      and     a					      ;	is someone playing?
0000:0352 C2 63	03		      jp      nz, handle_joystick		      ;	yes - use real controls
0000:0355 3A 1D	20		      ld      a, (demo_joystick_input)		      ;	read simulated controller inputs
0000:0358 0F			      rrca					      ;	move right?
0000:0359 DA 81	03		      jp      c, handle_joystick_right		      ;	yes, handle
0000:035C 0F			      rrca					      ;	move left?
0000:035D DA 8E	03		      jp      c, handle_joystick_left		      ;	yes, handle
0000:0360 C3 6F	03		      jp      ship_coord_updated
0000:0363	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0363	      
0000:0363	      handle_joystick:						      ;	CODE XREF: 0000:0352j
0000:0363 CD C0	17		      call    read_player_controller
0000:0366 07			      rlca    
0000:0367 07			      rlca    
0000:0368 DA 81	03		      jp      c, handle_joystick_right		      ;	joystick right
0000:036B 07			      rlca    
0000:036C DA 8E	03		      jp      c, handle_joystick_left		      ;	joystick left
0000:036F	      
0000:036F	      ship_coord_updated:					      ;	CODE XREF: 0000:0360j
0000:036F 21 18	20								      ;	0000:0384j ...
0000:036F			      ld      hl, 2018h				      ;	player ship info
0000:0372 CD 3B	1A		      call    extract_DE_HL_B
0000:0375 CD 47	1A		      call    calc_vram_addr_from_pixel_offset
0000:0378 CD 39	14		      call    draw_bitmap_hl_de_b_		      ;	draw player ship
0000:037B 3E 00			      ld      a, 0
0000:037D 32 12	20		      ld      (unk_0_2012), a
0000:0380 C9			      ret     
0000:0381	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0381	      
0000:0381	      handle_joystick_right:					      ;	CODE XREF: 0000:0359j
0000:0381 78									      ;	0000:0368j
0000:0381			      ld      a, b				      ;	player ship coord
0000:0382 FE D9			      cp      217				      ;	extreme	right of screen?
0000:0384 CA 6F	03		      jp      z, ship_coord_updated		      ;	yes, exit
0000:0387 3C			      inc     a					      ;	increment coord
0000:0388 32 1B	20		      ld      (player_ship_coord_lsb_),	a	      ;	save
0000:038B C3 6F	03		      jp      ship_coord_updated		      ;	done
0000:038E	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:038E	      
0000:038E	      handle_joystick_left:					      ;	CODE XREF: 0000:035Dj
0000:038E 78									      ;	0000:036Cj
0000:038E			      ld      a, b				      ;	player ship coord
0000:038F FE 30			      cp      30h ; '0'                               ; extreme left?
0000:0391 CA 6F	03		      jp      z, ship_coord_updated		      ;	yes, exit
0000:0394 3D			      dec     a					      ;	decrement coord
0000:0395 32 1B	20		      ld      (player_ship_coord_lsb_),	a	      ;	save
0000:0398 C3 6F	03		      jp      ship_coord_updated		      ;	done
0000:039B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:039B	      
0000:039B	      handle_ship_explosion:					      ;	CODE XREF: 0000:02ABj
0000:039B 3C			      inc     a					      ;	next explosion #
0000:039C E6 01			      and     1					      ;	only 2 of them
0000:039E 32 15	20		      ld      (gameplay_ticker), a		      ;	get explosion #
0000:03A1 07			      rlca    
0000:03A2 07			      rlca    
0000:03A3 07			      rlca    
0000:03A4 07			      rlca					      ;	x16
0000:03A5 21 70	1C		      ld      hl, 1C70h				      ;	ship explosion #1
0000:03A8 85			      add     a, l
0000:03A9 6F			      ld      l, a				      ;	hl = ptr explosion bitmap
0000:03AA 22 18	20		      ld      (player_ship_info), hl		      ;	store as player	ship bitmap
0000:03AD C3 6F	03		      jp      ship_coord_updated
0000:03B0	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:03B0	      
0000:03B0	      loc_0_3B0:						      ;	CODE XREF: 0000:0343j
0000:03B0 C2 4A	03		      jp      nz, handle_ship
0000:03B3 23			      inc     hl
0000:03B4 35			      dec     (hl)
0000:03B5 C2 4A	03		      jp      nz, handle_ship
0000:03B8 C3 46	03		      jp      loc_0_346
0000:03BB	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:03BB 11 2A	20		      ld      de, 202Ah				      ;	called by jump vector #2
0000:03BB									      ;	player shot x coord
0000:03BE CD 06	1A		      call    sub_0_1A06
0000:03C1 E1			      pop     hl
0000:03C2 D0			      ret     nc
0000:03C3 23			      inc     hl
0000:03C4 7E			      ld      a, (hl)				      ;	get fire progress state
0000:03C5 A7			      and     a					      ;	firing?
0000:03C6 C8			      ret     z					      ;	no, exit
0000:03C7 FE 01			      cp      1					      ;	just fired?
0000:03C9 CA FA	03		      jp      z, start_firing_sequence		      ;	yes, init firing sequence
0000:03CC FE 02			      cp      2					      ;	bullet in flight?
0000:03CE CA 0A	04		      jp      z, update_player_shot		      ;	yes, handle
0000:03D1 23			      inc     hl
0000:03D2 FE 03			      cp      3					      ;	hit an invader or UFO?
0000:03D4 C2 2A	04		      jp      nz, loc_0_42A			      ;	yes, skip
0000:03D7 35			      dec     (hl)				      ;	$2026
0000:03D8 CA 36	04		      jp      z, loc_0_436
0000:03DB 7E			      ld      a, (hl)				      ;	$2026
0000:03DC FE 0F			      cp      15
0000:03DE C0			      ret     nz
0000:03DF E5			      push    hl
0000:03E0 CD 30	04		      call    get_p_bullet_expl_params
0000:03E3 CD 52	14		      call    wipe_shifted_bitmap_pixels	      ;	?? only	if hit non-invader
0000:03E6 E1			      pop     hl
0000:03E7 23			      inc     hl
0000:03E8 34			      inc     (hl)
0000:03E9 23			      inc     hl
0000:03EA 23			      inc     hl
0000:03EB 35			      dec     (hl)				      ;	player shot y coord???
0000:03EC 35			      dec     (hl)				      ;	player shot y coord???
0000:03ED 23			      inc     hl
0000:03EE 35			      dec     (hl)
0000:03EF 35			      dec     (hl)
0000:03F0 35			      dec     (hl)				      ;	? player shot x	coord???
0000:03F1 23			      inc     hl
0000:03F2 36 08			      ld      (hl), 8
0000:03F4 CD 30	04		      call    get_p_bullet_expl_params		      ;	here if	hit non-invader	or just	as shooting
0000:03F7 C3 00	14		      jp      OR_shifted_bitmap_to_vram
0000:03FA	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:03FA	      
0000:03FA	      start_firing_sequence:					      ;	CODE XREF: 0000:03C9j
0000:03FA 3C			      inc     a					      ;	update shot progress (=2)
0000:03FB 77			      ld      (hl), a				      ;	save
0000:03FC 3A 1B	20		      ld      a, (player_ship_coord_lsb_)	      ;	get ship coord
0000:03FF C6 08			      add     a, 8				      ;	calc centre coord
0000:0401 32 2A	20		      ld      (player_shot_x_coord), a		      ;	save bullet x coord
0000:0404 CD 30	04		      call    get_p_bullet_expl_params
0000:0407 C3 00	14		      jp      OR_shifted_bitmap_to_vram
0000:040A	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:040A	      
0000:040A	      update_player_shot:					      ;	CODE XREF: 0000:03CEj
0000:040A CD 30	04		      call    get_p_bullet_expl_params
0000:040D D5			      push    de
0000:040E E5			      push    hl
0000:040F C5			      push    bc
0000:0410 CD 52	14		      call    wipe_shifted_bitmap_pixels	      ;	wipe player bullet
0000:0413 C1			      pop     bc
0000:0414 E1			      pop     hl
0000:0415 D1			      pop     de
0000:0416 3A 2C	20		      ld      a, (player_shot_y_inc)		      ;	bullet movement	y offset
0000:0419 85			      add     a, l				      ;	calc new screen	bullet loc
0000:041A 6F			      ld      l, a
0000:041B 32 29	20		      ld      (player_shot_y_coord), a		      ;	save new bullet	coord
0000:041E CD 91	14		      call    draw_and_detect_collision		      ;	draw player bullet and see if anything was hit
0000:0421 3A 61	20		      ld      a, (something_hit)
0000:0424 A7			      and     a					      ;	was something hit?
0000:0425 C8			      ret     z					      ;	no, exit
0000:0426 32 02	20		      ld      (player_shot_something), a	      ;	flag player having shot	something (anything)
0000:0429 C9			      ret     
0000:042A	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:042A	      
0000:042A	      loc_0_42A:						      ;	CODE XREF: 0000:03D4j
0000:042A FE 05			      cp      5					      ;	finished firing?
0000:042C C8			      ret     z					      ;	yes, exit
0000:042D C3 36	04		      jp      loc_0_436				      ;	here if	hit an invader
0000:0430	      
0000:0430	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0430	      
0000:0430	      
0000:0430	      get_p_bullet_expl_params:					      ;	CODE XREF: 0000:03E0p
0000:0430 21 27	20								      ;	0000:03F4p ...
0000:0430			      ld      hl, 2027h				      ;	ptr player bullet/explosion
0000:0433 C3 3B	1A		      jp      extract_DE_HL_B			      ;	get graphics object params
0000:0433	      ;	End of function	get_p_bullet_expl_params
0000:0433	      
0000:0436	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0436	      
0000:0436	      loc_0_436:						      ;	CODE XREF: 0000:03D8j
0000:0436 CD 30	04								      ;	0000:042Dj
0000:0436			      call    get_p_bullet_expl_params		      ;	extract	bullet/explosion object	params
0000:0439 CD 52	14		      call    wipe_shifted_bitmap_pixels	      ;	clear bullet/explosion
0000:043C 21 25	20		      ld      hl, 2025h				      ;	fire progress state
0000:043F 11 25	1B		      ld      de, 1B25h				      ;	initialised values
0000:0442 06 07			      ld      b, 7				      ;	(re)init player	bullet params
0000:0444 CD 32	1A		      call    memcpy_hl_de_b_			      ;	init 7 bytes
0000:0447 2A 8D	20		      ld      hl, (???_counter)			      ;	shot counter
0000:044A 2C			      inc     l					      ;	inc
0000:044B 7D			      ld      a, l
0000:044C FE 63			      cp      99				      ;	99 shots?
0000:044E DA 53	04		      jp      c, loc_0_453			      ;	no, skip
0000:0451 2E 54			      ld      l, 84				      ;	start again from 84
0000:0453	      
0000:0453	      loc_0_453:						      ;	CODE XREF: 0000:044Ej
0000:0453 22 8D	20		      ld      (???_counter), hl			      ;	save shot counter
0000:0456 2A 8F	20		      ld      hl, (unk_0_208F)			      ;	get address whose b0 determines	ufo side
0000:0459 2C			      inc     l					      ;	inc for	next time
0000:045A 22 8F	20		      ld      (unk_0_208F), hl			      ;	save
0000:045D 3A 84	20		      ld      a, (ufo_visible)			      ;	is the ufo already visible?
0000:0460 A7			      and     a
0000:0461 C0			      ret     nz				      ;	yes, exit
0000:0462 7E			      ld      a, (hl)				      ;	get byte from ROM code,	whose b0
0000:0462									      ;	determines ufo from left/right
0000:0463 E6 01			      and     1					      ;	from left or right?
0000:0465 01 29	02		      ld      bc, 229h				      ;	start at left edge, x inc = 2
0000:0468 C2 6E	04		      jp      nz, init_ufo_coords		      ;	left, skip
0000:046B 01 E0	FE		      ld      bc, 0FEE0h			      ;	start at right edge, x inc = -2
0000:046E	      
0000:046E	      init_ufo_coords:						      ;	CODE XREF: 0000:0468j
0000:046E 21 8A	20		      ld      hl, 208Ah				      ;	ptr ufo	x coord
0000:0471 71			      ld      (hl), c				      ;	set ufo	x coord
0000:0472 23			      inc     hl
0000:0473 23			      inc     hl				      ;	ptr ufo	x inc
0000:0474 70			      ld      (hl), b				      ;	set ufo	x inc
0000:0475 C9			      ret     
0000:0476	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0476 E1			      pop     hl				      ;	called by jump vector #3
0000:0477 3A 32	1B		      ld      a, (unk_0_1B32)
0000:047A 32 32	20		      ld      (byte_0_2032), a			      ;	re-init	?
0000:047D 2A 38	20		      ld      hl, (word_0_2038)
0000:0480 7D			      ld      a, l
0000:0481 B4			      or      h
0000:0482 C2 8A	04		      jp      nz, loc_0_48A
0000:0485 2B			      dec     hl
0000:0486 22 38	20		      ld      (word_0_2038), hl
0000:0489 C9			      ret     
0000:048A	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:048A	      
0000:048A	      loc_0_48A:						      ;	CODE XREF: 0000:0482j
0000:048A 11 35	20		      ld      de, 2035h				      ;	ptr alien bomb 1 data
0000:048D 3E F9			      ld      a, 0F9h ;	'ù'                           ; lsb of last bomb bitmap in table
0000:048F CD 50	05		      call    copy_alien_bomb_data_2_curr	      ;	copy to	current
0000:0492 3A 46	20		      ld      a, (byte_0_2046)			      ;	byte 1 of bomb 2
0000:0495 32 70	20		      ld      (byte_0_2070), a
0000:0498 3A 56	20		      ld      a, (byte_0_2056)			      ;	byte 1 of bomb 3
0000:049B 32 71	20		      ld      (byte_0_2071), a
0000:049E CD 63	05		      call    handle_alien_bombing
0000:04A1 3A 78	20		      ld      a, (byte_0_2078)			      ;	alien bomb explosion timer
0000:04A4 A7			      and     a
0000:04A5 21 35	20		      ld      hl, 2035h				      ;	alien bomb 1 data
0000:04A8 C2 5B	05		      jp      nz, save_curr_alien_bomb_data
0000:04AB 11 30	1B		      ld      de, 1B30h
0000:04AE 21 30	20		      ld      hl, 2030h
0000:04B1 06 10			      ld      b, 10h				      ;	re-init	data
0000:04B3 C3 32	1A		      jp      memcpy_hl_de_b_
0000:04B6	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:04B6 E1			      pop     hl				      ;	called by jump vector #4
0000:04B6									      ;	update alien bomb #2
0000:04B7 3A 6E	20		      ld      a, (byte_0_206E)
0000:04BA A7			      and     a
0000:04BB C0			      ret     nz
0000:04BC 3A 80	20		      ld      a, (byte_0_2080)
0000:04BF FE 01			      cp      1
0000:04C1 C0			      ret     nz
0000:04C2 11 45	20		      ld      de, 2045h				      ;	ptr alien bomb 2 data
0000:04C5 3E ED			      ld      a, 0EDh ;	'í'                           ; lsb of last bomb bitmap in table
0000:04C7 CD 50	05		      call    copy_alien_bomb_data_2_curr	      ;	copy to	current
0000:04CA 3A 36	20		      ld      a, (byte_0_2036)			      ;	byte 1 of bomb 1
0000:04CD 32 70	20		      ld      (byte_0_2070), a
0000:04D0 3A 56	20		      ld      a, (byte_0_2056)			      ;	byte 1 of bomb 3
0000:04D3 32 71	20		      ld      (byte_0_2071), a
0000:04D6 CD 63	05		      call    handle_alien_bombing
0000:04D9 3A 76	20		      ld      a, (ptr_bomb_random_table)
0000:04DC FE 10			      cp      16
0000:04DE DA E7	04		      jp      c, loc_0_4E7
0000:04E1 3A 48	1B		      ld      a, (unk_0_1B48)			      ;	(0) re-init ptr	bomb random table
0000:04E4 32 76	20		      ld      (ptr_bomb_random_table), a
0000:04E7	      
0000:04E7	      loc_0_4E7:						      ;	CODE XREF: 0000:04DEj
0000:04E7 3A 78	20		      ld      a, (byte_0_2078)			      ;	alien bomb explosion timer
0000:04EA A7			      and     a
0000:04EB 21 45	20		      ld      hl, 2045h				      ;	alien bomb 2 data
0000:04EE C2 5B	05		      jp      nz, save_curr_alien_bomb_data	      ;	save current here
0000:04F1 11 40	1B		      ld      de, 1B40h
0000:04F4 21 40	20		      ld      hl, 2040h
0000:04F7 06 10			      ld      b, 10h				      ;	re-init	16 bytes
0000:04F9 CD 32	1A		      call    memcpy_hl_de_b_
0000:04FC 3A 82	20		      ld      a, (num_invaders_left)
0000:04FF 3D			      dec     a					      ;	any invaders left?
0000:0500 C2 08	05		      jp      nz, loc_0_508			      ;	yes, skip
0000:0503 3E 01			      ld      a, 1
0000:0505 32 6E	20		      ld      (byte_0_206E), a
0000:0508	      
0000:0508	      loc_0_508:						      ;	CODE XREF: 0000:0500j
0000:0508 2A 76	20		      ld      hl, (ptr_bomb_random_table)
0000:050B C3 7E	06		      jp      loc_0_67E
0000:050E	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:050E E1			      pop     hl
0000:050F	      
0000:050F	      handle_alien_bomb_3:					      ;	CODE XREF: 0000:068Ej
0000:050F 11 55	20								      ;	0000:0695j ...
0000:050F			      ld      de, 2055h				      ;	ptr alien bomb 3 data
0000:0512 3E DB			      ld      a, 0DBh ;	'Û'                           ; lsb of last bomb bitmap in table
0000:0514 CD 50	05		      call    copy_alien_bomb_data_2_curr	      ;	copy to	current
0000:0517 3A 46	20		      ld      a, (byte_0_2046)			      ;	byte 1 of bomb 2
0000:051A 32 70	20		      ld      (byte_0_2070), a
0000:051D 3A 36	20		      ld      a, (byte_0_2036)			      ;	byte 1 of bomb 1
0000:0520 32 71	20		      ld      (byte_0_2071), a
0000:0523 CD 63	05		      call    handle_alien_bombing
0000:0526 3A 76	20		      ld      a, (ptr_bomb_random_table)	      ;	lsb of random bomb table ptr
0000:0529 FE 15			      cp      15h
0000:052B DA 34	05		      jp      c, loc_0_534
0000:052E 3A 58	1B		      ld      a, (unk_0_1B58)			      ;	$06 - re-init bomb random table	ptr
0000:0531 32 76	20		      ld      (ptr_bomb_random_table), a
0000:0534	      
0000:0534	      loc_0_534:						      ;	CODE XREF: 0000:052Bj
0000:0534 3A 78	20		      ld      a, (byte_0_2078)			      ;	alien bomb explosion timer
0000:0537 A7			      and     a
0000:0538 21 55	20		      ld      hl, 2055h				      ;	ptr alien bomb 3 data
0000:053B C2 5B	05		      jp      nz, save_curr_alien_bomb_data	      ;	save curr here
0000:053E 11 50	1B		      ld      de, 1B50h
0000:0541 21 50	20		      ld      hl, 2050h
0000:0544 06 10			      ld      b, 10h				      ;	re-init	16 bytes
0000:0546 CD 32	1A		      call    memcpy_hl_de_b_
0000:0549 2A 76	20		      ld      hl, (ptr_bomb_random_table)
0000:054C 22 58	20		      ld      (word_0_2058), hl
0000:054F C9			      ret     
0000:0550	      
0000:0550	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0550	      
0000:0550	      
0000:0550	      copy_alien_bomb_data_2_curr:				      ;	CODE XREF: 0000:048Fp
0000:0550 32 7F	20								      ;	0000:04C7p ...
0000:0550			      ld      (byte_0_207F), a			      ;	save lsb of last bomb bitmap in	table
0000:0553 21 73	20		      ld      hl, 2073h				      ;	ptr curr alien bomb data block
0000:0556 06 0B			      ld      b, 0Bh				      ;	11 bytes
0000:0558 C3 32	1A		      jp      memcpy_hl_de_b_			      ;	copy alien bomb	data to	current
0000:0558	      ;	End of function	copy_alien_bomb_data_2_curr
0000:0558	      
0000:055B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:055B	      
0000:055B	      save_curr_alien_bomb_data:				      ;	CODE XREF: 0000:04A8j
0000:055B 11 73	20								      ;	0000:04EEj ...
0000:055B			      ld      de, 2073h				      ;	ptr curr alien bomb data
0000:055E 06 0B			      ld      b, 0Bh				      ;	11 bytes
0000:0560 C3 32	1A		      jp      memcpy_hl_de_b_			      ;	save curr bomb data
0000:0563	      
0000:0563	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0563	      
0000:0563	      
0000:0563	      handle_alien_bombing:					      ;	CODE XREF: 0000:049Ep
0000:0563 21 73	20								      ;	0000:04D6p ...
0000:0563			      ld      hl, 2073h				      ;	ptr curr alien bomb data
0000:0566 7E			      ld      a, (hl)
0000:0567 E6 80			      and     80h ; '€'                               ; needs updating?
0000:0569 C2 C1	05		      jp      nz, update_alien_bomb		      ;	yes, skip
0000:056C 3A C1	20		      ld      a, (animation_type)
0000:056F FE 04			      cp      4					      ;	bomb-c animation?
0000:0571 3A 69	20		      ld      a, (byte_0_2069)			      ;	??? some sort of randomizer?
0000:0574 CA B7	05		      jp      z, flag_bomb_needs_update		      ;	yes, handle
0000:0577 A7			      and     a
0000:0578 C8			      ret     z
0000:0579 23			      inc     hl				      ;	$2074
0000:057A 36 00			      ld      (hl), 0				      ;	== $2074 for other bomb	#1
0000:057C 3A 70	20		      ld      a, (byte_0_2070)
0000:057F A7			      and     a
0000:0580 CA 89	05		      jp      z, handle_start_alien_bomb
0000:0583 47			      ld      b, a
0000:0584 3A CF	20		      ld      a, (bomb_frequency)
0000:0587 B8			      cp      b					      ;	time to	drop another bomb?
0000:0588 D0			      ret     nc				      ;	no, exit
0000:0589	      
0000:0589	      handle_start_alien_bomb:					      ;	CODE XREF: handle_alien_bombing+1Dj
0000:0589 3A 71	20		      ld      a, (byte_0_2071)			      ;	== $2074 of other bomb #2
0000:058C A7			      and     a
0000:058D CA 96	05		      jp      z, loc_0_596
0000:0590 47			      ld      b, a
0000:0591 3A CF	20		      ld      a, (bomb_frequency)
0000:0594 B8			      cp      b					      ;	time to	drop another bomb?
0000:0595 D0			      ret     nc				      ;	no, exit
0000:0596	      
0000:0596	      loc_0_596:						      ;	CODE XREF: handle_alien_bombing+2Aj
0000:0596 23			      inc     hl				      ;	$2075
0000:0597 7E			      ld      a, (hl)
0000:0598 A7			      and     a
0000:0599 CA 1B	06		      jp      z, decide_invader_to_bomb
0000:059C 2A 76	20		      ld      hl, (ptr_bomb_random_table)	      ;	ptr into random	table for bomb dropping
0000:059F 4E			      ld      c, (hl)				      ;	get invader column to drop bomb
0000:05A0 23			      inc     hl				      ;	next entry
0000:05A1 00			      nop     
0000:05A2 22 76	20		      ld      (ptr_bomb_random_table), hl	      ;	save it
0000:05A5	      
0000:05A5	      loc_0_5A5:						      ;	CODE XREF: handle_alien_bombing+C4j
0000:05A5 CD 2F	06								      ;	handle_alien_bombing+C9j
0000:05A5			      call    is_invader_left_in_column_c_	      ;	is there an invader left in this column?
0000:05A8 D0			      ret     nc				      ;	no, exit
0000:05A9 CD 7A	01		      call    get_alien_coords			      ;	l = index in invader map
0000:05AC 79			      ld      a, c				      ;	x coord
0000:05AD C6 07			      add     a, 7				      ;	adjust to middle of invader
0000:05AF 67			      ld      h, a
0000:05B0 7D			      ld      a, l				      ;	y coord
0000:05B1 D6 0A			      sub     10				      ;	bomb starts just below invader
0000:05B3 6F			      ld      l, a
0000:05B4 22 7B	20		      ld      (alien_bomb_screen_loc), hl	      ;	init alien bomb	screen loc
0000:05B7	      
0000:05B7	      flag_bomb_needs_update:					      ;	CODE XREF: handle_alien_bombing+11j
0000:05B7 21 73	20		      ld      hl, 2073h				      ;	ptr curr alien bomb info
0000:05BA 7E			      ld      a, (hl)
0000:05BB F6 80			      or      80h ; '€'                               ; flag bomb requires updating
0000:05BD 77			      ld      (hl), a
0000:05BE 23			      inc     hl
0000:05BF 34			      inc     (hl)				      ;	??? bomb life counter?
0000:05C0 C9			      ret     
0000:05C1	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:05C1	      
0000:05C1	      update_alien_bomb:					      ;	CODE XREF: handle_alien_bombing+6j
0000:05C1 11 7C	20		      ld      de, 207Ch				      ;	msb of alien bomb vram addr
0000:05C4 CD 06	1A		      call    sub_0_1A06
0000:05C7 D0			      ret     nc
0000:05C8 23			      inc     hl				      ;	$2073 -	ptr curr alien bomb data
0000:05C9 7E			      ld      a, (hl)
0000:05CA E6 01			      and     1					      ;	aliens already hit something?
0000:05CC C2 44	06		      jp      nz, explode_alien_bomb		      ;	yes, skip
0000:05CF 23			      inc     hl				      ;	$2074
0000:05D0 34			      inc     (hl)				      ;	??? bomb life counter?
0000:05D1 CD 75	06		      call    wipe_alien_bomb
0000:05D4 3A 79	20		      ld      a, (alien_bomb_bitmap_addr)	      ;	bitmap address lsb
0000:05D7 C6 03			      add     a, 3				      ;	next bomb bitmap
0000:05D9 21 7F	20		      ld      hl, 207Fh				      ;	lsb of last bitmap address in table
0000:05DC BE			      cp      (hl)				      ;	past end of table?
0000:05DD DA E2	05		      jp      c, loc_0_5E2			      ;	no, skip
0000:05E0 D6 0C			      sub     0Ch				      ;	reset bitmap to	start of table
0000:05E2	      
0000:05E2	      loc_0_5E2:						      ;	CODE XREF: handle_alien_bombing+7Aj
0000:05E2 32 79	20		      ld      (alien_bomb_bitmap_addr),	a	      ;	save bitmap lsb	address
0000:05E5 3A 7B	20		      ld      a, (alien_bomb_screen_loc)	      ;	bomb y coordinate
0000:05E8 47			      ld      b, a
0000:05E9 3A 7E	20		      ld      a, (alien_bomb_y_inc)		      ;	get number y coord offset
0000:05EC 80			      add     a, b				      ;	update y coord
0000:05ED 32 7B	20		      ld      (alien_bomb_screen_loc), a	      ;	save
0000:05F0 CD 6C	06		      call    draw_and_test_alien_bomb		      ;	draw invader bomb
0000:05F3 3A 7B	20		      ld      a, (alien_bomb_screen_loc)	      ;	bomb y coord
0000:05F6 FE 15			      cp      15h				      ;	too low	to hit player?
0000:05F8 DA 12	06		      jp      c, loc_0_612			      ;	yes, exit
0000:05FB 3A 61	20		      ld      a, (something_hit)
0000:05FE A7			      and     a					      ;	was something hit?
0000:05FF C8			      ret     z					      ;	no, exit
0000:0600 3A 7B	20		      ld      a, (alien_bomb_screen_loc)	      ;	bomb y coord
0000:0603 FE 1E			      cp      1Eh				      ;	level with player ship?
0000:0605 DA 12	06		      jp      c, loc_0_612			      ;	no, exit
0000:0608 FE 27			      cp      27h ; '''                               ; hit a base?
0000:060A 00			      nop     
0000:060B D2 12	06		      jp      nc, loc_0_612			      ;	yes, exit
0000:060E 97			      sub     a					      ;	player ship has	been hit
0000:060F 32 15	20		      ld      (gameplay_ticker), a
0000:0612	      
0000:0612	      loc_0_612:						      ;	CODE XREF: handle_alien_bombing+95j
0000:0612 3A 73	20								      ;	handle_alien_bombing+A2j ...
0000:0612			      ld      a, (curr_alien_bomb_data)
0000:0615 F6 01			      or      1					      ;	flag aliens hit	something
0000:0617 32 73	20		      ld      (curr_alien_bomb_data), a
0000:061A C9			      ret     
0000:061B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:061B	      
0000:061B	      decide_invader_to_bomb:					      ;	CODE XREF: handle_alien_bombing+36j
0000:061B 3A 1B	20		      ld      a, (player_ship_coord_lsb_)	      ;	get coord of player ship
0000:061E C6 08			      add     a, 8				      ;	get coord of middle
0000:0620 67			      ld      h, a				      ;	save
0000:0621 CD 6F	15		      call    find_hit_invader_column		      ;	??? some sort of randomiser based on ship coord
0000:0624 79			      ld      a, c				      ;	get chosen column
0000:0625 FE 0C			      cp      12				      ;	valid range (column 1-11)?
0000:0627 DA A5	05		      jp      c, loc_0_5A5			      ;	yes, skip
0000:062A 0E 0B			      ld      c, 11				      ;	column 11 to drop bomb
0000:062C C3 A5	05		      jp      loc_0_5A5				      ;	return
0000:062C	      ;	End of function	handle_alien_bombing
0000:062C	      
0000:062F	      
0000:062F	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:062F	      
0000:062F	      
0000:062F	      is_invader_left_in_column_c_:				      ;	CODE XREF: handle_alien_bombing+42p
0000:062F 0D			      dec     c					      ;	column number to drop bomb
0000:0630 3A 67	20		      ld      a, (ptr_curr_player_data)		      ;	get ptr	player data
0000:0633 67			      ld      h, a
0000:0634 69			      ld      l, c				      ;	hl = ptr top row invader in chosen column
0000:0635 16 05			      ld      d, 5				      ;	5 rows of invaders
0000:0637	      
0000:0637	      loc_0_637:						      ;	CODE XREF: is_invader_left_in_column_c_+11j
0000:0637 7E			      ld      a, (hl)				      ;	get invader
0000:0638 A7			      and     a					      ;	alive?
0000:0639	      
0000:0639	      loc_0_639:
0000:0639 37			      scf     
0000:063A C0			      ret     nz				      ;	yes, exit
0000:063B 7D			      ld      a, l
0000:063C C6 0B			      add     a, 11				      ;	11 invaders/row
0000:063E 6F			      ld      l, a				      ;	ptr next row of	invaders
0000:063F 15			      dec     d					      ;	done all rows?
0000:0640 C2 37	06		      jp      nz, loc_0_637			      ;	no, loop
0000:0643 C9			      ret     
0000:0643	      ;	End of function	is_invader_left_in_column_c_
0000:0643	      
0000:0644	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0644	      
0000:0644	      explode_alien_bomb:					      ;	CODE XREF: handle_alien_bombing+69j
0000:0644 21 78	20		      ld      hl, 2078h				      ;	alien bomb explosion timer
0000:0647 35			      dec     (hl)				      ;	tick down
0000:0648 7E			      ld      a, (hl)
0000:0649 FE 03			      cp      3					      ;	only starting to explode?
0000:064B C2 67	06		      jp      nz, test_end_alien_bomb_explosion	      ;	no, skip
0000:064E CD 75	06		      call    wipe_alien_bomb
0000:0651 21 DC	1C		      ld      hl, 1CDCh				      ;	ptr bitmap for explosion
0000:0654 22 79	20		      ld      (alien_bomb_bitmap_addr),	hl	      ;	save it	as bomb	bitmap
0000:0657 21 7C	20		      ld      hl, 207Ch				      ;	bomb x coord
0000:065A 35			      dec     (hl)
0000:065B 35			      dec     (hl)				      ;	move left 2 pixels (for	wider bitmap)
0000:065C 2B			      dec     hl				      ;	bomb y coord
0000:065D 35			      dec     (hl)
0000:065E 35			      dec     (hl)				      ;	move up	2 pixels (for taller bitmap)
0000:065F 3E 06			      ld      a, 6				      ;	set explosion bitmap length
0000:0661 32 7D	20		      ld      (alien_bomb_bitmap_length), a	      ;	save as	bomb bitmap length
0000:0664 C3 6C	06		      jp      draw_and_test_alien_bomb
0000:0667	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0667	      
0000:0667	      test_end_alien_bomb_explosion:				      ;	CODE XREF: 0000:064Bj
0000:0667 A7			      and     a					      ;	time to	end explosion?
0000:0668 C0			      ret     nz				      ;	no, return
0000:0669 C3 75	06		      jp      wipe_alien_bomb
0000:066C	      
0000:066C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:066C	      
0000:066C	      
0000:066C	      draw_and_test_alien_bomb:					      ;	CODE XREF: handle_alien_bombing+8Dp
0000:066C 21 79	20								      ;	0000:0664j
0000:066C			      ld      hl, 2079h				      ;	ptr alien bomb object
0000:066F CD 3B	1A		      call    extract_DE_HL_B			      ;	extract	bomb object parameters
0000:0672 C3 91	14		      jp      draw_and_detect_collision
0000:0672	      ;	End of function	draw_and_test_alien_bomb
0000:0672	      
0000:0675	      
0000:0675	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0675	      
0000:0675	      
0000:0675	      wipe_alien_bomb:						      ;	CODE XREF: handle_alien_bombing+6Ep
0000:0675 21 79	20								      ;	0000:064Ep ...
0000:0675			      ld      hl, 2079h				      ;	ptr alien bomb object
0000:0678 CD 3B	1A		      call    extract_DE_HL_B			      ;	extract	bomb object parameters
0000:067B C3 52	14		      jp      wipe_shifted_bitmap_pixels
0000:067B	      ;	End of function	wipe_alien_bomb
0000:067B	      
0000:067E	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:067E	      
0000:067E	      loc_0_67E:						      ;	CODE XREF: 0000:050Bj
0000:067E 22 48	20		      ld      (word_0_2048), hl
0000:0681 C9			      ret     
0000:0682	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0682 E1			      pop     hl				      ;	called by jump vector #5
0000:0683 3A 80	20		      ld      a, (byte_0_2080)
0000:0686 FE 02			      cp      2
0000:0688 C0			      ret     nz
0000:0689 21 83	20		      ld      hl, 2083h				      ;	ptr flag time for ufo
0000:068C 7E			      ld      a, (hl)
0000:068D A7			      and     a					      ;	is it time for the ufo to appear?
0000:068E CA 0F	05		      jp      z, handle_alien_bomb_3		      ;	no, skip
0000:0691 3A 56	20		      ld      a, (byte_0_2056)
0000:0694 A7			      and     a
0000:0695 C2 0F	05		      jp      nz, handle_alien_bomb_3
0000:0698 23			      inc     hl
0000:0699 7E			      ld      a, (hl)				      ;	ptr ufo	visible	flag
0000:069A A7			      and     a					      ;	is the ufo already visible?
0000:069B C2 AB	06		      jp      nz, loc_0_6AB			      ;	yes, skip
0000:069E 3A 82	20		      ld      a, (num_invaders_left)
0000:06A1 FE 08			      cp      8					      ;	less than 8 invaders left?
0000:06A3 DA 0F	05		      jp      c, handle_alien_bomb_3		      ;	yes, don't allow it to appear
0000:06A6 36 01			      ld      (hl), 1				      ;	flag ufo visible
0000:06A8 CD 3C	07		      call    draw_ufo				      ;	draw UFO
0000:06AB	      
0000:06AB	      loc_0_6AB:						      ;	CODE XREF: 0000:069Bj
0000:06AB 11 8A	20		      ld      de, 208Ah				      ;	ufo x coordinate
0000:06AE CD 06	1A		      call    sub_0_1A06
0000:06B1 D0			      ret     nc
0000:06B2 21 85	20		      ld      hl, 2085h				      ;	ptr ufo	hit flag
0000:06B5 7E			      ld      a, (hl)
0000:06B6 A7			      and     a					      ;	has the	ufo been hit?
0000:06B7 C2 D6	06		      jp      nz, handle_ufo_hit		      ;	yes, handle
0000:06BA 21 8A	20		      ld      hl, 208Ah				      ;	object screen loc x
0000:06BD 7E			      ld      a, (hl)
0000:06BE 23			      inc     hl
0000:06BF 23			      inc     hl				      ;	ptr object x move offset
0000:06C0 86			      add     a, (hl)				      ;	calc new x coord
0000:06C1 32 8A	20		      ld      (byte_0_208A), a			      ;	update object x	coord
0000:06C4 CD 3C	07		      call    draw_ufo				      ;	draw UFO
0000:06C7 21 8A	20		      ld      hl, 208Ah				      ;	object screen loc x
0000:06CA 7E			      ld      a, (hl)				      ;	get screen loc
0000:06CB FE 28			      cp      40				      ;	lh edge	of screen?
0000:06CD DA F9	06		      jp      c, wipe_ufo			      ;	yes, wipe it
0000:06D0 FE E1			      cp      225				      ;	rhs of screen?
0000:06D2 D2 F9	06		      jp      nc, wipe_ufo			      ;	yes, wipe it
0000:06D5 C9			      ret     
0000:06D6	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:06D6	      
0000:06D6	      handle_ufo_hit:						      ;	CODE XREF: 0000:06B7j
0000:06D6 06 FE			      ld      b, 0FEh ;	'ş'                           ; mask out ufo sound
0000:06D8 CD DC	19		      call    stop_port3_sound			      ;	stop ufo sound
0000:06DB 23			      inc     hl				      ;	ptr countdown after ufo	hit (init=32)
0000:06DC 35			      dec     (hl)				      ;	count down
0000:06DD 7E			      ld      a, (hl)
0000:06DE FE 1F			      cp      31				      ;	time to	explode?
0000:06E0 CA 4B	07		      jp      z, handle_ufo_explosion		      ;	yes, handle
0000:06E3 FE 18			      cp      24				      ;	time to	show score?
0000:06E5 CA 0C	07		      jp      z, handle_ufo_score		      ;	yes, handle
0000:06E8 A7			      and     a					      ;	countdown finished?
0000:06E9 C0			      ret     nz				      ;	no, exit
0000:06EA 06 EF			      ld      b, 0EFh ;	'ï'                           ; mask out ufo hit sound
0000:06EC 21 98	20		      ld      hl, 2098h				      ;	port 5 sound register shadow
0000:06EF 7E			      ld      a, (hl)
0000:06F0 A0			      and     b					      ;	turn off ufo hit sound
0000:06F1 77			      ld      (hl), a				      ;	save
0000:06F2 E6 20			      and     20h ; ' '                               ; only screen flip bit
0000:06F4 D3 05			      out     (5), a				      ;	set screen flip
0000:06F6 00			      nop     
0000:06F7 00			      nop     
0000:06F8 00			      nop     
0000:06F9	      
0000:06F9	      wipe_ufo:							      ;	CODE XREF: 0000:06CDj
0000:06F9 CD 42	07								      ;	0000:06D2j
0000:06F9			      call    calc_vram_ufo			      ;	calc ufo text score params
0000:06FC CD CB	14		      call    clr_chr_hl_b_			      ;	clear ufo text score
0000:06FF 21 83	20		      ld      hl, 2083h				      ;	ptr ufo	data
0000:0702 06 0A			      ld      b, 10				      ;	re-init	10 bytes
0000:0704 CD 5F	07		      call    re_init_ufo_data			      ;	re-init	ufo data
0000:0707	      
0000:0707	      stop_ufo_sound:						      ;	CODE XREF: start_stop_ufo_sound+5j
0000:0707 06 FE			      ld      b, 0FEh ;	'ş'                           ; mask out ufo sound
0000:0709 C3 DC	19		      jp      stop_port3_sound			      ;	stop ufo sound
0000:070C	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:070C	      
0000:070C	      handle_ufo_score:						      ;	CODE XREF: 0000:06E5j
0000:070C 3E 01			      ld      a, 1				      ;	set flag that score needs updating
0000:070E 32 F1	20		      ld      (any_points_to_add), a
0000:0711 2A 8D	20		      ld      hl, (???_counter)
0000:0714 46			      ld      b, (hl)				      ;	b = ???	counter
0000:0715 0E 04			      ld      c, 4				      ;	4 entries in table
0000:0717 21 50	1D		      ld      hl, 1D50h				      ;	table of ufo score text	strings
0000:071A 11 4C	1D		      ld      de, 1D4Ch				      ;	table of UFO scores
0000:071D	      
0000:071D	      loc_0_71D:						      ;	CODE XREF: 0000:0725j
0000:071D 1A			      ld      a, (de)				      ;	lookup table
0000:071E B8			      cp      b					      ;	had this many shots yet?
0000:071F CA 28	07		      jp      z, loc_0_728			      ;	yes, skip
0000:0722 23			      inc     hl
0000:0723 13			      inc     de				      ;	next entry
0000:0724 0D			      dec     c					      ;	any entries left?
0000:0725 C2 1D	07		      jp      nz, loc_0_71D			      ;	yes, loop
0000:0728	      
0000:0728	      loc_0_728:						      ;	CODE XREF: 0000:071Fj
0000:0728 7E			      ld      a, (hl)				      ;	get lsb	of score string	address
0000:0729 32 87	20		      ld      (ptr_ufo_bitmap),	a		      ;	save it
0000:072C 26 00			      ld      h, 0
0000:072E 68			      ld      l, b				      ;	hl = ??? count
0000:072F 29			      add     hl, hl
0000:0730 29			      add     hl, hl
0000:0731 29			      add     hl, hl
0000:0732 29			      add     hl, hl				      ;	x16 = X10 (BCD)
0000:0733 22 F2	20		      ld      (points_to_add), hl		      ;	save points to add to score
0000:0736 CD 42	07		      call    calc_vram_ufo			      ;	calculate screen loc for text score
0000:0739 C3 F1	08		      jp      draw_str_hl_de_3_			      ;	draw it	and exit
0000:073C	      
0000:073C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:073C	      
0000:073C	      
0000:073C	      draw_ufo:							      ;	CODE XREF: 0000:06A8p
0000:073C CD 42	07								      ;	0000:06C4p ...
0000:073C			      call    calc_vram_ufo
0000:073F C3 39	14		      jp      draw_bitmap_hl_de_b_
0000:073F	      ;	End of function	draw_ufo
0000:073F	      
0000:0742	      
0000:0742	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0742	      
0000:0742	      
0000:0742	      calc_vram_ufo:						      ;	CODE XREF: 0000:06F9p
0000:0742 21 87	20								      ;	0000:0736p ...
0000:0742			      ld      hl, 2087h
0000:0745 CD 3B	1A		      call    extract_DE_HL_B
0000:0748 C3 47	1A		      jp      calc_vram_addr_from_pixel_offset
0000:0748	      ;	End of function	calc_vram_ufo
0000:0748	      
0000:074B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:074B	      
0000:074B	      handle_ufo_explosion:					      ;	CODE XREF: 0000:06E0j
0000:074B 06 10			      ld      b, 10h				      ;	saucer hit sound
0000:074D 21 98	20		      ld      hl, 2098h				      ;	port 5 sound shadow reg
0000:0750 7E			      ld      a, (hl)
0000:0751 B0			      or      b					      ;	mix in saucer hit
0000:0752 77			      ld      (hl), a				      ;	save
0000:0753 CD 70	17		      call    start_stop_ufo_hit_sound
0000:0756 21 7C	1D		      ld      hl, 1D7Ch				      ;	ptr ufo	explosion bitmap
0000:0759 22 87	20		      ld      (ptr_ufo_bitmap),	hl		      ;	set ufo	bitmap address
0000:075C C3 3C	07		      jp      draw_ufo				      ;	draw it
0000:075F	      
0000:075F	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:075F	      
0000:075F	      
0000:075F	      re_init_ufo_data:						      ;	CODE XREF: 0000:0704p
0000:075F 11 83	1B		      ld      de, 1B83h				      ;	ptr ufo	data
0000:0762 C3 32	1A		      jp      memcpy_hl_de_b_
0000:0762	      ;	End of function	re_init_ufo_data
0000:0762	      
0000:0765	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0765	      
0000:0765	      show_PUSH_PLAYER_BUTTON:					      ;	CODE XREF: sub_0_38+2Cj
0000:0765 3E 01			      ld      a, 1				      ;	set coined up flag so NMI doesn't re-enter
0000:0767 32 93	20		      ld      (coined_up), a
0000:076A 31 00	24		      ld      sp, 2400h				      ;	forget the fact	that we	were...
0000:076D FB			      ei					      ;	inside an NMI
0000:076E CD 79	19		      call    draw_credit_display
0000:0771 CD D6	09		      call    clear_visible_display
0000:0774 21 13	30		      ld      hl, 3013h				      ;	screen loc
0000:0777 11 F3	1F		      ld      de, 1FF3h				      ;	"PUSH"
0000:077A 0E 04			      ld      c, 4				      ;	length
0000:077C CD F3	08		      call    draw_str_hl_de_
0000:077F	      
0000:077F	      wait_start_button:					      ;	CODE XREF: 0000:0795j
0000:077F 3A EB	20								      ;	0000:086Aj
0000:077F			      ld      a, (num_credits)
0000:0782 3D			      dec     a
0000:0783 21 10	28		      ld      hl, 2810h				      ;	screen loc
0000:0786 0E 14			      ld      c, 14h				      ;	length
0000:0788 C2 57	08		      jp      nz, show_1_2_PLAYERS_BUTTON	      ;	>1 credit - skip
0000:078B 11 CF	1A		      ld      de, 1ACFh				      ;	"ONLY 1PLAYER BUTTON"
0000:078E CD F3	08		      call    draw_str_hl_de_
0000:0791 DB 01			      in      a, (1)				      ;	read controller	1
0000:0793 E6 04			      and     4					      ;	1P start?
0000:0795 CA 7F	07		      jp      z, wait_start_button		      ;	no - loop
0000:0798	      
0000:0798	      start_1p:							      ;	CODE XREF: 0000:0867j
0000:0798 06 99			      ld      b, 99h ; '™'                            ; (BCD)-1
0000:079A AF			      xor     a					      ;	1 player
0000:079B	      
0000:079B	      start_playing:						      ;	CODE XREF: 0000:086Fj
0000:079B 32 CE	20		      ld      (two_p_game), a			      ;	num players - 1
0000:079E 3A EB	20		      ld      a, (num_credits)			      ;	get credits
0000:07A1 80			      add     a, b				      ;	sub 1 (bcd arithmetic)
0000:07A2 27			      daa     
0000:07A3 32 EB	20		      ld      (num_credits), a			      ;	save credits
0000:07A6 CD 47	19		      call    draw_credits
0000:07A9 21 00	00		      ld      hl, 0
0000:07AC 22 F8	20		      ld      (p1_score), hl			      ;	init p1	score
0000:07AF 22 FC	20		      ld      (p2_score), hl			      ;	init p2	score
0000:07B2 CD 25	19		      call    draw_p1_score
0000:07B5 CD 2B	19		      call    draw_p2_score
0000:07B8 CD D7	19		      call    disable_vblank_code
0000:07BB 21 01	01		      ld      hl, 101h				      ;	some flag initialisers
0000:07BE 7C			      ld      a, h
0000:07BF 32 EF	20		      ld      (game_in_progress), a		      ;	set game in progress
0000:07C2 22 E7	20		      ld      (num_men_p1), hl			      ;	init for both p1 & p2
0000:07C5 22 E5	20		      ld      (yet_to_earn_bonus_ship),	hl	      ;	flag bonus not yet earnt and &&&
0000:07C8 CD 56	19		      call    update_screen_text		      ;	draw all the text on the screen
0000:07CB CD EF	01		      call    init_p1_shields			      ;	copy fresh shields from	ROM
0000:07CE CD F5	01		      call    init_p2_shields			      ;	copy fresh shields from	ROM
0000:07D1 CD D1	08		      call    read_num_lives_from_dips
0000:07D4 32 FF	21		      ld      (p1_ships_left), a		      ;	init p1	ships
0000:07D7 32 FF	22		      ld      (p2_ships_left), a		      ;	init p2	ships
0000:07DA CD D7	00		      call    init_invader_xinc_wipe_2p_score	      ;	bl invader coords, x inc
0000:07DD AF			      xor     a					      ;	set wave=0
0000:07DE 32 FE	21		      ld      (p1_wave_number),	a		      ;	init p1	wave
0000:07E1 32 FE	22		      ld      (p2_wave_number),	a		      ;	init p2	wave
0000:07E4 CD C0	01		      call    init_p1_invader_map
0000:07E7 CD 04	19		      call    init_p2_invader_map
0000:07EA 21 78	38		      ld      hl, 3878h				      ;	56, 120
0000:07ED 22 FC	21		      ld      (p1_bl_invader_coords), hl	      ;	init p1	bl invader coords
0000:07F0 22 FC	22		      ld      (p2_bl_invader_coords), hl	      ;	init p2	bl invader coords
0000:07F3 CD E4	01		      call    init_vars_192
0000:07F6 CD 7F	1A		      call    show_ships_left
0000:07F9	      
0000:07F9	      start_player_new_ship:					      ;	CODE XREF: 0000:0329j
0000:07F9 CD 8D	08		      call    show_PLAY_PLAYER
0000:07FC CD D6	09		      call    clear_visible_display
0000:07FF 00			      nop     
0000:0800 AF			      xor     a					      ;	reset animation
0000:0801 32 C1	20		      ld      (animation_type),	a
0000:0804	      
0000:0804	      start_player_new_ship_2:					      ;	CODE XREF: 0000:0A30j
0000:0804 CD CF	01								      ;	0000:0A39j
0000:0804			      call    draw_base_line
0000:0807 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:080A 0F			      rrca					      ;	player 1?
0000:080B DA 72	08		      jp      c, loc_0_872			      ;	no, skip
0000:080E CD 13	02		      call    draw_p2_shields			      ;	draw p2	shields
0000:0811 CD CF	01		      call    draw_base_line			      ;	again?!?
0000:0814	      
0000:0814	      loc_0_814:						      ;	CODE XREF: 0000:0875j
0000:0814 CD B1	00		      call    restore_invader_params		      ;	bl invader coords, x inc
0000:0817	      
0000:0817	      loc_0_817:						      ;	CODE XREF: 0000:032Fj
0000:0817 CD D1	19		      call    do_enable_vblank_code
0000:081A 06 20			      ld      b, 20h ; ' '                            ; not documented/handled in MAME!
0000:081C CD FA	18		      call    start_port3_sound
0000:081F	      
0000:081F	      player_playing_loop:					      ;	CODE XREF: 0000:0851j
0000:081F CD 18	16		      call    poll_fire_button
0000:0822 CD 0A	19		      call    update_player_bullet_invader_dir	      ;	handle firing and invader direction
0000:0825 CD F3	15		      call    count_invaders_left
0000:0828 CD 88	09		      call    update_score_and_draw		      ;	update score
0000:082B 3A 82	20		      ld      a, (num_invaders_left)
0000:082E A7			      and     a					      ;	any invaders left?
0000:082F CA EF	09		      jp      z, end_of_wave			      ;	no, handle end of wave
0000:0832 CD 0E	17		      call    update_bomb_frequency
0000:0835 CD 35	09		      call    handle_bonus_ship
0000:0838 CD D8	08		      call    check_and_update_bomb_speed	      ;	speed up bombs if <9 invaders
0000:083B CD 2C	17		      call    start_stop_shot_sound
0000:083E CD 59	0A		      call    check_player_hit			      ;	player been hit?
0000:0841 CA 49	08		      jp      z, player_not_hit			      ;	no, skip
0000:0844 06 04			      ld      b, 4				      ;	base hit sound
0000:0846 CD FA	18		      call    start_port3_sound
0000:0849	      
0000:0849	      player_not_hit:						      ;	CODE XREF: 0000:0841j
0000:0849 CD 75	17		      call    check_update_invader_sound
0000:084C D3 06			      out     (6), a				      ;	not document/implemented in MAME!
0000:084E CD 04	18		      call    start_stop_ufo_sound
0000:0851 C3 1F	08		      jp      player_playing_loop
0000:0851	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0854 00			      .db    0 ;  
0000:0855 00			      .db    0 ;  
0000:0856 00			      .db    0 ;  
0000:0857	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0857	      
0000:0857	      show_1_2_PLAYERS_BUTTON:					      ;	CODE XREF: 0000:0788j
0000:0857 11 BA	1A		      ld      de, 1ABAh				      ;	"1 OR 2PLAYERS BUTTON"
0000:085A CD F3	08		      call    draw_str_hl_de_
0000:085D 06 98			      ld      b, 98h ; '˜'
0000:085F DB 01			      in      a, (1)				      ;	read controller	1
0000:0861 0F			      rrca    
0000:0862 0F			      rrca					      ;	2P start?
0000:0863 DA 6D	08		      jp      c, start_2p			      ;	yes - jump
0000:0866 0F			      rrca					      ;	1P start?
0000:0867 DA 98	07		      jp      c, start_1p			      ;	yes - jump
0000:086A C3 7F	07		      jp      wait_start_button
0000:086D	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:086D	      
0000:086D	      start_2p:							      ;	CODE XREF: 0000:0863j
0000:086D 3E 01			      ld      a, 1				      ;	2 players
0000:086F C3 9B	07		      jp      start_playing
0000:0872	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0872	      
0000:0872	      loc_0_872:						      ;	CODE XREF: 0000:080Bj
0000:0872 CD 1A	02		      call    draw_p1_shields
0000:0875 C3 14	08		      jp      loc_0_814
0000:0878	      
0000:0878	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0878	      
0000:0878	      
0000:0878	      get_curr_and_player_invader_coor:				      ;	CODE XREF: 0000:02F8p
0000:0878 3A 08	20		      ld      a, (invader_x_inc)
0000:087B 47			      ld      b, a				      ;	b = invader x inc
0000:087C 2A 09	20		      ld      hl, (bottom_left_invader_y)
0000:087F EB			      ex      de, hl				      ;	de = bottom left invader coords
0000:0880 C3 86	08		      jp      ptr_curr_p_bl_invader_coords
0000:0880	      ;	End of function	get_curr_and_player_invader_coor
0000:0880	      
0000:0880	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0883 00			      .db    0 ;  
0000:0884 00			      .db    0 ;  
0000:0885 00			      .db    0 ;  
0000:0886	      
0000:0886	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0886	      
0000:0886	      
0000:0886	      ptr_curr_p_bl_invader_coords:				      ;	CODE XREF: restore_invader_paramsp
0000:0886 3A 67	20								      ;	get_curr_and_player_invader_coor+8j
0000:0886			      ld      a, (ptr_curr_player_data)
0000:0889 67			      ld      h, a
0000:088A 2E FC			      ld      l, 0FCh ;	'ü'                           ; ptr player bl invader coords
0000:088C C9			      ret     
0000:088C	      ;	End of function	ptr_curr_p_bl_invader_coords
0000:088C	      
0000:088D	      
0000:088D	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:088D	      
0000:088D	      
0000:088D	      show_PLAY_PLAYER:						      ;	CODE XREF: 0000:07F9p
0000:088D 21 11	2B		      ld      hl, 2B11h				      ;	screen loc
0000:0890 11 70	1B		      ld      de, 1B70h				      ;	"PLAY PLAYER<1>"
0000:0893 0E 0E			      ld      c, 14				      ;	string length
0000:0895 CD F3	08		      call    draw_str_hl_de_			      ;	show it
0000:0898 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:089B 0F			      rrca    
0000:089C 3E 1C			      ld      a, 1Ch				      ;	"2"
0000:089E 21 11	37		      ld      hl, 3711h				      ;	screen loc
0000:08A1 D4 FF	08		      call    nc, draw_char_hl_a_		      ;	over-write with	"2" if p2
0000:08A4 3E B0			      ld      a, 176				      ;	set timer to 176
0000:08A6 32 C0	20		      ld      (timer), a
0000:08A9	      
0000:08A9	      flash_score:						      ;	CODE XREF: show_PLAY_PLAYER+2Cj
0000:08A9 3A C0	20								      ;	show_PLAY_PLAYER+41j
0000:08A9			      ld      a, (timer)
0000:08AC A7			      and     a					      ;	done?
0000:08AD C8			      ret     z					      ;	yes, exit
0000:08AE E6 04			      and     4					      ;	draw blank or score?
0000:08B0 C2 BC	08		      jp      nz, blank_score			      ;	blank, skip
0000:08B3 CD CA	09		      call    get_ptr_curr_score
0000:08B6 CD 31	19		      call    draw_bcd_word_from_table
0000:08B9 C3 A9	08		      jp      flash_score
0000:08BC	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:08BC	      
0000:08BC	      blank_score:						      ;	CODE XREF: show_PLAY_PLAYER+23j
0000:08BC 06 20			      ld      b, 20h ; ' '
0000:08BE 21 1C	27		      ld      hl, 271Ch				      ;	p1 score screen	loc
0000:08C1 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:08C4 0F			      rrca					      ;	p1?
0000:08C5 DA CB	08		      jp      c, loc_0_8CB			      ;	yes, skip
0000:08C8 21 1C	39		      ld      hl, 391Ch				      ;	p2 score screen	loc
0000:08CB	      
0000:08CB	      loc_0_8CB:						      ;	CODE XREF: show_PLAY_PLAYER+38j
0000:08CB CD CB	14		      call    clr_chr_hl_b_			      ;	blank score
0000:08CE C3 A9	08		      jp      flash_score
0000:08CE	      ;	End of function	show_PLAY_PLAYER
0000:08CE	      
0000:08D1	      
0000:08D1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:08D1	      
0000:08D1	      
0000:08D1	      read_num_lives_from_dips:					      ;	CODE XREF: 0000:07D1p
0000:08D1 DB 02									      ;	0000:0B54p
0000:08D1			      in      a, (2)				      ;	read dipswitches
0000:08D3 E6 03			      and     3					      ;	only interested	in number of lives
0000:08D5 C6 03			      add     a, 3				      ;	calc number of lives
0000:08D7 C9			      ret     
0000:08D7	      ;	End of function	read_num_lives_from_dips
0000:08D7	      
0000:08D8	      
0000:08D8	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:08D8	      
0000:08D8	      
0000:08D8	      check_and_update_bomb_speed:				      ;	CODE XREF: 0000:0838p
0000:08D8 3A 82	20		      ld      a, (num_invaders_left)
0000:08DB FE 09			      cp      9					      ;	more than 8 invaders left?
0000:08DD D0			      ret     nc				      ;	yes, exit
0000:08DE 3E FB			      ld      a, 0FBh ;	'û'                           ; set alien bombs to 5 pixels/inc
0000:08E0 32 7E	20		      ld      (alien_bomb_y_inc), a		      ;	save
0000:08E3 C9			      ret     
0000:08E3	      ;	End of function	check_and_update_bomb_speed
0000:08E3	      
0000:08E4	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:08E4	      
0000:08E4	      wipe_2p_score:						      ;	CODE XREF: init_invader_xinc_wipe_2p_score+8j
0000:08E4 3A CE	20		      ld      a, (two_p_game)
0000:08E7 A7			      and     a					      ;	2 players?
0000:08E8 C0			      ret     nz				      ;	no, exit
0000:08E9 21 1C	39		      ld      hl, 391Ch				      ;	screen loc
0000:08EC 06 20			      ld      b, 32				      ;	32 chars
0000:08EE C3 CB	14		      jp      clr_chr_hl_b_
0000:08F1	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:08F1	      
0000:08F1	      draw_str_hl_de_3_:					      ;	CODE XREF: 0000:0739j
0000:08F1 0E 03			      ld      c, 3
0000:08F3	      
0000:08F3	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:08F3	      
0000:08F3	      
0000:08F3	      draw_str_hl_de_:						      ;	CODE XREF: 0000:077Cp
0000:08F3 1A									      ;	0000:078Ep ...
0000:08F3			      ld      a, (de)				      ;	get char
0000:08F4 D5			      push    de
0000:08F5 CD FF	08		      call    draw_char_hl_a_
0000:08F8 D1			      pop     de
0000:08F9 13			      inc     de
0000:08FA 0D			      dec     c					      ;	dec length
0000:08FB C2 F3	08		      jp      nz, draw_str_hl_de_		      ;	not done - loop
0000:08FE C9			      ret     
0000:08FE	      ;	End of function	draw_str_hl_de_
0000:08FE	      
0000:08FF	      
0000:08FF	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:08FF	      
0000:08FF	      
0000:08FF	      draw_char_hl_a_:						      ;	CODE XREF: show_PLAY_PLAYER+14p
0000:08FF 11 00	1E								      ;	draw_str_hl_de_+2p ...
0000:08FF			      ld      de, 1E00h				      ;	char bitmap
0000:0902 E5			      push    hl				      ;	save screen loc
0000:0903 26 00			      ld      h, 0
0000:0905 6F			      ld      l, a
0000:0906 29			      add     hl, hl
0000:0907 29			      add     hl, hl
0000:0908 29			      add     hl, hl				      ;	char * 8
0000:0909 19			      add     hl, de				      ;	ptr char bitmap
0000:090A EB			      ex      de, hl				      ;	de = ptr char bitmap
0000:090B E1			      pop     hl				      ;	restore	screen loc
0000:090C 06 08			      ld      b, 8
0000:090E D3 06			      out     (6), a
0000:0910 C3 39	14		      jp      draw_bitmap_hl_de_b_
0000:0910	      ;	End of function	draw_char_hl_a_
0000:0910	      
0000:0913	      
0000:0913	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0913	      
0000:0913	      
0000:0913	      handle_next_ufo_timer:					      ;	CODE XREF: sub_0_38+46p
0000:0913 3A 09	20		      ld      a, (bottom_left_invader_y)	      ;	get y coord of bl invader
0000:0916 FE 78			      cp      120				      ;	moved down at least once?
0000:0918 D0			      ret     nc				      ;	no, exit
0000:0919 2A 91	20		      ld      hl, (next_ufo_timer)
0000:091C 7D			      ld      a, l
0000:091D B4			      or      h					      ;	is it time for the next	ufo?
0000:091E C2 29	09		      jp      nz, next_ufo_tick			      ;	no, skip
0000:0921 21 00	06		      ld      hl, 600h
0000:0924 3E 01			      ld      a, 1				      ;	flag the ufo as	visible
0000:0926 32 83	20		      ld      (time_for_ufo), a
0000:0929	      
0000:0929	      next_ufo_tick:						      ;	CODE XREF: handle_next_ufo_timer+Bj
0000:0929 2B			      dec     hl				      ;	next ufo timer tick
0000:092A 22 91	20		      ld      (next_ufo_timer),	hl		      ;	save
0000:092D C9			      ret     
0000:092D	      ;	End of function	handle_next_ufo_timer
0000:092D	      
0000:092E	      
0000:092E	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:092E	      
0000:092E	      
0000:092E	      get_curr_player_num_ships:				      ;	CODE XREF: 0000:02D7p
0000:092E CD 11	16								      ;	handle_bonus_ship+1Ap ...
0000:092E			      call    set_hl_ptr_curr_player_data
0000:0931 2E FF			      ld      l, 0FFh				      ;	ptr curr player	num ships
0000:0933 7E			      ld      a, (hl)				      ;	curr player num	ships
0000:0934 C9			      ret     
0000:0934	      ;	End of function	get_curr_player_num_ships
0000:0934	      
0000:0935	      
0000:0935	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0935	      
0000:0935	      
0000:0935	      handle_bonus_ship:					      ;	CODE XREF: 0000:0835p
0000:0935 CD 10	19		      call    set_hl_num_ships_curr_player
0000:0938 2B			      dec     hl
0000:0939 2B			      dec     hl
0000:093A 7E			      ld      a, (hl)				      ;	bonus earnt flag
0000:093B A7			      and     a					      ;	already	got it?
0000:093C C8			      ret     z					      ;	yes, exit
0000:093D 06 15			      ld      b, 15h				      ;	bonus high byte	(1500)
0000:093F DB 02			      in      a, (2)				      ;	read dipswitches
0000:0941 E6 08			      and     8					      ;	bonus life setting
0000:0943 CA 48	09		      jp      z, loc_0_948			      ;	bonus @1500 - skip
0000:0946 06 10			      ld      b, 10h				      ;	bonus high byte	(1000)
0000:0948	      
0000:0948	      loc_0_948:						      ;	CODE XREF: handle_bonus_ship+Ej
0000:0948 CD CA	09		      call    get_ptr_curr_score
0000:094B 23			      inc     hl				      ;	ptr score
0000:094C 7E			      ld      a, (hl)				      ;	get high byte
0000:094D B8			      cp      b					      ;	bonus?
0000:094E D8			      ret     c					      ;	no - return
0000:094F CD 2E	09		      call    get_curr_player_num_ships
0000:0952 34			      inc     (hl)				      ;	add an extra ship
0000:0953 7E			      ld      a, (hl)				      ;	number of ships
0000:0954 F5			      push    af
0000:0955 21 01	25		      ld      hl, 2501h				      ;	screen loc
0000:0958	      
0000:0958	      loc_0_958:						      ;	CODE XREF: handle_bonus_ship+26j
0000:0958 24			      inc     h
0000:0959 24			      inc     h					      ;	leave 2	pixels
0000:095A 3D			      dec     a					      ;	next ship
0000:095B C2 58	09		      jp      nz, loc_0_958			      ;	calc where to draw extra ship
0000:095E 06 10			      ld      b, 10h				      ;	bitmap size
0000:0960 11 60	1C		      ld      de, 1C60h				      ;	player ship
0000:0963 CD 39	14		      call    draw_bitmap_hl_de_b_		      ;	draw extra ship
0000:0966 F1			      pop     af
0000:0967 3C			      inc     a					      ;	digit includes ship currently playing
0000:0968 CD 8B	1A		      call    prt_num_ships_left
0000:096B CD 10	19		      call    set_hl_num_ships_curr_player
0000:096E 2B			      dec     hl
0000:096F 2B			      dec     hl
0000:0970 36 00			      ld      (hl), 0				      ;	flag already got bonus
0000:0972 3E FF			      ld      a, 0FFh				      ;	init bonus ship	sound timer
0000:0974 32 99	20		      ld      (bonus_ship_sound_timer),	a
0000:0977 06 10			      ld      b, 10h				      ;	bonus ship sound
0000:0979 C3 FA	18		      jp      start_port3_sound
0000:0979	      ;	End of function	handle_bonus_ship
0000:0979	      
0000:097C	      
0000:097C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:097C	      
0000:097C	      
0000:097C	      get_invader_point_value:					      ;	CODE XREF: get_score_for_invader+Fp
0000:097C 21 A0	1D		      ld      hl, 1DA0h				      ;	ptr invader score
0000:097F FE 02			      cp      2					      ;	row < 2?
0000:0981 D8			      ret     c					      ;	yes, return (10	pts)
0000:0982 23			      inc     hl				      ;	next score
0000:0983 FE 04			      cp      4					      ;	row < 4?
0000:0985 D8			      ret     c					      ;	yes, return (20	pts)
0000:0986 23			      inc     hl				      ;	30 pts
0000:0987 C9			      ret     
0000:0987	      ;	End of function	get_invader_point_value
0000:0987	      
0000:0988	      
0000:0988	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0988	      
0000:0988	      
0000:0988	      update_score_and_draw:					      ;	CODE XREF: 0000:0828p
0000:0988 CD CA	09		      call    get_ptr_curr_score
0000:098B 3A F1	20		      ld      a, (any_points_to_add)
0000:098E A7			      and     a					      ;	are there any points to	add to score?
0000:098F C8			      ret     z					      ;	no, exit
0000:0990 AF			      xor     a					      ;	flag that we've added the points
0000:0991 32 F1	20		      ld      (any_points_to_add), a		      ;	save
0000:0994 E5			      push    hl				      ;	save ptr score
0000:0995 2A F2	20		      ld      hl, (points_to_add)
0000:0998 EB			      ex      de, hl				      ;	de = value to add to score
0000:0999 E1			      pop     hl				      ;	ptr score
0000:099A 7E			      ld      a, (hl)				      ;	score B0
0000:099B 83			      add     a, e				      ;	add value B0
0000:099C 27			      daa     
0000:099D 77			      ld      (hl), a				      ;	save score B0
0000:099E 5F			      ld      e, a				      ;	e = score B0
0000:099F 23			      inc     hl
0000:09A0 7E			      ld      a, (hl)				      ;	score B1
0000:09A1 8A			      adc     a, d				      ;	add value B1
0000:09A2 27			      daa     
0000:09A3 77			      ld      (hl), a				      ;	save score B1
0000:09A4 57			      ld      d, a				      ;	d = score B1
0000:09A5 23			      inc     hl
0000:09A6 7E			      ld      a, (hl)				      ;	score screen loc lsb
0000:09A7 23			      inc     hl
0000:09A8 66			      ld      h, (hl)				      ;	score screen loc msb
0000:09A9 6F			      ld      l, a				      ;	hl = score screen loc
0000:09AA C3 AD	09		      jp      draw_bcd_word_de_			      ;	draw score
0000:09AD	      
0000:09AD	      draw_bcd_word_de_:					      ;	CODE XREF: draw_p2_score+Ej
0000:09AD 7A			      ld      a, d
0000:09AE CD B2	09		      call    draw_bcd_byte_a_
0000:09B1 7B			      ld      a, e
0000:09B1	      ;	End of function	update_score_and_draw
0000:09B1	      
0000:09B2	      
0000:09B2	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:09B2	      
0000:09B2	      
0000:09B2	      draw_bcd_byte_a_:						      ;	CODE XREF: update_score_and_draw+26p
0000:09B2 D5									      ;	draw_credits+6j
0000:09B2			      push    de
0000:09B3 F5			      push    af
0000:09B4 0F			      rrca    
0000:09B5 0F			      rrca    
0000:09B6 0F			      rrca    
0000:09B7 0F			      rrca					      ;	high nibble
0000:09B8 E6 0F			      and     0Fh
0000:09BA CD C5	09		      call    draw_ascii_digit
0000:09BD F1			      pop     af
0000:09BE E6 0F			      and     0Fh				      ;	low nibble
0000:09C0 CD C5	09		      call    draw_ascii_digit
0000:09C3 D1			      pop     de
0000:09C4 C9			      ret     
0000:09C4	      ;	End of function	draw_bcd_byte_a_
0000:09C4	      
0000:09C5	      
0000:09C5	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:09C5	      
0000:09C5	      
0000:09C5	      draw_ascii_digit:						      ;	CODE XREF: draw_bcd_byte_a_+8p
0000:09C5 C6 1A									      ;	draw_bcd_byte_a_+Ep ...
0000:09C5			      add     a, 1Ah				      ;	convert	digit to 'ascii'
0000:09C7 C3 FF	08		      jp      draw_char_hl_a_
0000:09C7	      ;	End of function	draw_ascii_digit
0000:09C7	      
0000:09CA	      
0000:09CA	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:09CA	      
0000:09CA	      
0000:09CA	      get_ptr_curr_score:					      ;	CODE XREF: show_PLAY_PLAYER+26p
0000:09CA 3A 67	20								      ;	handle_bonus_ship+13p ...
0000:09CA			      ld      a, (ptr_curr_player_data)
0000:09CD 0F			      rrca    
0000:09CE 21 F8	20		      ld      hl, 20F8h				      ;	p1 score
0000:09D1 D8			      ret     c					      ;	return if p1
0000:09D2 21 FC	20		      ld      hl, 20FCh				      ;	p2 score
0000:09D5 C9			      ret     
0000:09D5	      ;	End of function	get_ptr_curr_score
0000:09D5	      
0000:09D6	      
0000:09D6	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:09D6	      
0000:09D6	      
0000:09D6	      clear_visible_display:					      ;	CODE XREF: 0000:0323p
0000:09D6 21 02	24								      ;	0000:0771p ...
0000:09D6			      ld      hl, 2402h				      ;	start of visible area
0000:09D9	      
0000:09D9	      clear_to_eos:						      ;	CODE XREF: clear_visible_display+15j
0000:09D9 36 00			      ld      (hl), 0				      ;	clear video ram	byte
0000:09DB 23			      inc     hl				      ;	next loc
0000:09DC 7D			      ld      a, l
0000:09DD E6 1F			      and     1Fh
0000:09DF FE 1C			      cp      1Ch				      ;	end of line?
0000:09E1 DA E8	09		      jp      c, loc_0_9E8			      ;	no, skip
0000:09E4 11 06	00		      ld      de, 6
0000:09E7 19			      add     hl, de				      ;	unused video ram
0000:09E8	      
0000:09E8	      loc_0_9E8:						      ;	CODE XREF: clear_visible_display+Bj
0000:09E8 7C			      ld      a, h
0000:09E9 FE 40			      cp      40h ; '@'                               ; end of video ram?
0000:09EB DA D9	09		      jp      c, clear_to_eos			      ;	no, loop
0000:09EE C9			      ret     
0000:09EE	      ;	End of function	clear_visible_display
0000:09EE	      
0000:09EF	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:09EF	      
0000:09EF	      end_of_wave:						      ;	CODE XREF: 0000:082Fj
0000:09EF CD 3C	0A		      call    wait_4_timer_after_gameplay_tick
0000:09F2 AF			      xor     a					      ;	disable	vblank code
0000:09F3 32 E9	20		      ld      (enable_vblank_code), a
0000:09F6 CD D6	09		      call    clear_visible_display		      ;	clear screen
0000:09F9 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:09FC F5			      push    af
0000:09FD CD E4	01		      call    init_vars_192			      ;	init data for new wave
0000:0A00 F1			      pop     af
0000:0A01 32 67	20		      ld      (ptr_curr_player_data), a
0000:0A04 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:0A07 67			      ld      h, a
0000:0A08 E5			      push    hl				      ;	save curr player
0000:0A09 2E FE			      ld      l, 0FEh ;	'ş'                           ; ptr wave number
0000:0A0B 7E			      ld      a, (hl)				      ;	get curr wave number
0000:0A0C E6 07			      and     7					      ;	resets every 8 waves
0000:0A0E 3C			      inc     a					      ;	next wave
0000:0A0F 77			      ld      (hl), a				      ;	save
0000:0A10 21 A2	1D		      ld      hl, 1DA2h				      ;	ptr table of starting invader y	coords
0000:0A13	      
0000:0A13	      loc_0_A13:						      ;	CODE XREF: 0000:0A15j
0000:0A13 23			      inc     hl
0000:0A14 3D			      dec     a
0000:0A15 C2 13	0A		      jp      nz, loc_0_A13			      ;	find entry for this wave
0000:0A18 7E			      ld      a, (hl)				      ;	get starting invader y coord
0000:0A19 E1			      pop     hl				      ;	restore	curr player
0000:0A1A 2E FC			      ld      l, 0FCh ;	'ü'                           ; ptr curr player bl invader coords
0000:0A1C 77			      ld      (hl), a				      ;	set bl invader y coord from table
0000:0A1D 23			      inc     hl
0000:0A1E 36 38			      ld      (hl), 56				      ;	init bl	invader	x coord
0000:0A20 7C			      ld      a, h				      ;	curr player
0000:0A21 0F			      rrca					      ;	player 1?
0000:0A22 DA 33	0A		      jp      c, init_p1_shields_map		      ;	yes, skip
0000:0A25 3E 21			      ld      a, 21h ; '!'                            ; fleet #1 and screen flip
0000:0A27 32 98	20		      ld      (port_5_sound_shadow_reg), a	      ;	save
0000:0A2A CD F5	01		      call    init_p2_shields
0000:0A2D CD 04	19		      call    init_p2_invader_map
0000:0A30 C3 04	08		      jp      start_player_new_ship_2
0000:0A33	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0A33	      
0000:0A33	      init_p1_shields_map:					      ;	CODE XREF: 0000:0A22j
0000:0A33 CD EF	01		      call    init_p1_shields
0000:0A36 CD C0	01		      call    init_p1_invader_map
0000:0A39 C3 04	08		      jp      start_player_new_ship_2
0000:0A3C	      
0000:0A3C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0A3C	      
0000:0A3C	      
0000:0A3C	      wait_4_timer_after_gameplay_tick:				      ;	CODE XREF: 0000:09EFp
0000:0A3C CD 59	0A		      call    check_player_hit
0000:0A3F C2 52	0A		      jp      nz, wait_for_gameplay_tick
0000:0A42 3E 30			      ld      a, 48
0000:0A44 32 C0	20		      ld      (timer), a
0000:0A47	      
0000:0A47	      loc_0_A47:						      ;	CODE XREF: wait_4_timer_after_gameplay_tick+13j
0000:0A47 3A C0	20		      ld      a, (timer)
0000:0A4A A7			      and     a					      ;	expired?
0000:0A4B C8			      ret     z					      ;	yes, exit
0000:0A4C CD 59	0A		      call    check_player_hit
0000:0A4F CA 47	0A		      jp      z, loc_0_A47
0000:0A52	      
0000:0A52	      wait_for_gameplay_tick:					      ;	CODE XREF: wait_4_timer_after_gameplay_tick+3j
0000:0A52 CD 59	0A								      ;	wait_4_timer_after_gameplay_tick+19j
0000:0A52			      call    check_player_hit
0000:0A55 C2 52	0A		      jp      nz, wait_for_gameplay_tick
0000:0A58 C9			      ret     
0000:0A58	      ;	End of function	wait_4_timer_after_gameplay_tick
0000:0A58	      
0000:0A59	      
0000:0A59	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0A59	      
0000:0A59	      
0000:0A59	      check_player_hit:						      ;	CODE XREF: 0000:083Ep
0000:0A59 3A 15	20								      ;	wait_4_timer_after_gameplay_tickp ...
0000:0A59			      ld      a, (gameplay_ticker)
0000:0A5C FE FF			      cp      0FFh				      ;	$FF = player OK	(zero flag set)
0000:0A5E C9			      ret     
0000:0A5E	      ;	End of function	check_player_hit
0000:0A5E	      
0000:0A5F	      
0000:0A5F	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0A5F	      
0000:0A5F	      
0000:0A5F	      get_score_for_invader:					      ;	CODE XREF: update_player_bullet+49p
0000:0A5F 3A EF	20		      ld      a, (game_in_progress)
0000:0A62 A7			      and     a					      ;	game in	progress?
0000:0A63 CA 7C	0A		      jp      z, loc_0_A7C			      ;	no, skip (be silent)
0000:0A66 48			      ld      c, b				      ;	c = invader row
0000:0A67 06 08			      ld      b, 8				      ;	invader	hit sound
0000:0A69 CD FA	18		      call    start_port3_sound			      ;	play sound depending on	invader	type
0000:0A6C 41			      ld      b, c
0000:0A6D 78			      ld      a, b				      ;	a = invader row
0000:0A6E CD 7C	09		      call    get_invader_point_value
0000:0A71 7E			      ld      a, (hl)				      ;	get invader point value
0000:0A72 21 F3	20		      ld      hl, 20F3h				      ;	ptr points to add (msb)
0000:0A75 36 00			      ld      (hl), 0				      ;	set msb	= 0
0000:0A77 2B			      dec     hl				      ;	ptr lsb
0000:0A78 77			      ld      (hl), a				      ;	set number of points for invader
0000:0A79 2B			      dec     hl				      ;	ptr any	points to add
0000:0A7A 36 01			      ld      (hl), 1				      ;	flag that score	needs updating
0000:0A7C	      
0000:0A7C	      loc_0_A7C:						      ;	CODE XREF: get_score_for_invader+4j
0000:0A7C 21 62	20		      ld      hl, 2062h				      ;	ptr invader graphics object
0000:0A7F C9			      ret     
0000:0A7F	      ;	End of function	get_score_for_invader
0000:0A7F	      
0000:0A80	      
0000:0A80	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0A80	      
0000:0A80	      
0000:0A80	      wait_for_animation_to_finish:				      ;	CODE XREF: 0000:0B24p
0000:0A80 3E 02									      ;	0000:0B2Dp ...
0000:0A80			      ld      a, 2				      ;	invader	animation
0000:0A82 32 C1	20		      ld      (animation_type),	a
0000:0A85	      
0000:0A85	      wait_for_animation_loop:					      ;	CODE XREF: wait_for_animation_to_finish+Bj
0000:0A85 D3 06			      out     (6), a
0000:0A87 3A CB	20		      ld      a, (animation_finished)
0000:0A8A A7			      and     a					      ;	has the	animation finished?
0000:0A8B CA 85	0A		      jp      z, wait_for_animation_loop	      ;	no, loop
0000:0A8E AF			      xor     a					      ;	reset animation
0000:0A8F 32 C1	20		      ld      (animation_type),	a
0000:0A92 C9			      ret     
0000:0A92	      ;	End of function	wait_for_animation_to_finish
0000:0A92	      
0000:0A93	      
0000:0A93	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0A93	      
0000:0A93	      
0000:0A93	      draw_str_slowly:						      ;	CODE XREF: draw_str_slowly+14j
0000:0A93 D5									      ;	draw_SPACE__INVADERS+5j ...
0000:0A93			      push    de
0000:0A94 1A			      ld      a, (de)				      ;	get char
0000:0A95 CD FF	08		      call    draw_char_hl_a_
0000:0A98 D1			      pop     de
0000:0A99 3E 07			      ld      a, 7
0000:0A9B 32 C0	20		      ld      (timer), a
0000:0A9E	      
0000:0A9E	      draw_str_delay_loop:					      ;	CODE XREF: draw_str_slowly+Fj
0000:0A9E 3A C0	20		      ld      a, (timer)
0000:0AA1 3D			      dec     a
0000:0AA2 C2 9E	0A		      jp      nz, draw_str_delay_loop		      ;	delay
0000:0AA5 13			      inc     de				      ;	next char
0000:0AA6 0D			      dec     c					      ;	done?
0000:0AA7 C2 93	0A		      jp      nz, draw_str_slowly		      ;	no - loop
0000:0AAA C9			      ret     
0000:0AAA	      ;	End of function	draw_str_slowly
0000:0AAA	      
0000:0AAB	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0AAB	      
0000:0AAB	      update_bomb_c_animation:					      ;	CODE XREF: update_attract_animations+Cj
0000:0AAB 21 50	20		      ld      hl, 2050h
0000:0AAE C3 4B	02		      jp      dispatch_jump_vector
0000:0AB1	      
0000:0AB1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0AB1	      
0000:0AB1	      
0000:0AB1	      delay_0x40:						      ;	CODE XREF: 0000:0AF3p
0000:0AB1 3E 40									      ;	0000:0B0Ep ...
0000:0AB1			      ld      a, 40h ; '@'
0000:0AB3 C3 D7	0A		      jp      delay_a_
0000:0AB3	      ;	End of function	delay_0x40
0000:0AB3	      
0000:0AB6	      
0000:0AB6	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0AB6	      
0000:0AB6	      
0000:0AB6	      delay_0x80:						      ;	CODE XREF: 0000:0315p
0000:0AB6 3E 80									      ;	0000:0B14p ...
0000:0AB6			      ld      a, 80h ; '€'
0000:0AB8 C3 D7	0A		      jp      delay_a_
0000:0AB8	      ;	End of function	delay_0x80
0000:0AB8	      
0000:0ABB	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0ABB	      
0000:0ABB	      update_demo:						      ;	CODE XREF: update_attract_animations+4j
0000:0ABB E1			      pop     hl
0000:0ABC C3 72	00		      jp      loc_0_72
0000:0ABF	      
0000:0ABF	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0ABF	      
0000:0ABF	      
0000:0ABF	      update_attract_animations:				      ;	CODE XREF: sub_0_38+1Fp
0000:0ABF 3A C1	20		      ld      a, (animation_type)
0000:0AC2 0F			      rrca					      ;	demo animation?
0000:0AC3 DA BB	0A		      jp      c, update_demo			      ;	yes, handle
0000:0AC6 0F			      rrca					      ;	invader	animation?
0000:0AC7 DA 68	18		      jp      c, update_animated_invader	      ;	yes, handle
0000:0ACA 0F			      rrca					      ;	bomb-c animation?
0000:0ACB DA AB	0A		      jp      c, update_bomb_c_animation	      ;	yes, handle
0000:0ACE C9			      ret     
0000:0ACE	      ;	End of function	update_attract_animations
0000:0ACE	      
0000:0ACF	      
0000:0ACF	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0ACF	      
0000:0ACF	      
0000:0ACF	      draw_SPACE__INVADERS:					      ;	CODE XREF: 0000:0B0Bp
0000:0ACF 21 14	2B		      ld      hl, 2B14h				      ;	screen loc
0000:0AD2 0E 0F			      ld      c, 0Fh				      ;	length
0000:0AD4 C3 93	0A		      jp      draw_str_slowly
0000:0AD4	      ;	End of function	draw_SPACE__INVADERS
0000:0AD4	      
0000:0AD7	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0AD7	      
0000:0AD7	      delay_a_:							      ;	CODE XREF: delay_0x40+2j
0000:0AD7 32 C0	20								      ;	delay_0x80+2j
0000:0AD7			      ld      (timer), a
0000:0ADA	      
0000:0ADA	      delay_loop:						      ;	CODE XREF: 0000:0ADEj
0000:0ADA 3A C0	20		      ld      a, (timer)
0000:0ADD A7			      and     a					      ;	done?
0000:0ADE C2 DA	0A		      jp      nz, delay_loop			      ;	no - loop
0000:0AE1 C9			      ret     
0000:0AE2	      
0000:0AE2	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0AE2	      
0000:0AE2	      
0000:0AE2	      init_animation_data:					      ;	CODE XREF: 0000:0B21p
0000:0AE2 21 C2	20								      ;	0000:0B2Ap ...
0000:0AE2			      ld      hl, 20C2h				      ;	invader	animation data
0000:0AE5 06 0C			      ld      b, 0Ch				      ;	12 bytes of data
0000:0AE7 C3 32	1A		      jp      memcpy_hl_de_b_			      ;	init
0000:0AE7	      ;	End of function	init_animation_data
0000:0AE7	      
0000:0AEA	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0AEA	      
0000:0AEA	      attract_mode_loop:					      ;	CODE XREF: 0000:18E4j
0000:0AEA AF			      xor     a
0000:0AEB D3 03			      out     (3), a				      ;	turn off all sound
0000:0AED D3 05			      out     (5), a				      ;	turn off all sound
0000:0AEF CD 82	19		      call    set_animation_type		      ;	reset animation
0000:0AF2 FB			      ei      
0000:0AF3 CD B1	0A		      call    delay_0x40
0000:0AF6 3A EC	20		      ld      a, (attract_mode_state)
0000:0AF9 A7			      and     a					      ;	show inverted-y	animation?
0000:0AFA 21 17	30		      ld      hl, 3017h				      ;	screen loc
0000:0AFD 0E 04			      ld      c, 4				      ;	length
0000:0AFF C2 E8	0B		      jp      nz, draw_PLAY			      ;	no, skip
0000:0B02 11 FA	1C		      ld      de, 1CFAh				      ;	"PLAY" with inverted Y
0000:0B05 CD 93	0A		      call    draw_str_slowly
0000:0B08 11 AF	1D		      ld      de, 1DAFh				      ;	"SPACE  INVADERS"
0000:0B0B	      
0000:0B0B	      show_inverted_y_animation:				      ;	CODE XREF: 0000:0BEEj
0000:0B0B CD CF	0A		      call    draw_SPACE__INVADERS
0000:0B0E CD B1	0A		      call    delay_0x40
0000:0B11 CD 15	18		      call    show_and_animate_score_table
0000:0B14 CD B6	0A		      call    delay_0x80
0000:0B17 3A EC	20		      ld      a, (attract_mode_state)
0000:0B1A A7			      and     a					      ;	show inverted-Y	animation?
0000:0B1B C2 4A	0B		      jp      nz, init_demo_player_data		      ;	no, skip
0000:0B1E 11 95	1A		      ld      de, 1A95h				      ;	ptr inverted-Y animation pt.1 data
0000:0B21 CD E2	0A		      call    init_animation_data		      ;	init animation
0000:0B24 CD 80	0A		      call    wait_for_animation_to_finish
0000:0B27 11 B0	1B		      ld      de, 1BB0h				      ;	ptr inverted-Y animation pt.2 data
0000:0B2A CD E2	0A		      call    init_animation_data		      ;	init animation
0000:0B2D CD 80	0A		      call    wait_for_animation_to_finish
0000:0B30 CD B1	0A		      call    delay_0x40
0000:0B33 11 C9	1F		      ld      de, 1FC9h				      ;	ptr inverted-Y animation pt.3 data
0000:0B36 CD E2	0A		      call    init_animation_data		      ;	init animation
0000:0B39 CD 80	0A		      call    wait_for_animation_to_finish
0000:0B3C CD B1	0A		      call    delay_0x40
0000:0B3F 21 B7	33		      ld      hl, 33B7h				      ;	screen loc of animated invader
0000:0B42 06 0A			      ld      b, 0Ah				      ;	bitmap size
0000:0B44 CD CB	14		      call    clr_chr_hl_b_			      ;	wipe invader
0000:0B47 CD B6	0A		      call    delay_0x80
0000:0B4A	      
0000:0B4A	      init_demo_player_data:					      ;	CODE XREF: 0000:0B1Bj
0000:0B4A CD D6	09		      call    clear_visible_display
0000:0B4D 3A FF	21		      ld      a, (p1_ships_left)
0000:0B50 A7			      and     a					      ;	has player number of ships been	initialised yet?
0000:0B51 C2 5D	0B		      jp      nz, init_demo_game_data		      ;	yes, skip initialisation
0000:0B54 CD D1	08		      call    read_num_lives_from_dips
0000:0B57 32 FF	21		      ld      (p1_ships_left), a		      ;	initialise player number of ships
0000:0B5A CD 7F	1A		      call    show_ships_left			      ;	show them
0000:0B5D	      
0000:0B5D	      init_demo_game_data:					      ;	CODE XREF: 0000:0B51j
0000:0B5D CD E4	01		      call    init_vars_192			      ;	initialise player variables
0000:0B60 CD C0	01		      call    init_p1_invader_map		      ;	initialise map of invaders
0000:0B63 CD EF	01		      call    init_p1_shields			      ;	initialise shields in memory
0000:0B66 CD 1A	02		      call    draw_p1_shields			      ;	draw them
0000:0B69 3E 01			      ld      a, 1				      ;	demo animation
0000:0B6B 32 C1	20		      ld      (animation_type),	a
0000:0B6E CD CF	01		      call    draw_base_line			      ;	draw pristine base line
0000:0B71	      
0000:0B71	      attract_tick_loop_1:					      ;	CODE XREF: 0000:0B7Cj
0000:0B71 CD 18	16		      call    poll_fire_button			      ;	also controls demo logic inputs
0000:0B74 CD F1	0B		      call    update_p_bullet_inv_dir_chk_east
0000:0B77 D3 06			      out     (6), a
0000:0B79 CD 59	0A		      call    check_player_hit			      ;	next tick of the game timer?
0000:0B7C CA 71	0B		      jp      z, attract_tick_loop_1		      ;	no, loop
0000:0B7F AF			      xor     a
0000:0B80 32 25	20		      ld      (fire_progress_state), a
0000:0B83	      
0000:0B83	      attract_tick_loop_2:					      ;	CODE XREF: 0000:0B86j
0000:0B83 CD 59	0A		      call    check_player_hit
0000:0B86 C2 83	0B		      jp      nz, attract_tick_loop_2
0000:0B89	      
0000:0B89	      attract_tick_loop_3:					      ;	CODE XREF: 0000:16E3j
0000:0B89 AF			      xor     a					      ;	reset animation
0000:0B8A 32 C1	20		      ld      (animation_type),	a
0000:0B8D CD B1	0A		      call    delay_0x40
0000:0B90 CD 88	19		      call    j_clear_visible_display		      ;	clear visible display
0000:0B93 0E 0C			      ld      c, 0Ch				      ;	length
0000:0B95 21 11	2C		      ld      hl, 2C11h				      ;	screen loc
0000:0B98 11 90	1F		      ld      de, 1F90h				      ;	"INSERT  COIN"
0000:0B9B CD F3	08		      call    draw_str_hl_de_			      ;	show it
0000:0B9E 3A EC	20		      ld      a, (attract_mode_state)
0000:0BA1 FE 00			      cp      0					      ;	show animations?
0000:0BA3 C2 AE	0B		      jp      nz, loc_0_BAE			      ;	no, skip
0000:0BA6 21 11	33		      ld      hl, 3311h				      ;	screen loc
0000:0BA9 3E 02			      ld      a, 2				      ;	"C"
0000:0BAB CD FF	08		      call    draw_char_hl_a_
0000:0BAE	      
0000:0BAE	      loc_0_BAE:						      ;	CODE XREF: 0000:0BA3j
0000:0BAE 01 9C	1F		      ld      bc, 1F9Ch				      ;	table "<1 OR 2 PLAYERS>"
0000:0BB1 CD 56	18		      call    lookup_hl_de_at_bc		      ;	get screen loc,	text
0000:0BB4 CD 4C	18		      call    draw_str_varlen
0000:0BB7 DB 02			      in      a, (2)				      ;	read dipswitches
0000:0BB9 07			      rlca					      ;	coin info
0000:0BBA DA C3	0B		      jp      c, loc_0_BC3			      ;	no coin	info - skip
0000:0BBD 01 A0	1F		      ld      bc, 1FA0h				      ;	table of coin info msgs
0000:0BC0 CD 3A	18		      call    draw_multistr_varlen
0000:0BC3	      
0000:0BC3	      loc_0_BC3:						      ;	CODE XREF: 0000:0BBAj
0000:0BC3 CD B6	0A		      call    delay_0x80
0000:0BC6 3A EC	20		      ld      a, (attract_mode_state)
0000:0BC9 FE 00			      cp      0					      ;	do bomb-c animation?
0000:0BCB C2 DA	0B		      jp      nz, toggle_attract_state_and_cls	      ;	no, skip
0000:0BCE 11 D5	1F		      ld      de, 1FD5h				      ;	ptr bomb-c animation data
0000:0BD1 CD E2	0A		      call    init_animation_data		      ;	init animation
0000:0BD4 CD 80	0A		      call    wait_for_animation_to_finish
0000:0BD7 CD 9E	18		      call    animate_bomb_c_dropping
0000:0BDA	      
0000:0BDA	      toggle_attract_state_and_cls:				      ;	CODE XREF: 0000:0BCBj
0000:0BDA 21 EC	20		      ld      hl, 20ECh				      ;	get attract mode state
0000:0BDD 7E			      ld      a, (hl)
0000:0BDE 3C			      inc     a					      ;	next state
0000:0BDF E6 01			      and     1					      ;	only 2 valid states
0000:0BE1 77			      ld      (hl), a				      ;	save
0000:0BE2 CD D6	09		      call    clear_visible_display
0000:0BE5 C3 DF	18		      jp      set_max_bomb_frequency
0000:0BE8	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0BE8	      
0000:0BE8	      draw_PLAY:						      ;	CODE XREF: 0000:0AFFj
0000:0BE8 11 AB	1D		      ld      de, 1DABh				      ;	"PLAY"
0000:0BEB CD 93	0A		      call    draw_str_slowly
0000:0BEE C3 0B	0B		      jp      show_inverted_y_animation
0000:0BF1	      
0000:0BF1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:0BF1	      
0000:0BF1	      
0000:0BF1	      update_p_bullet_inv_dir_chk_east:				      ;	CODE XREF: 0000:0B74p
0000:0BF1 CD 0A	19		      call    update_player_bullet_invader_dir
0000:0BF4 C3 9A	19		      jp      check_TAITO_easter_egg
0000:0BF4	      ;	End of function	update_p_bullet_inv_dir_chk_east
0000:0BF4	      
0000:0BF4	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:0BF7 13 00	08 13+		      .db 13h, 0, 8, 13h, 0Eh, 26h, 2, 0Eh, 0Fh	      ;	"TAITO COP"
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:0C00 00 00	00 00+		      .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0000:1400	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1400	      
0000:1400	      OR_shifted_bitmap_to_vram:				      ;	CODE XREF: 0000:03F7j
0000:1400 00									      ;	0000:0407j
0000:1400			      nop     
0000:1401 CD 74	14		      call    set_shifter_and_calc_vram_addr
0000:1404 00			      nop     
0000:1405	      
0000:1405	      loc_0_1405:						      ;	CODE XREF: 0000:141Ej
0000:1405 C5			      push    bc
0000:1406 E5			      push    hl
0000:1407 1A			      ld      a, (de)				      ;	get bitmap byte
0000:1408 D3 04			      out     (4), a				      ;	set shifter data
0000:140A DB 03			      in      a, (3)				      ;	read back
0000:140C B6			      or      (hl)
0000:140D 77			      ld      (hl), a				      ;	OR to vram
0000:140E 23			      inc     hl				      ;	next vram byte
0000:140F 13			      inc     de				      ;	next bitmap byte
0000:1410 AF			      xor     a					      ;	zero data
0000:1411 D3 04			      out     (4), a				      ;	set shifter data
0000:1413 DB 03			      in      a, (3)				      ;	read back
0000:1415 B6			      or      (hl)
0000:1416 77			      ld      (hl), a				      ;	OR to vram
0000:1417 E1			      pop     hl
0000:1418 01 20	00		      ld      bc, 20h ;	' '
0000:141B 09			      add     hl, bc				      ;	next line
0000:141C C1			      pop     bc
0000:141D 05			      dec     b					      ;	done all lines?
0000:141E C2 05	14		      jp      nz, loc_0_1405			      ;	no, loop
0000:1421 C9			      ret     
0000:1421	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1422 00			      .db    0 ;  
0000:1423 00			      .db    0 ;  
0000:1424	      
0000:1424	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1424	      
0000:1424	      
0000:1424	      clear_shifted_bitmap:					      ;	CODE XREF: 0000:02B3p
0000:1424 CD 74	14								      ;	update_player_bullet+6Ap
0000:1424			      call    set_shifter_and_calc_vram_addr
0000:1427	      
0000:1427	      clear_shifted_bitmap_hl:					      ;	CODE XREF: clear_shifted_bitmap+11j
0000:1427 C5			      push    bc
0000:1428 E5			      push    hl				      ;	save vram addr
0000:1429 AF			      xor     a
0000:142A 77			      ld      (hl), a
0000:142B 23			      inc     hl
0000:142C 77			      ld      (hl), a
0000:142D 23			      inc     hl				      ;	clear both bytes in vram
0000:142E E1			      pop     hl
0000:142F 01 20	00		      ld      bc, 20h ;	' '
0000:1432 09			      add     hl, bc				      ;	next line
0000:1433 C1			      pop     bc
0000:1434 05			      dec     b					      ;	done?
0000:1435 C2 27	14		      jp      nz, clear_shifted_bitmap_hl	      ;	no, loop
0000:1438 C9			      ret     
0000:1438	      ;	End of function	clear_shifted_bitmap
0000:1438	      
0000:1439	      
0000:1439	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1439	      
0000:1439	      
0000:1439	      draw_bitmap_hl_de_b_:					      ;	CODE XREF: 0000:0378p
0000:1439 C5									      ;	draw_ufo+3j ...
0000:1439			      push    bc
0000:143A 1A			      ld      a, (de)				      ;	get bitmap byte
0000:143B 77			      ld      (hl), a				      ;	copy to	screen loc
0000:143C 13			      inc     de				      ;	next bitmap byte
0000:143D 01 20	00		      ld      bc, 20h ;	' '
0000:1440 09			      add     hl, bc				      ;	next screen loc
0000:1441 C1			      pop     bc
0000:1442 05			      dec     b					      ;	num bytes in bitmap
0000:1443 C2 39	14		      jp      nz, draw_bitmap_hl_de_b_		      ;	not done - loop
0000:1446 C9			      ret     
0000:1446	      ;	End of function	draw_bitmap_hl_de_b_
0000:1446	      
0000:1446	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1447 00 00	00 00+		      .db 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
0000:1452	      
0000:1452	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1452	      
0000:1452	      
0000:1452	      wipe_shifted_bitmap_pixels:				      ;	CODE XREF: 0000:03E3p
0000:1452 CD 74	14								      ;	0000:0410p ...
0000:1452			      call    set_shifter_and_calc_vram_addr
0000:1455	      
0000:1455	      loc_0_1455:						      ;	CODE XREF: wipe_shifted_bitmap_pixels+1Ej
0000:1455 C5			      push    bc				      ;	save bitmap length (b)
0000:1456 E5			      push    hl				      ;	save vram addr
0000:1457 1A			      ld      a, (de)				      ;	ptr bitmap data
0000:1458 D3 04			      out     (4), a				      ;	set shifter data
0000:145A DB 03			      in      a, (3)				      ;	read back
0000:145C 2F			      cpl					      ;	invert
0000:145D A6			      and     (hl)				      ;	wipe from vram
0000:145E 77			      ld      (hl), a				      ;	put on screen
0000:145F 23			      inc     hl				      ;	next vram byte
0000:1460 13			      inc     de				      ;	next bitmap byte
0000:1461 AF			      xor     a					      ;	clear data
0000:1462 D3 04			      out     (4), a				      ;	set shifter data
0000:1464 DB 03			      in      a, (3)				      ;	read back
0000:1466 2F			      cpl     
0000:1467 A6			      and     (hl)				      ;	wipe from vram
0000:1468 77			      ld      (hl), a				      ;	put on screen
0000:1469 E1			      pop     hl
0000:146A 01 20	00		      ld      bc, 20h ;	' '
0000:146D 09			      add     hl, bc				      ;	next line
0000:146E C1			      pop     bc
0000:146F 05			      dec     b					      ;	done all lines?
0000:1470 C2 55	14		      jp      nz, loc_0_1455			      ;	no, loop
0000:1473 C9			      ret     
0000:1473	      ;	End of function	wipe_shifted_bitmap_pixels
0000:1473	      
0000:1474	      
0000:1474	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1474	      
0000:1474	      
0000:1474	      set_shifter_and_calc_vram_addr:				      ;	CODE XREF: 0000:1401p
0000:1474 7D									      ;	clear_shifted_bitmapp ...
0000:1474			      ld      a, l				      ;	shift value = ?	coord
0000:1475 E6 07			      and     7					      ;	mask off invalid bits
0000:1477 D3 02			      out     (2), a				      ;	set shifter bits
0000:1479 C3 47	1A		      jp      calc_vram_addr_from_pixel_offset
0000:1479	      ;	End of function	set_shifter_and_calc_vram_addr
0000:1479	      
0000:147C	      
0000:147C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:147C	      
0000:147C	      
0000:147C	      save_1_shield:						      ;	CODE XREF: draw_p1_shields+28p
0000:147C C5									      ;	save_1_shield+11j
0000:147C			      push    bc
0000:147D E5			      push    hl
0000:147E	      
0000:147E	      loc_0_147E:						      ;	CODE XREF: save_1_shield+7j
0000:147E 7E			      ld      a, (hl)				      ;	shield data from screen
0000:147F 12			      ld      (de), a				      ;	save it
0000:1480 13			      inc     de
0000:1481 23			      inc     hl
0000:1482 0D			      dec     c					      ;	done 1 row?
0000:1483 C2 7E	14		      jp      nz, loc_0_147E			      ;	no, loop
0000:1486 E1			      pop     hl				      ;	screen loc
0000:1487 01 20	00		      ld      bc, 20h ;	' '
0000:148A 09			      add     hl, bc				      ;	next line
0000:148B C1			      pop     bc
0000:148C 05			      dec     b					      ;	done all rows?
0000:148D C2 7C	14		      jp      nz, save_1_shield			      ;	no, loop
0000:1490 C9			      ret     
0000:1490	      ;	End of function	save_1_shield
0000:1490	      
0000:1491	      
0000:1491	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1491	      
0000:1491	      
0000:1491	      draw_and_detect_collision:				      ;	CODE XREF: 0000:041Ep
0000:1491 CD 74	14								      ;	draw_and_test_alien_bomb+6j
0000:1491			      call    set_shifter_and_calc_vram_addr
0000:1494 AF			      xor     a
0000:1495 32 61	20		      ld      (something_hit), a		      ;	flag nothing hit
0000:1498	      
0000:1498	      loc_0_1498:						      ;	CODE XREF: draw_and_detect_collision+36j
0000:1498 C5			      push    bc
0000:1499 E5			      push    hl
0000:149A 1A			      ld      a, (de)				      ;	get bitmap data
0000:149B D3 04			      out     (4), a				      ;	write shifter data
0000:149D DB 03			      in      a, (3)				      ;	read back
0000:149F F5			      push    af
0000:14A0 A6			      and     (hl)				      ;	hit something?
0000:14A1 CA A9	14		      jp      z, loc_0_14A9			      ;	no, continue
0000:14A4 3E 01			      ld      a, 1
0000:14A6 32 61	20		      ld      (something_hit), a		      ;	flag that something was	hit
0000:14A9	      
0000:14A9	      loc_0_14A9:						      ;	CODE XREF: draw_and_detect_collision+10j
0000:14A9 F1			      pop     af				      ;	shifted	data
0000:14AA B6			      or      (hl)				      ;	OR it to the screen
0000:14AB 77			      ld      (hl), a				      ;	write to vram
0000:14AC 23			      inc     hl				      ;	next vram byte
0000:14AD 13			      inc     de				      ;	next bitmap byte
0000:14AE AF			      xor     a					      ;	zero data
0000:14AF D3 04			      out     (4), a				      ;	write shifter data
0000:14B1 DB 03			      in      a, (3)				      ;	read back
0000:14B3 F5			      push    af
0000:14B4 A6			      and     (hl)				      ;	hit something?
0000:14B5 CA BD	14		      jp      z, loc_0_14BD			      ;	no, continue
0000:14B8 3E 01			      ld      a, 1
0000:14BA 32 61	20		      ld      (something_hit), a		      ;	flag that something was	hit
0000:14BD	      
0000:14BD	      loc_0_14BD:						      ;	CODE XREF: draw_and_detect_collision+24j
0000:14BD F1			      pop     af				      ;	shifted	data
0000:14BE B6			      or      (hl)				      ;	OR it to the screen
0000:14BF 77			      ld      (hl), a				      ;	write to vram
0000:14C0 E1			      pop     hl
0000:14C1 01 20	00		      ld      bc, 20h ;	' '
0000:14C4 09			      add     hl, bc				      ;	next line
0000:14C5 C1			      pop     bc
0000:14C6 05			      dec     b					      ;	done all rows?
0000:14C7 C2 98	14		      jp      nz, loc_0_1498			      ;	no, loop
0000:14CA C9			      ret     
0000:14CA	      ;	End of function	draw_and_detect_collision
0000:14CA	      
0000:14CB	      
0000:14CB	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:14CB	      
0000:14CB	      
0000:14CB	      clr_chr_hl_b_:						      ;	CODE XREF: 0000:06FCp
0000:14CB AF									      ;	show_PLAY_PLAYER+3Ep ...
0000:14CB			      xor     a
0000:14CC	      
0000:14CC	      fill_chr_hl_b_:						      ;	CODE XREF: draw_base_line+7j
0000:14CC C5									      ;	clr_chr_hl_b_+9j
0000:14CC			      push    bc
0000:14CD 77			      ld      (hl), a				      ;	write bitmap data to vram
0000:14CE 01 20	00		      ld      bc, 20h ;	' '
0000:14D1 09			      add     hl, bc				      ;	next line
0000:14D2 C1			      pop     bc
0000:14D3 05			      dec     b					      ;	done?
0000:14D4 C2 CC	14		      jp      nz, fill_chr_hl_b_		      ;	no, loop
0000:14D7 C9			      ret     
0000:14D7	      ;	End of function	clr_chr_hl_b_
0000:14D7	      
0000:14D8	      
0000:14D8	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:14D8	      
0000:14D8	      
0000:14D8	      update_player_bullet:					      ;	CODE XREF: 0000:16EEp
0000:14D8 3A 25	20								      ;	update_player_bullet_invader_dirp
0000:14D8			      ld      a, (fire_progress_state)
0000:14DB FE 05			      cp      5					      ;	finished firing?
0000:14DD C8			      ret     z					      ;	yes, exit
0000:14DE FE 02			      cp      2					      ;	bullet in flight?
0000:14E0 C0			      ret     nz				      ;	no, return
0000:14E1 3A 29	20		      ld      a, (player_shot_y_coord)
0000:14E4 FE D8			      cp      216				      ;	top of screen?
0000:14E6 47			      ld      b, a
0000:14E7 D2 30	15		      jp      nc, non_scoring_hit		      ;	yes, skip
0000:14EA 3A 02	20		      ld      a, (player_shot_something)
0000:14ED A7			      and     a					      ;	did player hit something?
0000:14EE C8			      ret     z					      ;	no, exit
0000:14EF 78			      ld      a, b				      ;	player shot y coord
0000:14F0 FE CE			      cp      206				      ;	was it the UFO?
0000:14F2 D2 79	15		      jp      nc, flag_ufo_hit			      ;	yes, handle
0000:14F5 C6 06			      add     a, 6				      ;	move bullet up the screen
0000:14F7 47			      ld      b, a				      ;	b=bullet y cood
0000:14F8 3A 09	20		      ld      a, (bottom_left_invader_y)
0000:14FB FE 90			      cp      144
0000:14FD D2 04	15		      jp      nc, invader_or_bomb_hit
0000:1500 B8			      cp      b					      ;	reached	lowest invader yet?
0000:1501 D2 30	15		      jp      nc, non_scoring_hit		      ;	no, skip
0000:1504	      
0000:1504	      invader_or_bomb_hit:					      ;	CODE XREF: update_player_bullet+25j
0000:1504 68			      ld      l, b				      ;	bullet y coord
0000:1505 CD 62	15		      call    find_hit_invader_row		      ;	b=row, l=y coord
0000:1508 3A 2A	20		      ld      a, (player_shot_x_coord)		      ;	get player shot	coord
0000:150B 67			      ld      h, a
0000:150C CD 6F	15		      call    find_hit_invader_column		      ;	h=x coord
0000:150F 22 64	20		      ld      (invader_screen_loc), hl		      ;	save ptr invader screen	loc
0000:1512 3E 05			      ld      a, 5				      ;	flag that shot is finished
0000:1514 32 25	20		      ld      (fire_progress_state), a
0000:1517 CD 81	15		      call    set_hl_invader_b_c		      ;	get ptr	invader	in player invader map
0000:151A 7E			      ld      a, (hl)
0000:151B A7			      and     a					      ;	alive?
0000:151C CA 30	15		      jp      z, non_scoring_hit		      ;	no, missed - a bomb?
0000:151F 36 00			      ld      (hl), 0				      ;	flag invader as	killed
0000:1521 CD 5F	0A		      call    get_score_for_invader
0000:1524 CD 3B	1A		      call    extract_DE_HL_B			      ;	setup graphics object params
0000:1527 CD D3	15		      call    draw_shifted_bitmap		      ;	draw it
0000:152A 3E 10			      ld      a, 16				      ;	counter	for invader explosion
0000:152C 32 03	20		      ld      (invader_explosion_counter), a	      ;	init to	16
0000:152F C9			      ret     
0000:1530	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1530	      
0000:1530	      non_scoring_hit:						      ;	CODE XREF: update_player_bullet+Fj
0000:1530 3E 03									      ;	update_player_bullet+29j ...
0000:1530			      ld      a, 3				      ;	player bullet exploding
0000:1532 32 25	20		      ld      (fire_progress_state), a		      ;	save state
0000:1535 C3 4A	15		      jp      bullet_missed
0000:1538	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1538	      
0000:1538	      check_invader_finished_exploding:				      ;	CODE XREF: draw_invader+5j
0000:1538 21 03	20		      ld      hl, 2003h				      ;	ptr inavsion explosion counter
0000:153B 35			      dec     (hl)				      ;	finished exploding?
0000:153C C0			      ret     nz				      ;	no, exit
0000:153D 2A 64	20		      ld      hl, (invader_screen_loc)		      ;	ptr invader screen loc
0000:1540 06 10			      ld      b, 10h				      ;	explosion bitmap size
0000:1542 CD 24	14		      call    clear_shifted_bitmap		      ;	wipe explosion
0000:1545	      
0000:1545	      loc_0_1545:						      ;	CODE XREF: 0000:157Ej
0000:1545 3E 04			      ld      a, 4				      ;	something is about to explode?
0000:1547 32 25	20		      ld      (fire_progress_state), a
0000:154A	      
0000:154A	      bullet_missed:						      ;	CODE XREF: update_player_bullet+5Dj
0000:154A AF			      xor     a					      ;	re-init	flag that player shot something
0000:154B 32 02	20		      ld      (player_shot_something), a	      ;	save
0000:154E 06 F7			      ld      b, 0F7h ;	'÷'                           ; mask off invader hit sound
0000:1550 C3 DC	19		      jp      stop_port3_sound			      ;	stop invader hit sound
0000:1550	      ;	End of function	update_player_bullet
0000:1550	      
0000:1550	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1553 00			      .db    0 ;  
0000:1554	      
0000:1554	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1554	      
0000:1554	      
0000:1554	      collision_detect_1_axis:					      ;	CODE XREF: find_hit_invader_row+4p
0000:1554 0E 00									      ;	find_hit_invader_column+3p
0000:1554			      ld      c, 0				      ;	a = object x/y coord
0000:1554									      ;	h = player bullet x/y coord
0000:1556 BC			      cp      h					      ;	object coord > bullet coord?
0000:1557 D4 90	15		      call    nc, sub_0_1590			      ;	yes, add 16 to object coord
0000:155A	      
0000:155A	      loc_0_155A:						      ;	CODE XREF: collision_detect_1_axis+Bj
0000:155A BC			      cp      h					      ;	adjusted object	coord >	bullet coord?
0000:155B D0			      ret     nc				      ;	yes, exit
0000:155C C6 10			      add     a, 16				      ;	add 16
0000:155E 0C			      inc     c					      ;	inc invader row	counter
0000:155F C3 5A	15		      jp      loc_0_155A
0000:155F	      ;	End of function	collision_detect_1_axis
0000:155F	      
0000:1562	      
0000:1562	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1562	      
0000:1562	      
0000:1562	      find_hit_invader_row:					      ;	CODE XREF: update_player_bullet+2Dp
0000:1562 3A 09	20		      ld      a, (bottom_left_invader_y)
0000:1565 65			      ld      h, l				      ;	player bullet y	coordinate
0000:1566 CD 54	15		      call    collision_detect_1_axis		      ;	find invader row that bullet is	in
0000:1569 41			      ld      b, c				      ;	invader	row
0000:156A 05			      dec     b					      ;	zero-based
0000:156B DE 10			      sbc     a, 10h
0000:156D 6F			      ld      l, a				      ;	object coord possibly hit
0000:156E C9			      ret     
0000:156E	      ;	End of function	find_hit_invader_row
0000:156E	      
0000:156F	      
0000:156F	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:156F	      
0000:156F	      
0000:156F	      find_hit_invader_column:					      ;	CODE XREF: handle_alien_bombing+BEp
0000:156F 3A 0A	20								      ;	update_player_bullet+34p
0000:156F			      ld      a, (bottom_left_invader_x)
0000:1572 CD 54	15		      call    collision_detect_1_axis
0000:1575 DE 10			      sbc     a, 10h
0000:1577 67			      ld      h, a				      ;	object x coord
0000:1578 C9			      ret     
0000:1578	      ;	End of function	find_hit_invader_column
0000:1578	      
0000:1579	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1579	      
0000:1579	      flag_ufo_hit:						      ;	CODE XREF: update_player_bullet+1Aj
0000:1579 3E 01			      ld      a, 1				      ;	flag ufo as being hit
0000:157B 32 85	20		      ld      (ufo_hit), a
0000:157E C3 45	15		      jp      loc_0_1545
0000:1581	      
0000:1581	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1581	      
0000:1581	      
0000:1581	      set_hl_invader_b_c:					      ;	CODE XREF: update_player_bullet+3Fp
0000:1581 78			      ld      a, b				      ;	b = row
0000:1582 07			      rlca    
0000:1583 07			      rlca    
0000:1584 07			      rlca					      ;	x8
0000:1585 80			      add     a, b				      ;	x9
0000:1586 80			      add     a, b				      ;	x10
0000:1587 80			      add     a, b				      ;	get row
0000:1588 81			      add     a, c				      ;	c = column
0000:1589 3D			      dec     a					      ;	get invader in row
0000:158A 6F			      ld      l, a
0000:158B 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:158E 67			      ld      h, a				      ;	hl = ptr invader in map
0000:158F C9			      ret     
0000:158F	      ;	End of function	set_hl_invader_b_c
0000:158F	      
0000:1590	      
0000:1590	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1590	      
0000:1590	      
0000:1590	      sub_0_1590:						      ;	CODE XREF: collision_detect_1_axis+3p
0000:1590 0C									      ;	sub_0_1590+3j
0000:1590			      inc     c					      ;	inc counter
0000:1591 C6 10			      add     a, 16				      ;	add 16 pixel to	coord
0000:1593 FA 90	15		      jp      m, sub_0_1590
0000:1596 C9			      ret     
0000:1596	      ;	End of function	sub_0_1590
0000:1596	      
0000:1597	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1597	      
0000:1597	      check_handle_invader_direction:				      ;	CODE XREF: update_player_bullet_invader_dir+3j
0000:1597 3A 0D	20		      ld      a, (invader_left_right)
0000:159A A7			      and     a					      ;	moving left?
0000:159B C2 B7	15		      jp      nz, invaders_are_moving_right	      ;	no, handle right
0000:159E 21 A4	3E		      ld      hl, 3EA4h				      ;	video ram
0000:15A1 CD C5	15		      call    check_vram_23_bytes		      ;	any pixels in next 23 bytes?
0000:15A4 D0			      ret     nc				      ;	no, exit
0000:15A5 06 FE			      ld      b, 0FEh ;	'ş'                           ; invader x inc (moving left)
0000:15A7 3E 01			      ld      a, 1
0000:15A9	      
0000:15A9	      change_invader_direction:					      ;	CODE XREF: 0000:15C2j
0000:15A9 32 0D	20		      ld      (invader_left_right), a		      ;	store new invader direction
0000:15AC 78			      ld      a, b
0000:15AD 32 08	20		      ld      (invader_x_inc), a		      ;	store new invader x inc
0000:15B0 3A 0E	20		      ld      a, (invader_y_inc_init_value)	      ;	get y inc init value
0000:15B3 32 07	20		      ld      (invader_y_inc), a		      ;	store new invader y inc
0000:15B6 C9			      ret     
0000:15B7	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:15B7	      
0000:15B7	      invaders_are_moving_right:				      ;	CODE XREF: 0000:159Bj
0000:15B7 21 24	25		      ld      hl, 2524h				      ;	video ram
0000:15BA CD C5	15		      call    check_vram_23_bytes		      ;	any pixels in next 23 bytes?
0000:15BD D0			      ret     nc				      ;	no, exit
0000:15BE CD F1	18		      call    check_only_1_invader_left
0000:15C1 AF			      xor     a					      ;	flag invader direction = left
0000:15C2 C3 A9	15		      jp      change_invader_direction
0000:15C5	      
0000:15C5	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:15C5	      
0000:15C5	      
0000:15C5	      check_vram_23_bytes:					      ;	CODE XREF: 0000:15A1p
0000:15C5 06 17									      ;	0000:15BAp
0000:15C5			      ld      b, 23
0000:15C7	      
0000:15C7	      loc_0_15C7:						      ;	CODE XREF: check_vram_23_bytes+9j
0000:15C7 7E			      ld      a, (hl)
0000:15C8 A7			      and     a					      ;	any pixels at this location?
0000:15C9 C2 6B	16		      jp      nz, scf_and_ret			      ;	yes, flag and return
0000:15CC 23			      inc     hl				      ;	next vram loc
0000:15CD 05			      dec     b					      ;	done?
0000:15CE C2 C7	15		      jp      nz, loc_0_15C7			      ;	no, loop
0000:15D1 C9			      ret     
0000:15D1	      ;	End of function	check_vram_23_bytes
0000:15D1	      
0000:15D1	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:15D2 00			      .db    0 ;  
0000:15D3	      
0000:15D3	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:15D3	      
0000:15D3	      
0000:15D3	      draw_shifted_bitmap:					      ;	CODE XREF: draw_invader+33p
0000:15D3 CD 74	14								      ;	update_player_bullet+4Fp ...
0000:15D3			      call    set_shifter_and_calc_vram_addr
0000:15D6 E5			      push    hl				      ;	save pixel offset
0000:15D7	      
0000:15D7	      draw_shifted_bitmap_hl_de_b_:				      ;	CODE XREF: draw_shifted_bitmap+1Bj
0000:15D7 C5			      push    bc				      ;	save length
0000:15D8 E5			      push    hl				      ;	save vram addr
0000:15D9 1A			      ld      a, (de)				      ;	get first bitmap byte
0000:15DA D3 04			      out     (4), a
0000:15DC DB 03			      in      a, (3)				      ;	shift it
0000:15DE 77			      ld      (hl), a				      ;	move shifted value to screen
0000:15DF 23			      inc     hl				      ;	next vram loc
0000:15E0 13			      inc     de				      ;	next bitmap byte
0000:15E1 AF			      xor     a					      ;	lsb=0
0000:15E2 D3 04			      out     (4), a
0000:15E4 DB 03			      in      a, (3)				      ;	shift it
0000:15E6 77			      ld      (hl), a				      ;	move shifted value to vram
0000:15E7 E1			      pop     hl
0000:15E8 01 20	00		      ld      bc, 20h ;	' '
0000:15EB 09			      add     hl, bc				      ;	next line
0000:15EC C1			      pop     bc
0000:15ED 05			      dec     b					      ;	finished bitmap?
0000:15EE C2 D7	15		      jp      nz, draw_shifted_bitmap_hl_de_b_	      ;	no, loop
0000:15F1 E1			      pop     hl				      ;	return pixel offset
0000:15F2 C9			      ret     
0000:15F2	      ;	End of function	draw_shifted_bitmap
0000:15F2	      
0000:15F3	      
0000:15F3	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:15F3	      
0000:15F3	      
0000:15F3	      count_invaders_left:					      ;	CODE XREF: 0000:0825p
0000:15F3 CD 11	16		      call    set_hl_ptr_curr_player_data
0000:15F6 01 00	37		      ld      bc, 3700h				      ;	b=55, c=0
0000:15F9	      
0000:15F9	      loc_0_15F9:						      ;	CODE XREF: count_invaders_left+Ej
0000:15F9 7E			      ld      a, (hl)				      ;	invader	map?
0000:15FA A7			      and     a					      ;	invader	there?
0000:15FB CA FF	15		      jp      z, loc_0_15FF			      ;	no, skip
0000:15FE 0C			      inc     c					      ;	inc invader count
0000:15FF	      
0000:15FF	      loc_0_15FF:						      ;	CODE XREF: count_invaders_left+8j
0000:15FF 23			      inc     hl				      ;	next map location
0000:1600 05			      dec     b					      ;	done?
0000:1601 C2 F9	15		      jp      nz, loc_0_15F9			      ;	no, loop
0000:1604 79			      ld      a, c				      ;	number of invaders left
0000:1605 32 82	20		      ld      (num_invaders_left), a		      ;	store
0000:1608 FE 01			      cp      1					      ;	1 left?
0000:160A C0			      ret     nz				      ;	no, exit
0000:160B 21 6B	20		      ld      hl, 206Bh
0000:160E 36 01			      ld      (hl), 1				      ;	flag only 1 invader left
0000:1610 C9			      ret     
0000:1610	      ;	End of function	count_invaders_left
0000:1610	      
0000:1611	      
0000:1611	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1611	      
0000:1611	      
0000:1611	      set_hl_ptr_curr_player_data:				      ;	CODE XREF: get_curr_player_num_shipsp
0000:1611 2E 00									      ;	count_invaders_leftp
0000:1611			      ld      l, 0
0000:1613 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:1616 67			      ld      h, a
0000:1617 C9			      ret     
0000:1617	      ;	End of function	set_hl_ptr_curr_player_data
0000:1617	      
0000:1618	      
0000:1618	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1618	      
0000:1618	      
0000:1618	      poll_fire_button:						      ;	CODE XREF: 0000:081Fp
0000:1618 3A 15	20								      ;	0000:0B71p
0000:1618			      ld      a, (gameplay_ticker)
0000:161B FE FF			      cp      0FFh				      ;	ready to poll player controls?
0000:161D C0			      ret     nz				      ;	no, exit
0000:161E 21 10	20		      ld      hl, 2010h
0000:1621 7E			      ld      a, (hl)
0000:1622 23			      inc     hl
0000:1623 46			      ld      b, (hl)
0000:1624 B0			      or      b
0000:1625 C0			      ret     nz
0000:1626 3A 25	20		      ld      a, (fire_progress_state)
0000:1629 A7			      and     a					      ;	already	firing?
0000:162A C0			      ret     nz				      ;	yes, exit
0000:162B 3A EF	20		      ld      a, (game_in_progress)
0000:162E A7			      and     a					      ;	is someone playing?
0000:162F CA 52	16		      jp      z, handle_demo_logic		      ;	no, skip
0000:1632 3A 2D	20		      ld      a, (last_fire_button_state)
0000:1635 A7			      and     a
0000:1636 C2 48	16		      jp      nz, fire_falling_edge_detect	      ;	catch leading edge of button press
0000:1639 CD C0	17		      call    read_player_controller
0000:163C E6 10			      and     10h				      ;	only interested	in fire	button
0000:163E C8			      ret     z					      ;	not pressed - return
0000:163F 3E 01			      ld      a, 1
0000:1641 32 25	20		      ld      (fire_progress_state), a		      ;	only loaded on leading edge
0000:1644 32 2D	20		      ld      (last_fire_button_state),	a
0000:1647 C9			      ret     
0000:1648	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1648	      
0000:1648	      fire_falling_edge_detect:					      ;	CODE XREF: poll_fire_button+1Ej
0000:1648 CD C0	17		      call    read_player_controller
0000:164B E6 10			      and     10h				      ;	only interested	in fire	button
0000:164D C0			      ret     nz				      ;	pressed	- exit
0000:164E 32 2D	20		      ld      (last_fire_button_state),	a
0000:1651 C9			      ret     
0000:1652	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1652	      
0000:1652	      handle_demo_logic:					      ;	CODE XREF: poll_fire_button+17j
0000:1652 21 25	20		      ld      hl, 2025h				      ;	ptr fire progress state
0000:1655 36 01			      ld      (hl), 1				      ;	simulate fire button press
0000:1655									      ;	- note that demo always	firing if possible
0000:1657 2A ED	20		      ld      hl, (ptr_demo_joystick_input)	      ;	ptr next logic byte
0000:165A 23			      inc     hl
0000:165B 7D			      ld      a, l
0000:165C FE 7E			      cp      7Eh ; '~'                               ; end of logic table?
0000:165E DA 63	16		      jp      c, loc_0_1663			      ;	no, skip
0000:1661 2E 74			      ld      l, 74h ; 't'                            ; loop near end of table
0000:1663	      
0000:1663	      loc_0_1663:						      ;	CODE XREF: poll_fire_button+46j
0000:1663 22 ED	20		      ld      (ptr_demo_joystick_input), hl	      ;	save ptr next logic byte
0000:1666 7E			      ld      a, (hl)				      ;	get logic
0000:1667 32 1D	20		      ld      (demo_joystick_input), a		      ;	save as	current	'joystick'
0000:166A C9			      ret     
0000:166A	      ;	End of function	poll_fire_button
0000:166A	      
0000:166B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:166B	      
0000:166B	      scf_and_ret:						      ;	CODE XREF: check_vram_23_bytes+4j
0000:166B 37			      scf     
0000:166C C9			      ret     
0000:166D	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:166D	      
0000:166D	      prt_0_ships_left:						      ;	CODE XREF: 0000:02DBj
0000:166D AF			      xor     a					      ;	print '0'
0000:166E CD 8B	1A		      call    prt_num_ships_left
0000:1671	      
0000:1671	      update_hi_score:						      ;	CODE XREF: 0000:196Ej
0000:1671 CD 10	19		      call    set_hl_num_ships_curr_player
0000:1674 36 00			      ld      (hl), 0				      ;	set num	ships curr player = 0
0000:1676 CD CA	09		      call    get_ptr_curr_score
0000:1679 23			      inc     hl
0000:167A 11 F5	20		      ld      de, 20F5h
0000:167D 1A			      ld      a, (de)				      ;	hi score msb
0000:167E BE			      cp      (hl)				      ;	player score msb
0000:167F 1B			      dec     de
0000:1680 2B			      dec     hl				      ;	next lower byte
0000:1681 1A			      ld      a, (de)				      ;	hi score lsb
0000:1682 CA 8B	16		      jp      z, loc_0_168B			      ;	msb same, need another compare
0000:1685 D2 98	16		      jp      nc, loc_0_1698			      ;	no hi score, skip
0000:1688 C3 8F	16		      jp      new_hi_score
0000:168B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:168B	      
0000:168B	      loc_0_168B:						      ;	CODE XREF: 0000:1682j
0000:168B BE			      cp      (hl)				      ;	player score lsb
0000:168C D2 98	16		      jp      nc, loc_0_1698			      ;	no hi score, skip
0000:168F	      
0000:168F	      new_hi_score:						      ;	CODE XREF: 0000:1688j
0000:168F 7E			      ld      a, (hl)				      ;	player score lsb
0000:1690 12			      ld      (de), a				      ;	copy to	hi score lsb
0000:1691 13			      inc     de
0000:1692 23			      inc     hl				      ;	ptr msb
0000:1693 7E			      ld      a, (hl)				      ;	player score msb
0000:1694 12			      ld      (de), a				      ;	copy to	hi score msb
0000:1695 CD 50	19		      call    draw_hi_score
0000:1698	      
0000:1698	      loc_0_1698:						      ;	CODE XREF: 0000:1685j
0000:1698 3A CE	20								      ;	0000:168Cj
0000:1698			      ld      a, (two_p_game)
0000:169B A7			      and     a
0000:169C CA C9	16		      jp      z, game_over_everyone		      ;	only 1 player -	skip
0000:169F 21 03	28		      ld      hl, 2803h				      ;	screen loc
0000:16A2 11 A6	1A		      ld      de, 1AA6h				      ;	"GAME OVER PLAYER"
0000:16A5 0E 14			      ld      c, 14h				      ;	length
0000:16A7 CD 93	0A		      call    draw_str_slowly
0000:16AA 25			      dec     h
0000:16AB 25			      dec     h
0000:16AC 06 1B			      ld      b, 1Bh				      ;	"1"
0000:16AE 3A 67	20		      ld      a, (ptr_curr_player_data)
0000:16B1 0F			      rrca					      ;	player 1?
0000:16B2 DA B7	16		      jp      c, loc_0_16B7			      ;	yes - skip
0000:16B5 06 1C			      ld      b, 1Ch				      ;	"2"
0000:16B7	      
0000:16B7	      loc_0_16B7:						      ;	CODE XREF: 0000:16B2j
0000:16B7 78			      ld      a, b				      ;	player number
0000:16B8 CD FF	08		      call    draw_char_hl_a_			      ;	print "1" or "2"
0000:16BB CD B1	0A		      call    delay_0x40
0000:16BE CD E7	18		      call    get_ptr_num_ships_other_player
0000:16C1 7E			      ld      a, (hl)				      ;	num men
0000:16C2 A7			      and     a					      ;	zero?
0000:16C3 CA C9	16		      jp      z, game_over_everyone		      ;	yes, game over for everyone
0000:16C6 C3 ED	02		      jp      save_player_state			      ;	loop
0000:16C9	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:16C9	      
0000:16C9	      game_over_everyone:					      ;	CODE XREF: 0000:169Cj
0000:16C9 21 18	2D								      ;	0000:16C3j ...
0000:16C9			      ld      hl, 2D18h
0000:16CC 11 A6	1A		      ld      de, 1AA6h				      ;	"GAME OVER"
0000:16CF 0E 0A			      ld      c, 0Ah				      ;	length
0000:16D1 CD 93	0A		      call    draw_str_slowly
0000:16D4 CD B6	0A		      call    delay_0x80
0000:16D7 CD D6	09		      call    clear_visible_display
0000:16DA AF			      xor     a
0000:16DB 32 EF	20		      ld      (game_in_progress), a		      ;	flag no	game in	progress
0000:16DE D3 05			      out     (5), a				      ;	stop sound
0000:16E0 CD D1	19		      call    do_enable_vblank_code
0000:16E3 C3 89	0B		      jp      attract_tick_loop_3
0000:16E6	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:16E6	      
0000:16E6	      kill_player_and_end_game:					      ;	CODE XREF: 0000:1976j
0000:16E6 31 00	24		      ld      sp, 2400h				      ;	reset context
0000:16E9 FB			      ei      
0000:16EA AF			      xor     a
0000:16EB 32 15	20		      ld      (gameplay_ticker), a		      ;	init player control poll counter
0000:16EE	      
0000:16EE	      wait_for_ship_stop_exploding:				      ;	CODE XREF: 0000:16F9j
0000:16EE CD D8	14		      call    update_player_bullet
0000:16F1 06 04			      ld      b, 4				      ;	player ship hit	sound
0000:16F3 CD FA	18		      call    start_port3_sound
0000:16F6 CD 59	0A		      call    check_player_hit			      ;	time to	move on?
0000:16F6									      ;	- wait for ship	to stop	exploding
0000:16F9 C2 EE	16		      jp      nz, wait_for_ship_stop_exploding	      ;	no, loop
0000:16FC CD D7	19		      call    disable_vblank_code
0000:16FF 21 01	27		      ld      hl, 2701h
0000:1702 CD FA	19		      call    clr_ship_display			      ;	wipe remaining ships
0000:1705 AF			      xor     a
0000:1706 CD 8B	1A		      call    prt_num_ships_left		      ;	show 0 ships left
0000:1709 06 FB			      ld      b, 0FBh ;	'û'                           ; mask off player ship hit sound
0000:170B C3 6B	19		      jp      play_sound_and_update_hi_score
0000:170E	      
0000:170E	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:170E	      
0000:170E	      
0000:170E	      update_bomb_frequency:					      ;	CODE XREF: 0000:0832p
0000:170E CD CA	09		      call    get_ptr_curr_score
0000:1711 23			      inc     hl				      ;	skip unused byte
0000:1712 7E			      ld      a, (hl)				      ;	get digit
0000:1713 11 B8	1C		      ld      de, 1CB8h				      ;	ptr 2(00), 10(00), 20(00), 30(00) (BCD)
0000:1716 21 A1	1A		      ld      hl, 1AA1h				      ;	ptr 48,	16, 11,	8, 7
0000:1719 0E 04			      ld      c, 4				      ;	4+1 table entries
0000:171B 47			      ld      b, a				      ;	digit
0000:171C	      
0000:171C	      lookup_bomb_frequency:					      ;	CODE XREF: update_bomb_frequency+16j
0000:171C 1A			      ld      a, (de)				      ;	get table entry
0000:171D B8			      cp      b					      ;	entry >	score digit?
0000:171E D2 27	17		      jp      nc, set_bomb_frequency		      ;	yes, skip
0000:1721 23			      inc     hl				      ;	next entry
0000:1722 13			      inc     de
0000:1723 0D			      dec     c					      ;	done?
0000:1724 C2 1C	17		      jp      nz, lookup_bomb_frequency		      ;	no, loop
0000:1727	      
0000:1727	      set_bomb_frequency:					      ;	CODE XREF: update_bomb_frequency+10j
0000:1727 7E			      ld      a, (hl)				      ;	get corresponding table	entry
0000:1728 32 CF	20		      ld      (bomb_frequency),	a		      ;	set bomb frequency
0000:172B C9			      ret     
0000:172B	      ;	End of function	update_bomb_frequency
0000:172B	      
0000:172C	      
0000:172C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:172C	      
0000:172C	      
0000:172C	      start_stop_shot_sound:					      ;	CODE XREF: 0000:083Bp
0000:172C 3A 25	20		      ld      a, (fire_progress_state)
0000:172F FE 00			      cp      0
0000:1731 C2 39	17		      jp      nz, start_shot_sound
0000:1734 06 FD			      ld      b, 0FDh ;	'ı'                           ; mask off shot sound
0000:1736 C3 DC	19		      jp      stop_port3_sound			      ;	stop shot sound
0000:1739	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1739	      
0000:1739	      start_shot_sound:						      ;	CODE XREF: start_stop_shot_sound+5j
0000:1739 06 02			      ld      b, 2				      ;	shot sound
0000:173B C3 FA	18		      jp      start_port3_sound
0000:173B	      ;	End of function	start_stop_shot_sound
0000:173B	      
0000:173B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:173E 00			      .db    0 ;  
0000:173F 00			      .db    0 ;  
0000:1740	      
0000:1740	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1740	      
0000:1740	      
0000:1740	      do_update_invader_sound:					      ;	CODE XREF: sub_0_38+37p
0000:1740 21 9B	20		      ld      hl, 209Bh				      ;	ptr invader sound counter
0000:1743 35			      dec     (hl)				      ;	time to	stop sound?
0000:1744 CC 6D	17		      call    z, stop_invader_march_sound	      ;	yes, handle
0000:1747 3A 68	20		      ld      a, (byte_0_2068)
0000:174A A7			      and     a
0000:174B CA 6D	17		      jp      z, stop_invader_march_sound
0000:174E 21 96	20		      ld      hl, 2096h
0000:1751 35			      dec     (hl)
0000:1752 C0			      ret     nz				      ;	no, exit
0000:1753 21 98	20		      ld      hl, 2098h				      ;	port 5 sound shadow register
0000:1756 7E			      ld      a, (hl)
0000:1757 D3 05			      out     (5), a				      ;	drive sound h/w
0000:1759 3A 82	20		      ld      a, (num_invaders_left)
0000:175C A7			      and     a					      ;	any invaders left?
0000:175D CA 6D	17		      jp      z, stop_invader_march_sound	      ;	no, exit
0000:1760 2B			      dec     hl				      ;	ptr invader sound delay	re-init	value
0000:1761 7E			      ld      a, (hl)
0000:1762 2B			      dec     hl				      ;	ptr inavder sound delay
0000:1763 77			      ld      (hl), a				      ;	re-init	invader	sound delay
0000:1764 2B			      dec     hl				      ;	ptr flag to update invader sound
0000:1765 36 01			      ld      (hl), 1				      ;	flag as	requiring update
0000:1767 3E 04			      ld      a, 4				      ;	re-init	invader	sound counter
0000:1769 32 9B	20		      ld      (invader_sound_counter), a	      ;	save
0000:176C C9			      ret     
0000:176C	      ;	End of function	do_update_invader_sound
0000:176C	      
0000:176D	      
0000:176D	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:176D	      
0000:176D	      
0000:176D	      stop_invader_march_sound:					      ;	CODE XREF: do_update_invader_sound+4p
0000:176D 3A 98	20								      ;	do_update_invader_sound+Bj ...
0000:176D			      ld      a, (port_5_sound_shadow_reg)
0000:1770	      
0000:1770	      start_stop_ufo_hit_sound:					      ;	CODE XREF: 0000:0753p
0000:1770 E6 30			      and     30h ; '0'                               ; mask off all but ufo hit, screen flip
0000:1772 D3 05			      out     (5), a				      ;	start/stop sound
0000:1774 C9			      ret     
0000:1774	      ;	End of function	stop_invader_march_sound
0000:1774	      
0000:1775	      
0000:1775	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1775	      
0000:1775	      
0000:1775	      check_update_invader_sound:				      ;	CODE XREF: 0000:0849p
0000:1775 3A 95	20		      ld      a, (update_invader_sound)
0000:1778 A7			      and     a					      ;	need to	update invader sound?
0000:1779 CA AA	17		      jp      z, check_bonus_ship_sound		      ;	no, skip
0000:177C 21 11	1A		      ld      hl, 1A11h				      ;	ptr to table of	number of invaders left
0000:177F 11 21	1A		      ld      de, 1A21h				      ;	ptr to table of	corresponding values
0000:1782 3A 82	20		      ld      a, (num_invaders_left)		      ;	get num	invaders left
0000:1785	      
0000:1785	      loc_0_1785:						      ;	CODE XREF: check_update_invader_sound+16j
0000:1785 BE			      cp      (hl)				      ;	more than [entry] invaders left?
0000:1786 D2 8E	17		      jp      nc, calc_next_invader_sound	      ;	yes, exit
0000:1789 23			      inc     hl				      ;	next entry
0000:178A 13			      inc     de				      ;	next entry
0000:178B C3 85	17		      jp      loc_0_1785			      ;	loop
0000:178E	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:178E	      
0000:178E	      calc_next_invader_sound:					      ;	CODE XREF: check_update_invader_sound+11j
0000:178E 1A			      ld      a, (de)				      ;	get corresponding entry
0000:178F 32 97	20		      ld      (unk_0_2097), a
0000:1792 21 98	20		      ld      hl, 2098h				      ;	port 5 sound shadow register
0000:1795 7E			      ld      a, (hl)
0000:1796 E6 30			      and     30h ; '0'                               ; mask out invader sounds
0000:1798 47			      ld      b, a
0000:1799 7E			      ld      a, (hl)
0000:179A E6 0F			      and     0Fh				      ;	current	invader	sound
0000:179C 07			      rlca					      ;	next invader sound
0000:179D FE 10			      cp      10h				      ;	was 4?
0000:179F C2 A4	17		      jp      nz, loc_0_17A4			      ;	no, skip
0000:17A2 3E 01			      ld      a, 1				      ;	set invader sound = 1
0000:17A4	      
0000:17A4	      loc_0_17A4:						      ;	CODE XREF: check_update_invader_sound+2Aj
0000:17A4 B0			      or      b					      ;	restore	other bits
0000:17A5 77			      ld      (hl), a				      ;	save in	shadow register
0000:17A6 AF			      xor     a					      ;	no need	to update invader sound
0000:17A7 32 95	20		      ld      (update_invader_sound), a		      ;	save
0000:17AA	      
0000:17AA	      check_bonus_ship_sound:					      ;	CODE XREF: check_update_invader_sound+4j
0000:17AA 21 99	20		      ld      hl, 2099h				      ;	ptr bonus ship sound timer
0000:17AD 35			      dec     (hl)				      ;	done?
0000:17AE C0			      ret     nz				      ;	no, exit
0000:17AF 06 EF			      ld      b, 0EFh ;	'ï'                           ; mask off bonus ship sound
0000:17B1 C3 DC	19		      jp      stop_port3_sound			      ;	stop bonus ship	sound
0000:17B1	      ;	End of function	check_update_invader_sound
0000:17B1	      
0000:17B4	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:17B4 06 EF			      ld      b, 0EFh ;	'ï'                           ; mask off ufo hit sound
0000:17B6 21 98	20		      ld      hl, 2098h				      ;	port 5 shadow register
0000:17B9 7E			      ld      a, (hl)
0000:17BA A0			      and     b					      ;	mask off ufo hit sound
0000:17BB 77			      ld      (hl), a				      ;	save
0000:17BC D3 05			      out     (5), a				      ;	stop sound
0000:17BE C9			      ret     
0000:17BE	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:17BF 00			      .db    0 ;  
0000:17C0	      
0000:17C0	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:17C0	      
0000:17C0	      
0000:17C0	      read_player_controller:					      ;	CODE XREF: 0000:0363p
0000:17C0 3A 67	20								      ;	poll_fire_button+21p ...
0000:17C0			      ld      a, (ptr_curr_player_data)
0000:17C3 0F			      rrca    
0000:17C4 D2 CA	17		      jp      nc, read_p2_controller
0000:17C7 DB 01			      in      a, (1)				      ;	read controller	1
0000:17C9 C9			      ret     
0000:17CA	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:17CA	      
0000:17CA	      read_p2_controller:					      ;	CODE XREF: read_player_controller+4j
0000:17CA DB 02			      in      a, (2)				      ;	read controller	2
0000:17CC C9			      ret     
0000:17CC	      ;	End of function	read_player_controller
0000:17CC	      
0000:17CD	      
0000:17CD	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:17CD	      
0000:17CD	      
0000:17CD	      handle_tilt:						      ;	CODE XREF: 0000:001Dp
0000:17CD DB 02			      in      a, (2)				      ;	read dipswitches
0000:17CF E6 04			      and     4					      ;	tilt?
0000:17D1 C8			      ret     z					      ;	no, return
0000:17D2 3A 9A	20		      ld      a, (tilted)
0000:17D5 A7			      and     a					      ;	already	titled?
0000:17D6 C0			      ret     nz				      ;	yes, exit
0000:17D7 31 00	24		      ld      sp, 2400h
0000:17DA 06 04			      ld      b, 4				      ;	num times
0000:17DC	      
0000:17DC	      loc_0_17DC:						      ;	CODE XREF: handle_tilt+13j
0000:17DC CD D6	09		      call    clear_visible_display
0000:17DF 05			      dec     b					      ;	done?
0000:17E0 C2 DC	17		      jp      nz, loc_0_17DC			      ;	no, loop
0000:17E3 3E 01			      ld      a, 1
0000:17E5 32 9A	20		      ld      (tilted),	a			      ;	flag already tilted
0000:17E8 CD D7	19		      call    disable_vblank_code
0000:17EB FB			      ei      
0000:17EC 11 BC	1C		      ld      de, 1CBCh				      ;	"TILT"
0000:17EF 21 16	30		      ld      hl, 3016h				      ;	screen loc
0000:17F2 0E 04			      ld      c, 4				      ;	length
0000:17F2	      ;	End of function	handle_tilt
0000:17F2	      
0000:17F4 CD 93	0A		      call    draw_str_slowly			      ;	show tilt message
0000:17F7 CD B1	0A		      call    delay_0x40
0000:17FA AF			      xor     a
0000:17FB 32 9A	20		      ld      (tilted),	a			      ;	reset tilted flag
0000:17FE 32 93	20		      ld      (coined_up), a			      ;	reset coined up
0000:1801 C3 C9	16		      jp      game_over_everyone		      ;	game over for all
0000:1804	      
0000:1804	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1804	      
0000:1804	      
0000:1804	      start_stop_ufo_sound:					      ;	CODE XREF: 0000:084Ep
0000:1804 21 84	20		      ld      hl, 2084h				      ;	ptr ufo	visible	flag
0000:1807 7E			      ld      a, (hl)
0000:1808 A7			      and     a					      ;	is the ufo visible?
0000:1809 CA 07	07		      jp      z, stop_ufo_sound			      ;	no, stop sound
0000:180C 23			      inc     hl				      ;	ptr ufo	hit flag
0000:180D 7E			      ld      a, (hl)
0000:180E A7			      and     a					      ;	ufo hit?
0000:180F C0			      ret     nz				      ;	yes, exit
0000:1810 06 01			      ld      b, 1				      ;	ufo sound
0000:1812 C3 FA	18		      jp      start_port3_sound
0000:1812	      ;	End of function	start_stop_ufo_sound
0000:1812	      
0000:1815	      
0000:1815	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1815	      
0000:1815	      
0000:1815	      show_and_animate_score_table:				      ;	CODE XREF: 0000:0B11p
0000:1815 21 10	28		      ld      hl, 2810h				      ;	screen loc
0000:1818 11 A3	1C		      ld      de, 1CA3h				      ;	"SCORE ADVANCE TABLE"
0000:181B	      
0000:181B	      loc_0_181B:						      ;	length
0000:181B 0E 15			      ld      c, 15h
0000:181D CD F3	08		      call    draw_str_hl_de_
0000:1820 3E 0A			      ld      a, 10				      ;	string length =	10 chars
0000:1822 32 6C	20		      ld      (string_length), a		      ;	save
0000:1825 01 BE	1D		      ld      bc, 1DBEh				      ;	ptr score table	gfx data
0000:1828	      
0000:1828	      loc_0_1828:						      ;	CODE XREF: show_and_animate_score_table+1Cj
0000:1828 CD 56	18		      call    lookup_hl_de_at_bc		      ;	get invader screen loc and bitmap
0000:182B DA 37	18		      jp      c, loc_0_1837			      ;	exit if	finished
0000:182E CD 44	18		      call    draw_bitmap_16_bytes		      ;	draw ufo/invader
0000:1831 C3 28	18		      jp      loc_0_1828			      ;	loop
0000:1834	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1834 CD B1	0A		      call    delay_0x40
0000:1837	      
0000:1837	      loc_0_1837:						      ;	CODE XREF: show_and_animate_score_table+16j
0000:1837 01 CF	1D		      ld      bc, 1DCFh				      ;	ptr score table	strings
0000:1837	      ;	End of function	show_and_animate_score_table
0000:1837	      
0000:183A	      
0000:183A	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:183A	      
0000:183A	      
0000:183A	      draw_multistr_varlen:					      ;	CODE XREF: 0000:0BC0p
0000:183A CD 56	18								      ;	draw_multistr_varlen+7j
0000:183A			      call    lookup_hl_de_at_bc		      ;	get string loc and value
0000:183D D8			      ret     c					      ;	exit if	done
0000:183E CD 4C	18		      call    draw_str_varlen			      ;	draw first string (sets	length)
0000:1841 C3 3A	18		      jp      draw_multistr_varlen		      ;	draw the rest
0000:1841	      ;	End of function	draw_multistr_varlen
0000:1841	      
0000:1844	      
0000:1844	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1844	      
0000:1844	      
0000:1844	      draw_bitmap_16_bytes:					      ;	CODE XREF: show_and_animate_score_table+19p
0000:1844 C5			      push    bc
0000:1845 06 10			      ld      b, 10h
0000:1847 CD 39	14		      call    draw_bitmap_hl_de_b_
0000:184A C1			      pop     bc
0000:184B C9			      ret     
0000:184B	      ;	End of function	draw_bitmap_16_bytes
0000:184B	      
0000:184C	      
0000:184C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:184C	      
0000:184C	      
0000:184C	      draw_str_varlen:						      ;	CODE XREF: 0000:0BB4p
0000:184C C5									      ;	draw_multistr_varlen+4p
0000:184C			      push    bc
0000:184D 3A 6C	20		      ld      a, (string_length)
0000:1850 4F			      ld      c, a				      ;	set length
0000:1851 CD 93	0A		      call    draw_str_slowly
0000:1854 C1			      pop     bc
0000:1855 C9			      ret     
0000:1855	      ;	End of function	draw_str_varlen
0000:1855	      
0000:1856	      
0000:1856	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1856	      
0000:1856	      
0000:1856	      lookup_hl_de_at_bc:					      ;	CODE XREF: 0000:0BB1p
0000:1856 0A									      ;	show_and_animate_score_table+13p ...
0000:1856			      ld      a, (bc)
0000:1857 FE FF			      cp      0FFh				      ;	end of table?
0000:1859 37			      scf					      ;	flag end of table
0000:185A C8			      ret     z					      ;	yes, exit
0000:185B 6F			      ld      l, a
0000:185C 03			      inc     bc
0000:185D 0A			      ld      a, (bc)
0000:185E 67			      ld      h, a				      ;	set hl
0000:185F 03			      inc     bc
0000:1860 0A			      ld      a, (bc)
0000:1861 5F			      ld      e, a
0000:1862 03			      inc     bc
0000:1863 0A			      ld      a, (bc)
0000:1864 57			      ld      d, a				      ;	set de
0000:1865 03			      inc     bc
0000:1866 A7			      and     a					      ;	flag not end of	table
0000:1867 C9			      ret     
0000:1867	      ;	End of function	lookup_hl_de_at_bc
0000:1867	      
0000:1868	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1868	      
0000:1868	      update_animated_invader:					      ;	CODE XREF: update_attract_animations+8j
0000:1868 21 C2	20		      ld      hl, 20C2h				      ;	ptr animation frame counter
0000:186B 34			      inc     (hl)				      ;	next frame
0000:186C 23			      inc     hl				      ;	ptr invader x inc
0000:186D 4E			      ld      c, (hl)				      ;	invader	x inc
0000:186E CD D9	01		      call    add_c_hl1_hl2_hl3			      ;	x += x_inc, y += y_inc
0000:1871 47			      ld      b, a				      ;	invader	x coord
0000:1872 3A CA	20		      ld      a, (animated_invader_final_x)	      ;	invader	final x	coord
0000:1875 B8			      cp      b					      ;	finished this part of animation?
0000:1876 CA 98	18		      jp      z, flag_animation_finished	      ;	yes, exit
0000:1879 3A C2	20		      ld      a, (animation_frame_count)
0000:187C E6 04			      and     4					      ;	2nd invader bitmap? (2nd animation cell)
0000:187E 2A CC	20		      ld      hl, (animated_invader_base_bitmap)      ;	get ptr	base bitmap type
0000:1881 C2 88	18		      jp      nz, draw_animated_invader		      ;	no, skip
0000:1884 11 30	00		      ld      de, 30h ;	'0'
0000:1887 19			      add     hl, de				      ;	ptr to 2nd invader bitmap
0000:1888	      
0000:1888	      draw_animated_invader:					      ;	CODE XREF: 0000:1881j
0000:1888 22 C7	20		      ld      (animated_invader_curr_bitmap), hl
0000:188B 21 C5	20		      ld      hl, 20C5h				      ;	ptr animated invader object
0000:188E CD 3B	1A		      call    extract_DE_HL_B			      ;	get animated invader object params
0000:1891 EB			      ex      de, hl				      ;	screen,	bitmap stored swapped
0000:1892 C3 D3	15		      jp      draw_shifted_bitmap		      ;	draw animated invader
0000:1892	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1895 00			      .db    0 ;  
0000:1896 00			      .db    0 ;  
0000:1897 00			      .db    0 ;  
0000:1898	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1898	      
0000:1898	      flag_animation_finished:					      ;	CODE XREF: 0000:1876j
0000:1898 3E 01			      ld      a, 1
0000:189A 32 CB	20		      ld      (animation_finished), a
0000:189D C9			      ret     
0000:189E	      
0000:189E	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:189E	      
0000:189E	      
0000:189E	      animate_bomb_c_dropping:					      ;	CODE XREF: 0000:0BD7p
0000:189E 21 50	20		      ld      hl, 2050h				      ;	ptr alien bomb 3 data
0000:18A1 11 C0	1B		      ld      de, 1BC0h
0000:18A4 06 10			      ld      b, 10h
0000:18A6 CD 32	1A		      call    memcpy_hl_de_b_			      ;	re-init	alien bomb 3
0000:18A9 3E 02			      ld      a, 2
0000:18AB 32 80	20		      ld      (byte_0_2080), a
0000:18AE 3E FF			      ld      a, 0FFh
0000:18B0 32 7E	20		      ld      (alien_bomb_y_inc), a		      ;	init alien bomb	y inc
0000:18B3 3E 04			      ld      a, 4				      ;	set bomb-c animation
0000:18B5 32 C1	20		      ld      (animation_type),	a
0000:18B8	      
0000:18B8	      loc_0_18B8:						      ;	CODE XREF: animate_bomb_c_dropping+1Fj
0000:18B8 3A 55	20		      ld      a, (alien_bomb_3_data)
0000:18BB E6 01			      and     1					      ;	has bomb animation started?
0000:18BD CA B8	18		      jp      z, loc_0_18B8			      ;	no, loop
0000:18C0	      
0000:18C0	      loc_0_18C0:						      ;	CODE XREF: animate_bomb_c_dropping+27j
0000:18C0 3A 55	20		      ld      a, (alien_bomb_3_data)
0000:18C3 E6 01			      and     1					      ;	has bomb animation finished?
0000:18C5 C2 C0	18		      jp      nz, loc_0_18C0			      ;	no, loop
0000:18C8 21 11	33		      ld      hl, 3311h				      ;	screen loc
0000:18CB 3E 26			      ld      a, 26h ; '&'                            ; " "
0000:18CD 00			      nop     
0000:18CE CD FF	08		      call    draw_char_hl_a_			      ;	clear "C"
0000:18D1 C3 B6	0A		      jp      delay_0x80
0000:18D1	      ;	End of function	animate_bomb_c_dropping
0000:18D1	      
0000:18D4	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:18D4	      
0000:18D4	      start:							      ;	CODE XREF: 0000:0003j
0000:18D4 31 00	24		      ld      sp, 2400h				      ;	video ram
0000:18D7 06 00			      ld      b, 0				      ;	256 vars to init
0000:18D9 CD E6	01		      call    init_vars_b_
0000:18DC CD 56	19		      call    update_screen_text
0000:18DF	      
0000:18DF	      set_max_bomb_frequency:					      ;	CODE XREF: 0000:0BE5j
0000:18DF 3E 08			      ld      a, 8				      ;	init bombing frequency to max
0000:18E1 32 CF	20		      ld      (bomb_frequency),	a		      ;	store
0000:18E4 C3 EA	0A		      jp      attract_mode_loop
0000:18E7	      
0000:18E7	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:18E7	      
0000:18E7	      
0000:18E7	      get_ptr_num_ships_other_player:				      ;	CODE XREF: 0000:02DEp
0000:18E7 3A 67	20								      ;	0000:16BEp
0000:18E7			      ld      a, (ptr_curr_player_data)
0000:18EA 21 E7	20		      ld      hl, 20E7h				      ;	num_men_p1
0000:18ED 0F			      rrca					      ;	curr player 2?
0000:18EE D0			      ret     nc				      ;	yes, exit
0000:18EF 23			      inc     hl				      ;	num_men_p2
0000:18F0 C9			      ret     
0000:18F0	      ;	End of function	get_ptr_num_ships_other_player
0000:18F0	      
0000:18F1	      
0000:18F1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:18F1	      
0000:18F1	      
0000:18F1	      check_only_1_invader_left:				      ;	CODE XREF: 0000:15BEp
0000:18F1 06 02			      ld      b, 2
0000:18F3 3A 82	20		      ld      a, (num_invaders_left)
0000:18F6 3D			      dec     a					      ;	more than 1 invader left?
0000:18F7 C0			      ret     nz				      ;	yes, exit
0000:18F8 04			      inc     b
0000:18F9 C9			      ret     
0000:18F9	      ;	End of function	check_only_1_invader_left
0000:18F9	      
0000:18FA	      
0000:18FA	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:18FA	      
0000:18FA	      
0000:18FA	      start_port3_sound:					      ;	CODE XREF: 0000:081Cp
0000:18FA 3A 94	20								      ;	0000:0846p ...
0000:18FA			      ld      a, (port3_sound_shadow_reg)
0000:18FD B0			      or      b
0000:18FE 32 94	20		      ld      (port3_sound_shadow_reg),	a
0000:1901 D3 03			      out     (3), a
0000:1903 C9			      ret     
0000:1903	      ;	End of function	start_port3_sound
0000:1903	      
0000:1904	      
0000:1904	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1904	      
0000:1904	      
0000:1904	      init_p2_invader_map:					      ;	CODE XREF: 0000:07E7p
0000:1904 21 00	22								      ;	0000:0A2Dp
0000:1904			      ld      hl, 2200h
0000:1907 C3 C3	01		      jp      init_invader_map
0000:1907	      ;	End of function	init_p2_invader_map
0000:1907	      
0000:190A	      
0000:190A	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:190A	      
0000:190A	      
0000:190A	      update_player_bullet_invader_dir:				      ;	CODE XREF: 0000:0822p
0000:190A CD D8	14								      ;	update_p_bullet_inv_dir_chk_eastp
0000:190A			      call    update_player_bullet
0000:190D C3 97	15		      jp      check_handle_invader_direction
0000:190D	      ;	End of function	update_player_bullet_invader_dir
0000:190D	      
0000:1910	      
0000:1910	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1910	      
0000:1910	      
0000:1910	      set_hl_num_ships_curr_player:				      ;	CODE XREF: handle_bonus_shipp
0000:1910 21 E7	20								      ;	handle_bonus_ship+36p ...
0000:1910			      ld      hl, 20E7h				      ;	number of ships	left for player	1
0000:1913 3A 67	20		      ld      a, (ptr_curr_player_data)		      ;	current	player
0000:1916 0F			      rrca					      ;	player 1?
0000:1917 D8			      ret     c					      ;	yes, exit
0000:1918 23			      inc     hl				      ;	number ships left for player 2
0000:1919 C9			      ret     
0000:1919	      ;	End of function	set_hl_num_ships_curr_player
0000:1919	      
0000:191A	      
0000:191A	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:191A	      
0000:191A	      
0000:191A	      draw_score_hdr:						      ;	CODE XREF: update_screen_text+3p
0000:191A 0E 1C			      ld      c, 1Ch				      ;	length
0000:191C 21 1E	24		      ld      hl, 241Eh				      ;	screen loc
0000:191F 11 E4	1A		      ld      de, 1AE4h				      ;	"SCORE <1> HI-SCORE SCORE <2>"
0000:1922 C3 F3	08		      jp      draw_str_hl_de_
0000:1922	      ;	End of function	draw_score_hdr
0000:1922	      
0000:1925	      
0000:1925	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1925	      
0000:1925	      
0000:1925	      draw_p1_score:						      ;	CODE XREF: 0000:07B2p
0000:1925 21 F8	20								      ;	update_screen_text+6p
0000:1925			      ld      hl, 20F8h				      ;	p1 score
0000:1928 C3 31	19		      jp      draw_bcd_word_from_table
0000:1928	      ;	End of function	draw_p1_score
0000:1928	      
0000:192B	      
0000:192B	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:192B	      
0000:192B	      
0000:192B	      draw_p2_score:						      ;	CODE XREF: 0000:07B5p
0000:192B 21 FC	20								      ;	update_screen_text+9p
0000:192B			      ld      hl, 20FCh				      ;	p2 score
0000:192E C3 31	19		      jp      draw_bcd_word_from_table
0000:1931	      
0000:1931	      draw_bcd_word_from_table:					      ;	CODE XREF: show_PLAY_PLAYER+29p
0000:1931 5E									      ;	draw_p1_score+3j ...
0000:1931			      ld      e, (hl)
0000:1932 23			      inc     hl
0000:1933 56			      ld      d, (hl)				      ;	de = bcd word
0000:1934 23			      inc     hl
0000:1935 7E			      ld      a, (hl)
0000:1936 23			      inc     hl
0000:1937 66			      ld      h, (hl)
0000:1938 6F			      ld      l, a				      ;	hl = screen loc
0000:1939 C3 AD	09		      jp      draw_bcd_word_de_
0000:1939	      ;	End of function	draw_p2_score
0000:1939	      
0000:193C	      
0000:193C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:193C	      
0000:193C	      
0000:193C	      print_CREDIT:						      ;	CODE XREF: update_screen_text+Fp
0000:193C 0E 07									      ;	draw_credit_display+6j
0000:193C			      ld      c, 7				      ;	length
0000:193E 21 01	35		      ld      hl, 3501h				      ;	screen loc
0000:1941 11 A9	1F		      ld      de, 1FA9h				      ;	"CREDIT "
0000:1944 C3 F3	08		      jp      draw_str_hl_de_
0000:1944	      ;	End of function	print_CREDIT
0000:1944	      
0000:1947	      
0000:1947	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1947	      
0000:1947	      
0000:1947	      draw_credits:						      ;	CODE XREF: sub_0_38+3p
0000:1947 3A EB	20								      ;	0000:07A6p ...
0000:1947			      ld      a, (num_credits)
0000:194A 21 01	3C		      ld      hl, 3C01h
0000:194D C3 B2	09		      jp      draw_bcd_byte_a_
0000:194D	      ;	End of function	draw_credits
0000:194D	      
0000:1950	      
0000:1950	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1950	      
0000:1950	      
0000:1950	      draw_hi_score:						      ;	CODE XREF: 0000:1695p
0000:1950 21 F4	20								      ;	update_screen_text+Cp
0000:1950			      ld      hl, 20F4h
0000:1953 C3 31	19		      jp      draw_bcd_word_from_table
0000:1953	      ;	End of function	draw_hi_score
0000:1953	      
0000:1956	      
0000:1956	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1956	      
0000:1956	      
0000:1956	      update_screen_text:					      ;	CODE XREF: 0000:07C8p
0000:1956 CD 5C	1A								      ;	0000:18DCp
0000:1956			      call    clear_screen
0000:1959 CD 1A	19		      call    draw_score_hdr
0000:195C CD 25	19		      call    draw_p1_score
0000:195F CD 2B	19		      call    draw_p2_score
0000:1962 CD 50	19		      call    draw_hi_score
0000:1965 CD 3C	19		      call    print_CREDIT
0000:1968 C3 47	19		      jp      draw_credits
0000:1968	      ;	End of function	update_screen_text
0000:1968	      
0000:196B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:196B	      
0000:196B	      play_sound_and_update_hi_score:				      ;	CODE XREF: 0000:170Bj
0000:196B CD DC	19		      call    stop_port3_sound
0000:196E C3 71	16		      jp      update_hi_score
0000:1971	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1971	      
0000:1971	      handle_invasion:						      ;	CODE XREF: update_next_invader_check_invasi+2Cj
0000:1971 3E 01			      ld      a, 1				      ;	flag invasion
0000:1973 32 6D	20		      ld      (invaded), a			      ;	save
0000:1976 C3 E6	16		      jp      kill_player_and_end_game		      ;	exit and reset context
0000:1979	      
0000:1979	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1979	      
0000:1979	      
0000:1979	      draw_credit_display:					      ;	CODE XREF: 0000:076Ep
0000:1979 CD D7	19		      call    disable_vblank_code
0000:197C CD 47	19		      call    draw_credits
0000:197F C3 3C	19		      jp      print_CREDIT
0000:197F	      ;	End of function	draw_credit_display
0000:197F	      
0000:1982	      
0000:1982	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1982	      
0000:1982	      
0000:1982	      set_animation_type:					      ;	CODE XREF: 0000:0AEFp
0000:1982 32 C1	20		      ld      (animation_type),	a
0000:1985 C9			      ret     
0000:1985	      ;	End of function	set_animation_type
0000:1985	      
0000:1985	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1986 8B 19			      .dw 198Bh
0000:1988	      
0000:1988	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1988	      
0000:1988	      
0000:1988	      j_clear_visible_display:					      ;	CODE XREF: 0000:0B90p
0000:1988 C3 D6	09		      jp      clear_visible_display
0000:1988	      ;	End of function	j_clear_visible_display
0000:1988	      
0000:198B	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:198B 21 03	28		      ld      hl, 2803h				      ;	screen loc
0000:198E 11 BE	19		      ld      de, 19BEh				      ;	"TAITO CORPORATION"
0000:1991 0E 13			      ld      c, 19				      ;	length
0000:1993 C3 F3	08		      jp      draw_str_hl_de_
0000:1993	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1996 00			      .db    0 ;  
0000:1997 00			      .db    0 ;  
0000:1998 00			      .db    0 ;  
0000:1999 00			      .db    0 ;  
0000:199A	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:199A	      
0000:199A	      check_TAITO_easter_egg:					      ;	CODE XREF: update_p_bullet_inv_dir_chk_east+3j
0000:199A 3A 1E	20		      ld      a, (enable_taito_easter_egg)
0000:199D A7			      and     a					      ;	easter egg enabled?
0000:199E C2 AC	19		      jp      nz, TAITO_easter_egg		      ;	yes, handle
0000:19A1 DB 01			      in      a, (1)				      ;	read controller	1
0000:19A3 E6 76			      and     1110110b				      ;	only interested	in player controls
0000:19A5 D6 72			      sub     1110010b				      ;	2P+fire+left+right
0000:19A7 C0			      ret     nz
0000:19A8 3C			      inc     a					      ;	flag easter egg	enabled
0000:19A9 32 1E	20		      ld      (enable_taito_easter_egg), a
0000:19AC	      
0000:19AC	      TAITO_easter_egg:						      ;	CODE XREF: 0000:199Ej
0000:19AC DB 01			      in      a, (1)				      ;	read controller	1
0000:19AE E6 76			      and     1110110b				      ;	only interested	in player controls
0000:19B0 FE 34			      cp      110100b				      ;	1P+fire+left
0000:19B2 C0			      ret     nz				      ;	no - exit
0000:19B3 21 1B	2E		      ld      hl, 2E1Bh				      ;	screen loc
0000:19B6 11 F7	0B		      ld      de, 0BF7h				      ;	"TAITO COP"
0000:19B9 0E 09			      ld      c, 9				      ;	length
0000:19BB C3 F3	08		      jp      draw_str_hl_de_
0000:19BB	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:19BE 28			      .db  28h ; (
0000:19BF 13 00	08 13+		      .db 13h, 0, 8, 13h, 0Eh, 26h, 2, 0Eh, 11h, 0Fh, 0Eh, 11h ; "TAITO CORPORATION"
0000:19BF 0E 26	02 0E+		      .db 0, 13h, 8, 0Eh, 0Dh
0000:19D0 28			      .db  28h ; (
0000:19D1	      
0000:19D1	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:19D1	      
0000:19D1	      
0000:19D1	      do_enable_vblank_code:					      ;	CODE XREF: 0000:0817p
0000:19D1 3E 01									      ;	0000:16E0p
0000:19D1			      ld      a, 1				      ;	flag vblank code enabled
0000:19D3	      
0000:19D3	      enable_disable_vblank_code:				      ;	CODE XREF: disable_vblank_code+1j
0000:19D3 32 E9	20		      ld      (enable_vblank_code), a
0000:19D6 C9			      ret     
0000:19D6	      ;	End of function	do_enable_vblank_code
0000:19D6	      
0000:19D7	      
0000:19D7	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:19D7	      
0000:19D7	      
0000:19D7	      disable_vblank_code:					      ;	CODE XREF: 0000:02D4p
0000:19D7 AF									      ;	0000:07B8p ...
0000:19D7			      xor     a					      ;	flag vblank code disabled
0000:19D8 C3 D3	19		      jp      enable_disable_vblank_code
0000:19D8	      ;	End of function	disable_vblank_code
0000:19D8	      
0000:19D8	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:19DB 00			      .db    0 ;  
0000:19DC	      
0000:19DC	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:19DC	      
0000:19DC	      
0000:19DC	      stop_port3_sound:						      ;	CODE XREF: 0000:02C3p
0000:19DC 3A 94	20								      ;	0000:06D8p ...
0000:19DC			      ld      a, (port3_sound_shadow_reg)
0000:19DF A0			      and     b					      ;	apply mask
0000:19E0 32 94	20		      ld      (port3_sound_shadow_reg),	a	      ;	save it
0000:19E3 D3 03			      out     (3), a				      ;	stop sound
0000:19E5 C9			      ret     
0000:19E5	      ;	End of function	stop_port3_sound
0000:19E5	      
0000:19E6	      
0000:19E6	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:19E6	      
0000:19E6	      
0000:19E6	      draw_player_ships:					      ;	CODE XREF: show_ships_left+8p
0000:19E6 21 01	27		      ld      hl, 2701h
0000:19E9 CA FA	19		      jp      z, clr_ship_display		      ;	no ships to draw - skip
0000:19EC	      
0000:19EC	      draw_player_ships_a_:					      ;	CODE XREF: draw_player_ships+11j
0000:19EC 11 60	1C		      ld      de, 1C60h				      ;	player ship
0000:19EF 06 10			      ld      b, 10h				      ;	size
0000:19F1 4F			      ld      c, a				      ;	save num ships
0000:19F2 CD 39	14		      call    draw_bitmap_hl_de_b_
0000:19F5 79			      ld      a, c				      ;	restore	num ships
0000:19F6 3D			      dec     a					      ;	next ship
0000:19F7 C2 EC	19		      jp      nz, draw_player_ships_a_
0000:19FA	      
0000:19FA	      clr_ship_display:						      ;	CODE XREF: 0000:1702p
0000:19FA 06 10									      ;	draw_player_ships+3j ...
0000:19FA			      ld      b, 10h				      ;	bitmap size
0000:19FC CD CB	14		      call    clr_chr_hl_b_
0000:19FF 7C			      ld      a, h
0000:1A00 FE 35			      cp      53
0000:1A02 C2 FA	19		      jp      nz, clr_ship_display
0000:1A05 C9			      ret     
0000:1A05	      ;	End of function	draw_player_ships
0000:1A05	      
0000:1A06	      
0000:1A06	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A06	      
0000:1A06	      
0000:1A06	      sub_0_1A06:						      ;	CODE XREF: 0000:03BEp
0000:1A06 21 72	20								      ;	handle_alien_bombing+61p ...
0000:1A06			      ld      hl, 2072h				      ;	which interrupt?
0000:1A09 46			      ld      b, (hl)				      ;	b = RST8/10
0000:1A0A 1A			      ld      a, (de)				      ;	msb of vram addr
0000:1A0B E6 80			      and     80h ; '€'
0000:1A0D A8			      xor     b
0000:1A0E C0			      ret     nz
0000:1A0F 37			      scf     
0000:1A10 C9			      ret     
0000:1A10	      ;	End of function	sub_0_1A06
0000:1A10	      
0000:1A10	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1A11 32 2B	24 1C+		      .db 50, 43, 36, 28, 22, 17, 13, 10, 8, 7,	6, 5, 4, 3, 2 ;	table of number	of invaders left
0000:1A11 16 11	0D 0A+		      .db 1					      ;	-to do with inavder sound generation
0000:1A21 34 2E	27 22+		      .db 52, 46, 39, 34, 28, 24, 21, 19, 16, 14, 13, 12, 11 ; table of	entries	corresponding to above
0000:1A21 1C 18	15 13+		      .db 9, 7,	5
0000:1A31 FF			      .db 0FFh ;  
0000:1A32	      
0000:1A32	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A32	      
0000:1A32	      
0000:1A32	      memcpy_hl_de_b_:						      ;	CODE XREF: init_vars_b_+6j
0000:1A32 1A									      ;	init_p1_shields+11p ...
0000:1A32			      ld      a, (de)
0000:1A33 77			      ld      (hl), a
0000:1A34 23			      inc     hl
0000:1A35 13			      inc     de
0000:1A36 05			      dec     b
0000:1A37	      
0000:1A37	      loc_0_1A37:
0000:1A37 C2 32	1A		      jp      nz, memcpy_hl_de_b_
0000:1A3A C9			      ret     
0000:1A3A	      ;	End of function	memcpy_hl_de_b_
0000:1A3A	      
0000:1A3B	      
0000:1A3B	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A3B	      
0000:1A3B	      
0000:1A3B	      extract_DE_HL_B:						      ;	CODE XREF: 0000:0372p
0000:1A3B 5E									      ;	get_p_bullet_expl_params+3j ...
0000:1A3B			      ld      e, (hl)
0000:1A3C 23			      inc     hl
0000:1A3D 56			      ld      d, (hl)				      ;	DE
0000:1A3E 23			      inc     hl
0000:1A3F 7E			      ld      a, (hl)				      ;	then A -> L
0000:1A40 23			      inc     hl
0000:1A41 4E			      ld      c, (hl)				      ;	then C -> H
0000:1A42 23			      inc     hl
0000:1A43 46			      ld      b, (hl)				      ;	then B
0000:1A44 61			      ld      h, c
0000:1A45 6F			      ld      l, a
0000:1A46 C9			      ret     
0000:1A46	      ;	End of function	extract_DE_HL_B
0000:1A46	      
0000:1A47	      
0000:1A47	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A47	      
0000:1A47	      
0000:1A47	      calc_vram_addr_from_pixel_offset:				      ;	CODE XREF: 0000:0375p
0000:1A47 C5									      ;	calc_vram_ufo+6j ...
0000:1A47			      push    bc
0000:1A48 06 03			      ld      b, 3
0000:1A4A	      
0000:1A4A	      loc_0_1A4A:						      ;	CODE XREF: calc_vram_addr_from_pixel_offset+Aj
0000:1A4A 7C			      ld      a, h				      ;	hl = graphic coordinate
0000:1A4B 1F			      rra     
0000:1A4C 67			      ld      h, a
0000:1A4D 7D			      ld      a, l
0000:1A4E 1F			      rra     
0000:1A4F 6F			      ld      l, a
0000:1A50 05			      dec     b
0000:1A51 C2 4A	1A		      jp      nz, loc_0_1A4A			      ;	calculate byte offset
0000:1A54 7C			      ld      a, h
0000:1A55 E6 3F			      and     3Fh ; '?'
0000:1A57 F6 20			      or      20h ; ' '                               ; adjust to vram base address
0000:1A59 67			      ld      h, a
0000:1A5A C1			      pop     bc
0000:1A5B C9			      ret     
0000:1A5B	      ;	End of function	calc_vram_addr_from_pixel_offset
0000:1A5B	      
0000:1A5C	      
0000:1A5C	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A5C	      
0000:1A5C	      
0000:1A5C	      clear_screen:						      ;	CODE XREF: update_screen_textp
0000:1A5C 21 00	24		      ld      hl, 2400h				      ;	video ram
0000:1A5F	      
0000:1A5F	      cls_loop:							      ;	CODE XREF: clear_screen+9j
0000:1A5F 36 00			      ld      (hl), 0
0000:1A61 23			      inc     hl
0000:1A62 7C			      ld      a, h
0000:1A63 FE 40			      cp      40h ; '@'
0000:1A65 C2 5F	1A		      jp      nz, cls_loop
0000:1A68 C9			      ret     
0000:1A68	      ;	End of function	clear_screen
0000:1A68	      
0000:1A69	      
0000:1A69	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A69	      
0000:1A69	      
0000:1A69	      restore_1_shield:						      ;	CODE XREF: draw_p1_shields+18p
0000:1A69 C5									      ;	restore_1_shield+12j
0000:1A69			      push    bc
0000:1A6A E5			      push    hl
0000:1A6B	      
0000:1A6B	      loc_0_1A6B:						      ;	CODE XREF: restore_1_shield+8j
0000:1A6B 1A			      ld      a, (de)				      ;	get shield data
0000:1A6C B6			      or      (hl)
0000:1A6D 77			      ld      (hl), a				      ;	copy to	screen
0000:1A6E 13			      inc     de
0000:1A6F 23			      inc     hl
0000:1A70 0D			      dec     c					      ;	done 1 row?
0000:1A71 C2 6B	1A		      jp      nz, loc_0_1A6B			      ;	no, loop
0000:1A74 E1			      pop     hl				      ;	screen loc
0000:1A75 01 20	00		      ld      bc, 20h ;	' '
0000:1A78 09			      add     hl, bc				      ;	next line
0000:1A79 C1			      pop     bc
0000:1A7A 05			      dec     b					      ;	done all rows in shield?
0000:1A7B C2 69	1A		      jp      nz, restore_1_shield		      ;	no, loop
0000:1A7E C9			      ret     
0000:1A7E	      ;	End of function	restore_1_shield
0000:1A7E	      
0000:1A7F	      
0000:1A7F	      ;	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ	S U B R	O U T I	N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
0000:1A7F	      
0000:1A7F	      
0000:1A7F	      show_ships_left:						      ;	CODE XREF: 0000:0326p
0000:1A7F CD 2E	09								      ;	0000:032Cp ...
0000:1A7F			      call    get_curr_player_num_ships
0000:1A82 A7			      and     a
0000:1A83 C8			      ret     z
0000:1A84 F5			      push    af				      ;	save num ships
0000:1A85 3D			      dec     a					      ;	drawing	one less (extra	ships left)
0000:1A86 77			      ld      (hl), a				      ;	save num ships
0000:1A87 CD E6	19		      call    draw_player_ships
0000:1A8A F1			      pop     af				      ;	restore	num ships
0000:1A8B	      
0000:1A8B	      prt_num_ships_left:					      ;	CODE XREF: handle_bonus_ship+33p
0000:1A8B 21 01	25								      ;	0000:166Ep ...
0000:1A8B			      ld      hl, 2501h
0000:1A8E E6 0F			      and     0Fh
0000:1A90 C3 C5	09		      jp      draw_ascii_digit
0000:1A90	      ;	End of function	show_ships_left
0000:1A90	      
0000:1A90	      ;	ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
0000:1A93 00			      .db    0 ;  
0000:1A94 00			      .db    0 ;  
0000:1A95 00 00	FF B8+		      .db 0, 0,	0FFh, 0B8h, 0FEh, 20h, 1Ch, 10h, 9Eh, 0, 20h ; inverted-y animation pt.1 data
0000:1A95 FE 20	1C 10+		      .db 1Ch
0000:1AA1 30 10	0B 08+		      .db 48, 16, 11, 8, 7			      ;	table of bomb frequency	counters
0000:1AA6 06 00	0C 04+		      .db 6, 0,	0Ch, 4,	26h, 0Eh, 15h, 4, 11h, 26h, 26h, 0Fh ; "GAME OVER PLAYER"
0000:1AA6 26 0E	15 04+		      .db 0Bh, 0, 18h, 4
0000:1AB6 11			      .db  11h ;  
0000:1AB7 24			      .db  24h ; $
0000:1AB8 26			      .db  26h ; &
0000:1AB9 25			      .db  25h ; %
0000:1ABA 1B 26	0E 11+		      .db 1Bh, 26h, 0Eh, 11h, 26h, 1Ch		      ;	"1 OR 2"
0000:1AC0 0F 0B	00 18+		      .db 0Fh, 0Bh, 0, 18h, 4, 11h, 12h		      ;	"PLAYERS"
0000:1AC7 26 01	14 13+		      .db 26h, 1, 14h, 13h, 13h, 0Eh, 0Dh, 26h,	0Eh, 0Dh, 0Bh ;	" BUTTON ONLY"
0000:1AC7 13 0E	0D 26+		      .db 18h
0000:1AD3 26 1B			      .db 26h, 1Bh				      ;	" 1"
0000:1AD5 0F 0B	00 18+		      .db 0Fh, 0Bh, 0, 18h, 4, 11h, 26h, 26h, 1, 14h, 13h, 13h ; "PLAYER  BUTTON "
0000:1AD5 04 11	26 26+		      .db 0Eh, 0Dh, 26h
0000:1AE4 26 12	02 0E+		      .db 26h, 12h, 2, 0Eh, 11h, 4, 24h, 1Bh, 25h, 26h,	7, 8 ; " SCORE<1> HI-SCORE SCORE<2> "
0000:1AE4 11 04	24 1B+		      .db 3Fh, 12h, 2, 0Eh, 11h, 4, 26h, 12h, 2, 0Eh, 11h, 4
0000:1AE4 25 26	07 08+		      .db 24h, 1Ch, 25h, 26h
0000:1B00 01			      .db    1 ;				      ;	initialised variables each game
0000:1B01 00			      .db    0 ;  
0000:1B02 00			      .db    0 ;				      ;	player shot something =	false
0000:1B03 10			      .db 16					      ;	invader	explosion counter
0000:1B04 00			      .db 0					      ;	current	invader	updated	row
0000:1B05 00			      .db    0 ;				      ;	invader	animation frame	no.
0000:1B06 00			      .db    0 ;				      ;	next invader to	update
0000:1B07 00			      .db    0 ;				      ;	invader	y inc
0000:1B08 02			      .db    2 ;				      ;	invader	x inc
0000:1B09 78			      .db 120					      ;	bottom left invader y
0000:1B0A 38			      .db 56					      ;	bottom left invader x
0000:1B0B 78			      .db 120					      ;	current	invader	y
0000:1B0C 38			      .db 56					      ;	current	invader	x
0000:1B0D 00			      .db    0 ;  
0000:1B0E F8			      .db 0F8h ; ø				      ;	invader	y inc (-8)
0000:1B0F 00			      .db    0 ;  
0000:1B10 00			      .db    0 ;				      ;	16 bytes re-init'd every so often
0000:1B10									      ;	if $FF don't execute
0000:1B11 80			      .db  80h ; €
0000:1B12 00			      .db    0 ;  
0000:1B13 8E 02			      .dw 28Eh					      ;	jump vector #1
0000:1B15 FF			      .db 0FFh ;				      ;	gameplay ticker
0000:1B16 05			      .db    5 ;  
0000:1B17 0C			      .db  0Ch ;  
0000:1B18 60 1C			      .dw 1C60h					      ;	ptr player ship	gfx bitmap
0000:1B1A 20 30			      .dw 3020h					      ;	player ship coordinate
0000:1B1C 10			      .db  10h ;  
0000:1B1D 01			      .db    1 ;  
0000:1B1E 00			      .db    0 ;  
0000:1B1F 00			      .db    0 ;  
0000:1B20 00			      .db    0 ;				      ;	if $FF don't execute
0000:1B21 00			      .db    0 ;  
0000:1B22 00			      .db    0 ;  
0000:1B23 BB 03			      .dw 3BBh					      ;	jump vector #2
0000:1B25 00			      .db    0 ;  
0000:1B26 10			      .db  10h ;  
0000:1B27 90			      .db  90h ; 
0000:1B28 1C			      .db  1Ch ;  
0000:1B29 28			      .db  28h ; (
0000:1B2A 30			      .db  30h ; 0
0000:1B2B 01			      .db    1 ;  
0000:1B2C 04			      .db    4 ;  
0000:1B2D 00			      .db    0 ;  
0000:1B2E FF			      .db 0FFh ;  
0000:1B2F FF			      .db 0FFh ;  
0000:1B30 00			      .db    0 ;				      ;	16 bytes associated with bomb #1
0000:1B30									      ;	if $FF don't execute
0000:1B31 00			      .db    0 ;  
0000:1B32 02	      unk_0_1B32:     .db    2 ;				      ;	DATA XREF: 0000:0477r
0000:1B33 76 04			      .dw 476h					      ;	jump vector #3
0000:1B35 00			      .db    0 ;  
0000:1B36 00			      .db    0 ;  
0000:1B37 00			      .db    0 ;  
0000:1B38 00			      .db    0 ;  
0000:1B39 00			      .db    0 ;  
0000:1B3A 04			      .db    4 ;  
0000:1B3B EE			      .db 0EEh ; î
0000:1B3C 1C			      .db  1Ch ;  
0000:1B3D 00			      .db    0 ;  
0000:1B3E 00			      .db    0 ;  
0000:1B3F 03			      .db    3 ;  
0000:1B40 00			      .db    0 ;				      ;	16 bytes associated with bomb #2
0000:1B40									      ;	if $FF don't execute
0000:1B41 00			      .db    0 ;  
0000:1B42 00			      .db    0 ;  
0000:1B43 B6 04			      .dw 4B6h					      ;	jump vector #4
0000:1B45 00			      .db    0 ;  
0000:1B46 00			      .db    0 ;  
0000:1B47 01			      .db    1 ;  
0000:1B48 00	      unk_0_1B48:     .db    0 ;				      ;	DATA XREF: 0000:04E1r
0000:1B49 1D			      .db  1Dh ;  
0000:1B4A 04			      .db    4 ;  
0000:1B4B E2			      .db 0E2h ; â
0000:1B4C 1C			      .db  1Ch ;  
0000:1B4D 00			      .db    0 ;  
0000:1B4E 00			      .db    0 ;  
0000:1B4F 03			      .db    3 ;  
0000:1B50 00			      .db    0 ;				      ;	if $FF don't execute
0000:1B51 00			      .db    0 ;  
0000:1B52 00			      .db    0 ;  
0000:1B53 82 06			      .dw 682h					      ;	jump vector #5
0000:1B55 00			      .db    0 ;  
0000:1B56 00			      .db    0 ;  
0000:1B57 01			      .db    1 ;  
0000:1B58 06	      unk_0_1B58:     .db    6 ;				      ;	DATA XREF: 0000:052Er
0000:1B59 1D			      .db  1Dh ;  
0000:1B5A 04			      .db    4 ;  
0000:1B5B D0			      .db 0D0h ; Ğ
0000:1B5C 1C			      .db  1Ch ;  
0000:1B5D 00			      .db    0 ;  
0000:1B5E 00			      .db    0 ;  
0000:1B5F 03			      .db    3 ;  
0000:1B60 FF			      .db 0FFh ;  
0000:1B61 00			      .db    0 ;  
0000:1B62 C0			      .db 0C0h ; À
0000:1B63 1C			      .db  1Ch ;  
0000:1B64 00			      .db    0 ;  
0000:1B65 00			      .db    0 ;  
0000:1B66 10			      .db  10h ;  
0000:1B67 21			      .db  21h ; !
0000:1B68 01			      .db    1 ;  
0000:1B69 00			      .db    0 ;  
0000:1B6A 30			      .db  30h ; 0
0000:1B6B 00			      .db    0 ;  
0000:1B6C 12			      .db  12h ;  
0000:1B6D 00			      .db    0 ;  
0000:1B6E 00			      .db    0 ;  
0000:1B6F 00			      .db    0 ;  
0000:1B70 0F			      .db  0Fh ;  
0000:1B71 0B			      .db  0Bh ;  
0000:1B72 00			      .db    0 ;  
0000:1B73 18			      .db  18h ;  
0000:1B74 26			      .db  26h ; &
0000:1B75 0F			      .db  0Fh ;  
0000:1B76 0B			      .db  0Bh ;  
0000:1B77 00			      .db    0 ;  
0000:1B78 18			      .db  18h ;  
0000:1B79 04			      .db    4 ;  
0000:1B7A 11			      .db  11h ;  
0000:1B7B 24			      .db  24h ; $
0000:1B7C 1B			      .db  1Bh ;  
0000:1B7D 25			      .db  25h ; %
0000:1B7E FC			      .db 0FCh ; ü
0000:1B7F 00			      .db    0 ;  
0000:1B80 01			      .db    1 ;  
0000:1B81 FF			      .db 0FFh ;  
0000:1B82 FF			      .db 0FFh ;  
0000:1B83 00	      ufo_init_data:  .db 0					      ;	ufo visible flag
0000:1B84 00			      .db    0 ;  
0000:1B85 00			      .db    0 ;  
0000:1B86 20			      .db 32					      ;	countdown after	ufo hit
0000:1B87 64 1D			      .dw 1D64h					      ;	ufo bitmap address
0000:1B89 D0 29			      .dw 29D0h					      ;	ufo screen loc
0000:1B8B 18			      .db 24					      ;	ufo bitmap size
0000:1B8C 02			      .db    2 ;				      ;	ufo movement x offset
0000:1B8D 54			      .db  54h ; T
0000:1B8E 1D			      .db  1Dh ;  
0000:1B8F 00 08			      .dw 800h					      ;	ptr to code - of which b0 determines which side	ufo appears
0000:1B91 00			      .db    0 ;  
0000:1B92 06			      .db    6 ;  
0000:1B93 00			      .db    0 ;  
0000:1B94 00			      .db    0 ;  
0000:1B95 01			      .db    1 ;  
0000:1B96 40			      .db  40h ; @
0000:1B97 00			      .db    0 ;  
0000:1B98 01			      .db    1 ;  
0000:1B99 00			      .db    0 ;  
0000:1B9A 00			      .db    0 ;  
0000:1B9B 10			      .db  10h ;  
0000:1B9C 9E			      .db  9Eh ; 
0000:1B9D 00			      .db    0 ;  
0000:1B9E 20			      .db  20h ;  
0000:1B9F 1C			      .db  1Ch ;  
0000:1BA0 00			      .db    0 ;  
0000:1BA1 03			      .db    3 ;  
0000:1BA2 04			      .db    4 ;  
0000:1BA3 78			      .db  78h ; x
0000:1BA4 14			      .db  14h ;  
0000:1BA5 13			      .db  13h ;  
0000:1BA6 08			      .db    8 ;  
0000:1BA7 1A			      .db  1Ah ;  
0000:1BA8 3D			      .db  3Dh ; =
0000:1BA9 68			      .db  68h ; h
0000:1BAA FC			      .db 0FCh ; ü
0000:1BAB FC			      .db 0FCh ; ü
0000:1BAC 68			      .db  68h ; h
0000:1BAD 3D			      .db  3Dh ; =
0000:1BAE 1A			      .db  1Ah ;  
0000:1BAF 00			      .db    0 ;  
0000:1BB0 00 00	01 B8+		      .db 0, 0,	1, 0B8h, 98h, 0A0h, 1Bh, 10h, 0FFh, 0, 0A0h ; inverted-y animation pt.2	data
0000:1BB0 98 A0	1B 10+		      .db 1Bh
0000:1BBC 00			      .db    0 ;  
0000:1BBD 00			      .db    0 ;  
0000:1BBE 00			      .db    0 ;  
0000:1BBF 00			      .db    0 ;  
0000:1BC0 00 10	00 0E+		      .db 0, 10h, 0, 0Eh, 5, 0,	0, 0, 0, 0, 7, 0D0h, 1Ch, 0C8h ; initialised only at startup
0000:1BC0 05 00	00 00+		      .db 9Bh, 3, 0, 0,	3, 4, 78h, 14h,	0Bh, 19h, 3Ah, 6Dh, 0FAh
0000:1BC0 00 00	07 D0+		      .db 0FAh,	6Dh, 3Ah, 19h, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
0000:1BC0 1C C8	9B 03+		      .db 1, 0,	0, 1, 74h, 1Fh,	0, 80h,	0, 0, 0, 0, 0, 1Ch, 2Fh
0000:1BC0 00 00	03 04+		      .db 0, 0,	1Ch, 27h, 0, 0,	1Ch, 39h
0000:1C00 00 00	39 79+gfx_table:      .db 0, 0,	39h, 79h, 7Ah, 6Eh, 0ECh, 0FAh,	0FAh, 0ECh, 6Eh	; 10 pt	invader	#1
0000:1C00 7A 6E	EC FA+		      .db 7Ah, 79h, 39h, 0, 0
0000:1C10 00 00	00 78+		      .db 0, 0,	0, 78h,	1Dh, 0BEh, 6Ch,	3Ch, 3Ch, 3Ch, 6Ch, 0BEh ; 20 pt invader #1
0000:1C10 1D BE	6C 3C+		      .db 1Dh, 78h, 0, 0
0000:1C20 00 00	00 00+		      .db 0, 0,	0, 0, 19h, 3Ah,	6Dh, 0FAh, 0FAh, 6Dh, 3Ah, 19h ; 30 pt invader #1
0000:1C20 19 3A	6D FA+		      .db 0, 0,	0, 0
0000:1C30 00 00	38 7A+		      .db 0, 0,	38h, 7Ah, 7Fh, 6Dh, 0ECh, 0FAh,	0FAh, 0ECh, 6Dh	; 10 pt	invader	#2
0000:1C30 7F 6D	EC FA+		      .db 7Fh, 7Ah, 38h, 0, 0
0000:1C40 00 00	00 0E+		      .db 0, 0,	0, 0Eh,	18h, 0BEh, 6Dh,	3Dh, 3Ch, 3Dh, 6Dh, 0BEh ; 20 pt invader #2
0000:1C40 18 BE	6D 3D+		      .db 18h, 0Eh, 0, 0
0000:1C50 00 00	00 00+		      .db 0, 0,	0, 0, 1Ah, 3Dh,	68h, 0FCh, 0FCh, 68h, 3Dh, 1Ah ; 30 pt invader #2
0000:1C50 1A 3D	68 FC+		      .db 0, 0,	0, 0
0000:1C60 00 00	0F 1F+		      .db 0, 0,	0Fh, 1Fh, 1Fh, 1Fh, 1Fh, 7Fh, 0FFh, 7Fh, 1Fh ; player ship
0000:1C60 1F 1F	1F 7F+		      .db 1Fh, 1Fh, 1Fh, 0Fh, 0
0000:1C70 00 04	01 13+		      .db 0, 4,	1, 13h,	3, 7, 0B3h, 0Fh, 2Fh, 3, 2Fh, 49h, 4, 3, 0, 1 ;	ship explosion #1
0000:1C80 40 08	05 A3+		      .db 40h, 8, 5, 0A3h, 0Ah,	3, 5Bh,	0Fh, 27h, 27h, 0Bh, 4Bh, 40h, 84h, 11h,	48h ; ship explosion #2
0000:1C90 0F			      .db  0Fh ;  
0000:1C91 99			      .db  99h ; ™
0000:1C92 3C			      .db  3Ch ; <
0000:1C93 7E			      .db  7Eh ; ~
0000:1C94 3D			      .db  3Dh ; =
0000:1C95 BC			      .db 0BCh ; ¼
0000:1C96 3E			      .db  3Eh ; >
0000:1C97 7C			      .db  7Ch ; |
0000:1C98 99			      .db  99h ; ™
0000:1C99 27 1B	1A 26+		      .db 27h, 1Bh, 1Ah, 26h, 0Fh, 0Eh,	8, 0Dh,	13h, 12h ; "=10 POINTS"
0000:1CA3 28			      .db  28h ; (
0000:1CA4 12 02	0E 11+		      .db 12h, 2, 0Eh, 11h, 4, 26h, 0, 3, 15h, 0, 0Dh, 2, 4 ; "SCORE ADVANCE TABLE"
0000:1CA4 04 26	00 03+		      .db 26h, 13h, 0, 1, 0Bh, 4
0000:1CB7 28			      .db  28h ; (
0000:1CB8 02 10	20 30		      .db 2, 10h, 20h, 30h			      ;	table of scores	at which bomb frequency	increases
0000:1CB8									      ;	-200, 1000, 2000, 3000
0000:1CBC 13 08	0B 13		      .db 13h, 8, 0Bh, 13h			      ;	"TILT"
0000:1CC0 00 08	49 22+		      .db 0, 8,	49h, 22h, 14h, 81h, 42h, 0, 42h, 81h, 14h, 22h,	49h, 8,	0, 0 ; invader explosion
0000:1CD0 44			      .db  44h ; D
0000:1CD1 AA			      .db 0AAh ; ª
0000:1CD2 10			      .db  10h ;  
0000:1CD3 88			      .db  88h ; ˆ
0000:1CD4 54			      .db  54h ; T
0000:1CD5 22			      .db  22h ; "
0000:1CD6 10			      .db  10h ;  
0000:1CD7 AA			      .db 0AAh ; ª
0000:1CD8 44			      .db  44h ; D
0000:1CD9 22			      .db  22h ; "
0000:1CDA 54			      .db  54h ; T
0000:1CDB 88			      .db  88h ; ˆ
0000:1CDC 4A			      .db  4Ah ; J
0000:1CDD 15			      .db  15h ;  
0000:1CDE BE			      .db 0BEh ; ¾
0000:1CDF 3F			      .db  3Fh ; ?
0000:1CE0 5E			      .db  5Eh ; ^
0000:1CE1 25			      .db  25h ; %
0000:1CE2 04			      .db    4 ;  
0000:1CE3 FC			      .db 0FCh ; ü
0000:1CE4 04			      .db    4 ;  
0000:1CE5 10			      .db  10h ;  
0000:1CE6 FC			      .db 0FCh ; ü
0000:1CE7 10			      .db  10h ;  
0000:1CE8 20			      .db  20h ;  
0000:1CE9 FC			      .db 0FCh ; ü
0000:1CEA 20			      .db  20h ;  
0000:1CEB 80			      .db  80h ; €
0000:1CEC FC			      .db 0FCh ; ü
0000:1CED 80			      .db  80h ; €
0000:1CEE 00			      .db    0 ;  
0000:1CEF FE			      .db 0FEh ; ş
0000:1CF0 00			      .db    0 ;  
0000:1CF1 24			      .db  24h ; $
0000:1CF2 FE			      .db 0FEh ; ş
0000:1CF3 12			      .db  12h ;  
0000:1CF4 00			      .db    0 ;  
0000:1CF5 FE			      .db 0FEh ; ş
0000:1CF6 00			      .db    0 ;  
0000:1CF7 48			      .db  48h ; H
0000:1CF8 FE			      .db 0FEh ; ş
0000:1CF9 90			      .db  90h ; 
0000:1CFA 0F 0B	00 29		      .db 0Fh, 0Bh, 0, 29h			      ;	"PLAY" with inverted Y
0000:1CFE 00			      .db    0 ;  
0000:1CFF 00			      .db    0 ;  
0000:1D00 01 07	01 01+rand_tbl_for_bomb_drop:.db 1, 7, 1, 1, 1,	4, 0Bh,	1, 6, 3, 1, 1, 0Bh, 9, 2, 8 ; table of columns to drop bomb
0000:1D00 01 04	0B 01+		      .db 2, 0Bh, 4, 7,	0Ah, 5,	2, 5, 4, 6, 7, 8, 0Ah, 6, 0Ah, 3 ; - (pseudo-random series)
0000:1D20 FF 0F	FF 1F+		      .db 0FFh,	0Fh, 0FFh, 1Fh,	0FFh, 3Fh, 0FFh, 7Fh, 0FFh, 0FFh ; shield data
0000:1D20 FF 3F	FF 7F+		      .db 0FCh,	0FFh, 0F8h, 0FFh, 0F0h,	0FFh, 0F0h, 0FFh, 0F0h
0000:1D20 FF FF	FC FF+		      .db 0FFh,	0F0h, 0FFh, 0F0h, 0FFh,	0F0h, 0FFh, 0F0h, 0FFh
0000:1D20 F8 FF	F0 FF+		      .db 0F8h,	0FFh, 0FCh, 0FFh, 0FFh,	0FFh, 0FFh, 0FFh, 0FFh
0000:1D20 F0 FF	F0 FF+		      .db 7Fh, 0FFh, 3Fh, 0FFh,	1Fh, 0FFh, 0Fh
0000:1D4C 05 10	15 30		      .db 5, 10h, 15h, 30h			      ;	table of UFO points (/100)
0000:1D50 94 97	9A 9D		      .db 94h, 97h, 9Ah, 9Dh			      ;	table of corresponding bitmap addresses	(lsb)
0000:1D54 10			      .db  10h ;  
0000:1D55 05			      .db    5 ;  
0000:1D56 05			      .db    5 ;  
0000:1D57 10			      .db  10h ;  
0000:1D58 15			      .db  15h ;  
0000:1D59 10			      .db  10h ;  
0000:1D5A 10			      .db  10h ;  
0000:1D5B 05			      .db    5 ;  
0000:1D5C 30			      .db  30h ; 0
0000:1D5D 10			      .db  10h ;  
0000:1D5E 10			      .db  10h ;  
0000:1D5F 10			      .db  10h ;  
0000:1D60 05			      .db    5 ;  
0000:1D61 15			      .db  15h ;  
0000:1D62 10			      .db  10h ;  
0000:1D63 05			      .db    5 ;  
0000:1D64 00			      .db    0 ;  
0000:1D65 00			      .db    0 ;  
0000:1D66 00			      .db    0 ;  
0000:1D67 00			      .db    0 ;  
0000:1D68 04 0C	1E 37+		      .db 4, 0Ch, 1Eh, 37h, 3Eh, 7Ch, 74h, 7Eh,	7Eh, 74h, 7Ch ;	UFO
0000:1D68 3E 7C	74 7E+		      .db 3Eh, 37h, 1Eh, 0Ch, 4
0000:1D78 00 00	00 00		      .db 0, 0,	0, 0				      ;	(nothing?)
0000:1D7C 00 22	00 A5+		      .db 0, 22h, 0, 0A5h, 40h,	8, 98h,	3Dh, 0B6h, 3Ch,	36h ; UFO explosion bitmap
0000:1D7C 40 08	98 3D+		      .db 1Dh, 10h, 48h, 62h, 0B6h, 1Dh, 98h, 8, 42h, 90h, 8
0000:1D7C B6 3C	36 1D+		      .db 0, 0
0000:1D94 26 1F	1A    ufo_score_text_table:.db 26h, 1Fh, 1Ah			      ;	" 50"
0000:1D97 1B 1A	1A		      .db 1Bh, 1Ah, 1Ah				      ;	"100"
0000:1D9A 1B 1F	1A		      .db 1Bh, 1Fh, 1Ah				      ;	"150"
0000:1D9D 1D 1A	1A		      .db 1Dh, 1Ah, 1Ah				      ;	"500"
0000:1DA0 10	      invader_points_table:.db 10h				      ;	10 points (BCD)
0000:1DA1 20			      .db  20h ;				      ;	20 points (BCD)
0000:1DA2 30			      .db  30h ; 0				      ;	30 points (BCD)
0000:1DA3 60 50	48 48+		      .db 96, 80, 72, 72, 72, 64, 64, 64	      ;	table of starting invader y coords
0000:1DAB 0F 0B	00 18+		      .db 0Fh, 0Bh, 0, 18h, 12h, 0Fh, 0, 2, 4, 26h, 26h, 8, 0Dh	; "PLAYSPACE  INVADERS"
0000:1DAB 12 0F	00 02+		      .db 15h, 0, 3, 4,	11h, 12h
0000:1DBE 0E 2C			      .dw 2C0Eh					      ;	screen loc for ufo on score table
0000:1DC0 68 1D			      .dw 1D68h					      ;	ptr ufo	bitmap
0000:1DC2 0C 2C			      .dw 2C0Ch					      ;	screen loc for 30 pt invader
0000:1DC4 20 1C			      .dw 1C20h					      ;	ptr 30 pt invader bitmap
0000:1DC6 0A 2C			      .dw 2C0Ah					      ;	screen loc for 20 pt invader
0000:1DC8 40 1C			      .dw 1C40h					      ;	ptr 20 pt invader bitmap
0000:1DCA 08 2C			      .dw 2C08h					      ;	screen loc for 10 pt invader
0000:1DCC 00 1C			      .dw 1C00h					      ;	ptr 10 pt nvader bitmap
0000:1DCE FF			      .db 0FFh					      ;	end of table marker
0000:1DCF 0E 2E			      .dw 2E0Eh					      ;	screen loc for following string
0000:1DD1 E0 1D			      .dw 1DE0h					      ;	"=? MYSTERY"
0000:1DD3 0C 2E			      .dw 2E0Ch					      ;	screen loc for following string
0000:1DD5 EA 1D			      .dw 1DEAh					      ;	"=30 POINTS"
0000:1DD7 0A 2E			      .dw 2E0Ah					      ;	screen loc for following string
0000:1DD9 F4 1D			      .dw 1DF4h					      ;	"=20 POINTS"
0000:1DDB 08 2E			      .dw 2E08h					      ;	screen loc for following string
0000:1DDD 99 1C			      .dw 1C99h					      ;	"=10 POINTS"
0000:1DDF FF			      .db 0FFh					      ;	end of table marker
0000:1DE0 27 38	26 0C+		      .db 27h, 38h, 26h, 0Ch, 18h, 12h,	13h, 4,	11h, 18h ; "=? MYSTERY"
0000:1DEA 27 1D	1A 26+		      .db 27h, 1Dh, 1Ah, 26h, 0Fh, 0Eh,	8, 0Dh,	13h, 12h ; "=30 POINTS"
0000:1DF4 27 1C	1A 26+		      .db 27h, 1Ch, 1Ah, 26h, 0Fh, 0Eh,	8, 0Dh,	13h, 12h ; "=20 POINTS"
0000:1DFE 00			      .db    0 ;  
0000:1DFF 00			      .db    0 ;  
0000:1E00 00 1F	24 44+bitmap_table:   .db 0, 1Fh, 24h, 44h, 24h, 1Fh, 0, 0	      ;	"A"
0000:1E08 00 7F	49 49+		      .db 0, 7Fh, 49h, 49h, 49h, 36h, 0, 0	      ;	"B"
0000:1E10 00 3E	41 41+		      .db 0, 3Eh, 41h, 41h, 41h, 22h, 0, 0	      ;	"C"
0000:1E18 00 7F	41 41+		      .db 0, 7Fh, 41h, 41h, 41h, 3Eh, 0, 0	      ;	"D"
0000:1E20 00 7F	49 49+		      .db 0, 7Fh, 49h, 49h, 49h, 41h, 0, 0	      ;	"E"
0000:1E28 00 7F	48 48+		      .db 0, 7Fh, 48h, 48h, 48h, 40h, 0, 0	      ;	"F"
0000:1E30 00 3E	41 41+		      .db 0, 3Eh, 41h, 41h, 45h, 47h, 0, 0	      ;	"G"
0000:1E38 00 7F	08 08+		      .db 0, 7Fh, 8, 8,	8, 7Fh,	0, 0		      ;	"H"
0000:1E40 00 00	41 7F+		      .db 0, 0,	41h, 7Fh, 41h, 0, 0, 0		      ;	"I"
0000:1E48 00 02	01 01+		      .db 0, 2,	1, 1, 1, 7Eh, 0, 0		      ;	"J"
0000:1E50 00 7F	08 14+		      .db 0, 7Fh, 8, 14h, 22h, 41h, 0, 0	      ;	"K"
0000:1E58 00 7F	01 01+		      .db 0, 7Fh, 1, 1,	1, 1, 0, 0		      ;	"L"
0000:1E60 00 7F	20 18+		      .db 0, 7Fh, 20h, 18h, 20h, 7Fh, 0, 0	      ;	"M"
0000:1E68 00 7F	10 08+		      .db 0, 7Fh, 10h, 8, 4, 7Fh, 0, 0		      ;	"N"
0000:1E70 00 3E	41 41+		      .db 0, 3Eh, 41h, 41h, 41h, 3Eh, 0, 0	      ;	"O"
0000:1E78 00 7F	48 48+		      .db 0, 7Fh, 48h, 48h, 48h, 30h, 0, 0	      ;	"P"
0000:1E80 00 3E	41 45+		      .db 0, 3Eh, 41h, 45h, 42h, 3Dh, 0, 0	      ;	"Q"
0000:1E88 00 7F	48 4C+		      .db 0, 7Fh, 48h, 4Ch, 4Ah, 31h, 0, 0	      ;	"R"
0000:1E90 00 32	49 49+		      .db 0, 32h, 49h, 49h, 49h, 26h, 0, 0	      ;	"S"
0000:1E98 00 40	40 7F+		      .db 0, 40h, 40h, 7Fh, 40h, 40h, 0, 0	      ;	"T"
0000:1EA0 00 7E	01 01+		      .db 0, 7Eh, 1, 1,	1, 7Eh,	0, 0		      ;	"U"
0000:1EA8 00 7C	02 01+		      .db 0, 7Ch, 2, 1,	2, 7Ch,	0, 0		      ;	"V"
0000:1EB0 00 7F	02 0C+		      .db 0, 7Fh, 2, 0Ch, 2, 7Fh, 0, 0		      ;	"W"
0000:1EB8 00 63	14 08+		      .db 0, 63h, 14h, 8, 14h, 63h, 0, 0	      ;	"X"
0000:1EC0 00 60	10 0F+		      .db 0, 60h, 10h, 0Fh, 10h, 60h, 0, 0	      ;	"Y"
0000:1EC8 00 43	45 49+		      .db 0, 43h, 45h, 49h, 51h, 61h, 0, 0	      ;	"Z"
0000:1ED0 00 3E	45 49+		      .db 0, 3Eh, 45h, 49h, 51h, 3Eh, 0, 0	      ;	"0"
0000:1ED8 00 00	21 7F+		      .db 0, 0,	21h, 7Fh, 1, 0,	0, 0		      ;	"1"
0000:1EE0 00 23	45 49+		      .db 0, 23h, 45h, 49h, 49h, 31h, 0, 0	      ;	"2"
0000:1EE8 00 42	41 49+		      .db 0, 42h, 41h, 49h, 59h, 66h, 0, 0	      ;	"3"
0000:1EF0 00 0C	14 24+		      .db 0, 0Ch, 14h, 24h, 7Fh, 4, 0, 0	      ;	"4"
0000:1EF8 00 72	51 51+		      .db 0, 72h, 51h, 51h, 51h, 4Eh, 0, 0	      ;	"5"
0000:1F00 00 1E	29 49+		      .db 0, 1Eh, 29h, 49h, 49h, 46h, 0, 0	      ;	"6"
0000:1F08 00 40	47 48+		      .db 0, 40h, 47h, 48h, 50h, 60h, 0, 0	      ;	"7"
0000:1F10 00 36	49 49+		      .db 0, 36h, 49h, 49h, 49h, 36h, 0, 0	      ;	"8"
0000:1F18 00 31	49 49+		      .db 0, 31h, 49h, 49h, 4Ah, 3Ch, 0, 0	      ;	"9"
0000:1F20 00 08	14 22+		      .db 0, 8,	14h, 22h, 41h, 0, 0, 0		      ;	"<"
0000:1F28 00 00	41 22+		      .db 0, 0,	41h, 22h, 14h, 8, 0, 0		      ;	">"
0000:1F30 00 00	00 00+		      .db 0, 0,	0, 0, 0, 0, 0, 0		      ;	" "
0000:1F38 00 14	14 14+		      .db 0, 14h, 14h, 14h, 14h, 14h, 0, 0	      ;	"="
0000:1F40 00 22	14 7F+		      .db 0, 22h, 14h, 7Fh, 14h, 22h, 0, 0	      ;	"*"
0000:1F48 00 03	04 78+		      .db 0, 3,	4, 78h,	4, 3, 0, 0		      ;	"Y (inverted)" (chr $29)
0000:1F50 24			      .db  24h ; $
0000:1F51 1B 26	0E 11+		      .db 1Bh, 26h, 0Eh, 11h, 26h, 1Ch,	26h, 0Fh, 0Bh, 0, 18h ;	"1 OR 2 PLAYERS"
0000:1F51 26 1C	26 0F+		      .db 4, 11h, 12h
0000:1F5F 25			      .db  25h ; %
0000:1F60 26			      .db  26h ; &
0000:1F61 26			      .db  26h ; &
0000:1F62 28			      .db  28h ; (
0000:1F63 1B 26	0F 0B+		      .db 1Bh, 26h, 0Fh, 0Bh, 0, 18h, 4, 11h, 26h, 26h,	1Bh ; "1 PLAYER  1 COIN"
0000:1F63 00 18	04 11+		      .db 26h, 2, 0Eh, 8, 0Dh, 26h
0000:1F74 01 01	00 00+demo_logic_table:.db 1, 1, 0, 0, 1, 0, 2,	1, 0, 2, 1, 0	      ;	simulated controller reads
0000:1F80 60 10	0F 10+		      .db 60h, 10h, 0Fh, 10h, 60h, 30h,	18h, 1Ah, 3Dh, 68h, 0FCh ; letter Y w/invader legs open
0000:1F80 60 30	18 1A+		      .db 0FCh,	68h, 3Dh, 1Ah, 0
0000:1F90 08 0D	12 04+		      .db 8, 0Dh, 12h, 4, 11h, 13h, 26h, 26h, 2, 0Eh, 8, 0Dh ; "INSERT  COIN"
0000:1F9C 0D 2A			      .dw 2A0Dh					      ;	screen loc
0000:1F9E 50 1F			      .dw 1F50h					      ;	"<1 OR 2 PLAYERS>
0000:1FA0 0A 2A			      .dw 2A0Ah					      ;	screen loc
0000:1FA2 62 1F			      .dw 1F62h					      ;	"*1 PLAYER 1  COIN"
0000:1FA4 07 2A			      .dw 2A07h					      ;	screen loc
0000:1FA6 E1 1F			      .dw 1FE1h					      ;	"*2 PLAYERS 2 COINS"
0000:1FA8 FF			      .db 0FFh ;				      ;	(end of	table)
0000:1FA9 02 11	04 03+		      .db 2, 11h, 4, 3,	8, 13h,	26h		      ;	"CREDIT "
0000:1FB0 00 60	10 0F+		      .db 0, 60h, 10h, 0Fh, 10h, 60h, 38h, 19h,	3Ah, 6Dh, 0FAh ; letter	Y w/invader legs closed
0000:1FB0 10 60	38 19+		      .db 0FAh,	6Dh, 3Ah, 19h, 0
0000:1FC0 00 20	40 4D+		      .db 0, 20h, 40h, 4Dh, 50h, 20h, 0, 0	      ;	"?" (chr $38)
0000:1FC8 00			      .db    0 ;  
0000:1FC9 00 00	FF B8+		      .db 0, 0,	0FFh, 0B8h, 0FFh, 80h, 1Fh, 10h, 97h, 0, 80h ; inverted-y animation pt.3 data
0000:1FC9 FF 80	1F 10+		      .db 1Fh
0000:1FD5 00 00	01 D0+		      .db 0, 0,	1, 0D0h, 22h, 20h, 1Ch,	10h, 94h, 0, 20h, 1Ch ;	bomb-c animation data
0000:1FE1 28 1C	26 0F+		      .db 28h, 1Ch, 26h, 0Fh, 0Bh, 0, 18h, 4, 11h, 12h,	26h ; "*2 PLAYERS 2 COINS"
0000:1FE1 0B 00	18 04+		      .db 1Ch, 26h, 2, 0Eh, 8, 0Dh, 12h
0000:1FF3 0F 14	12 07+		      .db 0Fh, 14h, 12h, 7, 26h			      ;	"PUSH "
0000:1FF8 00			      .db    0 ;  
0000:1FF9 08			      .db    8 ;  
0000:1FFA 08			      .db    8 ;  
0000:1FFB 08			      .db    8 ;  
0000:1FFC 08			      .db    8 ;  
0000:1FFD 08			      .db    8 ;  
0000:1FFE 00			      .db    0 ;  
0000:1FFF 00			      .db    0 ;  
0000:1FFF	      ;	end of 'seg000'
0000:1FFF	      
0000:2000	      ;	ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ
0000:2000	      
0000:2000	      ;	Segment	type: Regular
0000:2000	      ;	segment	'RAM'
0000:2000			      .org 2000h
0000:2000 ??	      curr_invader_needs_drawing:.block	1
0000:2001 ??			      .block 1
0000:2002 ??	      player_shot_something:.block 1
0000:2003 ??	      invader_explosion_counter:.block 1
0000:2004 ??	      curr_invader_updated_row:.block 1
0000:2005 ??	      invader_animation_frame_no:.block	1			      ;	0/1
0000:2006 ??	      next_invader_to_update:.block 1				      ;	(0-54)
0000:2007 ??	      invader_y_inc:  .block 1					      ;	value to inc y coord of	invaders this frame
0000:2008 ??	      invader_x_inc:  .block 1					      ;	value to inc x coord of	invaders this frame
0000:2009 ??	      bottom_left_invader_y:.block 1				      ;	y coord	of bottom left invader
0000:200A ??	      bottom_left_invader_x:.block 1				      ;	x coord	of bottom left invader
0000:200B ??	      curr_invader_y: .block 1					      ;	y coord	of current invader
0000:200C ??	      curr_invader_x: .block 1					      ;	x coord	of current invader
0000:200D ??	      invader_left_right:.block	1
0000:200E ??	      invader_y_inc_init_value:.block 1
0000:200F ??			      .block 1
0000:2010 ??			      .block 1
0000:2011*??	      byte_0_2011:    .block 1					      ;	DATA XREF: 0000:0319w
0000:2012 ??	      unk_0_2012:     .block 1
0000:2013 ?? ??	      jmp_vect_1:     .block 2
0000:2015*??	      gameplay_ticker:.block 1					      ;	DATA XREF: 0000:039Ew
0000:2015*									      ;	handle_alien_bombing+ACw ...
0000:2016 ??			      .block 1					      ;	player explosion counter
0000:2017 ??			      .block 1
0000:2018 ?? ??	      player_ship_info:.block 2					      ;	ptr player ship	gfx bitmap
0000:201A ??	      player_ship_coord:.block 1				      ;	DATA XREF: 0000:02AEr
0000:201B ??	      player_ship_coord_lsb_:.block 1				      ;	DATA XREF: 0000:034Ar
0000:201B									      ;	0000:0388w ...
0000:201B									      ;	player ship coord (2 bytes)
0000:201C ??			      .block 1					      ;	player ship bitmap length
0000:201D ??	      demo_joystick_input:.block 1				      ;	DATA XREF: 0000:0355r
0000:201D									      ;	poll_fire_button+4Fw
0000:201E ??	      enable_taito_easter_egg:.block 1
0000:201F ??			      .block 1
0000:2020 ??			      .block 1
0000:2021 ??			      .block 1
0000:2022 ??			      .block 1
0000:2023 ?? ??	      jmp_vect_2:     .block 2					      ;	jump vector
0000:2025 ??	      fire_progress_state:.block 1
0000:2026 ??			      .block 1
0000:2027 ?? ??			      .block 2					      ;	ptr player bullet bitmap
0000:2029 ??	      player_shot_y_coord:.block 1
0000:202A ??	      player_shot_x_coord:.block 1
0000:202B ??			      .block 1					      ;	player bullet bitmap length
0000:202C ??	      player_shot_y_inc:.block 1				      ;	player bullet y	coord increment
0000:202D ??	      last_fire_button_state:.block 1
0000:202E ??			      .block 1
0000:202F ??			      .block 1
0000:2030 ??			      .block 1
0000:2031 ??			      .block 1
0000:2032*??	      byte_0_2032:    .block 1					      ;	DATA XREF: sub_0_38+3Ar
0000:2032*									      ;	0000:047Aw
0000:2033 ?? ??	      jmp_vect_3:     .block 2					      ;	jump vector
0000:2035 ??	      alien_bomb_1_data:.block 1
0000:2036 ??	      byte_0_2036:    .block 1					      ;	DATA XREF: 0000:04CAr
0000:2036									      ;	0000:051Dr
0000:2037 ??			      .block 1
0000:2038*?? ??	      word_0_2038:    .block 2					      ;	DATA XREF: 0000:047Dr
0000:2038*									      ;	0000:0486w
0000:203A ?? ??	?? ??+		      .block 9					      ;	(unused?)
0000:2043 ?? ??	      jmp_vect_4:     .block 2					      ;	jump vector
0000:2045 ??	      alien_bomb_2_data:.block 1
0000:2046 ??	      byte_0_2046:    .block 1					      ;	DATA XREF: 0000:0492r
0000:2046									      ;	0000:0517r
0000:2047 ??			      .block 1
0000:2048*?? ??	      word_0_2048:    .block 2					      ;	DATA XREF: 0000:067Ew
0000:204A ?? ??	?? ??+		      .block 9					      ;	(unused?)
0000:2053 ?? ??	      jmp_vect_5:     .block 2					      ;	jump vector
0000:2055 ??	      alien_bomb_3_data:.block 1
0000:2056 ??	      byte_0_2056:    .block 1					      ;	DATA XREF: 0000:0498r
0000:2056									      ;	0000:04D0r ...
0000:2057 ??			      .block 1
0000:2058*?? ??	      word_0_2058:    .block 2					      ;	DATA XREF: 0000:054Cw
0000:205A ??			      .block 1
0000:205B ??			      .block 1
0000:205C ??			      .block 1
0000:205D ??			      .block 1
0000:205E ??			      .block 1
0000:205F ??			      .block 1
0000:2060 ??			      .block 1
0000:2061 ??	      something_hit:  .block 1					      ;	DATA XREF: 0000:0421r
0000:2061									      ;	handle_alien_bombing+98r ...
0000:2062 ?? ??			      .block 2					      ;	ptr invader object bitmap
0000:2064 ?? ??	      invader_screen_loc:.block	2				      ;	invader	object screen loc
0000:2066 ??			      .block 1					      ;	invader	object bitmap length
0000:2067*??	      ptr_curr_player_data:.block 1				      ;	DATA XREF: draw_invader+Dr
0000:2067*									      ;	update_next_invader_check_invasi+Ar ...
0000:2067*									      ;	msb loaded into	high register (usually h)
0000:2068*??	      byte_0_2068:    .block 1					      ;	DATA XREF: update_next_invader_check_invasir
0000:2068*									      ;	0000:029Bw ...
0000:2069*??	      byte_0_2069:    .block 1					      ;	DATA XREF: 0000:029Ew
0000:2069*									      ;	handle_alien_bombing+Er
0000:206A*??	      byte_0_206A:    .block 1					      ;	DATA XREF: 0000:02A3w
0000:206B ??	      only_1_invader_left:.block 1
0000:206C ??	      string_length:  .block 1
0000:206D ??	      invaded:	      .block 1					      ;	DATA XREF: 0000:02C6r
0000:206D									      ;	0000:1973w
0000:206D									      ;	boolean
0000:206E*??	      byte_0_206E:    .block 1					      ;	DATA XREF: 0000:04B7r
0000:206E*									      ;	0000:0505w
0000:206F ??			      .block 1
0000:2070*??	      byte_0_2070:    .block 1					      ;	DATA XREF: 0000:0495w
0000:2070*									      ;	0000:04CDw ...
0000:2071*??	      byte_0_2071:    .block 1					      ;	DATA XREF: 0000:049Bw
0000:2071*									      ;	0000:04D3w ...
0000:2072 ??	      which_intr:     .block 1
0000:2073*??	      curr_alien_bomb_data:.block 1				      ;	DATA XREF: handle_alien_bombing+AFr
0000:2073*									      ;	handle_alien_bombing+B4w
0000:2073*									      ;	11 bytes of bomb data
0000:2074 ??			      .block 1
0000:2075 ??			      .block 1
0000:2076*?? ??	      ptr_bomb_random_table:.block 2				      ;	DATA XREF: 0000:04D9r
0000:2076*									      ;	0000:04E4w ...
0000:2078 ??	      byte_0_2078:    .block 1					      ;	DATA XREF: 0000:04A1r
0000:2078									      ;	0000:04E7r ...
0000:2079*?? ??	      alien_bomb_bitmap_addr:.block 2				      ;	DATA XREF: handle_alien_bombing+71r
0000:2079*									      ;	handle_alien_bombing+7Fw ...
0000:2079*									      ;	object bitmap location
0000:207B*?? ??	      alien_bomb_screen_loc:.block 2				      ;	DATA XREF: handle_alien_bombing+51w
0000:207B*									      ;	handle_alien_bombing+82r ...
0000:207B*									      ;	object screen location
0000:207D*??	      alien_bomb_bitmap_length:.block 1				      ;	DATA XREF: 0000:0661w
0000:207D*									      ;	object bitmap length
0000:207E ??	      alien_bomb_y_inc:.block 1					      ;	DATA XREF: handle_alien_bombing+86r
0000:207E									      ;	check_and_update_bomb_speed+8w	...
0000:207F*??	      byte_0_207F:    .block 1					      ;	DATA XREF: copy_alien_bomb_data_2_currw
0000:2080*??	      byte_0_2080:    .block 1					      ;	DATA XREF: sub_0_38+3Dw
0000:2080*									      ;	0000:04BCr ...
0000:2081 ??	      draw_or_restore_shields_flag:.block 1
0000:2082 ??	      num_invaders_left:.block 1				      ;	DATA XREF: 0000:04FCr
0000:2082									      ;	0000:069Er ...
0000:2083 ??	      time_for_ufo:   .block 1					      ;	time for the ufo to appear?
0000:2084 ??	      ufo_visible:    .block 1
0000:2085 ??	      ufo_hit:	      .block 1
0000:2086 ??			      .block 1					      ;	countdown after	ufo hit
0000:2087 ?? ??	      ptr_ufo_bitmap: .block 2					      ;	object bitmap address -or-
0000:2087									      ;	string address
0000:2089 ??			      .block 1					      ;	object screen location (2 bytes)
0000:208A*??	      byte_0_208A:    .block 1					      ;	DATA XREF: 0000:06C1w
0000:208B ??			      .block 1					      ;	object bitmap size
0000:208C ??			      .block 1					      ;	object x move offset
0000:208D ?? ??	      ???_counter:    .block 2
0000:208F ??	      unk_0_208F:     .block 1					      ;	ptr to address (in ROM!) whose b0
0000:208F									      ;	determines which side the UFO comes in
0000:2090 ??			      .block 1
0000:2091 ??	      next_ufo_timer: .block 1					      ;	time untilo next ufo
0000:2092 ??			      .block 1
0000:2093 ??	      coined_up:      .block 1					      ;	DATA XREF: sub_0_38+25r
0000:2093									      ;	0000:0767w ...
0000:2094 ??	      port3_sound_shadow_reg:.block 1
0000:2095 ??	      update_invader_sound:.block 1
0000:2096 ??			      .block 1
0000:2097 ??	      unk_0_2097:     .block 1
0000:2098*??	      port_5_sound_shadow_reg:.block 1				      ;	DATA XREF: 0000:0320w
0000:2098*									      ;	0000:0A27w ...
0000:2099 ??	      bonus_ship_sound_timer:.block 1
0000:209A ??	      tilted:	      .block 1
0000:209B ??	      invader_sound_counter:.block 1
0000:209C ?? ??	?? ??+		      .block 24h				      ;	(unused?)
0000:20C0 ??	      timer:	      .block 1
0000:20C1 ??	      animation_type: .block 1					      ;	DATA XREF: 0000:009Er
0000:20C1									      ;	handle_alien_bombing+9r ...
0000:20C1									      ;	0 = none,
0000:20C1									      ;	1 = demo,
0000:20C1									      ;	2 = invader,
0000:20C1									      ;	4 = bomb-c
0000:20C2 ??	      animation_frame_count:.block 1				      ;	frame count for	current	animation
0000:20C3 ??	      animated_invader_y_inc:.block 1				      ;	animated invader y inc
0000:20C4 ??	      animated_invader_x_inc:.block 1				      ;	animated invader x inc
0000:20C5 ?? ??	      animated_invader_screen_loc:.block 2			      ;	animated invader y,x coords
0000:20C7 ?? ??	      animated_invader_curr_bitmap:.block 2			      ;	ptr animated invader bitmap
0000:20C9 ??	      animated_invader_bitmap_length:.block 1			      ;	animated invader bitmap	size
0000:20CA ??	      animated_invader_final_x:.block 1				      ;	animated inavder final x coord
0000:20CB ??	      animation_finished:.block	1				      ;	flag for animation finished
0000:20CC ?? ??	      animated_invader_base_bitmap:.block 2
0000:20CE ??	      two_p_game:     .block 1					      ;	DATA XREF: 0000:02E6r
0000:20CE									      ;	0000:079Bw ...
0000:20CF ??	      bomb_frequency: .block 1					      ;	DATA XREF: handle_alien_bombing+21r
0000:20CF									      ;	handle_alien_bombing+2Er ...
0000:20D0 ?? ??	?? ??+		      .block 15h				      ;	(unused?)
0000:20E5 ??	      yet_to_earn_bonus_ship:.block 1
0000:20E6 ??			      .block 1
0000:20E7 ??	      num_men_p1:     .block 1
0000:20E8 ??	      num_men_p2:     .block 1
0000:20E9 ??	      enable_vblank_code:.block	1				      ;	DATA XREF: sub_0_38+Ar
0000:20E9									      ;	0000:0090r ...
0000:20EA*??	      debounced_credit_flag:.block 1				      ;	DATA XREF: 0000:0026r
0000:20EA*									      ;	sub_0_38+7w ...
0000:20EB*??	      num_credits:    .block 1					      ;	DATA XREF: 0000:002Dr
0000:20EB*									      ;	sub_0_38w ...
0000:20EC ??	      attract_mode_state:.block	1				      ;	0=show,	1=don't show animations
0000:20ED ?? ??	      ptr_demo_joystick_input:.block 2
0000:20EF ??	      game_in_progress:.block 1					      ;	DATA XREF: sub_0_38+11r
0000:20EF									      ;	0000:0097r ...
0000:20F0 ??			      .block 1
0000:20F1 ??	      any_points_to_add:.block 1
0000:20F2 ?? ??	      points_to_add:  .block 2
0000:20F4 ?? ??	      hi_score:	      .block 2					      ;	BCD
0000:20F6 ?? ??	      hi_score_screen_loc:.block 2
0000:20F8 ?? ??	      p1_score:	      .block 2					      ;	BCD
0000:20FA ?? ??	      p1_score_screen_loc:.block 2
0000:20FC ?? ??	      p2_score:	      .block 2					      ;	BCD
0000:20FE ?? ??	      p2_score_screen_loc:.block 2
0000:2100 ?? ??	?? ??+p1_invader_map: .block 37h				      ;	1=invader still	alive
0000:2137 ?? ??	?? ??+		      .block 0Bh				      ;	(unused?)
0000:2142 ?? ??	?? ??+p1_shields:     .block 0B0h
0000:21F2 ?? ??	?? ??+		      .block 9					      ;	(unused?)
0000:21FB ??	      p1_invader_x_inc:.block 1					      ;	p1 invader x increment
0000:21FC ?? ??	      p1_bl_invader_coords:.block 2				      ;	p1 bottom left invader y,x coords
0000:21FE ??	      p1_wave_number: .block 1					      ;	modulo 8
0000:21FF ??	      p1_ships_left:  .block 1
0000:2200 ?? ??	?? ??+p2_invader_map: .block 37h				      ;	1=invader still	alive
0000:2237 ?? ??	?? ??+		      .block 0Bh				      ;	(unsued?)
0000:2242 ?? ??	?? ??+p2_sheids:      .block 0B0h
0000:22F2 ?? ??	?? ??+		      .block 9					      ;	(unused?)
0000:22FB ??	      p2_invader_x_inc:.block 1					      ;	p2 invader x increment
0000:22FC ?? ??	      p2_bl_invader_coords:.block 2				      ;	p2 bottom left invader y,x coords
0000:22FE ??	      p2_wave_number: .block 1					      ;	modulo 8
0000:22FF ??	      p2_ships_left:  .block 1
0000:2300 ?? ??	?? ??+unused_RAM:     .block 0FFh				      ;	unused RAM
0000:2300 ?? ??	?? ??+;	end of 'RAM'
0000:2300 ?? ??	?? ??+
0000:2300 ?? ??	?? ??+
0000:2300 ?? ??	?? ??+		      .end
