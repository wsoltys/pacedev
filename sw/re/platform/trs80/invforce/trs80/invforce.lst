ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 1.
Hexidecimal [16-Bits]



                              1 
                              2 ; +----------------------------------------------------+
                              3 ; | TRS-80 Model I/III Invasion Force (enhanced) v1.01 |
                              4 ; |    - by tcdev (msmcdoug@gmail.com)                 |
                              5 ; | Enhancements:                                      |
                              6 ; | - ORG $5200 for disk system compatibility          |
                              7 ; |   (the source code is fully relocatable)           |
                              8 ; | - Mixed-case text messages throughout the game     |
                              9 ; | - Fixed the Experimental Ray bug that makes        |
                             10 ; |   Space Stations invisible instead of Jovians      |
                             11 ; |   that was introduced in the TRS-80 port.          |
                             12 ; | - Modified direction controls to map to            |
                             13 ; |   more intuitive numeric keypad layout             |
                             14 ; +----------------------------------------------------+
                             15 ;
                             16 ; Trivia: This program was written originally for the
                             17 ;         8080-based SOL-20 Microcomputer in 1977 and
                             18 ;         released as TREK 80.
                             19 ;         Tandy obtained the source code and ported it
                             20 ;         to the TRS-80 Model I, removing most of the
                             21 ;         references to the Star Trek universe for
                             22 ;         legal reasons.
                             23 ;
                             24 ; Memory Map (original):
                             25 ;
                             26 ; $5000-$5F89 - Code
                             27 ; $5F8A-$67EE - Strings
                             28 ; $67EF-$69BA - Data & Variables (mixed)
                             29 ; $69BB-$6F9A - ASCII/Block Graphics
                             30 ; $6F9B-$6FDF - Variable space cleared each game
                             31 ; $6FE0-$6FFB - Stack
                             32 ; $6FFC-$7101 - Garbage?
                             33 
                             34 ; Processor       : z80 []
                             35 ; Target assembler: ASxxxx by Alan R. Baldwin v1.5
                             36        .area   idaseg (ABS)
                             37        .hd64 ; this is needed only for HD64180
                             38 
                             39 ; ===========================================================================
                             40 
                             41 .define PLATFORM_TRS80
                             42 ;.define PLATFORM_MICROBEE
                             43 
                             44 ; *** BUILD OPTIONS
                             45 .define BUILD_OPT_ENHANCED
                     0000    46 .ifndef BUILD_OPT_ENHANCED
                             47   ; (un)comment as required
                             48   .define BUILD_OPT_MIXED_CASE
                             49   .define BUILD_OPT_FIX_RAY_BUG
                             50   .define BUILD_OPT_KEYPAD_DIRS
                             51 .endif
                             52 ; *** end of BUILD OPTIONS
                             53 
                     0001    54 .ifdef PLATFORM_TRS80
                     3C00    55 VIDEO                   .equ    0x3C00
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 2.
Hexidecimal [16-Bits]



                             56                         ;.org     0x5000
   5200                      57                         .org    0x5200
                             58 .endif
                             59 
                     0000    60 .ifdef PLATFORM_MICROBEE
                             61 VIDEO                   .equ    0xF000
                             62 ; .COM file format
                             63                         .org    0x0100
                             64 ; .BEE/.TAP format
                             65                         .org    0x0900
                             66 .endif
                             67 
                             68 ; *** derived - do not edit
                     0001    69 .ifdef BUILD_OPT_ENHANCED
                             70   .define BUILD_OPT_MIXED_CASE
                             71   .define BUILD_OPT_FIX_RAY_BUG
                             72   .define BUILD_OPT_KEYPAD_DIRS
                             73 .endif
                             74 ; *** end of derived
                             75 
                             76   .macro XLATE_DIR
                             77       push    hl
                             78       ld      hl, #dir_xlate_tbl        ; dir translation table
                             79       add     l                         ; offset to entry
                             80       ld      l, a
                             81       ld      a, (hl)                   ; get entry
                             82       pop     hl
                             83   .endm
                             84 
   5200                      85 START:                        
   5200 AF            [ 4]   86                         xor     a
                             87 ; START OF FUNCTION CHUNK FOR handle_low_power
                             88 
   5201                      89 MAIN:
   5201 3E 03         [ 6]   90                         ld      a, #3
   5203 32 80 6A      [13]   91                         ld      (antimatter_pods), a
   5206 3E 06         [ 6]   92                         ld      a, #6
   5208 32 95 6A      [13]   93                         ld      (pod_speed), a
                             94 ; clear $45 bytes @$6f9b
   520B 21 0A 72      [ 9]   95                         ld      hl, #antimatter_pod_tbl         ; start of scratch RAM
   520E 97            [ 4]   96                         sub     a
   520F 06 45         [ 6]   97                         ld      b, #0x45 ; 'E'                  ; length of scratch RAM
                             98 
   5211                      99 loc_5011:
   5211 77            [ 7]  100                         ld      (hl), a
   5212 23            [ 4]  101                         inc     hl
   5213 05            [ 4]  102                         dec     b                               ; done all bytes?
   5214 C2 11 52      [ 9]  103                         jp      NZ, loc_5011                    ; no, loop
   5217 3D            [ 4]  104                         dec     a                               ; $FF
   5218 32 1C 72      [13]  105                         ld      (eot), a                        ; flag end of pod table
   521B 31 6A 72      [ 9]  106                         ld      sp, #STACK_WATERMARK
                            107 ; display title screen, prompt for speed factor
   521E 06 20         [ 6]  108                         ld      b, #0x20 ; ' '                  ; <SPACE>
   5220 CD 49 5F      [16]  109                         call    clear_video_with_B
   5223 11 8E 69      [ 9]  110                         ld      de, #aEnterSpeedFact            ; "ENTER SPEED FACTOR (0(FAST)-9(SLOW))"
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 3.
Hexidecimal [16-Bits]



   5226 CD 8E 5F      [16]  111                         call    print_string_last_line
   5229 21 00 3D      [ 9]  112                         ld      hl, # VIDEO+0x100
   522C 11 C8 6D      [ 9]  113                         ld      de, #aTitle                     ; "  INVASION FORCE  -------  RADIO SHACK "
   522F CD 94 5F      [16]  114                         call    print_string
                            115 
   5232                     116 loc_5032:
   5232 CD B6 53      [16]  117                         call    keyboard_scan
   5235 CA 32 52      [ 9]  118                         jp      Z, loc_5032                     ; no key, loop
   5238 E6 0F         [ 6]  119                         and     #0xF                            ; low nibble of key (supposedly 0-9)
   523A 07            [ 3]  120                         rlca
   523B 07            [ 3]  121                         rlca                                    ; x4
   523C C6 10         [ 6]  122                         add     a, #16                          ; x4 + 16
   523E 32 FF 6B      [13]  123                         ld      (game_delay_factor), a
   5241 3E 02         [ 6]  124                         ld      a, #2
   5243 32 00 6C      [13]  125                         ld      (time_to_jovian_fire), a
   5246 3E 10         [ 6]  126                         ld      a, #0x10                        ; init number of triton missiles (10)
   5248 32 0E 6C      [13]  127                         ld      (triton_misls), a
   524B 3E 08         [ 6]  128                         ld      a, #8                           ; init ion drive speed
   524D 32 54 6A      [13]  129                         ld      (ion_speed), a
   5250 3E 99         [ 6]  130                         ld      a, #0x99 ; 'ô'                  ; init power available (99%)
   5252 32 0D 6C      [13]  131                         ld      (power_avail), a
   5255 21 37 3F      [ 9]  132                         ld      hl, # VIDEO+0x337               ; init command entry buffer (on screen)
   5258 22 55 6A      [16]  133                         ld      (cmd_entry_addr), hl
                            134 ; print main display
   525B 21 F1 6D      [ 9]  135                         ld      hl, #aMainDisplay               ; " L-R SENSOR  %-MINE   ------RADIO SHACK"...
   525E 11 00 3C      [ 9]  136                         ld      de, #VIDEO
                            137 
   5261                     138 loc_5061:                                                       ; get char
   5261 7E            [ 6]  139                         ld      a, (hl)
   5262 12            [ 7]  140                         ld      (de), a                         ; write to video
   5263 13            [ 4]  141                         inc     de                              ; next video address
   5264 23            [ 4]  142                         inc     hl                              ; next source address
   5265 7A            [ 4]  143                         ld      a, d
   5266 FE 40         [ 6]  144                         cp      #0x40 ; '@'                     ; end of video?
   5268 C2 61 52      [ 9]  145                         jp      NZ, loc_5061                    ; no, loop
   526B 2A 44 6A      [15]  146                         ld      hl, (chaser_addr)
   526E 36 A0         [ 9]  147                         ld      (hl), #0xA0 ; '†'               ; graphic at chaser location
                            148 ; init power distribution
                            149 ; 20, 10, 20, 20, 9, 11%
   5270 21 E9 6B      [ 9]  150                         ld      hl, #pwr_hypr_ion
   5273 06 04         [ 6]  151                         ld      b, #4                           ; 4 power distribution values to init
                            152 
   5275                     153 loc_5075:                                                       ; init power distibution to 20%
   5275 36 20         [ 9]  154                         ld      (hl), #0x20 ; ' '
   5277 23            [ 4]  155                         inc     hl                              ; next power value address
   5278 05            [ 4]  156                         dec     b                               ; done all values?
   5279 C2 75 52      [ 9]  157                         jp      NZ, loc_5075                    ; no, loop
   527C 36 09         [ 9]  158                         ld      (hl), #9                        ; init masers to 9%
   527E 23            [ 4]  159                         inc     hl                              ; next pwer value address
   527F 36 11         [ 9]  160                         ld      (hl), #0x11                     ; init triton missiles to 11%
   5281 3E 10         [ 6]  161                         ld      a, #0x10                        ; re-init lr power to 10%
   5283 32 EA 6B      [13]  162                         ld      (pwr_lr_sensor), a
                            163 ; zero quadrant data
   5286 11 2C 01      [ 9]  164                         ld      de, #300                        ; # bytes to clear
   5289 21 B7 6A      [ 9]  165                         ld      hl, #quadrant_tbl               ; start of quadrant data
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 4.
Hexidecimal [16-Bits]



                            166 
   528C                     167 loc_508C:                                                       ; zero byte
   528C 36 00         [ 9]  168                         ld      (hl), #0
   528E 23            [ 4]  169                         inc     hl                              ; next location
   528F 1B            [ 4]  170                         dec     de
   5290 7A            [ 4]  171                         ld      a, d
   5291 B3            [ 4]  172                         or      e                               ; done all bytes?
   5292 C2 8C 52      [ 9]  173                         jp      NZ, loc_508C                    ; no, loop
                            174 
   5295                     175 init_jovians_left:
   5295 CD 55 5F      [16]  176                         call    rand_0_9
   5298 FE 03         [ 6]  177                         cp      #3                              ; less than 3?
   529A FA 95 52      [ 9]  178                         jp      M, init_jovians_left            ; yes, regenerate
   529D FE 06         [ 6]  179                         cp      #6                              ; greater than 5?
   529F F2 95 52      [ 9]  180                         jp      P, init_jovians_left            ; yes, regenerate
   52A2 07            [ 3]  181                         rlca
   52A3 07            [ 3]  182                         rlca
   52A4 07            [ 3]  183                         rlca
   52A5 07            [ 3]  184                         rlca                                    ; (3-5)*16
   52A6 47            [ 4]  185                         ld      b, a
   52A7 CD 55 5F      [16]  186                         call    rand_0_9
   52AA 80            [ 4]  187                         add     a, b                            ; (3-5)*16 + rnd()
   52AB 47            [ 4]  188                         ld      b, a                            ; jovians left to init
   52AC 32 AD 6A      [13]  189                         ld      (jovians_left), a
                            190 
   52AF                     191 loc_50AF:
   52AF CD 55 5F      [16]  192                         call    rand_0_9
   52B2 07            [ 3]  193                         rlca
   52B3 07            [ 3]  194                         rlca
   52B4 07            [ 3]  195                         rlca
   52B5 07            [ 3]  196                         rlca
   52B6 4F            [ 4]  197                         ld      c, a
   52B7 CD 55 5F      [16]  198                         call    rand_0_9
   52BA 81            [ 4]  199                         add     a, c                            ; random quadrant
   52BB C5            [11]  200                         push    bc
   52BC CD EF 5D      [16]  201                         call    get_ptr_quadrant_A_data
   52BF C1            [ 9]  202                         pop     bc
   52C0 7E            [ 6]  203                         ld      a, (hl)                         ; get warships in quadrant
   52C1 A7            [ 4]  204                         and     a                               ; zero?
   52C2 C2 AF 52      [ 9]  205                         jp      NZ, loc_50AF                    ; no, regenerate
                            206 
   52C5                     207 loc_50C5:
   52C5 CD 55 5F      [16]  208                         call    rand_0_9
   52C8 FE 05         [ 6]  209                         cp      #5                              ; greater than 4?
   52CA F2 C5 52      [ 9]  210                         jp      P, loc_50C5                     ; yes, regenerate
   52CD 3D            [ 4]  211                         dec     a
   52CE B8            [ 4]  212                         cp      b                               ; more than jovians left?
   52CF F2 C5 52      [ 9]  213                         jp      P, loc_50C5                     ; yes, regenerate
   52D2 3C            [ 4]  214                         inc     a
   52D3 77            [ 7]  215                         ld      (hl), a                         ; init warships in quadrant
   52D4 A7            [ 4]  216                         and     a                               ; zero?
   52D5 CA AF 52      [ 9]  217                         jp      Z, loc_50AF                     ; yes, regenerate
   52D8 57            [ 4]  218                         ld      d, a
   52D9 78            [ 4]  219                         ld      a, b                            ; jovians left to init
                            220 
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 5.
Hexidecimal [16-Bits]



   52DA                     221 loc_50DA:
   52DA C6 99         [ 6]  222                         add     a, #0x99 ; 'ô'
   52DC 27            [ 4]  223                         daa                                     ; all done?
   52DD CA E8 52      [ 9]  224                         jp      Z, init_stars                   ; yes, go
   52E0 15            [ 4]  225                         dec     d                               ; done for this quadrant?
   52E1 C2 DA 52      [ 9]  226                         jp      NZ, loc_50DA                    ; no, loop
   52E4 47            [ 4]  227                         ld      b, a                            ; update jovians left to init
   52E5 C3 AF 52      [ 9]  228                         jp      loc_50AF                        ; loop
                            229 ; ---------------------------------------------------------------------------
                            230 ; 0-9 stars in each quadrant
                            231 
   52E8                     232 init_stars:                                                     ; quadrant data
   52E8 21 B7 6A      [ 9]  233                         ld      hl, #quadrant_tbl
   52EB 0E 64         [ 6]  234                         ld      c, #100                         ; # quadrants to init
                            235 
   52ED                     236 loc_50ED:
   52ED CD 55 5F      [16]  237                         call    rand_0_9
   52F0 23            [ 4]  238                         inc     hl
   52F1 23            [ 4]  239                         inc     hl
   52F2 77            [ 7]  240                         ld      (hl), a                         ; init stars in quadrant
   52F3 23            [ 4]  241                         inc     hl                              ; next quadrant
   52F4 0D            [ 4]  242                         dec     c                               ; done all quadrants?
   52F5 C2 ED 52      [ 9]  243                         jp      NZ, loc_50ED                    ; no, loop
                            244 ; 1-3 space stations in the game
                            245 
   52F8                     246 init_space_stations:
   52F8 CD 55 5F      [16]  247                         call    rand_0_9
   52FB A7            [ 4]  248                         and     a                               ; zero?
   52FC CA F8 52      [ 9]  249                         jp      Z, init_space_stations          ; yes, regenerate
   52FF FE 04         [ 6]  250                         cp      #4                              ; greater than 3?
   5301 F2 F8 52      [ 9]  251                         jp      P, init_space_stations          ; yes, regenerate
   5304 4F            [ 4]  252                         ld      c, a                            ; (1-3)
                            253 
   5305                     254 loc_5105:
   5305 CD 55 5F      [16]  255                         call    rand_0_9
   5308 07            [ 3]  256                         rlca
   5309 07            [ 3]  257                         rlca
   530A 07            [ 3]  258                         rlca
   530B 07            [ 3]  259                         rlca
   530C 47            [ 4]  260                         ld      b, a
   530D CD 55 5F      [16]  261                         call    rand_0_9
   5310 80            [ 4]  262                         add     a, b                            ; random quadrant
   5311 C5            [11]  263                         push    bc
   5312 CD EF 5D      [16]  264                         call    get_ptr_quadrant_A_data
   5315 C1            [ 9]  265                         pop     bc
   5316 23            [ 4]  266                         inc     hl                              ; space stations in quadrant
   5317 7E            [ 6]  267                         ld      a, (hl)
   5318 A7            [ 4]  268                         and     a                               ; zero?
   5319 C2 05 53      [ 9]  269                         jp      NZ, loc_5105                    ; no, regenerate
   531C 36 01         [ 9]  270                         ld      (hl), #1                        ; add a space station
   531E 0D            [ 4]  271                         dec     c                               ; done all space stations?
   531F C2 05 53      [ 9]  272                         jp      NZ, loc_5105                    ; no, loop
                            273 ; init starting quadrant
   5322 CD 55 5F      [16]  274                         call    rand_0_9                        ; starting quadrant X
   5325 47            [ 4]  275                         ld      b, a
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 6.
Hexidecimal [16-Bits]



   5326 CD 55 5F      [16]  276                         call    rand_0_9                        ; starting quadrant Y
   5329 07            [ 3]  277                         rlca
   532A 07            [ 3]  278                         rlca
   532B 07            [ 3]  279                         rlca
   532C 07            [ 3]  280                         rlca
   532D 80            [ 4]  281                         add     a, b                            ; combine
   532E 32 B6 6A      [13]  282                         ld      (quadrant), a                   ; init starting quadrant
   5331 CD 83 61      [16]  283                         call    print_jovians_left
   5334 3E 03         [ 6]  284                         ld      a, #3                           ; SE, flag disabled
   5336 32 27 72      [13]  285                         ld      (disable_pod_update), a
   5339 0E 01         [ 6]  286                         ld      c, #1                           ; 1 quadrant
   533B CD 6D 5D      [16]  287                         call    move_quadrant
   533E CD D6 5D      [16]  288                         call    print_quadrant
   5341 CD A0 5F      [16]  289                         call    update_chaser_pods_cmd_entry
   5344 3A E0 55      [12]  290                         ld      a, (played_before)
   5347 A7            [ 4]  291                         and     a                               ; played a game before this?
   5348 C2 88 53      [ 9]  292                         jp      NZ, loc_5188                    ; yes, skip animated intro message
   534B 11 EC 6C      [ 9]  293                         ld      de, #aHQ_Officer                ; "                     "
   534E CD 24 61      [16]  294                         call    print_10_lines
   5351 11 DF 61      [ 9]  295                         ld      de, #aCommandHeadqua            ; "COMMAND HEADQUARTERS: THE JOVIANS HAVE "...
   5354 21 40 3F      [ 9]  296                         ld      hl, # VIDEO+0x340
   5357 CD 94 5F      [16]  297                         call    print_string
                            298 ; animate HQ officer
   535A 1E 11         [ 6]  299                         ld      e, #17                          ; # animation loops
                            300 
   535C                     301 loc_515C:
   535C CD 0F 5F      [16]  302                         call    rnd_delay
   535F 21 22 3D      [ 9]  303                         ld      hl, # VIDEO+0x122               ; HQ commander's eye
   5362 36 88         [ 9]  304                         ld      (hl), #0x88 ; 'à'
   5364 23            [ 4]  305                         inc     hl
   5365 36 8C         [ 9]  306                         ld      (hl), #0x8C ; 'å'
   5367 21 E1 3D      [ 9]  307                         ld      hl, # VIDEO+0x1E1               ; HQ commander's mouth
   536A 36 4F         [ 9]  308                         ld      (hl), #0x4F ; 'O'
   536C CD 0F 5F      [16]  309                         call    rnd_delay
   536F 21 22 3D      [ 9]  310                         ld      hl, # VIDEO+0x122               ; HQ commander's eye
   5372 36 AA         [ 9]  311                         ld      (hl), #0xAA ; '™'
   5374 23            [ 4]  312                         inc     hl
   5375 36 BB         [ 9]  313                         ld      (hl), #0xBB ; 'ª'
   5377 CD 55 5F      [16]  314                         call    rand_0_9
   537A FE 09         [ 6]  315                         cp      #9                              ; 9?
   537C D2 84 53      [ 9]  316                         jp      NC, loc_5184                    ; ues, skip
   537F 21 E1 3D      [ 9]  317                         ld      hl, # VIDEO+0x1E1               ; HQ commander's mouth
   5382 36 2D         [ 9]  318                         ld      (hl), #0x2D ; '-'
                            319 
   5384                     320 loc_5184:
   5384 1D            [ 4]  321                         dec     e
   5385 C2 5C 53      [ 9]  322                         jp      NZ, loc_515C
                            323 
   5388                     324 loc_5188:                                                       ; current quadrant on LR sensor display
   5388 21 C5 3C      [ 9]  325                         ld      hl, # VIDEO+0xC5
   538B CD 21 5E      [16]  326                         call    init_quadrant                   ; quadrant display
   538E 21 40 3F      [ 9]  327                         ld      hl, # VIDEO+0x340
   5391 11 89 62      [ 9]  328                         ld      de, #aHyprHIonIMsrMT            ; "HYPR=H,ION=I,MSR=M,TRM=T,PWRDST=D,SELFD"...
   5394 CD 91 5F      [16]  329                         call    clear_last_2_lines_print_string
                            330 
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 7.
Hexidecimal [16-Bits]



   5397                     331 game_loop:                                                      ; flag no cmd
   5397 3E FF         [ 6]  332                         ld      a, #0xFF
   5399 32 20 72      [13]  333                         ld      (cmd_flag), a
   539C 3A 28 72      [12]  334                         ld      a, (critical)
   539F A7            [ 4]  335                         and     a                               ; condition critical?
   53A0 CA BD 53      [ 9]  336                         jp      Z, loc_51BD                     ; no, skip
   53A3 3A 7F 6A      [12]  337                         ld      a, (engine_explode_countdown)
   53A6 3D            [ 4]  338                         dec     a                               ; tick!
   53A7 32 7F 6A      [13]  339                         ld      (engine_explode_countdown), a
   53AA F2 BD 53      [ 9]  340                         jp      P, loc_51BD                     ; set to explode? no, skip
   53AD 11 87 65      [ 9]  341                         ld      de, #aNavigatorTheEn            ; "NAVIGATOR:THE ENGINES ARE EXPLODING"
   53B0 CD 8E 5F      [16]  342                         call    print_string_last_line
   53B3 C3 AE 55      [ 9]  343                         jp      print_game_over_screen
                            344 ; END OF FUNCTION CHUNK FOR handle_low_power
                            345 
                            346 ; =============== S U B R O U T I N E =======================================
                            347 
                            348 
   53B6                     349 keyboard_scan:
   53B6 D5            [11]  350                         push    de
   53B7 CD 2B 00      [16]  351                         call    0x2B                            ; KBDSCN
   53BA A7            [ 4]  352                         and     a                               ; set flag for key
   53BB D1            [ 9]  353                         pop     de
   53BC C9            [ 9]  354                         ret
                            355 ; End of function keyboard_scan
                            356 
                            357 ; ---------------------------------------------------------------------------
                            358 ; START OF FUNCTION CHUNK FOR handle_low_power
                            359 
   53BD                     360 loc_51BD:
   53BD CD A0 5F      [16]  361                         call    update_chaser_pods_cmd_entry
   53C0 CD F6 5B      [16]  362                         call    handle_low_power
   53C3 3A FF 6B      [12]  363                         ld      a, (game_delay_factor)
   53C6 47            [ 4]  364                         ld      b, a
   53C7 CD 14 5F      [16]  365                         call    delay_B_with_duty_cycle
   53CA 97            [ 4]  366                         sub     a                               ; flag not fired
   53CB 32 23 72      [13]  367                         ld      (maser_fired), a
   53CE CD 64 61      [16]  368                         call    update_star_time
   53D1 C3 97 53      [ 9]  369                         jp      game_loop
                            370 ; END OF FUNCTION CHUNK FOR handle_low_power
                            371 ; ---------------------------------------------------------------------------
                            372 
   53D4                     373 hyperdrive:
   53D4 CD 15 61      [16]  374                         call    clear_last_2_lines
   53D7 97            [ 4]  375                         sub     a                               ; flag normal
   53D8 32 25 72      [13]  376                         ld      (jovian_time_frozen), a
   53DB 3A 22 72      [12]  377                         ld      a, (hyperdrive_disabled)
   53DE A7            [ 4]  378                         and     a                               ; disabled?
   53DF FA 02 54      [ 9]  379                         jp      M, loc_5202                     ; yes, exit
   53E2 CD 55 5F      [16]  380                         call    rand_0_9
   53E5 FE 05         [ 6]  381                         cp      #5                              ; less than 5?
   53E7 3A E9 6B      [12]  382                         ld      a, (pwr_hypr_ion)
   53EA DA F4 53      [ 9]  383                         jp      C, loc_51F4                     ; yes, skip
   53ED B7            [ 4]  384                         or      a                               ; zero power?
   53EE CA FC 53      [ 9]  385                         jp      Z, loc_51FC                     ; yes, skip
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 8.
Hexidecimal [16-Bits]



   53F1 C6 99         [ 6]  386                         add     a, #0x99 ; 'ô'
   53F3 27            [ 4]  387                         daa                                     ; decrement ion power
                            388 
   53F4                     389 loc_51F4:                                                       ; update
   53F4 32 E9 6B      [13]  390                         ld      (pwr_hypr_ion), a
   53F7 FE 06         [ 6]  391                         cp      #6                              ; greater than 5%?
   53F9 F2 08 54      [ 9]  392                         jp      P, loc_5208                     ; yes, go
                            393 
   53FC                     394 loc_51FC:                                                       ; "ENGINEER:COMMANDER, THE ENGINES HAVEN'T"...
   53FC 11 CA 62      [ 9]  395                         ld      de, #aEngineerComman
   53FF C3 8E 5F      [ 9]  396                         jp      print_string_last_line
                            397 ; ---------------------------------------------------------------------------
                            398 
   5402                     399 loc_5202:                                                       ; "ENGINEER:THE UNKNOWN WE SHOT DISABLED T"...
   5402 11 07 63      [ 9]  400                         ld      de, #aEngineerTheUnk
   5405 C3 8E 5F      [ 9]  401                         jp      print_string_last_line
                            402 ; ---------------------------------------------------------------------------
                            403 
   5408                     404 loc_5208:
   5408 CD 55 5F      [16]  405                         call    rand_0_9
   540B FE 06         [ 6]  406                         cp      #6                              ; less than 6?
   540D DA 13 54      [ 9]  407                         jp      C, loc_5213                     ; yes, skip
   5410 CD BB 5C      [16]  408                         call    jovian_attack_and_move
                            409 
   5413                     410 loc_5213:                                                       ; direction
   5413 CD FC 5E      [16]  411                         call    get_next_cmd_char
                            412 
   5416                     413 loc_5216:                                                       ; less than '0'?
   5416 D6 30         [ 6]  414                         sub     #0x30 ; '0'
   5418 47            [ 4]  415                         ld      b, a
   5419 FA 5A 5D      [ 9]  416                         jp      M, print_no_sense_and_ret       ; yes, exit
                     0000   417 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                            418                         cp      #8                              ; greater than 7?
                     0001   419 .else
   541C CA 5A 5D      [ 9]  420                         jp      Z, print_no_sense_and_ret       ; 0, exit
   541F FE 05         [ 6]  421                         cp      #5
   5421 CA 5A 5D      [ 9]  422                         jp      Z, print_no_sense_and_ret
   5424 FE 0A         [ 6]  423                         cp      #10                             ; greater than 9?
                            424 .endif                        
   5426 F2 5A 5D      [ 9]  425                         jp      P, print_no_sense_and_ret       ; yes, exit
                     0001   426 .ifdef BUILD_OPT_KEYPAD_DIRS                        
   5429                     427                         XLATE_DIR
                            428 .endif
                            429 
   5431                     430 loc_5221:
   5431 C5            [11]  431                         push    bc
   5432 78            [ 4]  432                         ld      a, b                            ; direction
   5433 0E 01         [ 6]  433                         ld      c, #1                           ; move 1 quadrant
   5435 CD 6D 5D      [16]  434                         call    move_quadrant
   5438 CD D6 5D      [16]  435                         call    print_quadrant
   543B 21 C5 3C      [ 9]  436                         ld      hl, # VIDEO+0xC5                ; current quadrant in LR sensor
   543E CD 21 5E      [16]  437                         call    init_quadrant
   5441 CD 38 61      [16]  438                         call    print_sector
   5444 06 08         [ 6]  439                         ld      b, #8
   5446 CD 9D 5F      [16]  440                         call    delay_B_and_update_all
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 9.
Hexidecimal [16-Bits]



   5449 C1            [ 9]  441                         pop     bc
   544A CD B6 53      [16]  442                         call    keyboard_scan
   544D CA 31 54      [ 9]  443                         jp      Z, loc_5221                     ; no key, loop
   5450 FE 09         [ 6]  444                         cp      #9                              ; tab?
   5452 C8            [10]  445                         ret     Z                               ; yes, return
   5453 C3 16 54      [ 9]  446                         jp      loc_5216                        ; loop
                            447 ; ---------------------------------------------------------------------------
                            448 
   5456                     449 ion_engine:
   5456 3A E9 6B      [12]  450                         ld      a, (pwr_hypr_ion)
   5459 FE 05         [ 6]  451                         cp      #5                              ; less than 5%?
   545B FA FC 53      [ 9]  452                         jp      M, loc_51FC                     ; yes, exit
   545E CD 55 5F      [16]  453                         call    rand_0_9
   5461 FE 03         [ 6]  454                         cp      #3                              ; greater than 2?
   5463 D2 69 54      [ 9]  455                         jp      NC, loc_5259                    ; yes, skip
   5466 CD BB 5C      [16]  456                         call    jovian_attack_and_move
                            457 
   5469                     458 loc_5259:
   5469 CD 15 61      [16]  459                         call    clear_last_2_lines
   546C CD FC 5E      [16]  460                         call    get_next_cmd_char               ; direction
                            461 
   546F                     462 get_dir:                                                        ; digit?
   546F D6 30         [ 6]  463                         sub     #0x30 ; '0'
   5471 FA 5A 5D      [ 9]  464                         jp      M, print_no_sense_and_ret       ; no, exit
                     0000   465 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                            466                         cp      #8                              ; greater than 7?
                     0001   467 .else
   5474 CA 5A 5D      [ 9]  468                         jp      Z, print_no_sense_and_ret       ; 0, exit
   5477 FE 05         [ 6]  469                         cp      #5
   5479 CA 5A 5D      [ 9]  470                         jp      Z, print_no_sense_and_ret
   547C FE 0A         [ 6]  471                         cp      #10                             ; greater than 9?
                            472 .endif                        
   547E F2 5A 5D      [ 9]  473                         jp      P, print_no_sense_and_ret       ; yes, exit
                     0001   474 .ifdef BUILD_OPT_KEYPAD_DIRS                        
   5481                     475                         XLATE_DIR
                            476 .endif
   5489 4F            [ 4]  477                         ld      c, a                            ; tmp store direction
   548A CD FC 5E      [16]  478                         call    get_next_cmd_char               ; speed
   548D CA 9F 54      [ 9]  479                         jp      Z, loc_527F                     ; not specified, skip
   5490 D6 30         [ 6]  480                         sub     #0x30 ; '0'                     ; digit?
   5492 FA 5A 5D      [ 9]  481                         jp      M, print_no_sense_and_ret       ; no, exit
   5495 FE 0A         [ 6]  482                         cp      #10                             ; greater than 9?
   5497 D2 5A 5D      [ 9]  483                         jp      NC, print_no_sense_and_ret      ; yes, exit
   549A 3C            [ 4]  484                         inc     a
   549B 3C            [ 4]  485                         inc     a                               ; speed += 2
   549C 32 54 6A      [13]  486                         ld      (ion_speed), a                  ; store
                            487 
   549F                     488 loc_527F:
   549F 21 EF 6B      [ 9]  489                         ld      hl, #dir_addr_delta_tbl
   54A2 79            [ 4]  490                         ld      a, c                            ; direction
   54A3 32 AB 6A      [13]  491                         ld      (ion_dir), a                    ; save
   54A6 A7            [ 4]  492                         and     a                               ; up?
   54A7 CA B0 54      [ 9]  493                         jp      Z, loc_5290                     ; yes, skip
                            494 
   54AA                     495 loc_528A:
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 10.
Hexidecimal [16-Bits]



   54AA 23            [ 4]  496                         inc     hl
   54AB 23            [ 4]  497                         inc     hl                              ; next table entry
   54AC 3D            [ 4]  498                         dec     a                               ; done?
   54AD C2 AA 54      [ 9]  499                         jp      NZ, loc_528A                    ; no, loop
                            500 
   54B0                     501 loc_5290:
   54B0 5E            [ 6]  502                         ld      e, (hl)
   54B1 23            [ 4]  503                         inc     hl
   54B2 56            [ 6]  504                         ld      d, (hl)                         ; DE = video address delta
   54B3 2A 7D 6A      [15]  505                         ld      hl, (hephaestus_video_addr)
                            506 
   54B6                     507 loc_5296:                                                       ; write empty star to quadrant display
   54B6 36 2E         [ 9]  508                         ld      (hl), #0x2E ; '.'
   54B8 E5            [11]  509                         push    hl                              ; save old address
   54B9 19            [ 7]  510                         add     hl, de                          ; update USS Hephaestus video address
   54BA 7E            [ 6]  511                         ld      a, (hl)                         ; get sector contents
   54BB E6 7F         [ 6]  512                         and     #0x7F ; ''
   54BD FE 2E         [ 6]  513                         cp      #0x2E ; '.'                     ; empty?
   54BF C2 E3 54      [ 9]  514                         jp      NZ, loc_52C3                    ; no, skip
   54C2 36 5B         [ 9]  515                         ld      (hl), #0x5B ; '['               ; USS Hephaestus graphic
   54C4 3A 54 6A      [12]  516                         ld      a, (ion_speed)
   54C7 47            [ 4]  517                         ld      b, a
   54C8 CD 9D 5F      [16]  518                         call    delay_B_and_update_all
   54CB E3            [16]  519                         ex      (sp), hl                        ; push new address, HL = old address
   54CC E1            [ 9]  520                         pop     hl                              ; pop new address
   54CD 22 7D 6A      [16]  521                         ld      (hephaestus_video_addr), hl     ; update
   54D0 CD B6 53      [16]  522                         call    keyboard_scan
   54D3 CA B6 54      [ 9]  523                         jp      Z, loc_5296                     ; no key, loop
   54D6 FE 09         [ 6]  524                         cp      #9                              ; <TAB>?
   54D8 C2 6F 54      [ 9]  525                         jp      NZ, get_dir                     ; no, loop
   54DB 36 5B         [ 9]  526                         ld      (hl), #0x5B ; '['               ; write USS Hephaestus graphic to video
   54DD 22 7D 6A      [16]  527                         ld      (hephaestus_video_addr), hl     ; update
   54E0 C3 38 61      [ 9]  528                         jp      print_sector
                            529 ; ---------------------------------------------------------------------------
                            530 
   54E3                     531 loc_52C3:                                                       ; old address
   54E3 E1            [ 9]  532                         pop     hl
   54E4 22 7D 6A      [16]  533                         ld      (hephaestus_video_addr), hl     ; update (stop)
   54E7 D5            [11]  534                         push    de
   54E8 CD 38 61      [16]  535                         call    print_sector
   54EB D1            [ 9]  536                         pop     de
   54EC 2A 7D 6A      [15]  537                         ld      hl, (hephaestus_video_addr)
   54EF 36 5B         [ 9]  538                         ld      (hl), #0x5B ; '['               ; display USS Hephaestus graphic
   54F1 19            [ 7]  539                         add     hl, de                          ; (potential) new address
   54F2 7E            [ 6]  540                         ld      a, (hl)                         ; get sector contents
   54F3 FE 8F         [ 6]  541                         cp      #0x8F ; 'è'                     ; ???
   54F5 CA 2C 55      [ 9]  542                         jp      Z, loc_530C
   54F8 E6 7F         [ 6]  543                         and     #0x7F ; ''
   54FA FE 30         [ 6]  544                         cp      #0x30 ; '0'                     ; space station?
   54FC CA 4B 55      [ 9]  545                         jp      Z, dock_space_station           ; yes, go
   54FF FE 25         [ 6]  546                         cp      #0x25 ; '%'                     ; triton mine
   5501 CA A8 55      [ 9]  547                         jp      Z, hit_triton_mine              ; yes, go
   5504 FE 26         [ 6]  548                         cp      #0x26 ; '&'                     ; jovian battle cruiser?
   5506 CA E1 55      [ 9]  549                         jp      Z, hit_jovian_warship           ; yes, go
   5509 FE 40         [ 6]  550                         cp      #0x40 ; '@'                     ; jovian command cruiser?
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 11.
Hexidecimal [16-Bits]



   550B CA E1 55      [ 9]  551                         jp      Z, hit_jovian_warship           ; yes, go
   550E FE 2A         [ 6]  552                         cp      #0x2A ; '*'                     ; star?
   5510 CA 38 56      [ 9]  553                         jp      Z, hit_star                     ; yes, go
   5513 FE 58         [ 6]  554                         cp      #0x58 ; 'X'                     ; unknown?
   5515 C2 37 55      [ 9]  555                         jp      NZ, left_quadrant               ; no, go
   5518 3E FF         [ 6]  556                         ld      a, #0xFF                        ; flag as blocked
   551A 32 AA 6A      [13]  557                         ld      (blocked_by_unknown), a
   551D E5            [11]  558                         push    hl
   551E 11 75 63      [ 9]  559                         ld      de, #aFirstOfficer_0            ; "FIRST OFFICER:CAPTAIN, WE HAVE BEEN BLO"...
   5521 CD 8E 5F      [16]  560                         call    print_string_last_line
   5524 06 08         [ 6]  561                         ld      b, #8
   5526 CD 14 5F      [16]  562                         call    delay_B_with_duty_cycle
   5529 C3 B0 57      [ 9]  563                         jp      loc_5570
                            564 ; ---------------------------------------------------------------------------
                            565 
   552C                     566 loc_530C:                                                       ; zero power
   552C AF            [ 4]  567                         xor     a
   552D 32 EA 6B      [13]  568                         ld      (pwr_lr_sensor), a
   5530 32 EB 6B      [13]  569                         ld      (pwr_sr_sensor), a
   5533 3D            [ 4]  570                         dec     a                               ; flag malfunctioned
   5534 32 24 72      [13]  571                         ld      (computer_malfunction), a
                            572 
   5537                     573 left_quadrant:                                                  ; direction
   5537 3A AB 6A      [12]  574                         ld      a, (ion_dir)
   553A 0E 01         [ 6]  575                         ld      c, #1                           ; 1 quadrant
   553C CD 6D 5D      [16]  576                         call    move_quadrant
   553F CD D6 5D      [16]  577                         call    print_quadrant
   5542 21 C5 3C      [ 9]  578                         ld      hl, # VIDEO+0xC5                ; current quadrant on LR sensor
   5545 CD 21 5E      [16]  579                         call    init_quadrant
   5548 C3 38 61      [ 9]  580                         jp      print_sector
                            581 ; ---------------------------------------------------------------------------
                            582 
   554B                     583 dock_space_station:                                             ; "COMMUNICATIONS:THE SPACE STATION HAS AC"...
   554B 11 BC 63      [ 9]  584                         ld      de, #aCommunications
   554E CD 8E 5F      [16]  585                         call    print_string_last_line
   5551 97            [ 4]  586                         sub     a                               ; A=0
   5552 32 28 72      [13]  587                         ld      (critical), a                   ; flag OK
   5555 32 1D 72      [13]  588                         ld      (always_zero), a
   5558 32 1E 72      [13]  589                         ld      (delay_duty_cycle_i), a
   555B 21 BB 3C      [ 9]  590                         ld      hl, # VIDEO+0xBB
   555E 11 FB 63      [ 9]  591                         ld      de, #aDock                      ; " DOCK"
   5561 CD 94 5F      [16]  592                         call    print_string
   5564 06 1A         [ 6]  593                         ld      b, #26
   5566 CD 14 5F      [16]  594                         call    delay_B_with_duty_cycle
   5569 3E 99         [ 6]  595                         ld      a, #0x99 ; 'ô'                  ; full power
   556B 32 0D 6C      [13]  596                         ld      (power_avail), a
   556E CD B2 61      [16]  597                         call    print_power_avail
   5571 CD FA 58      [16]  598                         call    update_power_distribution
   5574 21 7D 3D      [ 9]  599                         ld      hl, # VIDEO+0x17D               ; triton misls value video address
   5577 36 31         [ 9]  600                         ld      (hl), #0x31 ; '1'
   5579 23            [ 4]  601                         inc     hl
   557A 36 30         [ 9]  602                         ld      (hl), #0x30 ; '0'               ; display '10'
   557C 3E 10         [ 6]  603                         ld      a, #0x10                        ; max triton missiles
   557E 32 0E 6C      [13]  604                         ld      (triton_misls), a
   5581 3E 03         [ 6]  605                         ld      a, #3
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 12.
Hexidecimal [16-Bits]



   5583 32 0F 6C      [13]  606                         ld      (unused_69BA), a
   5586 32 80 6A      [13]  607                         ld      (antimatter_pods), a
   5589 21 3E 3E      [ 9]  608                         ld      hl, # VIDEO+0x23E               ; antimatter pods value video address
   558C CD B8 61      [16]  609                         call    print_BCD_byte                  ; display antimatter pods
   558F 21 0A 72      [ 9]  610                         ld      hl, #antimatter_pod_tbl
   5592 11 06 00      [ 9]  611                         ld      de, #6                          ; offset to next byte
   5595 06 03         [ 6]  612                         ld      b, #3                           ; bytes to clear
                            613 
   5597                     614 loc_5377:                                                       ; flag pod unused
   5597 36 00         [ 9]  615                         ld      (hl), #0
   5599 19            [ 7]  616                         add     hl, de                          ; next entry
   559A 05            [ 4]  617                         dec     b                               ; done all bytes?
   559B C2 97 55      [ 9]  618                         jp      NZ, loc_5377                    ; no, loop
   559E 97            [ 4]  619                         sub     a
   559F 32 22 72      [13]  620                         ld      (hyperdrive_disabled), a        ; repair hyperdrive
   55A2 32 24 72      [13]  621                         ld      (computer_malfunction), a       ; repair malfunction
   55A5 C3 15 61      [ 9]  622                         jp      clear_last_2_lines
                            623 ; ---------------------------------------------------------------------------
                            624 ; START OF FUNCTION CHUNK FOR fire_maser
                            625 
   55A8                     626 hit_triton_mine:                                                ; "FIRST OFFICER: SIR, WE HAVE HIT A TRITO"...
   55A8 11 13 64      [ 9]  627                         ld      de, #aFirstOfficerSi
   55AB CD 8E 5F      [16]  628                         call    print_string_last_line
                            629 ; END OF FUNCTION CHUNK FOR fire_maser
                            630 ; START OF FUNCTION CHUNK FOR handle_low_power
                            631 
   55AE                     632 print_game_over_screen:                                         ; -1
   55AE 97            [ 4]  633                         sub     a
   55AF 32 20 72      [13]  634                         ld      (cmd_flag), a                   ; disable cmd entry
   55B2 CD D9 60      [16]  635                         call    animate_destruction
   55B5 06 20         [ 6]  636                         ld      b, #0x20 ; ' '                  ; <SPACE>
   55B7 CD 49 5F      [16]  637                         call    clear_video_with_B
   55BA 11 EC 6C      [ 9]  638                         ld      de, #aHQ_Officer                ; "                     "
   55BD CD 24 61      [16]  639                         call    print_10_lines
   55C0 11 36 69      [ 9]  640                         ld      de, #aShipLogUssPhae            ; "SHIP LOG-USS PHAETON-CAPTAIN DAR: SENSO"...
   55C3 21 80 3F      [ 9]  641                         ld      hl, # VIDEO+0x380
   55C6 CD 94 5F      [16]  642                         call    print_string
   55C9 06 11         [ 6]  643                         ld      b, #17                          ; delay outer loop counter
                            644 
   55CB                     645 loc_53AB:                                                       ; delay inner loop counter
   55CB 11 00 00      [ 9]  646                         ld      de, #0
                            647 
   55CE                     648 delay:
   55CE 1B            [ 4]  649                         dec     de
   55CF 7A            [ 4]  650                         ld      a, d
   55D0 B3            [ 4]  651                         or      e
   55D1 C2 CE 55      [ 9]  652                         jp      NZ, delay
   55D4 05            [ 4]  653                         dec     b
   55D5 C2 CE 55      [ 9]  654                         jp      NZ, delay
   55D8 3E 01         [ 6]  655                         ld      a, #1                           ; flag as played
   55DA 32 E0 55      [13]  656                         ld      (played_before), a
   55DD C3 01 52      [ 9]  657                         jp      MAIN
                            658 ; END OF FUNCTION CHUNK FOR handle_low_power
                            659 ; ---------------------------------------------------------------------------
   55E0 00                  660 played_before:          .db 0
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 13.
Hexidecimal [16-Bits]



                            661 ; ---------------------------------------------------------------------------
                            662 
   55E1                     663 hit_jovian_warship:                                             ; "                     "
   55E1 11 10 6C      [ 9]  664                         ld      de, #aJovian_Officer
   55E4 CD 24 61      [16]  665                         call    print_10_lines
   55E7 11 7A 64      [ 9]  666                         ld      de, #aJovianWatchWhe            ; "JOVIAN: WATCH WHERE YOU ARE GOING YOU T"...
   55EA CD 8E 5F      [16]  667                         call    print_string_last_line
   55ED 11 41 64      [ 9]  668                         ld      de, #aCommunicatio_0            ; "COMMUNICATIONS:SIR, WE MADE CONTACT WIT"...
   55F0 21 80 3F      [ 9]  669                         ld      hl, # VIDEO+0x380
   55F3 CD 94 5F      [16]  670                         call    print_string
   55F6 3E 01         [ 6]  671                         ld      a, #1                           ; flag disabled
   55F8 32 27 72      [13]  672                         ld      (disable_pod_update), a
   55FB 1E 14         [ 6]  673                         ld      e, #20                          ; 20 iterations
                            674 
   55FD                     675 loc_53DD:
   55FD CD 0F 5F      [16]  676                         call    rnd_delay
                            677 ; animate jovian officer
   5600 21 5F 3D      [ 9]  678                         ld      hl, # VIDEO+0x15F
   5603 36 8C         [ 9]  679                         ld      (hl), #0x8C ; 'å'
   5605 23            [ 4]  680                         inc     hl
   5606 36 84         [ 9]  681                         ld      (hl), #0x84 ; 'Ñ'
   5608 23            [ 4]  682                         inc     hl
   5609 23            [ 4]  683                         inc     hl
   560A 36 AA         [ 9]  684                         ld      (hl), #0xAA ; '™'
   560C 23            [ 4]  685                         inc     hl
   560D 36 BB         [ 9]  686                         ld      (hl), #0xBB ; 'ª'
   560F 21 E1 3D      [ 9]  687                         ld      hl, # VIDEO+0x1E1
   5612 36 3D         [ 9]  688                         ld      (hl), #0x3D ; '='
   5614 CD 0F 5F      [16]  689                         call    rnd_delay
   5617 21 5F 3D      [ 9]  690                         ld      hl, # VIDEO+0x15F
   561A 36 B7         [ 9]  691                         ld      (hl), #0xB7 ; '∑'
   561C 23            [ 4]  692                         inc     hl
   561D 36 95         [ 9]  693                         ld      (hl), #0x95 ; 'ï'
   561F 23            [ 4]  694                         inc     hl
   5620 23            [ 4]  695                         inc     hl
   5621 36 88         [ 9]  696                         ld      (hl), #0x88 ; 'à'
   5623 23            [ 4]  697                         inc     hl
   5624 36 8C         [ 9]  698                         ld      (hl), #0x8C ; 'å'
   5626 21 E1 3D      [ 9]  699                         ld      hl, # VIDEO+0x1E1
   5629 36 4F         [ 9]  700                         ld      (hl), #0x4F ; 'O'
   562B CD A0 5F      [16]  701                         call    update_chaser_pods_cmd_entry
   562E 1D            [ 4]  702                         dec     e                               ; done animation?
   562F C2 FD 55      [ 9]  703                         jp      NZ, loc_53DD                    ; no, loop
   5632 21 C5 3C      [ 9]  704                         ld      hl, # VIDEO+0xC5                ; ptr current quadrant on LR sensor
   5635 C3 21 5E      [ 9]  705                         jp      init_quadrant                   ; randomise again!
                            706 ; ---------------------------------------------------------------------------
                            707 
   5638                     708 hit_star:                                                       ; "NAVIGATOR:WE HIT A STAR!?!"
   5638 11 A9 64      [ 9]  709                         ld      de, #aNavigatorWeHit
   563B CD 8E 5F      [16]  710                         call    print_string_last_line
                            711 ; *** BUG #001 - in original SOL-20 source code
                            712 ; this value is an index into a duty cycle table
                            713 ; which only has 4 entries
                            714 ; - can only assume it's picking up a garbage value
   563E 3E 11         [ 6]  715                         ld      a, #17
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 14.
Hexidecimal [16-Bits]



   5640 32 1E 72      [13]  716                         ld      (delay_duty_cycle_i), a
   5643 47            [ 4]  717                         ld      b, a
   5644 CD 14 5F      [16]  718                         call    delay_B_with_duty_cycle
   5647 C3 AE 55      [ 9]  719                         jp      print_game_over_screen
                            720 ; ---------------------------------------------------------------------------
                            721 
   564A                     722 maser:
   564A CD 15 61      [16]  723                         call    clear_last_2_lines
   564D 3E FF         [ 6]  724                         ld      a, #0xFF                        ; flag fired
   564F 32 23 72      [13]  725                         ld      (maser_fired), a
   5652 3A ED 6B      [12]  726                         ld      a, (pwr_masers)
   5655 FE 08         [ 6]  727                         cp      #8                              ; less than 8%?
   5657 F2 60 56      [ 9]  728                         jp      P, loc_5440                     ; no, skip
   565A 11 C4 64      [ 9]  729                         ld      de, #aEngineerComm_0            ; "ENGINEER:COMMANDER, WE HAVEN'T THE POWE"...
   565D C3 8E 5F      [ 9]  730                         jp      print_string_last_line
                            731 ; ---------------------------------------------------------------------------
                            732 
   5660                     733 loc_5440:                                                       ; direction
   5660 CD FC 5E      [16]  734                         call    get_next_cmd_char
   5663 D6 30         [ 6]  735                         sub     #0x30 ; '0'                     ; digit?
   5665 FA 5A 5D      [ 9]  736                         jp      M, print_no_sense_and_ret       ; no, exit
                     0000   737 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                            738                         cp      #8                              ; greater than 7?
                     0001   739 .else
   5668 CA 5A 5D      [ 9]  740                         jp      Z, print_no_sense_and_ret       ; 0, exit
   566B FE 05         [ 6]  741                         cp      #5
   566D CA 5A 5D      [ 9]  742                         jp      Z, print_no_sense_and_ret
   5670 FE 0A         [ 6]  743                         cp      #10                             ; greater than 9?
                            744 .endif                        
   5672 F2 5A 5D      [ 9]  745                         jp      P, print_no_sense_and_ret       ; yes, exit
                     0001   746 .ifdef BUILD_OPT_KEYPAD_DIRS                        
   5675                     747                         XLATE_DIR
                            748 .endif
                            749 
                            750 ; =============== S U B R O U T I N E =======================================
                            751 
                            752 
   567D                     753 fire_maser:
                            754 
                            755 ; FUNCTION CHUNK AT 5388 SIZE 00000006 BYTES
                            756 
   567D 21 EF 6B      [ 9]  757                         ld      hl, #dir_addr_delta_tbl
   5680 A7            [ 4]  758                         and     a                               ; up?
   5681 CA 8A 56      [ 9]  759                         jp      Z, loc_545A                     ; yes, exit
                            760 
   5684                     761 loc_5454:
   5684 23            [ 4]  762                         inc     hl
   5685 23            [ 4]  763                         inc     hl                              ; next table entry
   5686 3D            [ 4]  764                         dec     a                               ; done?
   5687 C2 84 56      [ 9]  765                         jp      NZ, loc_5454                    ; no, loop
                            766 
   568A                     767 loc_545A:
   568A 5E            [ 6]  768                         ld      e, (hl)
   568B 23            [ 4]  769                         inc     hl
   568C 56            [ 6]  770                         ld      d, (hl)                         ; DE = delta
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 15.
Hexidecimal [16-Bits]



   568D 3A 1E 72      [12]  771                         ld      a, (delay_duty_cycle_i)
   5690 32 46 6A      [13]  772                         ld      (tmp_delay_cycle), a
   5693 3E 02         [ 6]  773                         ld      a, #2
   5695 32 1E 72      [13]  774                         ld      (delay_duty_cycle_i), a
   5698 2A 7D 6A      [15]  775                         ld      hl, (hephaestus_video_addr)
   569B 06 00         [ 6]  776                         ld      b, #0                           ; init maser path length
   569D D5            [11]  777                         push    de
                            778 
   569E                     779 move_maser:                                                     ; add delta
   569E 19            [ 7]  780                         add     hl, de
   569F 7E            [ 6]  781                         ld      a, (hl)                         ; get sector contents
   56A0 32 48 6A      [13]  782                         ld      (tmp_sector_contents), a
   56A3 36 BF         [ 9]  783                         ld      (hl), #0xBF ; 'ø'               ; write maser graphic to video
   56A5 C5            [11]  784                         push    bc
   56A6 06 01         [ 6]  785                         ld      b, #1
   56A8 CD 9D 5F      [16]  786                         call    delay_B_and_update_all
   56AB C1            [ 9]  787                         pop     bc
   56AC 3A 48 6A      [12]  788                         ld      a, (tmp_sector_contents)
   56AF E6 7F         [ 6]  789                         and     #0x7F ; ''
   56B1 04            [ 4]  790                         inc     b                               ; inc maser path length
   56B2 FE 2E         [ 6]  791                         cp      #0x2E ; '.'                     ; empty sector?
   56B4 CA 9E 56      [ 9]  792                         jp      Z, move_maser                   ; yes, loop
   56B7 FE 26         [ 6]  793                         cp      #0x26 ; '&'                     ; jovian battle cruiser?
   56B9 CA DE 56      [ 9]  794                         jp      Z, maser_hit_jovian             ; yes, go
   56BC FE 25         [ 6]  795                         cp      #0x25 ; '%'
   56BE CA A8 55      [ 9]  796                         jp      Z, hit_triton_mine
   56C1 FE 58         [ 6]  797                         cp      #0x58 ; 'X'
   56C3 C2 D3 56      [ 9]  798                         jp      NZ, maser_miss                  ; no, go
   56C6 D1            [ 9]  799                         pop     de
   56C7 E5            [11]  800                         push    hl
   56C8 21 D0 56      [ 9]  801                         ld      hl, #loc_54A0                   ; return address
   56CB E3            [16]  802                         ex      (sp), hl
   56CC D5            [11]  803                         push    de
   56CD C3 F9 56      [ 9]  804                         jp      wipe_maser
                            805 ; ---------------------------------------------------------------------------
                            806 
   56D0                     807 loc_54A0:
   56D0 C3 AF 57      [ 9]  808                         jp      shot_hit_unknown
                            809 ; ---------------------------------------------------------------------------
                            810 
   56D3                     811 maser_miss:                                                     ; "FIRST OFFICER:SIR, MY SENSORS SHOW MASE"...
   56D3 11 FC 64      [ 9]  812                         ld      de, #aFirstOfficer_1
   56D6 C5            [11]  813                         push    bc
   56D7 CD 8E 5F      [16]  814                         call    print_string_last_line
   56DA C1            [ 9]  815                         pop     bc
   56DB C3 F9 56      [ 9]  816                         jp      wipe_maser
                            817 ; ---------------------------------------------------------------------------
                            818 
   56DE                     819 maser_hit_jovian:
   56DE CD 55 5F      [16]  820                         call    rand_0_9
   56E1 FE 07         [ 6]  821                         cp      #7                              ; less than 7?
   56E3 FA F9 56      [ 9]  822                         jp      M, wipe_maser                   ; yes, go
   56E6 36 AE         [ 9]  823                         ld      (hl), #0xAE ; 'Æ'
   56E8 3E 2E         [ 6]  824                         ld      a, #0x2E ; '.'                  ; empty sector
   56EA 32 48 6A      [13]  825                         ld      (tmp_sector_contents), a
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 16.
Hexidecimal [16-Bits]



   56ED C5            [11]  826                         push    bc
   56EE CD 73 61      [16]  827                         call    dec_jovians
   56F1 C1            [ 9]  828                         pop     bc
   56F2 3A C5 3C      [12]  829                         ld      a, (VIDEO+0xC5)                 ; warships in current quadrant of LR sensor
   56F5 3D            [ 4]  830                         dec     a                               ; adjust
   56F6 32 C5 3C      [13]  831                         ld      (VIDEO+0xC5), a                 ; update
                            832 
   56F9                     833 wipe_maser:
   56F9 CD A0 5F      [16]  834                         call    update_chaser_pods_cmd_entry
   56FC D1            [ 9]  835                         pop     de
   56FD 2A 7D 6A      [15]  836                         ld      hl, (hephaestus_video_addr)
                            837 
   5700                     838 loc_54D0:                                                       ; add delta
   5700 19            [ 7]  839                         add     hl, de
   5701 7E            [ 6]  840                         ld      a, (hl)                         ; get sector contents
   5702 3E 2E         [ 6]  841                         ld      a, #0x2E ; '.'                  ; empty
   5704 77            [ 7]  842                         ld      (hl), a                         ; write to video
   5705 C5            [11]  843                         push    bc
   5706 06 01         [ 6]  844                         ld      b, #1
   5708 CD 9D 5F      [16]  845                         call    delay_B_and_update_all
   570B C1            [ 9]  846                         pop     bc
   570C 05            [ 4]  847                         dec     b                               ; done path?
   570D C2 00 57      [ 9]  848                         jp      NZ, loc_54D0                    ; no, loop
   5710 3A 48 6A      [12]  849                         ld      a, (tmp_sector_contents)
   5713 77            [ 7]  850                         ld      (hl), a                         ; write to video
   5714 3A 46 6A      [12]  851                         ld      a, (tmp_delay_cycle)
   5717 32 1E 72      [13]  852                         ld      (delay_duty_cycle_i), a
   571A C9            [ 9]  853                         ret
                            854 ; End of function fire_maser
                            855 
                            856 ; ---------------------------------------------------------------------------
                            857 
   571B                     858 triton_missile:
   571B CD 15 61      [16]  859                         call    clear_last_2_lines
   571E CD CA 61      [16]  860                         call    dec_triton_misls_and_print
   5721 DA B6 58      [ 9]  861                         jp      C, print_no_more_triton_misls   ; no missiles, exit
   5724 3A EE 6B      [12]  862                         ld      a, (pwr_trt_missl)
   5727 FE 0A         [ 6]  863                         cp      #10                             ; less than 10%?
   5729 F2 32 57      [ 9]  864                         jp      P, triton_pwr_ok                ; no, skip
                            865 
   572C                     866 loc_54FC:                                                       ; "ENGINEER:COMMANDER, THE MISSILE TUBES A"...
   572C 11 33 65      [ 9]  867                         ld      de, #aEngineerComm_1
   572F C3 8E 5F      [ 9]  868                         jp      print_string_last_line
                            869 ; ---------------------------------------------------------------------------
                            870 
   5732                     871 triton_pwr_ok:                                                  ; direction
   5732 CD FC 5E      [16]  872                         call    get_next_cmd_char
   5735 D6 30         [ 6]  873                         sub     #0x30 ; '0'                     ; digit?
   5737 FA 5A 5D      [ 9]  874                         jp      M, print_no_sense_and_ret       ; no, exit
                     0000   875 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                            876                         cp      #8                              ; greater than 7?
                     0001   877 .else
   573A CA 5A 5D      [ 9]  878                         jp      Z, print_no_sense_and_ret       ; 0, exit
   573D FE 05         [ 6]  879                         cp      #5
   573F CA 5A 5D      [ 9]  880                         jp      Z, print_no_sense_and_ret
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 17.
Hexidecimal [16-Bits]



   5742 FE 0A         [ 6]  881                         cp      #10                             ; greater than 9?
                            882 .endif                        
   5744 F2 5A 5D      [ 9]  883                         jp      P, print_no_sense_and_ret       ; yes, exit
                     0001   884 .ifdef BUILD_OPT_KEYPAD_DIRS                        
   5747                     885                         XLATE_DIR
                            886 .endif
                            887 
                            888 ; =============== S U B R O U T I N E =======================================
                            889 
                            890 
   574F                     891 move_triton_missile:
                            892 
                            893 ; FUNCTION CHUNK AT 5585 SIZE 00000017 BYTES
                            894 ; FUNCTION CHUNK AT 5662 SIZE 00000014 BYTES
                            895 ; FUNCTION CHUNK AT 5842 SIZE 0000000F BYTES
                            896 
   574F 21 EF 6B      [ 9]  897                         ld      hl, #dir_addr_delta_tbl
   5752 A7            [ 4]  898                         and     a                               ; up?
   5753 CA 5C 57      [ 9]  899                         jp      Z, loc_551C                     ; yes, skip
                            900 
   5756                     901 loc_5516:
   5756 23            [ 4]  902                         inc     hl
   5757 23            [ 4]  903                         inc     hl                              ; next tbl entry
   5758 3D            [ 4]  904                         dec     a                               ; done?
   5759 C2 56 57      [ 9]  905                         jp      NZ, loc_5516                    ; no, loop
                            906 
   575C                     907 loc_551C:
   575C 5E            [ 6]  908                         ld      e, (hl)
   575D 23            [ 4]  909                         inc     hl
   575E 56            [ 6]  910                         ld      d, (hl)                         ; DE = delta
   575F 2A 7D 6A      [15]  911                         ld      hl, (hephaestus_video_addr)
                            912 
   5762                     913 loc_5522:                                                       ; add delta
   5762 19            [ 7]  914                         add     hl, de
   5763 7E            [ 6]  915                         ld      a, (hl)                         ; get sector contents
   5764 E6 7F         [ 6]  916                         and     #0x7F ; ''
   5766 FE 2E         [ 6]  917                         cp      #0x2E ; '.'                     ; empty?
   5768 C2 7F 57      [ 9]  918                         jp      NZ, loc_553F                    ; no, skip
   576B 36 2B         [ 9]  919                         ld      (hl), #0x2B ; '+'               ; write missile graphic to video
   576D 06 06         [ 6]  920                         ld      b, #6
   576F CD 9D 5F      [16]  921                         call    delay_B_and_update_all
   5772 36 2E         [ 9]  922                         ld      (hl), #0x2E ; '.'               ; write empty sector to video
   5774 CD B6 53      [16]  923                         call    keyboard_scan                   ; any key?
   5777 CA 62 57      [ 9]  924                         jp      Z, loc_5522                     ; no, loop
   577A FE 09         [ 6]  925                         cp      #9                              ; <TAB>?
   577C C2 62 57      [ 9]  926                         jp      NZ, loc_5522                    ; no, loop
                            927 
   577F                     928 loc_553F:                                                       ; get sector contents
   577F 7E            [ 6]  929                         ld      a, (hl)
   5780 32 48 6A      [13]  930                         ld      (tmp_sector_contents), a
   5783 F6 80         [ 6]  931                         or      #0x80 ; 'Ä'
   5785 77            [ 7]  932                         ld      (hl), a                         ; animate
   5786 06 06         [ 6]  933                         ld      b, #6
   5788 CD 9D 5F      [16]  934                         call    delay_B_and_update_all
   578B 7E            [ 6]  935                         ld      a, (hl)                         ; *** dead code
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 18.
Hexidecimal [16-Bits]



   578C 3A 48 6A      [12]  936                         ld      a, (tmp_sector_contents)
   578F 77            [ 7]  937                         ld      (hl), a                         ; restore contents
   5790 FE 30         [ 6]  938                         cp      #0x30 ; '0'                     ; space station?
   5792 CA AE 58      [ 9]  939                         jp      Z, missile_destroyed_object     ; yes, go
   5795 FE 26         [ 6]  940                         cp      #0x26 ; '&'                     ; jovian battle cruiser?
   5797 CA A2 58      [ 9]  941                         jp      Z, missile_hit_jovian           ; yes, go
   579A FE 25         [ 6]  942                         cp      #0x25 ; '%'                     ; triton mine?
   579C CA A8 55      [ 9]  943                         jp      Z, hit_triton_mine              ; yes, go
   579F FE 58         [ 6]  944                         cp      #0x58 ; 'X'                     ; unknown?
   57A1 CA AF 57      [ 9]  945                         jp      Z, shot_hit_unknown             ; yes, go
   57A4 FE 5B         [ 6]  946                         cp      #0x5B ; '['                     ; USS Hephaestus?
   57A6 CA 87 5A      [ 9]  947                         jp      Z, power_minus_2_and_update     ; yes, go
   57A9 11 59 68      [ 9]  948                         ld      de, #aComputerTriton            ; "COMPUTER:TRITON MISSILE HAS NO EFFECT"
   57AC C3 8E 5F      [ 9]  949                         jp      print_string_last_line
                            950 ; ---------------------------------------------------------------------------
                            951 
   57AF                     952 shot_hit_unknown:                                               ; sector video address
   57AF E5            [11]  953                         push    hl
                            954 
   57B0                     955 loc_5570:                                                       ; random entry
   57B0 CD 55 5F      [16]  956                         call    rand_0_9
   57B3 A7            [ 4]  957                         and     a                               ; zero?
   57B4 CA C5 57      [ 9]  958                         jp      Z, finish_shot                  ; yes, go
   57B7 21 7F 6A      [ 9]  959                         ld      hl, #missile_hit_unknown_tbl-2
                            960 
   57BA                     961 loc_557A:                                                       ; found entry?
   57BA 3D            [ 4]  962                         dec     a
   57BB 23            [ 4]  963                         inc     hl
   57BC 23            [ 4]  964                         inc     hl
   57BD C2 BA 57      [ 9]  965                         jp      NZ, loc_557A                    ; no, loop
                            966 ; End of function move_triton_missile
                            967 
                            968 ; START OF FUNCTION CHUNK FOR update_chaser_pods_cmd_entry
                            969 
   57C0                     970 jump_HL_vector:
   57C0 7E            [ 6]  971                         ld      a, (hl)
   57C1 23            [ 4]  972                         inc     hl
   57C2 66            [ 6]  973                         ld      h, (hl)
   57C3 6F            [ 4]  974                         ld      l, a                            ; HL=vector address
   57C4 E9            [ 3]  975                         jp      (hl)
                            976 ; END OF FUNCTION CHUNK FOR update_chaser_pods_cmd_entry
                            977 ; ---------------------------------------------------------------------------
                            978 ; START OF FUNCTION CHUNK FOR move_triton_missile
                            979 
   57C5                     980 finish_shot:
   57C5 E1            [ 9]  981                         pop     hl
   57C6 3A AA 6A      [12]  982                         ld      a, (blocked_by_unknown)
   57C9 A7            [ 4]  983                         and     a                               ; blocked?
   57CA F2 D2 57      [ 9]  984                         jp      P, loc_5592                     ; no, skip
   57CD AF            [ 4]  985                         xor     a                               ; flag OK
   57CE 32 AA 6A      [13]  986                         ld      (blocked_by_unknown), a
   57D1 C9            [ 9]  987                         ret
                            988 ; ---------------------------------------------------------------------------
                            989 
   57D2                     990 loc_5592:                                                       ; *** dead code
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 19.
Hexidecimal [16-Bits]



   57D2 3A 23 72      [12]  991                         ld      a, (maser_fired)
   57D5 97            [ 4]  992                         sub     a                               ; flag not fired
   57D6 32 23 72      [13]  993                         ld      (maser_fired), a
   57D9 C3 AE 58      [ 9]  994                         jp      missile_destroyed_object
                            995 ; END OF FUNCTION CHUNK FOR move_triton_missile
                            996 ; ---------------------------------------------------------------------------
                            997 ; Either
                            998 ; * maser fired, rebounds in random direction, or
                            999 ; * if blocked, removes Hephaestus & object from display, or
                           1000 ; * fires triton missile in random direction
                           1001 
                           1002 
   57DC                    1003 missile_hit_unk_079:
   57DC 3A 23 72      [12] 1004                         ld      a, (maser_fired)
   57DF A7            [ 4] 1005                         and     a                               ; fired?
   57E0 2A 7D 6A      [15] 1006                         ld      hl, (hephaestus_video_addr)
   57E3 E3            [16] 1007                         ex      (sp), hl                        ; swap with sector video address
   57E4 22 7D 6A      [16] 1008                         ld      (hephaestus_video_addr), hl     ; store as hephaestrus address (for fire)
   57E7 F2 F8 57      [ 9] 1009                         jp      P, loc_55B8                     ; not fired, skip
                           1010 
   57EA                    1011 loc_55AA:                                                       ; dir
   57EA CD 55 5F      [16] 1012                         call    rand_0_9
   57ED FE 08         [ 6] 1013                         cp      #8                              ; greater than 7?
   57EF F2 EA 57      [ 9] 1014                         jp      P, loc_55AA                     ; yes, regenerate
   57F2 CD 7D 56      [16] 1015                         call    fire_maser                      ; A=dir from unknown object
   57F5 C3 10 58      [ 9] 1016                         jp      loc_55D0
                           1017 ; ---------------------------------------------------------------------------
                           1018 
   57F8                    1019 loc_55B8:
   57F8 3A AA 6A      [12] 1020                         ld      a, (blocked_by_unknown)
   57FB B7            [ 4] 1021                         or      a                               ; blocked?
   57FC F2 05 58      [ 9] 1022                         jp      P, loc_55C5                     ; no, go
   57FF 36 2E         [ 9] 1023                         ld      (hl), #0x2E ; '.'               ; write empty sector to video (unknown object)
   5801 E1            [ 9] 1024                         pop     hl                              ; hephaestus video address
   5802 36 2E         [ 9] 1025                         ld      (hl), #0x2E ; '.'               ; write empty sector to video
   5804 C9            [ 9] 1026                         ret
                           1027 ; ---------------------------------------------------------------------------
                           1028 
   5805                    1029 loc_55C5:                                                       ; dir
   5805 CD 55 5F      [16] 1030                         call    rand_0_9
   5808 FE 08         [ 6] 1031                         cp      #8                              ; greater than 7?
   580A F2 05 58      [ 9] 1032                         jp      P, loc_55C5                     ; yes, regenerate
   580D CD 4F 57      [16] 1033                         call    move_triton_missile
                           1034 
   5810                    1035 loc_55D0:                                                       ; hephaestus video address
   5810 E1            [ 9] 1036                         pop     hl
   5811 22 7D 6A      [16] 1037                         ld      (hephaestus_video_addr), hl     ; restore
   5814 C9            [ 9] 1038                         ret
                           1039 ; ---------------------------------------------------------------------------
                           1040 ; * sets all objects to unknown
                           1041 ; * randomly disables hyperdrive
                           1042 
   5815                    1043 missile_hit_unk_1:                                              ; unknown graphic
   5815 3E 58         [ 6] 1044                         ld      a, #0x58 ; 'X'
   5817 32 2B 58      [13] 1045                         ld      (loc_55EA+1), a                 ; patch!
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 20.
Hexidecimal [16-Bits]



                           1046 
   581A                    1047 loc_55DA:                                                       ; top-left '.' in quadrant display
   581A 21 57 3C      [ 9] 1048                         ld      hl, # VIDEO+0x57
   581D 11 2B 00      [ 9] 1049                         ld      de, #0x2B ; '+'                 ; offset to next line of quadrant display
   5820 06 0A         [ 6] 1050                         ld      b, #10                          ; 10 rows to update
                           1051 
   5822                    1052 loc_55E2:                                                       ; 21 columns to update
   5822 0E 15         [ 6] 1053                         ld      c, #21
                           1054 
   5824                    1055 loc_55E4:                                                       ; get sector contents
   5824 7E            [ 6] 1056                         ld      a, (hl)
   5825 FE 2E         [ 6] 1057                         cp      #0x2E ; '.'                     ; empty?
   5827 C2 2C 58      [ 9] 1058                         jp      NZ, loc_55EC                    ; no, skip
                           1059 ; the object graphic is patched (X/%)
                           1060 
   582A                    1061 loc_55EA:                                                       ; write object graphic to video
   582A 36 58         [ 9] 1062                         ld      (hl), #0x58 ; 'X'
                           1063 
   582C                    1064 loc_55EC:                                                       ; done all columns?
   582C 0D            [ 4] 1065                         dec     c
   582D 23            [ 4] 1066                         inc     hl                              ; next video address
   582E C2 24 58      [ 9] 1067                         jp      NZ, loc_55E4                    ; no, loop
   5831 19            [ 7] 1068                         add     hl, de                          ; next row video address
   5832 05            [ 4] 1069                         dec     b                               ; done all rows?
   5833 C2 22 58      [ 9] 1070                         jp      NZ, loc_55E2                    ; no, loop
   5836 CD 55 5F      [16] 1071                         call    rand_0_9
   5839 FE 05         [ 6] 1072                         cp      #5                              ; greater than 4?
   583B D2 43 58      [ 9] 1073                         jp      NC, loc_5603                    ; yes, skip
   583E 3E FF         [ 6] 1074                         ld      a, #0xFF                        ; flag disabled
   5840 32 22 72      [13] 1075                         ld      (hyperdrive_disabled), a
                           1076 
   5843                    1077 loc_5603:
   5843 E1            [ 9] 1078                         pop     hl
   5844 C9            [ 9] 1079                         ret
                           1080 ; ---------------------------------------------------------------------------
                           1081 ; * sets all objects to triton mines
                           1082 ; * randomly disables hyperdrive
                           1083 
   5845                    1084 missile_hit_unk_2:                                              ; triton mine
   5845 3E 25         [ 6] 1085                         ld      a, #0x25 ; '%'
   5847 32 2B 58      [13] 1086                         ld      (loc_55EA+1), a                 ; patch
   584A C3 1A 58      [ 9] 1087                         jp      loc_55DA
                           1088 ; ---------------------------------------------------------------------------
                           1089 ; randomly either:
                           1090 ; * changes unknown to space station, or
                           1091 ; * jumps to option 4
                           1092 
   584D                    1093 missile_hit_unk_6:
   584D CD 55 5F      [16] 1094                         call    rand_0_9
   5850 FE 05         [ 6] 1095                         cp      #5                              ; less than 5?
   5852 DA 7D 58      [ 9] 1096                         jp      C, missile_hit_unk_4            ; yes, go
   5855 E1            [ 9] 1097                         pop     hl                              ; unknown object address
   5856 36 30         [ 9] 1098                         ld      (hl), #0x30 ; '0'               ; is now a space station!
   5858 C9            [ 9] 1099                         ret
                           1100 ; ---------------------------------------------------------------------------
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 21.
Hexidecimal [16-Bits]



                           1101 ; warps to a random quadrant
                           1102 
   5859                    1103 missile_hit_unk_3:
   5859 CD 55 5F      [16] 1104                         call    rand_0_9
   585C 07            [ 3] 1105                         rlca
   585D 07            [ 3] 1106                         rlca
   585E 07            [ 3] 1107                         rlca
   585F 07            [ 3] 1108                         rlca
   5860 47            [ 4] 1109                         ld      b, a
   5861 CD 55 5F      [16] 1110                         call    rand_0_9
   5864 80            [ 4] 1111                         add     a, b                            ; random quadrant
   5865 32 B6 6A      [13] 1112                         ld      (quadrant), a                   ; store as current
   5868 3E 03         [ 6] 1113                         ld      a, #3                           ; direction=SE
   586A 0E 01         [ 6] 1114                         ld      c, #1                           ; 1 quadrant
   586C CD 6D 5D      [16] 1115                         call    move_quadrant
   586F 21 C5 3C      [ 9] 1116                         ld      hl, # VIDEO+0xC5                ; current quadrant LR sensor
   5872 CD 21 5E      [16] 1117                         call    init_quadrant
   5875 CD D6 5D      [16] 1118                         call    print_quadrant
   5878 CD 38 61      [16] 1119                         call    print_sector
   587B E1            [ 9] 1120                         pop     hl                              ; discard
   587C C9            [ 9] 1121                         ret
                           1122 ; ---------------------------------------------------------------------------
                           1123 ; rolls the dice again!?!
                           1124 
   587D                    1125 missile_hit_unk_4:                                              ; *** dead code
   587D CD 55 5F      [16] 1126                         call    rand_0_9
   5880 CD 0F 5F      [16] 1127                         call    rnd_delay
   5883 C3 B0 57      [ 9] 1128                         jp      loc_5570                        ; roll the dice again!
                           1129 ; ---------------------------------------------------------------------------
                           1130 ; randomly decrement power
                           1131 
   5886                    1132 missile_hit_unk_58:                                             ; "FIRST OFFICER: THE UNKNOWN IS STEALING "...
   5886 11 0F 6A      [ 9] 1133                         ld      de, #aFirstOfficer_2
   5889 CD 8E 5F      [16] 1134                         call    print_string_last_line
   588C E1            [ 9] 1135                         pop     hl                              ; discard
                           1136 
   588D                    1137 loc_564D:
   588D CD 55 5F      [16] 1138                         call    rand_0_9
   5890 FE 04         [ 6] 1139                         cp      #4                              ; less than 4?
   5892 DA 9D 58      [ 9] 1140                         jp      C, loc_565D                     ; yes, go
   5895 06 12         [ 6] 1141                         ld      b, #18                          ; *** dead code
   5897 CD BB 5C      [16] 1142                         call    jovian_attack_and_move
   589A C3 8D 58      [ 9] 1143                         jp      loc_564D                        ; again
                           1144 ; ---------------------------------------------------------------------------
                           1145 
   589D                    1146 loc_565D:                                                       ; *** dead code
   589D 06 19         [ 6] 1147                         ld      b, #25
   589F C3 15 61      [ 9] 1148                         jp      clear_last_2_lines              ; wipe the message
                           1149 ; ---------------------------------------------------------------------------
                           1150 ; START OF FUNCTION CHUNK FOR move_triton_missile
                           1151 
   58A2                    1152 missile_hit_jovian:
   58A2 E5            [11] 1153                         push    hl
   58A3 CD 73 61      [16] 1154                         call    dec_jovians
   58A6 3A C5 3C      [12] 1155                         ld      a, (VIDEO+0xC5)                 ; warships in quadrant, LR sensor
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 22.
Hexidecimal [16-Bits]



   58A9 3D            [ 4] 1156                         dec     a                               ; adjust
   58AA 32 C5 3C      [13] 1157                         ld      (VIDEO+0xC5), a                 ; update
   58AD E1            [ 9] 1158                         pop     hl                              ; object video address
                           1159 ; the object is not removed from any data table
                           1160 ; - confirmed; re-enter the quadrant and it's back!
                           1161 
   58AE                    1162 missile_destroyed_object:                                       ; write empty sector to video
   58AE 36 2E         [ 9] 1163                         ld      (hl), #0x2E ; '.'
   58B0 11 6D 65      [ 9] 1164                         ld      de, #aComputerObject            ; "COMPUTER:OBJECT DESTROYED"
   58B3 C3 8E 5F      [ 9] 1165                         jp      print_string_last_line
                           1166 ; END OF FUNCTION CHUNK FOR move_triton_missile
                           1167 ; ---------------------------------------------------------------------------
                           1168 
   58B6                    1169 print_no_more_triton_misls:                                     ; "WEAPONRY:SIR, WE HAVE NO MORE TRITON MI"...
   58B6 11 A0 66      [ 9] 1170                         ld      de, #aWeaponrySirWeH
   58B9 C3 8E 5F      [ 9] 1171                         jp      print_string_last_line
                           1172 ; ---------------------------------------------------------------------------
                           1173 
   58BC                    1174 power_distrib:                                                  ; flag OK
   58BC 97            [ 4] 1175                         sub     a
   58BD 32 28 72      [13] 1176                         ld      (critical), a
   58C0 CD 15 61      [16] 1177                         call    clear_last_2_lines
   58C3 CD FC 5E      [16] 1178                         call    get_next_cmd_char               ; get subcmd
   58C6 21 76 6A      [ 9] 1179                         ld      hl, #pwr_subcmd_tbl             ; "HLSDMT"
   58C9 11 E9 6B      [ 9] 1180                         ld      de, #pwr_hypr_ion
   58CC 47            [ 4] 1181                         ld      b, a                            ; subcmd
                           1182 
   58CD                    1183 loc_568D:                                                       ; subcmd entry from table
   58CD 7E            [ 6] 1184                         ld      a, (hl)
   58CE A7            [ 4] 1185                         and     a                               ; end of table?
   58CF CA 5A 5D      [ 9] 1186                         jp      Z, print_no_sense_and_ret       ; yes, exit
   58D2 B8            [ 4] 1187                         cp      b                               ; found it?
   58D3 CA DB 58      [ 9] 1188                         jp      Z, pwr_subcmd_ok                ; yes, go
   58D6 23            [ 4] 1189                         inc     hl                              ; next entry in tbl
   58D7 13            [ 4] 1190                         inc     de                              ; next power value
   58D8 C3 CD 58      [ 9] 1191                         jp      loc_568D                        ; loop
                           1192 ; ---------------------------------------------------------------------------
                           1193 
   58DB                    1194 pwr_subcmd_ok:                                                  ; get next char
   58DB CD FC 5E      [16] 1195                         call    get_next_cmd_char
   58DE CA E3 58      [ 9] 1196                         jp      Z, loc_56A3                     ; none, skip
   58E1 D6 30         [ 6] 1197                         sub     #0x30 ; '0'                     ; convert to binary
                           1198 
   58E3                    1199 loc_56A3:
   58E3 47            [ 4] 1200                         ld      b, a
   58E4 CD FC 5E      [16] 1201                         call    get_next_cmd_char               ; get next char
   58E7 C2 F0 58      [ 9] 1202                         jp      NZ, loc_56B0                    ; non-zero, skip
   58EA 48            [ 4] 1203                         ld      c, b
   58EB 06 00         [ 6] 1204                         ld      b, #0                           ; B,C=value
   58ED C3 F3 58      [ 9] 1205                         jp      loc_56B3
                           1206 ; ---------------------------------------------------------------------------
                           1207 
   58F0                    1208 loc_56B0:                                                       ; convert to binary
   58F0 D6 30         [ 6] 1209                         sub     #0x30 ; '0'
   58F2 4F            [ 4] 1210                         ld      c, a
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 23.
Hexidecimal [16-Bits]



                           1211 
   58F3                    1212 loc_56B3:
   58F3 78            [ 4] 1213                         ld      a, b
   58F4 0F            [ 3] 1214                         rrca
   58F5 0F            [ 3] 1215                         rrca
   58F6 0F            [ 3] 1216                         rrca
   58F7 0F            [ 3] 1217                         rrca
   58F8 B1            [ 4] 1218                         or      c                               ; convert to BCD byte
   58F9 12            [ 7] 1219                         ld      (de), a                         ; store in power settings
                           1220 
                           1221 ; =============== S U B R O U T I N E =======================================
                           1222 
                           1223 
   58FA                    1224 update_power_distribution:
   58FA 06 06         [ 6] 1225                         ld      b, #6                           ; 6 power values
   58FC 11 CD 3D      [ 9] 1226                         ld      de, # VIDEO+0x1CD               ; HYPR&ION value
   58FF 97            [ 4] 1227                         sub     a                               ; flag OK
   5900 32 1F 72      [13] 1228                         ld      (power_overflow), a
   5903 21 E9 6B      [ 9] 1229                         ld      hl, #pwr_hypr_ion
                           1230 
   5906                    1231 loc_56C6:                                                       ; add power value
   5906 86            [ 6] 1232                         add     a, (hl)
   5907 27            [ 4] 1233                         daa
   5908 D2 10 59      [ 9] 1234                         jp      NC, loc_56D0                    ; skip if no overflow
   590B 3E FF         [ 6] 1235                         ld      a, #0xFF                        ; flag overflow
   590D 32 1F 72      [13] 1236                         ld      (power_overflow), a
                           1237 
   5910                    1238 loc_56D0:                                                       ; store total
   5910 4F            [ 4] 1239                         ld      c, a
   5911 7E            [ 6] 1240                         ld      a, (hl)                         ; get power value
   5912 0F            [ 3] 1241                         rrca
   5913 0F            [ 3] 1242                         rrca
   5914 0F            [ 3] 1243                         rrca
   5915 0F            [ 3] 1244                         rrca                                    ; high->low nibble
   5916 E6 0F         [ 6] 1245                         and     #0xF                            ; nibble only
   5918 C6 30         [ 6] 1246                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   591A 12            [ 7] 1247                         ld      (de), a                         ; write to video
   591B 13            [ 4] 1248                         inc     de                              ; next video address
   591C 7E            [ 6] 1249                         ld      a, (hl)
   591D E6 0F         [ 6] 1250                         and     #0xF                            ; low nibble only
   591F C6 30         [ 6] 1251                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   5921 12            [ 7] 1252                         ld      (de), a                         ; write to video
   5922 E5            [11] 1253                         push    hl
   5923 21 3F 00      [ 9] 1254                         ld      hl, #0x3F ; '?'
   5926 19            [ 7] 1255                         add     hl, de                          ; next line
   5927 EB            [ 3] 1256                         ex      de, hl                          ; DE = video address
   5928 E1            [ 9] 1257                         pop     hl
   5929 05            [ 4] 1258                         dec     b                               ; done all power values?
   592A 23            [ 4] 1259                         inc     hl                              ; next power value
   592B 79            [ 4] 1260                         ld      a, c                            ; restore total
   592C C2 06 59      [ 9] 1261                         jp      NZ, loc_56C6                    ; no, loop
   592F 47            [ 4] 1262                         ld      b, a                            ; get total
   5930 3A 1F 72      [12] 1263                         ld      a, (power_overflow)
   5933 A7            [ 4] 1264                         and     a                               ; overflow?
   5934 FA 3C 59      [ 9] 1265                         jp      M, loc_56FC                     ; yes, go
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 24.
Hexidecimal [16-Bits]



   5937 3A 0D 6C      [12] 1266                         ld      a, (power_avail)
   593A B8            [ 4] 1267                         cp      b                               ; more than available power?
   593B D0            [10] 1268                         ret     NC                              ; no, return
                           1269 
   593C                    1270 loc_56FC:                                                       ; "ENGINEER:COMMANDER, THE ENGINES ARE OVE"...
   593C 11 AB 65      [ 9] 1271                         ld      de, #aEngineerComm_2
   593F 21 80 3F      [ 9] 1272                         ld      hl, # VIDEO+0x380
   5942 CD 91 5F      [16] 1273                         call    clear_last_2_lines_print_string
   5945 06 10         [ 6] 1274                         ld      b, #16
   5947 CD 14 5F      [16] 1275                         call    delay_B_with_duty_cycle
   594A 3A 28 72      [12] 1276                         ld      a, (critical)
   594D A7            [ 4] 1277                         and     a                               ; exploding?
   594E F8            [10] 1278                         ret     M                               ; yes, return
                           1279 
   594F                    1280 loc_570F:
   594F CD 55 5F      [16] 1281                         call    rand_0_9
   5952 FE 04         [ 6] 1282                         cp      #4                              ; less than 4?
   5954 DA 4F 59      [ 9] 1283                         jp      C, loc_570F                     ; yes, regenerate
   5957 32 7F 6A      [13] 1284                         ld      (engine_explode_countdown), a
   595A 3E FF         [ 6] 1285                         ld      a, #0xFF                        ; flag exploding
   595C 32 28 72      [13] 1286                         ld      (critical), a
   595F 3E 03         [ 6] 1287                         ld      a, #3
   5961 32 1E 72      [13] 1288                         ld      (delay_duty_cycle_i), a
   5964 21 BB 3C      [ 9] 1289                         ld      hl, # VIDEO+0xBB                ; ptr to condition value
   5967 11 0D 64      [ 9] 1290                         ld      de, #aCrtcl                     ; "CRTCL"
   596A CD 91 5F      [16] 1291                         call    clear_last_2_lines_print_string
   596D C3 A0 5F      [ 9] 1292                         jp      update_chaser_pods_cmd_entry
                           1293 ; End of function update_power_distribution
                           1294 
                           1295 ; ---------------------------------------------------------------------------
                           1296 
   5970                    1297 self_destruct:                                                  ; "COMPUTER:SELF DESTRUCT SEQUENCE INITIAT"...
   5970 11 FB 65      [ 9] 1298                         ld      de, #aComputerSelfDe
   5973 CD 8E 5F      [16] 1299                         call    print_string_last_line
   5976 1E 15         [ 6] 1300                         ld      e, #0x15                        ; 15 sec countdown
   5978 21 EB 3F      [ 9] 1301                         ld      hl, # VIDEO+0x3EB               ; self destruct countdown video address
                           1302 
   597B                    1303 loc_573B:
   597B 06 10         [ 6] 1304                         ld      b, #16
   597D CD 9D 5F      [16] 1305                         call    delay_B_and_update_all
   5980 7B            [ 4] 1306                         ld      a, e                            ; countdown
   5981 C6 99         [ 6] 1307                         add     a, #0x99 ; 'ô'
   5983 27            [ 4] 1308                         daa                                     ; decrement
   5984 5F            [ 4] 1309                         ld      e, a                            ; update
   5985 0F            [ 3] 1310                         rrca
   5986 0F            [ 3] 1311                         rrca
   5987 0F            [ 3] 1312                         rrca
   5988 0F            [ 3] 1313                         rrca
   5989 E6 0F         [ 6] 1314                         and     #0xF                            ; high->low nibble
   598B C6 30         [ 6] 1315                         add     a, #0x30 ; '0'                  ; convert to ASCII
   598D 77            [ 7] 1316                         ld      (hl), a                         ; write to video
   598E 23            [ 4] 1317                         inc     hl                              ; next video address
   598F 7B            [ 4] 1318                         ld      a, e
   5990 E6 0F         [ 6] 1319                         and     #0xF                            ; low nibble only
   5992 C6 30         [ 6] 1320                         add     a, #0x30 ; '0'                  ; convert to ASCII
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 25.
Hexidecimal [16-Bits]



   5994 77            [ 7] 1321                         ld      (hl), a                         ; write to video
   5995 2B            [ 4] 1322                         dec     hl                              ; restore video address
   5996 7B            [ 4] 1323                         ld      a, e
   5997 A7            [ 4] 1324                         and     a                               ; done countdown?
   5998 CA AE 55      [ 9] 1325                         jp      Z, print_game_over_screen       ; yes, exit
   599B FE 06         [ 6] 1326                         cp      #6                              ; less than 6s left?
   599D FA 7B 59      [ 9] 1327                         jp      M, loc_573B                     ; yes, loop
   59A0 CD B6 53      [16] 1328                         call    keyboard_scan                   ; any key?
   59A3 CA 7B 59      [ 9] 1329                         jp      Z, loc_573B                     ; no, loop
   59A6 FE 09         [ 6] 1330                         cp      #9                              ; <TAB>?
   59A8 C2 7B 59      [ 9] 1331                         jp      NZ, loc_573B                    ; no, loop
   59AB 11 38 66      [ 9] 1332                         ld      de, #aComputerSelf_0            ; "COMPUTER:SELF DESTRUCT SEQUENCE ABORTED"
   59AE C3 8E 5F      [ 9] 1333                         jp      print_string_last_line
                           1334 ; ---------------------------------------------------------------------------
                           1335 
   59B1                    1336 experimental_ray:
   59B1 3A 26 72      [12] 1337                         ld      a, (experimental_ray_disabled)
   59B4 A7            [ 4] 1338                         and     a                               ; disabled?
   59B5 F2 BE 59      [ 9] 1339                         jp      P, loc_577E                     ; no, go
   59B8 11 1E 69      [ 9] 1340                         ld      de, #aIsPermanentlyD            ; "IS PERMANENTLY DISABLED"
   59BB C3 7E 5F      [ 9] 1341                         jp      print_experimental_ray_outcome
                           1342 ; ---------------------------------------------------------------------------
                           1343 
   59BE                    1344 loc_577E:
   59BE CD 55 5F      [16] 1345                         call    rand_0_9
   59C1 A7            [ 4] 1346                         and     a                               ; zero?
   59C2 CA D2 59      [ 9] 1347                         jp      Z, expr_9                       ; yes, go
   59C5 11 94 6A      [ 9] 1348                         ld      de, #expr_tbl-2
                           1349 
   59C8                    1350 loc_5788:                                                       ; found vector?
   59C8 3D            [ 4] 1351                         dec     a
   59C9 13            [ 4] 1352                         inc     de
   59CA 13            [ 4] 1353                         inc     de                              ; next vector entry
   59CB C2 C8 59      [ 9] 1354                         jp      NZ, loc_5788                    ; no, loop
   59CE EB            [ 3] 1355                         ex      de, hl
   59CF C3 C0 57      [ 9] 1356                         jp      jump_HL_vector                  ; go
                           1357 ; ---------------------------------------------------------------------------
                           1358 ; launches a triton missile in a circle
                           1359 
   59D2                    1360 expr_9:                                                         ; "IS FIRING TRITON MISSILES"
   59D2 11 BF 67      [ 9] 1361                         ld      de, #aIsFiringTriton
   59D5 CD 7E 5F      [16] 1362                         call    print_experimental_ray_outcome
   59D8 3E 07         [ 6] 1363                         ld      a, #7                           ; dir=NW
                           1364 
   59DA                    1365 loc_579A:
   59DA F5            [11] 1366                         push    af
   59DB CD 4F 57      [16] 1367                         call    move_triton_missile
   59DE F1            [ 9] 1368                         pop     af
   59DF 3D            [ 4] 1369                         dec     a                               ; next direction
   59E0 C2 DA 59      [ 9] 1370                         jp      NZ, loc_579A                    ; loop all directions
   59E3 C3 4F 57      [ 9] 1371                         jp      move_triton_missile
                           1372 ; ---------------------------------------------------------------------------
                           1373 ; converts all characters to graphics (distort)
                           1374 
   59E6                    1375 expr_0:                                                         ; "CAUSED A CHANGE IN SPACIAL     STRUCTUR"...
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 26.
Hexidecimal [16-Bits]



   59E6 11 D9 67      [ 9] 1376                         ld      de, #aCausedAChangeI
   59E9 CD 7E 5F      [16] 1377                         call    print_experimental_ray_outcome
   59EC 3E 01         [ 6] 1378                         ld      a, #1                           ; flag disabled
   59EE 32 27 72      [13] 1379                         ld      (disable_pod_update), a
   59F1 11 2B 00      [ 9] 1380                         ld      de, #0x2B ; '+'                 ; offset to next row in quadrant display
   59F4 21 57 3C      [ 9] 1381                         ld      hl, # VIDEO+0x57                ; ptr first sector in quadrant display
   59F7 06 0A         [ 6] 1382                         ld      b, #10                          ; 10 rows
                           1383 
   59F9                    1384 loc_57B9:                                                       ; 21 columns
   59F9 0E 15         [ 6] 1385                         ld      c, #21
                           1386 
   59FB                    1387 loc_57BB:                                                       ; get sector contents
   59FB 7E            [ 6] 1388                         ld      a, (hl)
   59FC C6 80         [ 6] 1389                         add     a, #0x80 ; 'Ä'                  ; make graphic
   59FE 77            [ 7] 1390                         ld      (hl), a                         ; write to video
   59FF 23            [ 4] 1391                         inc     hl                              ; next video address
   5A00 0D            [ 4] 1392                         dec     c                               ; done all columns?
   5A01 C2 FB 59      [ 9] 1393                         jp      NZ, loc_57BB                    ; no, loop
   5A04 19            [ 7] 1394                         add     hl, de                          ; ptr next row
   5A05 05            [ 4] 1395                         dec     b                               ; done all rows?
   5A06 C2 F9 59      [ 9] 1396                         jp      NZ, loc_57B9                    ; no, loop
   5A09 C9            [ 9] 1397                         ret
                           1398 ; ---------------------------------------------------------------------------
                           1399 ; freezes time for jovians in this quadrant
                           1400 
   5A0A                    1401 expr_1:                                                         ; "HAS FROZEN TIME FOR THE        JOVIANS"
   5A0A 11 02 68      [ 9] 1402                         ld      de, #aHasFrozenTimeF
   5A0D 3E FF         [ 6] 1403                         ld      a, #0xFF                        ; flag frozen
   5A0F 32 25 72      [13] 1404                         ld      (jovian_time_frozen), a
   5A12 C3 7E 5F      [ 9] 1405                         jp      print_experimental_ray_outcome
                           1406 ; ---------------------------------------------------------------------------
                           1407 ; *** BUG #002 - introduced in TRS-80 version
                           1408 ; this is supposed to make jovians invisible
                           1409 ; - but it looks like it makes space stations invisible???
                           1410 
   5A15                    1411 expr_2:                                                         ; "HAS CAUSED THE JOVIANS TO      BECOME I"...
   5A15 11 29 68      [ 9] 1412                         ld      de, #aHasCausedTheJo
   5A18 CD 7E 5F      [16] 1413                         call    print_experimental_ray_outcome
   5A1B 21 57 3C      [ 9] 1414                         ld      hl, # VIDEO+0x57                ; first sector in quadrant video address
   5A1E 11 2B 00      [ 9] 1415                         ld      de, #0x2B ; '+'                 ; offset to next quadrant row
   5A21 06 0A         [ 6] 1416                         ld      b, #10                          ; 10 rows
                           1417 
   5A23                    1418 loc_57E3:                                                       ; 21 columns
   5A23 0E 15         [ 6] 1419                         ld      c, #21
                           1420 
   5A25                    1421 loc_57E5:                                                       ; get object from video
   5A25 7E            [ 6] 1422                         ld      a, (hl)
                     0000  1423 .ifndef BUILD_OPT_FIX_RAY_BUG
                           1424                         cp      #0x30 ; '0'                     ; space station?
                     0001  1425 .else
   5A26 FE 26         [ 6] 1426                         cp      #0x26 ; '&'                     ; jovian battle cruiser?
   5A28 CA 30 5A      [ 9] 1427                         jp      Z, invisible                    ; yes, wipe
   5A2B FE 40         [ 6] 1428                         cp      #0x40 ; '@'                     ; jovian command cruiser?
                           1429 .endif                        
   5A2D C2 32 5A      [ 9] 1430                         jp      NZ, loc_57ED                    ; no, continue
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 27.
Hexidecimal [16-Bits]



   5A30                    1431 invisible:                        
   5A30 36 2E         [ 9] 1432                         ld      (hl), #0x2E ; '.'               ; write empty sector to video
                           1433 
   5A32                    1434 loc_57ED:                                                       ; next video address
   5A32 23            [ 4] 1435                         inc     hl
   5A33 0D            [ 4] 1436                         dec     c                               ; done all columns?
   5A34 C2 25 5A      [ 9] 1437                         jp      NZ, loc_57E5                    ; no, loop
   5A37 19            [ 7] 1438                         add     hl, de                          ; next quadrant row video address
   5A38 05            [ 4] 1439                         dec     b                               ; done all rows?
   5A39 C2 23 5A      [ 9] 1440                         jp      NZ, loc_57E3                    ; no, loop
   5A3C C9            [ 9] 1441                         ret
                           1442 ; ---------------------------------------------------------------------------
                           1443 ; re-randomises the quadrant
                           1444 
   5A3D                    1445 expr_3:                                                         ; "HAS JUMBLED THE QUADRANT"
   5A3D 11 7F 68      [ 9] 1446                         ld      de, #aHasJumbledTheQ
   5A40 CD 7E 5F      [16] 1447                         call    print_experimental_ray_outcome
   5A43 21 C5 3C      [ 9] 1448                         ld      hl, # VIDEO+0xC5                ; current quadrant in LR sensor
   5A46 C3 21 5E      [ 9] 1449                         jp      init_quadrant
                           1450 ; ---------------------------------------------------------------------------
                           1451 ; destroys all Jovians in quadrant
                           1452 
   5A49                    1453 expr_4:
   5A49 21 80 3F      [ 9] 1454                         ld      hl, # VIDEO+0x380
   5A4C 11 98 68      [ 9] 1455                         ld      de, #aHasDestroyedAl            ; "HAS DESTROYED ALL THE          JOVIANS "...
   5A4F CD 7E 5F      [16] 1456                         call    print_experimental_ray_outcome
   5A52 3A B6 6A      [12] 1457                         ld      a, (quadrant)
   5A55 CD EF 5D      [16] 1458                         call    get_ptr_quadrant_A_data
   5A58 46            [ 6] 1459                         ld      b, (hl)                         ; warships in quadrant
   5A59 05            [ 4] 1460                         dec     b                               ; adjust for call below
   5A5A 3E 99         [ 6] 1461                         ld      a, #0x99 ; 'ô'
   5A5C 90            [ 4] 1462                         sub     b
   5A5D 47            [ 4] 1463                         ld      b, a                            ; negative
   5A5E 3A AD 6A      [12] 1464                         ld      a, (jovians_left)
   5A61 80            [ 4] 1465                         add     a, b
   5A62 27            [ 4] 1466                         daa                                     ; adjust jovians left
   5A63 32 AD 6A      [13] 1467                         ld      (jovians_left), a               ; update
   5A66 36 01         [ 9] 1468                         ld      (hl), #1                        ; fudge to 1 for call below
   5A68 3E 30         [ 6] 1469                         ld      a, #0x30 ; '0'                  ; 0 warships
   5A6A 32 C5 3C      [13] 1470                         ld      (VIDEO+0xC5), a                 ; write to LR sensor video
   5A6D CD 73 61      [16] 1471                         call    dec_jovians                     ; handle decrement of jovians
   5A70 21 C5 3C      [ 9] 1472                         ld      hl, # VIDEO+0xC5                ; current quadrant in LR sensor
   5A73 C3 21 5E      [ 9] 1473                         jp      init_quadrant
                           1474 ; ---------------------------------------------------------------------------
                           1475 ; destroys itself
                           1476 
   5A76                    1477 expr_5:                                                         ; "DESTROYS ITSELF"
   5A76 11 CF 68      [ 9] 1478                         ld      de, #aDestroysItself
   5A79 3E FF         [ 6] 1479                         ld      a, #0xFF
   5A7B 32 26 72      [13] 1480                         ld      (experimental_ray_disabled), a
   5A7E C3 7E 5F      [ 9] 1481                         jp      print_experimental_ray_outcome
                           1482 ; ---------------------------------------------------------------------------
                           1483 ; backfires, subtracts 2 from power
                           1484 
   5A81                    1485 expr_6:                                                         ; "HAS BACKFIRED ON US"
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 28.
Hexidecimal [16-Bits]



   5A81 11 DF 68      [ 9] 1486                         ld      de, #aHasBackfiredOn
   5A84 CD 7E 5F      [16] 1487                         call    print_experimental_ray_outcome
                           1488 ; START OF FUNCTION CHUNK FOR move_triton_missile
                           1489 
   5A87                    1490 power_minus_2_and_update:
   5A87 3A 0D 6C      [12] 1491                         ld      a, (power_avail)
   5A8A C6 98         [ 6] 1492                         add     a, #0x98 ; 'ò'
   5A8C 27            [ 4] 1493                         daa                                     ; decrement power
   5A8D 32 0D 6C      [13] 1494                         ld      (power_avail), a
   5A90 CD B2 61      [16] 1495                         call    print_power_avail
   5A93 C3 FA 58      [ 9] 1496                         jp      update_power_distribution
                           1497 ; END OF FUNCTION CHUNK FOR move_triton_missile
                           1498 ; ---------------------------------------------------------------------------
                           1499 ; causes computer malfunction
                           1500 
   5A96                    1501 expr_7:                                                         ; "HAS CAUSED A COMPUTER          MALFUNCT"...
   5A96 11 F3 68      [ 9] 1502                         ld      de, #aHasCausedAComp
   5A99 3E FF         [ 6] 1503                         ld      a, #0xFF
   5A9B 32 24 72      [13] 1504                         ld      (computer_malfunction), a
   5A9E C3 7E 5F      [ 9] 1505                         jp      print_experimental_ray_outcome
                           1506 ; ---------------------------------------------------------------------------
                           1507 ; not allowed to fire
                           1508 
   5AA1                    1509 expr_8:                                                         ; "MEDICAL OFFICER:I CAN'T ALLOW YOU TO FI"...
   5AA1 11 60 66      [ 9] 1510                         ld      de, #aMedicalOfficer
   5AA4 C3 8E 5F      [ 9] 1511                         jp      print_string_last_line
                           1512 ; ---------------------------------------------------------------------------
                           1513 
   5AA7                    1514 launch_antimatter:
   5AA7 3A 80 6A      [12] 1515                         ld      a, (antimatter_pods)
   5AAA A7            [ 4] 1516                         and     a                               ; none left?
   5AAB 11 B3 69      [ 9] 1517                         ld      de, #aWeaponryWeReOu            ; "WEAPONRY: WE'RE OUT OF PODS"
   5AAE CA 8E 5F      [ 9] 1518                         jp      Z, print_string_last_line       ; yes, exit
   5AB1 3A EE 6B      [12] 1519                         ld      a, (pwr_trt_missl)
   5AB4 FE 08         [ 6] 1520                         cp      #8                              ; less than 8%?
   5AB6 FA 2C 57      [ 9] 1521                         jp      M, loc_54FC                     ; yes, exit
   5AB9 CD FC 5E      [16] 1522                         call    get_next_cmd_char               ; pod #
   5ABC CA 5A 5D      [ 9] 1523                         jp      Z, print_no_sense_and_ret       ; none, exit
   5ABF D6 31         [ 6] 1524                         sub     #0x31 ; '1'                     ; less than '1'?
   5AC1 FA 5A 5D      [ 9] 1525                         jp      M, print_no_sense_and_ret       ; yes, exit
   5AC4 FE 03         [ 6] 1526                         cp      #3                              ; greater than 3?
   5AC6 F2 5A 5D      [ 9] 1527                         jp      P, print_no_sense_and_ret       ; yes, exit
   5AC9 21 0A 72      [ 9] 1528                         ld      hl, #antimatter_pod_tbl
   5ACC 47            [ 4] 1529                         ld      b, a                            ; zero-based pod #
   5ACD 07            [ 3] 1530                         rlca                                    ; x2
   5ACE 80            [ 4] 1531                         add     a, b                            ; x3
   5ACF 07            [ 3] 1532                         rlca                                    ; x6
   5AD0 85            [ 4] 1533                         add     a, l
   5AD1 6F            [ 4] 1534                         ld      l, a
   5AD2 7C            [ 4] 1535                         ld      a, h
   5AD3 CE 00         [ 6] 1536                         adc     a, #0
   5AD5 67            [ 4] 1537                         ld      h, a                            ; ptr pod entry
   5AD6 7E            [ 6] 1538                         ld      a, (hl)                         ; get pod status
   5AD7 A7            [ 4] 1539                         and     a                               ; used?
   5AD8 11 CF 69      [ 9] 1540                         ld      de, #aComputerThePod            ; "COMPUTER: THE POD HAS BEEN USED"
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 29.
Hexidecimal [16-Bits]



   5ADB C2 8E 5F      [ 9] 1541                         jp      NZ, print_string_last_line      ; yes, exit
   5ADE CD FC 5E      [16] 1542                         call    get_next_cmd_char               ; direction
   5AE1 CA 5A 5D      [ 9] 1543                         jp      Z, print_no_sense_and_ret       ; none, exit
   5AE4 D6 30         [ 6] 1544                         sub     #0x30 ; '0'                     ; less than '0'?
   5AE6 FA 5A 5D      [ 9] 1545                         jp      M, print_no_sense_and_ret       ; yes, exit
                     0000  1546 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                           1547                         cp      #8                              ; greater than 7?
                     0001  1548 .else
   5AE9 CA 5A 5D      [ 9] 1549                         jp      Z, print_no_sense_and_ret       ; 0, exit
   5AEC FE 05         [ 6] 1550                         cp      #5
   5AEE CA 5A 5D      [ 9] 1551                         jp      Z, print_no_sense_and_ret
   5AF1 FE 0A         [ 6] 1552                         cp      #10                             ; greater than 9?
                           1553 .endif                        
   5AF3 F2 5A 5D      [ 9] 1554                         jp      P, print_no_sense_and_ret       ; yes, exit
                     0001  1555 .ifdef BUILD_OPT_KEYPAD_DIRS                        
   5AF6                    1556                         XLATE_DIR
                           1557 .endif
   5AFE F5            [11] 1558                         push    af                              ; tmp store direction
   5AFF CD FC 5E      [16] 1559                         call    get_next_cmd_char               ; speed
   5B02 CA 14 5B      [ 9] 1560                         jp      Z, loc_58BF                     ; none, skip
   5B05 D6 30         [ 6] 1561                         sub     #0x30 ; '0'                     ; less than '0'?
   5B07 FA 5A 5D      [ 9] 1562                         jp      M, print_no_sense_and_ret       ; yes, exit
   5B0A FE 0A         [ 6] 1563                         cp      #10                             ; greater than 9?
   5B0C F2 5A 5D      [ 9] 1564                         jp      P, print_no_sense_and_ret       ; yes, exit
   5B0F 3C            [ 4] 1565                         inc     a
   5B10 07            [ 3] 1566                         rlca                                    ; scale
   5B11 32 95 6A      [13] 1567                         ld      (pod_speed), a
                           1568 
   5B14                    1569 loc_58BF:                                                       ; flag pod launched
   5B14 36 01         [ 9] 1570                         ld      (hl), #1
   5B16 F1            [ 9] 1571                         pop     af                              ; direction
   5B17 E5            [11] 1572                         push    hl                              ; tmp store pod status
   5B18 23            [ 4] 1573                         inc     hl                              ; ptr pod address delta
   5B19 EB            [ 3] 1574                         ex      de, hl
   5B1A 21 EF 6B      [ 9] 1575                         ld      hl, #dir_addr_delta_tbl
   5B1D 07            [ 3] 1576                         rlca
   5B1E 85            [ 4] 1577                         add     a, l
   5B1F 6F            [ 4] 1578                         ld      l, a
   5B20 7C            [ 4] 1579                         ld      a, h
   5B21 CE 00         [ 6] 1580                         adc     a, #0
   5B23 67            [ 4] 1581                         ld      h, a                            ; ptr tbl entry
   5B24 7E            [ 6] 1582                         ld      a, (hl)                         ; delta lsb
   5B25 12            [ 7] 1583                         ld      (de), a                         ; store in pod delta lsb
   5B26 23            [ 4] 1584                         inc     hl
   5B27 13            [ 4] 1585                         inc     de
   5B28 7E            [ 6] 1586                         ld      a, (hl)                         ; delta msb
   5B29 12            [ 7] 1587                         ld      (de), a                         ; store in pod delta msb
   5B2A D5            [11] 1588                         push    de
   5B2B 1B            [ 4] 1589                         dec     de                              ; ptr pod delta lsb
   5B2C 2A 7D 6A      [15] 1590                         ld      hl, (hephaestus_video_addr)
   5B2F 1A            [ 6] 1591                         ld      a, (de)
   5B30 85            [ 4] 1592                         add     a, l
   5B31 6F            [ 4] 1593                         ld      l, a                            ; calc video address lsb
   5B32 13            [ 4] 1594                         inc     de                              ; ptr pod delta msb
   5B33 1A            [ 6] 1595                         ld      a, (de)
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 30.
Hexidecimal [16-Bits]



   5B34 8C            [ 4] 1596                         adc     a, h
   5B35 67            [ 4] 1597                         ld      h, a                            ; calc video address msb
   5B36 D1            [ 9] 1598                         pop     de
   5B37 13            [ 4] 1599                         inc     de                              ; ptr pod video address lsb
   5B38 7D            [ 4] 1600                         ld      a, l
   5B39 12            [ 7] 1601                         ld      (de), a                         ; store pod video address lsb
   5B3A 13            [ 4] 1602                         inc     de
   5B3B 7C            [ 4] 1603                         ld      a, h
   5B3C 12            [ 7] 1604                         ld      (de), a                         ; store pod video address msb
   5B3D 7E            [ 6] 1605                         ld      a, (hl)                         ; get sector contents
   5B3E FE 2E         [ 6] 1606                         cp      #0x2E ; '.'                     ; empty?
   5B40 C2 58 5B      [ 9] 1607                         jp      NZ, print_pod_blocked           ; no, exit
   5B43 36 23         [ 9] 1608                         ld      (hl), #0x23 ; '#'               ; write pod graphic to video
   5B45 13            [ 4] 1609                         inc     de
   5B46 3A 95 6A      [12] 1610                         ld      a, (pod_speed)
   5B49 12            [ 7] 1611                         ld      (de), a                         ; store pod speed
   5B4A 3A 80 6A      [12] 1612                         ld      a, (antimatter_pods)
   5B4D 3D            [ 4] 1613                         dec     a                               ; update
   5B4E 32 80 6A      [13] 1614                         ld      (antimatter_pods), a
   5B51 E1            [ 9] 1615                         pop     hl                              ; discard tmp store
   5B52 21 3E 3E      [ 9] 1616                         ld      hl, # VIDEO+0x23E               ; antimatter pods value video address
   5B55 C3 B8 61      [ 9] 1617                         jp      print_BCD_byte
                           1618 ; ---------------------------------------------------------------------------
                           1619 
   5B58                    1620 print_pod_blocked:                                              ; "COMPUTER: POD LAUNCH IS BLOCKED"
   5B58 11 EF 69      [ 9] 1621                         ld      de, #aComputerPodLau
   5B5B E1            [ 9] 1622                         pop     hl                              ; ptr pod status
   5B5C 36 00         [ 9] 1623                         ld      (hl), #0                        ; flag unused again
   5B5E C3 8E 5F      [ 9] 1624                         jp      print_string_last_line
                           1625 ; ---------------------------------------------------------------------------
                           1626 
   5B61                    1627 explode_pod:                                                    ; pod #
   5B61 CD FC 5E      [16] 1628                         call    get_next_cmd_char
   5B64 CA 5A 5D      [ 9] 1629                         jp      Z, print_no_sense_and_ret       ; none, exit
   5B67 D6 31         [ 6] 1630                         sub     #0x31 ; '1'                     ; less than 1?
   5B69 FA 5A 5D      [ 9] 1631                         jp      M, print_no_sense_and_ret       ; yes, exit
   5B6C FE 03         [ 6] 1632                         cp      #3                              ; greater than 3?
   5B6E F2 5A 5D      [ 9] 1633                         jp      P, print_no_sense_and_ret       ; yes exit
   5B71 47            [ 4] 1634                         ld      b, a                            ; 0-based pod #
   5B72 07            [ 3] 1635                         rlca                                    ; x2
   5B73 80            [ 4] 1636                         add     a, b                            ; x3
   5B74 07            [ 3] 1637                         rlca                                    ; x6
   5B75 21 0A 72      [ 9] 1638                         ld      hl, #antimatter_pod_tbl
   5B78 85            [ 4] 1639                         add     a, l
   5B79 6F            [ 4] 1640                         ld      l, a
   5B7A 7C            [ 4] 1641                         ld      a, h
   5B7B CE 00         [ 6] 1642                         adc     a, #0
   5B7D 67            [ 4] 1643                         ld      h, a                            ; get ptr pod entry
   5B7E 7E            [ 6] 1644                         ld      a, (hl)                         ; pod status
   5B7F A7            [ 4] 1645                         and     a                               ; used?
   5B80 CA 5A 5D      [ 9] 1646                         jp      Z, print_no_sense_and_ret       ; no, exit
   5B83 FE 01         [ 6] 1647                         cp      #1                              ; launched?
   5B85 CA 8E 5B      [ 9] 1648                         jp      Z, explode_pod_ok               ; yes, skip
   5B88 11 CF 69      [ 9] 1649                         ld      de, #aComputerThePod            ; "COMPUTER: THE POD HAS BEEN USED"
   5B8B C3 8E 5F      [ 9] 1650                         jp      print_string_last_line
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 31.
Hexidecimal [16-Bits]



                           1651 ; ---------------------------------------------------------------------------
                           1652 
   5B8E                    1653 explode_pod_ok:                                                 ; flag exploded
   5B8E 36 02         [ 9] 1654                         ld      (hl), #2
   5B90 23            [ 4] 1655                         inc     hl
   5B91 23            [ 4] 1656                         inc     hl
   5B92 23            [ 4] 1657                         inc     hl
   5B93 7E            [ 6] 1658                         ld      a, (hl)
   5B94 23            [ 4] 1659                         inc     hl
   5B95 66            [ 6] 1660                         ld      h, (hl)
   5B96 6F            [ 4] 1661                         ld      l, a                            ; get pod video address
   5B97 36 8F         [ 9] 1662                         ld      (hl), #0x8F ; 'è'               ; animate
   5B99 EB            [ 3] 1663                         ex      de, hl
   5B9A 21 EF 6B      [ 9] 1664                         ld      hl, #dir_addr_delta_tbl
   5B9D 06 08         [ 6] 1665                         ld      b, #8                           ; 8 directions to iterate
                           1666 
   5B9F                    1667 loc_594A:
   5B9F E5            [11] 1668                         push    hl
   5BA0 7E            [ 6] 1669                         ld      a, (hl)
   5BA1 23            [ 4] 1670                         inc     hl
   5BA2 66            [ 6] 1671                         ld      h, (hl)
   5BA3 6F            [ 4] 1672                         ld      l, a                            ; get delta
   5BA4 19            [ 7] 1673                         add     hl, de                          ; add delta to pod video address
   5BA5 7E            [ 6] 1674                         ld      a, (hl)                         ; get sector contents
   5BA6 FE 26         [ 6] 1675                         cp      #0x26 ; '&'                     ; jovian battle cruiser?
   5BA8 CA E2 5B      [ 9] 1676                         jp      Z, pod_hit_jovian               ; yes, go
   5BAB FE 40         [ 6] 1677                         cp      #0x40 ; '@'                     ; command cruiser?
   5BAD CA E2 5B      [ 9] 1678                         jp      Z, pod_hit_jovian               ; yes, go
   5BB0 FE 25         [ 6] 1679                         cp      #0x25 ; '%'                     ; triton mine?
   5BB2 CA A8 55      [ 9] 1680                         jp      Z, hit_triton_mine              ; yes, go
   5BB5 FE 5B         [ 6] 1681                         cp      #0x5B ; '['                     ; USS Hephaestus?
   5BB7 CA AE 55      [ 9] 1682                         jp      Z, print_game_over_screen       ; yes, go (oops)
   5BBA FE 23         [ 6] 1683                         cp      #0x23 ; '#'                     ; antimatter pod?
   5BBC CA AE 55      [ 9] 1684                         jp      Z, print_game_over_screen       ; yes, go (oops)
   5BBF FE 30         [ 6] 1685                         cp      #0x30 ; '0'                     ; space station?
   5BC1 CA D8 5B      [ 9] 1686                         jp      Z, pod_animate_object           ; yes, go
   5BC4 FE 2A         [ 6] 1687                         cp      #0x2A ; '*'                     ; star?
   5BC6 CA D8 5B      [ 9] 1688                         jp      Z, pod_animate_object           ; yes, go
   5BC9 FE 2B         [ 6] 1689                         cp      #0x2B ; '+'                     ; triton missile?
   5BCB CA D8 5B      [ 9] 1690                         jp      Z, pod_animate_object           ; yes, go
   5BCE FE 58         [ 6] 1691                         cp      #0x58 ; 'X'                     ; unknown?
   5BD0 CA D8 5B      [ 9] 1692                         jp      Z, pod_animate_object           ; yes, go
   5BD3 FE 2E         [ 6] 1693                         cp      #0x2E ; '.'                     ; empty?
   5BD5 C2 DA 5B      [ 9] 1694                         jp      NZ, loc_5985                    ; no, skip
                           1695 
   5BD8                    1696 pod_animate_object:                                             ; animate
   5BD8 36 8F         [ 9] 1697                         ld      (hl), #0x8F ; 'è'
                           1698 
   5BDA                    1699 loc_5985:                                                       ; direction address delta table ptr
   5BDA E1            [ 9] 1700                         pop     hl
   5BDB 23            [ 4] 1701                         inc     hl
   5BDC 23            [ 4] 1702                         inc     hl                              ; next entry
   5BDD 05            [ 4] 1703                         dec     b                               ; done all directions?
   5BDE C2 9F 5B      [ 9] 1704                         jp      NZ, loc_594A                    ; no, loop
   5BE1 C9            [ 9] 1705                         ret
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 32.
Hexidecimal [16-Bits]



                           1706 ; ---------------------------------------------------------------------------
                           1707 
   5BE2                    1708 pod_hit_jovian:
   5BE2 E5            [11] 1709                         push    hl
   5BE3 21 C5 3C      [ 9] 1710                         ld      hl, # VIDEO+0xC5                ; current quadrant LR sensor
   5BE6 7E            [ 6] 1711                         ld      a, (hl)                         ; get warships
   5BE7 C6 99         [ 6] 1712                         add     a, #0x99 ; 'ô'
   5BE9 27            [ 4] 1713                         daa                                     ; decrement
   5BEA 77            [ 7] 1714                         ld      (hl), a                         ; write to video
   5BEB C5            [11] 1715                         push    bc
   5BEC D5            [11] 1716                         push    de
   5BED CD 73 61      [16] 1717                         call    dec_jovians
   5BF0 D1            [ 9] 1718                         pop     de
   5BF1 C1            [ 9] 1719                         pop     bc
   5BF2 E1            [ 9] 1720                         pop     hl
   5BF3 C3 D8 5B      [ 9] 1721                         jp      pod_animate_object
                           1722 
                           1723 ; =============== S U B R O U T I N E =======================================
                           1724 
                           1725 
   5BF6                    1726 handle_low_power:
                           1727 
                           1728 ; FUNCTION CHUNK AT 5001 SIZE 000001B5 BYTES
                           1729 ; FUNCTION CHUNK AT 51BD SIZE 00000017 BYTES
                           1730 ; FUNCTION CHUNK AT 538E SIZE 00000032 BYTES
                           1731 
   5BF6 3A EA 6B      [12] 1732                         ld      a, (pwr_lr_sensor)              ; get power to LR sensor
   5BF9 FE 05         [ 6] 1733                         cp      #5                              ; greater than 4%?
   5BFB F2 29 5C      [ 9] 1734                         jp      P, check_sr_sensor              ; yes, skip
   5BFE 21 41 3C      [ 9] 1735                         ld      hl, # VIDEO+0x41                ; 1st row
   5C01 11 C1 3C      [ 9] 1736                         ld      de, # VIDEO+0xC1                ; 2nd row
   5C04 01 41 3D      [ 9] 1737                         ld      bc, # VIDEO+0x141               ; 3rd row
   5C07 3E 0B         [ 6] 1738                         ld      a, #11                          ; 11 bytes/row to wipe
                           1739 
   5C09                    1740 loc_59B4:
   5C09 F5            [11] 1741                         push    af
   5C0A 3E 20         [ 6] 1742                         ld      a, #0x20 ; ' '
   5C0C 02            [ 7] 1743                         ld      (bc), a                         ; space over 3rd row digit
   5C0D 77            [ 7] 1744                         ld      (hl), a                         ; space over 1st row digit
   5C0E 7B            [ 4] 1745                         ld      a, e
   5C0F FE C5         [ 6] 1746                         cp      #0xC5 ; '≈'                     ; 1st digit current quadrant?
   5C11 CA 21 5C      [ 9] 1747                         jp      Z, loc_59CC                     ; yes, skip
   5C14 FE C6         [ 6] 1748                         cp      #0xC6 ; '∆'                     ; 2nd digit current quadrant?
   5C16 CA 21 5C      [ 9] 1749                         jp      Z, loc_59CC                     ; yes, skip
   5C19 FE C7         [ 6] 1750                         cp      #0xC7 ; '«'                     ; 3rd digit current quadrant?
   5C1B CA 21 5C      [ 9] 1751                         jp      Z, loc_59CC                     ; yes, skip
   5C1E 3E 20         [ 6] 1752                         ld      a, #0x20 ; ' '
   5C20 12            [ 7] 1753                         ld      (de), a                         ; space over 2nd row digit
                           1754 
   5C21                    1755 loc_59CC:
   5C21 13            [ 4] 1756                         inc     de
   5C22 23            [ 4] 1757                         inc     hl
   5C23 03            [ 4] 1758                         inc     bc
   5C24 F1            [ 9] 1759                         pop     af
   5C25 3D            [ 4] 1760                         dec     a                               ; done row?
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 33.
Hexidecimal [16-Bits]



   5C26 C2 09 5C      [ 9] 1761                         jp      NZ, loc_59B4                    ; no, loop
                           1762 
   5C29                    1763 check_sr_sensor:
   5C29 3A EB 6B      [12] 1764                         ld      a, (pwr_sr_sensor)
   5C2C FE 03         [ 6] 1765                         cp      #3                              ; greater than 2%?
   5C2E F2 4E 5C      [ 9] 1766                         jp      P, check_jovian_threat          ; yes, skip
   5C31 3E 01         [ 6] 1767                         ld      a, #1                           ; flag disabled
   5C33 32 27 72      [13] 1768                         ld      (disable_pod_update), a
   5C36 21 57 3C      [ 9] 1769                         ld      hl, # VIDEO+0x57                ; SR sensor display
   5C39 11 2C 00      [ 9] 1770                         ld      de, #0x2C ; ','                 ; offset to next sector row
   5C3C 06 0A         [ 6] 1771                         ld      b, #10                          ; 10 rows to overwrite
                           1772 
   5C3E                    1773 loc_59E9:                                                       ; 20 bytes to overwrite
   5C3E 0E 14         [ 6] 1774                         ld      c, #20
                           1775 
   5C40                    1776 loc_59EB:                                                       ; space over sector
   5C40 36 20         [ 9] 1777                         ld      (hl), #0x20 ; ' '
   5C42 23            [ 4] 1778                         inc     hl                              ; next video address
   5C43 0D            [ 4] 1779                         dec     c                               ; done row?
   5C44 C2 40 5C      [ 9] 1780                         jp      NZ, loc_59EB                    ; no, loop
   5C47 36 20         [ 9] 1781                         ld      (hl), #0x20 ; ' '               ; space
   5C49 19            [ 7] 1782                         add     hl, de                          ; next sector row
   5C4A 05            [ 4] 1783                         dec     b                               ; done all rows?
   5C4B C2 3E 5C      [ 9] 1784                         jp      NZ, loc_59E9                    ; no, loop
                           1785 
   5C4E                    1786 check_jovian_threat:
   5C4E 3A 25 72      [12] 1787                         ld      a, (jovian_time_frozen)
   5C51 A7            [ 4] 1788                         and     a                               ; frozen?
   5C52 FA 5E 5C      [ 9] 1789                         jp      M, condition_green              ; yes, skip
   5C55 3A C5 3C      [12] 1790                         ld      a, (VIDEO+0xC5)                 ; #jovian warships
   5C58 D6 30         [ 6] 1791                         sub     #0x30 ; '0'                     ; convert to binary
   5C5A A7            [ 4] 1792                         and     a                               ; zero?
   5C5B C2 72 5C      [ 9] 1793                         jp      NZ, condition_red               ; no, go
                           1794 
   5C5E                    1795 condition_green:
   5C5E 3A 28 72      [12] 1796                         ld      a, (critical)
   5C61 A7            [ 4] 1797                         and     a                               ; exploding?
   5C62 F8            [10] 1798                         ret     M                               ; yes, return
   5C63 3A 1D 72      [12] 1799                         ld      a, (always_zero)
   5C66 32 1E 72      [13] 1800                         ld      (delay_duty_cycle_i), a
   5C69 21 BB 3C      [ 9] 1801                         ld      hl, # VIDEO+0xBB                ; ptr to condition value
   5C6C 11 01 64      [ 9] 1802                         ld      de, #aGreen                     ; "GREEN"
   5C6F C3 94 5F      [ 9] 1803                         jp      print_string
                           1804 ; ---------------------------------------------------------------------------
                           1805 
   5C72                    1806 condition_red:
   5C72 3A 28 72      [12] 1807                         ld      a, (critical)
   5C75 A7            [ 4] 1808                         and     a                               ; exploding?
   5C76 FA 87 5C      [ 9] 1809                         jp      M, loc_5A32                     ; yes, go
   5C79 3E 01         [ 6] 1810                         ld      a, #1
   5C7B 32 1E 72      [13] 1811                         ld      (delay_duty_cycle_i), a
   5C7E 21 BB 3C      [ 9] 1812                         ld      hl, # VIDEO+0xBB                ; ptr to condition value
   5C81 11 07 64      [ 9] 1813                         ld      de, #aRed                       ; " RED "
   5C84 CD 94 5F      [16] 1814                         call    print_string
                           1815 
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 34.
Hexidecimal [16-Bits]



   5C87                    1816 loc_5A32:
   5C87 2A 7D 6A      [15] 1817                         ld      hl, (hephaestus_video_addr)
   5C8A 7E            [ 6] 1818                         ld      a, (hl)                         ; get Hephaestus graphic
   5C8B F6 80         [ 6] 1819                         or      #0x80 ; 'Ä'                     ; animate
   5C8D 77            [ 7] 1820                         ld      (hl), a                         ; write to video
   5C8E 3A FF 6B      [12] 1821                         ld      a, (game_delay_factor)
   5C91 0F            [ 3] 1822                         rrca                                    ; /2
   5C92 3C            [ 4] 1823                         inc     a                               ; /2+1
   5C93 47            [ 4] 1824                         ld      b, a
   5C94 CD 9D 5F      [16] 1825                         call    delay_B_and_update_all
   5C97 7E            [ 6] 1826                         ld      a, (hl)                         ; get Hephaestus graphic
   5C98 E6 7F         [ 6] 1827                         and     #0x7F ; ''                     ; animate
   5C9A 77            [ 7] 1828                         ld      (hl), a                         ; write to video
   5C9B 3A C5 3C      [12] 1829                         ld      a, (VIDEO+0xC5)                 ; #jovian warships
   5C9E D6 30         [ 6] 1830                         sub     #0x30 ; '0'                     ; convert to binary
   5CA0 FE 04         [ 6] 1831                         cp      #4                              ; more than 3?
   5CA2 F4 33 5D      [16] 1832                         call    P, lose_power_crystal           ; yes, go
   5CA5 3A EC 6B      [12] 1833                         ld      a, (pwr_deflectors)
   5CA8 FE 05         [ 6] 1834                         cp      #5                              ; less than 5%?
   5CAA FC 51 5D      [16] 1835                         call    M, print_shields_failing        ; yes, go
   5CAD 0E 00         [ 6] 1836                         ld      c, #0
   5CAF 21 EC 6B      [ 9] 1837                         ld      hl, #pwr_deflectors
   5CB2 7E            [ 6] 1838                         ld      a, (hl)
   5CB3 A7            [ 4] 1839                         and     a                               ; pwr zero?
   5CB4 CA BB 5C      [ 9] 1840                         jp      Z, jovian_attack_and_move       ; yes, skip
   5CB7 C6 99         [ 6] 1841                         add     a, #0x99 ; 'ô'
   5CB9 27            [ 4] 1842                         daa                                     ; decrement power
   5CBA 77            [ 7] 1843                         ld      (hl), a                         ; update pwr_deflectors
                           1844 
   5CBB                    1845 jovian_attack_and_move:
   5CBB 3A 0D 6C      [12] 1846                         ld      a, (power_avail)
   5CBE C6 99         [ 6] 1847                         add     a, #0x99 ; 'ô'
   5CC0 27            [ 4] 1848                         daa                                     ; decrement power
   5CC1 32 0D 6C      [13] 1849                         ld      (power_avail), a
   5CC4 CD FA 58      [16] 1850                         call    update_power_distribution
   5CC7 CD B2 61      [16] 1851                         call    print_power_avail
   5CCA 3A AD 6A      [12] 1852                         ld      a, (jovians_left)
   5CCD A7            [ 4] 1853                         and     a                               ; any left?
   5CCE CA AE 55      [ 9] 1854                         jp      Z, print_game_over_screen       ; no, go
   5CD1 3A 00 6C      [12] 1855                         ld      a, (time_to_jovian_fire)
   5CD4 3D            [ 4] 1856                         dec     a                               ; zero?
   5CD5 32 00 6C      [13] 1857                         ld      (time_to_jovian_fire), a
   5CD8 C0            [10] 1858                         ret     NZ                              ; no, return
                           1859 
   5CD9                    1860 loc_5A84:
   5CD9 CD 55 5F      [16] 1861                         call    rand_0_9
   5CDC FE 01         [ 6] 1862                         cp      #1                              ; less than 1?
   5CDE FA D9 5C      [ 9] 1863                         jp      M, loc_5A84                     ; yes, regenerate
   5CE1 FE 05         [ 6] 1864                         cp      #5                              ; greater than 4?
   5CE3 F2 D9 5C      [ 9] 1865                         jp      P, loc_5A84                     ; yes, regenerate
   5CE6 32 00 6C      [13] 1866                         ld      (time_to_jovian_fire), a        ; update with new random value
   5CE9 16 04         [ 6] 1867                         ld      d, #4                           ; *** dead code
   5CEB 21 03 6C      [ 9] 1868                         ld      hl, #jovian_tbl
                           1869 
   5CEE                    1870 get_jovian_address:
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 35.
Hexidecimal [16-Bits]



   5CEE 7E            [ 6] 1871                         ld      a, (hl)
   5CEF A7            [ 4] 1872                         and     a
   5CF0 C8            [10] 1873                         ret     Z
   5CF1 4E            [ 6] 1874                         ld      c, (hl)
   5CF2 23            [ 4] 1875                         inc     hl
   5CF3 46            [ 6] 1876                         ld      b, (hl)
   5CF4 E5            [11] 1877                         push    hl
                           1878 
   5CF5                    1879 move_jovian:
   5CF5 CD 55 5F      [16] 1880                         call    rand_0_9
   5CF8 FE 08         [ 6] 1881                         cp      #8                              ; greater than 7?
   5CFA F2 F5 5C      [ 9] 1882                         jp      P, move_jovian                  ; yes, regenerate
   5CFD 21 EF 6B      [ 9] 1883                         ld      hl, #dir_addr_delta_tbl
   5D00 A7            [ 4] 1884                         and     a
                           1885 
   5D01                    1886 loc_5AAC:
   5D01 CA 0A 5D      [ 9] 1887                         jp      Z, loc_5AB5
   5D04 23            [ 4] 1888                         inc     hl
   5D05 23            [ 4] 1889                         inc     hl
   5D06 3D            [ 4] 1890                         dec     a                               ; found direction entry?
   5D07 C3 01 5D      [ 9] 1891                         jp      loc_5AAC                        ; no, loop
                           1892 ; ---------------------------------------------------------------------------
                           1893 
   5D0A                    1894 loc_5AB5:
   5D0A 5E            [ 6] 1895                         ld      e, (hl)
   5D0B 23            [ 4] 1896                         inc     hl
   5D0C 56            [ 6] 1897                         ld      d, (hl)                         ; DE=delta
   5D0D 60            [ 4] 1898                         ld      h, b
   5D0E 69            [ 4] 1899                         ld      l, c
   5D0F 19            [ 7] 1900                         add     hl, de                          ; add delta to jovian address
   5D10 7E            [ 6] 1901                         ld      a, (hl)                         ; get sector contents
   5D11 FE 2E         [ 6] 1902                         cp      #0x2E ; '.'                     ; empty?
   5D13 C2 2F 5D      [ 9] 1903                         jp      NZ, next_jovian                 ; no, go
   5D16 0A            [ 6] 1904                         ld      a, (bc)                         ; get jovian ship type
   5D17 FE 26         [ 6] 1905                         cp      #0x26 ; '&'                     ; battle cruiser?
   5D19 CA 21 5D      [ 9] 1906                         jp      Z, loc_5ACC                     ; yes, skip
   5D1C FE 40         [ 6] 1907                         cp      #0x40 ; '@'                     ; command cruiser?
   5D1E C2 2F 5D      [ 9] 1908                         jp      NZ, next_jovian                 ; no, go
                           1909 
   5D21                    1910 loc_5ACC:                                                       ; update sector with jovian vessel
   5D21 77            [ 7] 1911                         ld      (hl), a
   5D22 3E 2E         [ 6] 1912                         ld      a, #0x2E ; '.'                  ; empty sector
   5D24 02            [ 7] 1913                         ld      (bc), a                         ; update original jovian vessel location
   5D25 D1            [ 9] 1914                         pop     de                              ; jovain tbl ptr
   5D26 1B            [ 4] 1915                         dec     de                              ; lsb
   5D27 7D            [ 4] 1916                         ld      a, l
   5D28 12            [ 7] 1917                         ld      (de), a                         ; update lsb of address
   5D29 7C            [ 4] 1918                         ld      a, h
   5D2A 13            [ 4] 1919                         inc     de
   5D2B 12            [ 7] 1920                         ld      (de), a                         ; update msb of address
   5D2C EB            [ 3] 1921                         ex      de, hl
   5D2D 23            [ 4] 1922                         inc     hl                              ; adjust
   5D2E E5            [11] 1923                         push    hl
                           1924 
   5D2F                    1925 next_jovian:
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 36.
Hexidecimal [16-Bits]



   5D2F E1            [ 9] 1926                         pop     hl
   5D30 C3 EE 5C      [ 9] 1927                         jp      get_jovian_address
                           1928 ; End of function handle_low_power
                           1929 
                           1930 
                           1931 ; =============== S U B R O U T I N E =======================================
                           1932 
                           1933 
   5D33                    1934 lose_power_crystal:
   5D33 11 CE 66      [ 9] 1935                         ld      de, #aEngineerThereG            ; "ENGINEER:THERE GOES A POWER CRYSTAL, CO"...
   5D36 CD 8E 5F      [16] 1936                         call    print_string_last_line
                           1937 
   5D39                    1938 dec_power_by_5:
   5D39 3A 0D 6C      [12] 1939                         ld      a, (power_avail)
   5D3C 06 05         [ 6] 1940                         ld      b, #5                           ; decrement by 5%
                           1941 
   5D3E                    1942 loc_5AE9:
   5D3E C6 99         [ 6] 1943                         add     a, #0x99 ; 'ô'
   5D40 27            [ 4] 1944                         daa                                     ; dec power
   5D41 CA AE 55      [ 9] 1945                         jp      Z, print_game_over_screen       ; no power, game over
   5D44 05            [ 4] 1946                         dec     b                               ; done decrementing?
   5D45 C2 3E 5D      [ 9] 1947                         jp      NZ, loc_5AE9                    ; no, loop
   5D48 32 0D 6C      [13] 1948                         ld      (power_avail), a                ; update
   5D4B CD B2 61      [16] 1949                         call    print_power_avail
   5D4E C3 FA 58      [ 9] 1950                         jp      update_power_distribution
                           1951 ; End of function lose_power_crystal
                           1952 
                           1953 
                           1954 ; =============== S U B R O U T I N E =======================================
                           1955 
                           1956 
   5D51                    1957 print_shields_failing:
   5D51 11 FD 66      [ 9] 1958                         ld      de, #aEngineerComm_3            ; "ENGINEER:COMMANDER, THE SHIELDS ARE FAL"...
   5D54 CD 8E 5F      [16] 1959                         call    print_string_last_line
   5D57 C3 39 5D      [ 9] 1960                         jp      dec_power_by_5
                           1961 ; End of function print_shields_failing
                           1962 
                           1963 ; ---------------------------------------------------------------------------
                           1964 
   5D5A                    1965 print_no_sense_and_ret:                                         ; "FIRST OFFICER:CAPTAIN, YOUR LAST COMMAN"...
   5D5A 11 3E 63      [ 9] 1966                         ld      de, #aFirstOfficerCa
   5D5D CD 8E 5F      [16] 1967                         call    print_string_last_line
   5D60 31 6A 72      [ 9] 1968                         ld      sp, #STACK_WATERMARK            ; reset stack
   5D63 11 97 53      [ 9] 1969                         ld      de, #game_loop                  ; set return address
   5D66 D5            [11] 1970                         push    de
   5D67 E5            [11] 1971                         push    hl
   5D68 D5            [11] 1972                         push    de
   5D69 C5            [11] 1973                         push    bc
   5D6A C3 B4 60      [ 9] 1974                         jp      clear_cmd_buffer
                           1975 ; move quadrant
                           1976 ; - A = direction (0-7), C = # quadrants
                           1977 
                           1978 ; =============== S U B R O U T I N E =======================================
                           1979 
                           1980 
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 37.
Hexidecimal [16-Bits]



   5D6D                    1981 move_quadrant:
   5D6D 21 AD 6A      [ 9] 1982                         ld      hl, #quadrant_delta_tbl-1
   5D70 3C            [ 4] 1983                         inc     a                               ; direction (1-8)???
   5D71 06 03         [ 6] 1984                         ld      b, #3                           ; 3 rows to print
   5D73 C5            [11] 1985                         push    bc
                           1986 
   5D74                    1987 loc_5B1F:                                                       ; ptr next entry
   5D74 23            [ 4] 1988                         inc     hl
   5D75 3D            [ 4] 1989                         dec     a                               ; found entry for direction?
   5D76 C2 74 5D      [ 9] 1990                         jp      NZ, loc_5B1F                    ; no, loop
   5D79 3A B6 6A      [12] 1991                         ld      a, (quadrant)                   ; current
                           1992 
   5D7C                    1993 loc_5B27:
   5D7C 86            [ 6] 1994                         add     a, (hl)
   5D7D 27            [ 4] 1995                         daa                                     ; calculate new quadrant
   5D7E 0D            [ 4] 1996                         dec     c                               ; done move?
   5D7F C2 7C 5D      [ 9] 1997                         jp      NZ, loc_5B27                    ; no, loop
   5D82 32 B6 6A      [13] 1998                         ld      (quadrant), a
                           1999 ; print LR sensor
   5D85 C6 89         [ 6] 2000                         add     a, #0x89 ; 'â'                  ; NW quadrant
   5D87 27            [ 4] 2001                         daa
   5D88 11 41 3C      [ 9] 2002                         ld      de, # VIDEO+0x41                ; video address
                           2003 
   5D8B                    2004 loc_5B36:
   5D8B F5            [11] 2005                         push    af
   5D8C D5            [11] 2006                         push    de
   5D8D CD EF 5D      [16] 2007                         call    get_ptr_quadrant_A_data
   5D90 D1            [ 9] 2008                         pop     de
   5D91 0E 03         [ 6] 2009                         ld      c, #3                           ; 3 values / row
                           2010 
   5D93                    2011 loc_5B3E:                                                       ; 3 digits / value
   5D93 06 03         [ 6] 2012                         ld      b, #3
                           2013 
   5D95                    2014 loc_5B40:
   5D95 7E            [ 6] 2015                         ld      a, (hl)
   5D96 E6 0F         [ 6] 2016                         and     #0xF                            ; low nibble only
   5D98 C6 30         [ 6] 2017                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   5D9A 12            [ 7] 2018                         ld      (de), a                         ; write to video
   5D9B 13            [ 4] 2019                         inc     de                              ; next video address
   5D9C 23            [ 4] 2020                         inc     hl                              ; next data address
   5D9D 05            [ 4] 2021                         dec     b                               ; done all digits?
   5D9E C2 95 5D      [ 9] 2022                         jp      NZ, loc_5B40                    ; no, loop
   5DA1 13            [ 4] 2023                         inc     de                              ; skip (space)
   5DA2 0D            [ 4] 2024                         dec     c                               ; done a row?
   5DA3 C2 93 5D      [ 9] 2025                         jp      NZ, loc_5B3E                    ; no, loop
   5DA6 F1            [ 9] 2026                         pop     af                              ; left quadrant
   5DA7 C6 10         [ 6] 2027                         add     a, #0x10                        ; down a quadrant
   5DA9 27            [ 4] 2028                         daa
   5DAA C1            [ 9] 2029                         pop     bc
   5DAB 05            [ 4] 2030                         dec     b                               ; done all rows?
   5DAC CA B8 5D      [ 9] 2031                         jp      Z, loc_5B63                     ; yes, exit
   5DAF C5            [11] 2032                         push    bc
   5DB0 21 74 00      [ 9] 2033                         ld      hl, #0x74 ; 't'                 ; offset for next row
   5DB3 19            [ 7] 2034                         add     hl, de                          ; update video address
   5DB4 EB            [ 3] 2035                         ex      de, hl
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 38.
Hexidecimal [16-Bits]



   5DB5 C3 8B 5D      [ 9] 2036                         jp      loc_5B36                        ; loop
                           2037 ; ---------------------------------------------------------------------------
                           2038 ; why do we need to do current quadrant again???
                           2039 
   5DB8                    2040 loc_5B63:
   5DB8 3A B6 6A      [12] 2041                         ld      a, (quadrant)
   5DBB 0E 01         [ 6] 2042                         ld      c, #1                           ; *** dead code
   5DBD CD EF 5D      [16] 2043                         call    get_ptr_quadrant_A_data
   5DC0 06 03         [ 6] 2044                         ld      b, #3                           ; 3 bytes to print
   5DC2 11 C5 3C      [ 9] 2045                         ld      de, # VIDEO+0xC5                ; current quadrant on LR display
                           2046 
   5DC5                    2047 loc_5B70:                                                       ; byte from tbl
   5DC5 7E            [ 6] 2048                         ld      a, (hl)
   5DC6 E6 0F         [ 6] 2049                         and     #0xF                            ; low nibble only
   5DC8 C6 30         [ 6] 2050                         add     a, #0x30 ; '0'                  ; convert to ASCII
   5DCA 12            [ 7] 2051                         ld      (de), a                         ; warships/space stations/stars
   5DCB 13            [ 4] 2052                         inc     de                              ; next byte in table
   5DCC 23            [ 4] 2053                         inc     hl                              ; next video address
   5DCD 05            [ 4] 2054                         dec     b                               ; done all bytes?
   5DCE C2 C5 5D      [ 9] 2055                         jp      NZ, loc_5B70                    ; no, loop
   5DD1 97            [ 4] 2056                         sub     a                               ; flag normal
   5DD2 32 25 72      [13] 2057                         ld      (jovian_time_frozen), a
   5DD5 C9            [ 9] 2058                         ret
                           2059 ; End of function move_quadrant
                           2060 
                           2061 
                           2062 ; =============== S U B R O U T I N E =======================================
                           2063 
                           2064 
   5DD6                    2065 print_quadrant:
   5DD6 3A B6 6A      [12] 2066                         ld      a, (quadrant)
   5DD9 21 FC 3C      [ 9] 2067                         ld      hl, # VIDEO+0xFC                ; video address
   5DDC 4F            [ 4] 2068                         ld      c, a
   5DDD E6 F0         [ 6] 2069                         and     #0xF0 ; ''                     ; high nibble only
   5DDF 0F            [ 3] 2070                         rrca
   5DE0 0F            [ 3] 2071                         rrca
   5DE1 0F            [ 3] 2072                         rrca
   5DE2 0F            [ 3] 2073                         rrca                                    ; high->low nibble
   5DE3 C6 30         [ 6] 2074                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   5DE5 77            [ 7] 2075                         ld      (hl), a                         ; write to video
   5DE6 23            [ 4] 2076                         inc     hl
   5DE7 23            [ 4] 2077                         inc     hl                              ; video address += 2
   5DE8 79            [ 4] 2078                         ld      a, c
   5DE9 E6 0F         [ 6] 2079                         and     #0xF                            ; low nibble only
   5DEB C6 30         [ 6] 2080                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   5DED 77            [ 7] 2081                         ld      (hl), a                         ; write to video
   5DEE C9            [ 9] 2082                         ret
                           2083 ; End of function print_quadrant
                           2084 
                           2085 
                           2086 ; =============== S U B R O U T I N E =======================================
                           2087 
                           2088 
   5DEF                    2089 get_ptr_quadrant_A_data:
   5DEF 4F            [ 4] 2090                         ld      c, a
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 39.
Hexidecimal [16-Bits]



   5DF0 E6 F0         [ 6] 2091                         and     #0xF0 ; ''                     ; high nibble only
   5DF2 0F            [ 3] 2092                         rrca
   5DF3 0F            [ 3] 2093                         rrca
   5DF4 0F            [ 3] 2094                         rrca
   5DF5 0F            [ 3] 2095                         rrca                                    ; high->low nibble
                           2096 ; fast multiply HL=A(7:4)*30
   5DF6 21 00 00      [ 9] 2097                         ld      hl, #0
   5DF9 11 1E 00      [ 9] 2098                         ld      de, #30
   5DFC 06 08         [ 6] 2099                         ld      b, #8                           ; 8 bits
                           2100 
   5DFE                    2101 loc_5BA9:
   5DFE 29            [ 7] 2102                         add     hl, hl
   5DFF 17            [ 3] 2103                         rla
   5E00 D2 06 5E      [ 9] 2104                         jp      NC, loc_5BB1
   5E03 19            [ 7] 2105                         add     hl, de
   5E04 CE 00         [ 6] 2106                         adc     a, #0
                           2107 
   5E06                    2108 loc_5BB1:                                                       ; done all bits?
   5E06 05            [ 4] 2109                         dec     b
   5E07 C2 FE 5D      [ 9] 2110                         jp      NZ, loc_5BA9                    ; no, loop
   5E0A EB            [ 3] 2111                         ex      de, hl                          ; DE=result
                           2112 ; add A(3:0)*3 to the result
   5E0B 79            [ 4] 2113                         ld      a, c
   5E0C E6 0F         [ 6] 2114                         and     #0xF                            ; low nibble only
   5E0E 6F            [ 4] 2115                         ld      l, a                            ; L=low nibble
   5E0F 06 03         [ 6] 2116                         ld      b, #3                           ; multiplier=3
                           2117 
   5E11                    2118 loc_5BBC:
   5E11 83            [ 4] 2119                         add     a, e
   5E12 5F            [ 4] 2120                         ld      e, a
   5E13 3E 00         [ 6] 2121                         ld      a, #0
   5E15 8A            [ 4] 2122                         adc     a, d
   5E16 57            [ 4] 2123                         ld      d, a
   5E17 7D            [ 4] 2124                         ld      a, l
   5E18 05            [ 4] 2125                         dec     b                               ; done multiplication?
   5E19 C2 11 5E      [ 9] 2126                         jp      NZ, loc_5BBC                    ; no, loop
   5E1C 21 B7 6A      [ 9] 2127                         ld      hl, #quadrant_tbl
   5E1F 19            [ 7] 2128                         add     hl, de                          ; get ptr to quadrant data
   5E20 C9            [ 9] 2129                         ret
                           2130 ; End of function get_ptr_quadrant_A_data
                           2131 
                           2132 
                           2133 ; =============== S U B R O U T I N E =======================================
                           2134 
                           2135 
   5E21                    2136 init_quadrant:
   5E21 E5            [11] 2137                         push    hl                              ; ptr current quadrant on LR sensor
   5E22 97            [ 4] 2138                         sub     a                               ; flag enabled
   5E23 32 27 72      [13] 2139                         ld      (disable_pod_update), a
                           2140 ; init quadrant with all '.'
   5E26 11 2C 00      [ 9] 2141                         ld      de, #0x2C ; ','                 ; offset to next line of quadrant display
   5E29 21 57 3C      [ 9] 2142                         ld      hl, # VIDEO+0x57                ; quadrant display video address
   5E2C 06 0A         [ 6] 2143                         ld      b, #10                          ; 10 rows
                           2144 
   5E2E                    2145 loc_5BD9:                                                       ; 10 columns
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 40.
Hexidecimal [16-Bits]



   5E2E 0E 0A         [ 6] 2146                         ld      c, #10
                           2147 
   5E30                    2148 loc_5BDB:                                                       ; <SPACE>
   5E30 36 20         [ 9] 2149                         ld      (hl), #0x20 ; ' '
   5E32 23            [ 4] 2150                         inc     hl                              ; next video address
   5E33 36 2E         [ 9] 2151                         ld      (hl), #0x2E ; '.'               ; '.'
   5E35 23            [ 4] 2152                         inc     hl                              ; next video address
   5E36 0D            [ 4] 2153                         dec     c                               ; done all columns?
   5E37 C2 30 5E      [ 9] 2154                         jp      NZ, loc_5BDB                    ; no, loop
   5E3A 36 20         [ 9] 2155                         ld      (hl), #0x20 ; ' '               ; <SPACE>
   5E3C 19            [ 7] 2156                         add     hl, de                          ; next line of quadrant display
   5E3D 05            [ 4] 2157                         dec     b                               ; done all rows?
   5E3E C2 2E 5E      [ 9] 2158                         jp      NZ, loc_5BD9                    ; no, loop
                           2159 ; init warships
   5E41 E1            [ 9] 2160                         pop     hl                              ; ptr current quadrant on LR sensor
   5E42 7E            [ 6] 2161                         ld      a, (hl)                         ; get warships
   5E43 23            [ 4] 2162                         inc     hl                              ; ptr space stations
   5E44 E5            [11] 2163                         push    hl
   5E45 D6 30         [ 6] 2164                         sub     #0x30 ; '0'                     ; convert to binary
   5E47 CA 67 5E      [ 9] 2165                         jp      Z, loc_5C12                     ; no warships, skip
   5E4A 21 03 6C      [ 9] 2166                         ld      hl, #jovian_tbl                 ; ptr table of warships
   5E4D 22 01 6C      [16] 2167                         ld      (tmp_jovian_tbl_ptr), hl        ; save copy
   5E50 57            [ 4] 2168                         ld      d, a                            ; D=warships
                           2169 
   5E51                    2170 loc_5BFC:
   5E51 CD 55 5F      [16] 2171                         call    rand_0_9
   5E54 FE 01         [ 6] 2172                         cp      #1                              ; zero?
   5E56 F2 5E 5E      [ 9] 2173                         jp      P, loc_5C09                     ; no, skip
   5E59 1E 40         [ 6] 2174                         ld      e, #0x40 ; '@'                  ; Command Cruiser
   5E5B C3 60 5E      [ 9] 2175                         jp      loc_5C0B
                           2176 ; ---------------------------------------------------------------------------
                           2177 
   5E5E                    2178 loc_5C09:                                                       ; Battle Cruiser
   5E5E 1E 26         [ 6] 2179                         ld      e, #0x26 ; '&'
                           2180 
   5E60                    2181 loc_5C0B:
   5E60 CD C4 5E      [16] 2182                         call    add_obj_to_quadrant
   5E63 15            [ 4] 2183                         dec     d                               ; done all warships in quadrant?
   5E64 C2 51 5E      [ 9] 2184                         jp      NZ, loc_5BFC                    ; no, loop
                           2185 ; init space stations
                           2186 
   5E67                    2187 loc_5C12:                                                       ; get current ptr
   5E67 2A 01 6C      [15] 2188                         ld      hl, (tmp_jovian_tbl_ptr)
   5E6A 36 00         [ 9] 2189                         ld      (hl), #0                        ; terminate
   5E6C E1            [ 9] 2190                         pop     hl                              ; ptr space stations
   5E6D 7E            [ 6] 2191                         ld      a, (hl)                         ; get space stations
   5E6E 23            [ 4] 2192                         inc     hl                              ; ptr stars
   5E6F E5            [11] 2193                         push    hl
   5E70 D6 30         [ 6] 2194                         sub     #0x30 ; '0'                     ; convert to binary
   5E72 CA 7F 5E      [ 9] 2195                         jp      Z, loc_5C2A                     ; none, skip
   5E75 57            [ 4] 2196                         ld      d, a                            ; number of space stations
   5E76 1E 30         [ 6] 2197                         ld      e, #0x30 ; '0'                  ; space station graphic
                           2198 
   5E78                    2199 loc_5C23:
   5E78 CD C4 5E      [16] 2200                         call    add_obj_to_quadrant
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 41.
Hexidecimal [16-Bits]



   5E7B 15            [ 4] 2201                         dec     d                               ; done all space stations?
   5E7C C2 78 5E      [ 9] 2202                         jp      NZ, loc_5C23                    ; no, loop
                           2203 ; init stars
                           2204 
   5E7F                    2205 loc_5C2A:                                                       ; ptr stars in quadrant
   5E7F E1            [ 9] 2206                         pop     hl
   5E80 7E            [ 6] 2207                         ld      a, (hl)                         ; get stars
   5E81 D6 30         [ 6] 2208                         sub     #0x30 ; '0'                     ; convert to binary
   5E83 CA 90 5E      [ 9] 2209                         jp      Z, loc_5C3B                     ; none, skip
   5E86 57            [ 4] 2210                         ld      d, a                            ; number of stars
   5E87 1E 2A         [ 6] 2211                         ld      e, #0x2A ; '*'                  ; star graphic
                           2212 
   5E89                    2213 loc_5C34:
   5E89 CD C4 5E      [16] 2214                         call    add_obj_to_quadrant
   5E8C 15            [ 4] 2215                         dec     d                               ; done all stars?
   5E8D C2 89 5E      [ 9] 2216                         jp      NZ, loc_5C34                    ; no, loop
                           2217 ; init USS Hephaestus
                           2218 
   5E90                    2219 loc_5C3B:                                                       ; USS Hephaestus graphic
   5E90 1E 5B         [ 6] 2220                         ld      e, #0x5B ; '['
   5E92 CD C4 5E      [16] 2221                         call    add_obj_to_quadrant
   5E95 22 7D 6A      [16] 2222                         ld      (hephaestus_video_addr), hl
                           2223 ; init mines
                           2224 
   5E98                    2225 loc_5C43:
   5E98 CD 55 5F      [16] 2226                         call    rand_0_9
   5E9B FE 03         [ 6] 2227                         cp      #3                              ; more than 2?
   5E9D F2 98 5E      [ 9] 2228                         jp      P, loc_5C43                     ; yes, regenerate
   5EA0 A7            [ 4] 2229                         and     a                               ; zero?
   5EA1 CA AE 5E      [ 9] 2230                         jp      Z, loc_5C59                     ; yes, skip
   5EA4 57            [ 4] 2231                         ld      d, a                            ; (1-2)
   5EA5 1E 25         [ 6] 2232                         ld      e, #0x25 ; '%'                  ; mine graphic
                           2233 
   5EA7                    2234 loc_5C52:
   5EA7 CD C4 5E      [16] 2235                         call    add_obj_to_quadrant
   5EAA 15            [ 4] 2236                         dec     d                               ; done all mines?
   5EAB C2 A7 5E      [ 9] 2237                         jp      NZ, loc_5C52                    ; no, loop
                           2238 ; init unknowns
                           2239 
   5EAE                    2240 loc_5C59:
   5EAE CD 55 5F      [16] 2241                         call    rand_0_9
   5EB1 FE 04         [ 6] 2242                         cp      #4                              ; more than 3?
   5EB3 F2 AE 5E      [ 9] 2243                         jp      P, loc_5C59                     ; yes, regenerate
   5EB6 A7            [ 4] 2244                         and     a                               ; zero?
   5EB7 57            [ 4] 2245                         ld      d, a
                           2246 
   5EB8                    2247 loc_5C63:                                                       ; yes, skip
   5EB8 CA 38 61      [ 9] 2248                         jp      Z, print_sector
   5EBB 1E 58         [ 6] 2249                         ld      e, #0x58 ; 'X'                  ; Unknown graphic
   5EBD CD C4 5E      [16] 2250                         call    add_obj_to_quadrant
   5EC0 15            [ 4] 2251                         dec     d                               ; done all unknowns?
   5EC1 C3 B8 5E      [ 9] 2252                         jp      loc_5C63                        ; no, loop
                           2253 ; End of function init_quadrant
                           2254 
                           2255 ; D=num of (this) object in quadrant, E=object (graphic)
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 42.
Hexidecimal [16-Bits]



                           2256 
                           2257 ; =============== S U B R O U T I N E =======================================
                           2258 
                           2259 
   5EC4                    2260 add_obj_to_quadrant:
   5EC4 CD 55 5F      [16] 2261                         call    rand_0_9                        ; rand Y coord
   5EC7 21 58 3C      [ 9] 2262                         ld      hl, # VIDEO+0x58                ; first '.' in quadrant display
   5ECA 01 40 00      [ 9] 2263                         ld      bc, #0x40 ; '@'                 ; offset to next line
   5ECD A7            [ 4] 2264                         and     a                               ; zero?
   5ECE CA D6 5E      [ 9] 2265                         jp      Z, loc_5C81                     ; yes, skip
                           2266 
   5ED1                    2267 loc_5C7C:                                                       ; next line
   5ED1 09            [ 7] 2268                         add     hl, bc
   5ED2 3D            [ 4] 2269                         dec     a                               ; at random line?
   5ED3 C2 D1 5E      [ 9] 2270                         jp      NZ, loc_5C7C                    ; no, loop
                           2271 
   5ED6                    2272 loc_5C81:                                                       ; rand X coord
   5ED6 CD 55 5F      [16] 2273                         call    rand_0_9
   5ED9 07            [ 3] 2274                         rlca                                    ; x2 for display offset
   5EDA 4F            [ 4] 2275                         ld      c, a
   5EDB 06 00         [ 6] 2276                         ld      b, #0
   5EDD 09            [ 7] 2277                         add     hl, bc                          ; offset to X coord
   5EDE 7E            [ 6] 2278                         ld      a, (hl)                         ; get current contents
   5EDF FE 2E         [ 6] 2279                         cp      #0x2E ; '.'                     ; empty?
   5EE1 C2 C4 5E      [ 9] 2280                         jp      NZ, add_obj_to_quadrant         ; no, regenerate
   5EE4 73            [ 7] 2281                         ld      (hl), e                         ; store object
   5EE5 7B            [ 4] 2282                         ld      a, e
   5EE6 FE 40         [ 6] 2283                         cp      #0x40 ; '@'                     ; Jovian Command Cruiser?
   5EE8 CA EE 5E      [ 9] 2284                         jp      Z, loc_5C99                     ; yes, skip
   5EEB FE 26         [ 6] 2285                         cp      #0x26 ; '&'                     ; Jovian Battle Cruiser?
   5EED C0            [10] 2286                         ret     NZ                              ; no, return
                           2287 
   5EEE                    2288 loc_5C99:
   5EEE D5            [11] 2289                         push    de
   5EEF EB            [ 3] 2290                         ex      de, hl
   5EF0 2A 01 6C      [15] 2291                         ld      hl, (tmp_jovian_tbl_ptr)
   5EF3 73            [ 7] 2292                         ld      (hl), e                         ; warship video address lsb
   5EF4 23            [ 4] 2293                         inc     hl
   5EF5 72            [ 7] 2294                         ld      (hl), d                         ; warship video address msb
   5EF6 23            [ 4] 2295                         inc     hl                              ; next entry
   5EF7 22 01 6C      [16] 2296                         ld      (tmp_jovian_tbl_ptr), hl        ; update
   5EFA D1            [ 9] 2297                         pop     de
   5EFB C9            [ 9] 2298                         ret
                           2299 ; End of function add_obj_to_quadrant
                           2300 
                           2301 
                           2302 ; =============== S U B R O U T I N E =======================================
                           2303 
                           2304 
   5EFC                    2305 get_next_cmd_char:
   5EFC E5            [11] 2306                         push    hl
   5EFD 2A 55 6A      [15] 2307                         ld      hl, (cmd_entry_addr)
   5F00 7E            [ 6] 2308                         ld      a, (hl)                         ; get next cmd char
   5F01 FE 80         [ 6] 2309                         cp      #0x80 ; 'Ä'                     ; graphic space?
   5F03 CA 0C 5F      [ 9] 2310                         jp      Z, loc_5CB7                     ; yes, skip
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 43.
Hexidecimal [16-Bits]



   5F06 23            [ 4] 2311                         inc     hl                              ; next cmd char
   5F07 22 55 6A      [16] 2312                         ld      (cmd_entry_addr), hl            ; update
   5F0A E1            [ 9] 2313                         pop     hl
   5F0B C9            [ 9] 2314                         ret
                           2315 ; ---------------------------------------------------------------------------
                           2316 
   5F0C                    2317 loc_5CB7:                                                       ; zero char
   5F0C 97            [ 4] 2318                         sub     a
   5F0D E1            [ 9] 2319                         pop     hl
   5F0E C9            [ 9] 2320                         ret
                           2321 ; End of function get_next_cmd_char
                           2322 
                           2323 
                           2324 ; =============== S U B R O U T I N E =======================================
                           2325 
                           2326 
   5F0F                    2327 rnd_delay:
   5F0F CD 55 5F      [16] 2328                         call    rand_0_9
   5F12 3C            [ 4] 2329                         inc     a                               ; 1-10
   5F13 47            [ 4] 2330                         ld      b, a
                           2331 ; End of function rnd_delay
                           2332 
                           2333 ; some sort of random time delay loop
                           2334 ; - which calls update_chaser_pods_cmd_entry
                           2335 ; B=out loop counter
                           2336 ; E,C=inner loop counters (random?)
                           2337 
                           2338 ; =============== S U B R O U T I N E =======================================
                           2339 
                           2340 
   5F14                    2341 delay_B_with_duty_cycle:
   5F14 E5            [11] 2342                         push    hl
   5F15 D5            [11] 2343                         push    de
                           2344 
   5F16                    2345 loc_5CC1:
   5F16 21 4B 6A      [ 9] 2346                         ld      hl, #delay_duty_cycle_tbl
   5F19 3A 1E 72      [12] 2347                         ld      a, (delay_duty_cycle_i)
   5F1C 07            [ 3] 2348                         rlca                                    ; x2
   5F1D 85            [ 4] 2349                         add     a, l
   5F1E 6F            [ 4] 2350                         ld      l, a                            ; get ptr entry
   5F1F 3E 01         [ 6] 2351                         ld      a, #1
                           2352 
   5F21                    2353 loc_5CCC:
   5F21 32 47 6A      [13] 2354                         ld      (delay_cycle), a
   5F24 16 10         [ 6] 2355                         ld      d, #16
                           2356 
   5F26                    2357 loc_5CD1:                                                       ; e=0-duty (not initialised)
   5F26 1D            [ 4] 2358                         dec     e
   5F27 C2 2B 5F      [ 9] 2359                         jp      NZ, loc_5CD6
   5F2A 5E            [ 6] 2360                         ld      e, (hl)                         ; reload duty
                           2361 
   5F2B                    2362 loc_5CD6:                                                       ; c=0-255 (not initialised)
   5F2B 0D            [ 4] 2363                         dec     c
   5F2C C2 26 5F      [ 9] 2364                         jp      NZ, loc_5CD1
   5F2F 15            [ 4] 2365                         dec     d
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 44.
Hexidecimal [16-Bits]



   5F30 C2 26 5F      [ 9] 2366                         jp      NZ, loc_5CD1
   5F33 23            [ 4] 2367                         inc     hl                              ; next cycle entry
   5F34 CD A0 5F      [16] 2368                         call    update_chaser_pods_cmd_entry
   5F37 05            [ 4] 2369                         dec     b                               ; done all iterations?
   5F38 CA 46 5F      [ 9] 2370                         jp      Z, delay_exit                   ; yes, exit
   5F3B 3A 47 6A      [12] 2371                         ld      a, (delay_cycle)
   5F3E EE 01         [ 6] 2372                         xor     #1                              ; toggle
   5F40 CA 21 5F      [ 9] 2373                         jp      Z, loc_5CCC
   5F43 C3 16 5F      [ 9] 2374                         jp      loc_5CC1
                           2375 ; ---------------------------------------------------------------------------
                           2376 
   5F46                    2377 delay_exit:
   5F46 D1            [ 9] 2378                         pop     de
   5F47 E1            [ 9] 2379                         pop     hl
   5F48 C9            [ 9] 2380                         ret
                           2381 ; End of function delay_B_with_duty_cycle
                           2382 
                           2383 
                           2384 ; =============== S U B R O U T I N E =======================================
                           2385 
                           2386 
   5F49                    2387 clear_video_with_B:
   5F49 21 00 3C      [ 9] 2388                         ld      hl, #VIDEO
                           2389 
   5F4C                    2390 loc_5CF7:                                                       ; set char
   5F4C 70            [ 7] 2391                         ld      (hl), b
   5F4D 23            [ 4] 2392                         inc     hl                              ; next video location
   5F4E 7C            [ 4] 2393                         ld      a, h
   5F4F FE 40         [ 6] 2394                         cp      #0x40 ; '@'                     ; end of video?
   5F51 C2 4C 5F      [ 9] 2395                         jp      NZ, loc_5CF7                    ; no, loop
   5F54 C9            [ 9] 2396                         ret
                           2397 ; End of function clear_video_with_B
                           2398 
                           2399 
                           2400 ; =============== S U B R O U T I N E =======================================
                           2401 
                           2402 
   5F55                    2403 rand_0_9:
   5F55 C5            [11] 2404                         push    bc
   5F56 E5            [11] 2405                         push    hl
   5F57 2A 6A 72      [15] 2406                         ld      hl, (STACK_WATERMARK)
                           2407 
   5F5A                    2408 loc_5D05:
   5F5A 06 17         [ 6] 2409                         ld      b, #23
   5F5C 7D            [ 4] 2410                         ld      a, l
                           2411 
   5F5D                    2412 loc_5D08:
   5F5D E6 06         [ 6] 2413                         and     #6
   5F5F 37            [ 3] 2414                         scf
   5F60 EA 64 5F      [ 9] 2415                         jp      PE, loc_5D0F
   5F63 3F            [ 3] 2416                         ccf
                           2417 
   5F64                    2418 loc_5D0F:
   5F64 7C            [ 4] 2419                         ld      a, h
   5F65 1F            [ 3] 2420                         rra
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 45.
Hexidecimal [16-Bits]



   5F66 67            [ 4] 2421                         ld      h, a
   5F67 7D            [ 4] 2422                         ld      a, l
   5F68 1F            [ 3] 2423                         rra
   5F69 E6 FE         [ 6] 2424                         and     #0xFE ; '˛'
   5F6B 6F            [ 4] 2425                         ld      l, a
   5F6C 05            [ 4] 2426                         dec     b
   5F6D C2 5D 5F      [ 9] 2427                         jp      NZ, loc_5D08
   5F70 22 6A 72      [16] 2428                         ld      (STACK_WATERMARK), hl
   5F73 7C            [ 4] 2429                         ld      a, h
   5F74 E6 0F         [ 6] 2430                         and     #0xF                            ; low nibble only
   5F76 FE 0A         [ 6] 2431                         cp      #0xA                            ; greater than 9?
   5F78 D2 5A 5F      [ 9] 2432                         jp      NC, loc_5D05                    ; yes, regenerate
   5F7B E1            [ 9] 2433                         pop     hl
   5F7C C1            [ 9] 2434                         pop     bc
   5F7D C9            [ 9] 2435                         ret
                           2436 ; End of function rand_0_9
                           2437 
                           2438 
                           2439 ; =============== S U B R O U T I N E =======================================
                           2440 
                           2441 
   5F7E                    2442 print_experimental_ray_outcome:
   5F7E D5            [11] 2443                         push    de
   5F7F 11 9B 67      [ 9] 2444                         ld      de, #aFirstOfficerTh            ; "FIRST OFFICER: THE EXPERIMENTAL RAY"
   5F82 21 80 3F      [ 9] 2445                         ld      hl, # VIDEO+0x380
   5F85 CD 91 5F      [16] 2446                         call    clear_last_2_lines_print_string
   5F88 D1            [ 9] 2447                         pop     de
   5F89 23            [ 4] 2448                         inc     hl
   5F8A CD 94 5F      [16] 2449                         call    print_string
   5F8D C9            [ 9] 2450                         ret
                           2451 ; End of function print_experimental_ray_outcome
                           2452 
                           2453 
                           2454 ; =============== S U B R O U T I N E =======================================
                           2455 
                           2456 
   5F8E                    2457 print_string_last_line:
   5F8E 21 C0 3F      [ 9] 2458                         ld      hl, # VIDEO+0x3C0               ; last line
                           2459 ; End of function print_string_last_line
                           2460 
                           2461 
                           2462 ; =============== S U B R O U T I N E =======================================
                           2463 
                           2464 
   5F91                    2465 clear_last_2_lines_print_string:
   5F91 CD 15 61      [16] 2466                         call    clear_last_2_lines
                           2467 ; End of function clear_last_2_lines_print_string
                           2468 
                           2469 ; HL=video address, DE=string (null-terminated)
                           2470 
                           2471 ; =============== S U B R O U T I N E =======================================
                           2472 
                           2473 
   5F94                    2474 print_string:
   5F94 1A            [ 6] 2475                         ld      a, (de)                         ; get character
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 46.
Hexidecimal [16-Bits]



   5F95 B7            [ 4] 2476                         or      a                               ; end of string?
   5F96 C8            [10] 2477                         ret     Z                               ; yes, return
   5F97 77            [ 7] 2478                         ld      (hl), a                         ; write to video
   5F98 13            [ 4] 2479                         inc     de                              ; next string char
   5F99 23            [ 4] 2480                         inc     hl                              ; next video address
   5F9A C3 94 5F      [ 9] 2481                         jp      print_string                    ; loop
                           2482 ; End of function print_string
                           2483 
                           2484 
                           2485 ; =============== S U B R O U T I N E =======================================
                           2486 
                           2487 
   5F9D                    2488 delay_B_and_update_all:
   5F9D CD 14 5F      [16] 2489                         call    delay_B_with_duty_cycle
                           2490 ; End of function delay_B_and_update_all
                           2491 
                           2492 
                           2493 ; =============== S U B R O U T I N E =======================================
                           2494 
                           2495 
   5FA0                    2496 update_chaser_pods_cmd_entry:
                           2497 
                           2498 ; FUNCTION CHUNK AT 5580 SIZE 00000005 BYTES
                           2499 
   5FA0 E5            [11] 2500                         push    hl
   5FA1 D5            [11] 2501                         push    de
   5FA2 C5            [11] 2502                         push    bc
                           2503 ; update chaser
   5FA3 2A 44 6A      [15] 2504                         ld      hl, (chaser_addr)
   5FA6 7E            [ 6] 2505                         ld      a, (hl)
   5FA7 CD 55 5F      [16] 2506                         call    rand_0_9
   5FAA C6 80         [ 6] 2507                         add     a, #0x80 ; 'Ä'
   5FAC 36 20         [ 9] 2508                         ld      (hl), #0x20 ; ' '               ; wipe chaser
   5FAE 23            [ 4] 2509                         inc     hl
   5FAF 23            [ 4] 2510                         inc     hl                              ; next chaser_addr
   5FB0 7D            [ 4] 2511                         ld      a, l
   5FB1 FE 2B         [ 6] 2512                         cp      #0x2B ; '+'                     ; end? (right)
   5FB3 FA B8 5F      [ 9] 2513                         jp      M, loc_5D63                     ; no, skip
   5FB6 2E 19         [ 6] 2514                         ld      l, #0x19                        ; reset to start (left)
                           2515 
   5FB8                    2516 loc_5D63:                                                       ; read char (why?)
   5FB8 7E            [ 6] 2517                         ld      a, (hl)
   5FB9 3E 8F         [ 6] 2518                         ld      a, #0x8F ; 'è'                  ; chaser graphic
   5FBB 77            [ 7] 2519                         ld      (hl), a                         ; write to video
   5FBC 22 44 6A      [16] 2520                         ld      (chaser_addr), hl               ; save new chaser address
   5FBF 3A 28 72      [12] 2521                         ld      a, (critical)
   5FC2 A7            [ 4] 2522                         and     a                               ; condition critical?
   5FC3 CA D4 5F      [ 9] 2523                         jp      Z, loc_5D7F                     ; no, skip
                           2524 ; toggles "CONDITION" value w/graphics
   5FC6 06 05         [ 6] 2525                         ld      b, #5                           ; 5 chars to toggle
   5FC8 21 BB 3C      [ 9] 2526                         ld      hl, # VIDEO+0xBB                ; ptr to condition value
                           2527 
   5FCB                    2528 loc_5D76:                                                       ; get char
   5FCB 7E            [ 6] 2529                         ld      a, (hl)
   5FCC C6 80         [ 6] 2530                         add     a, #0x80 ; 'Ä'                  ; toggle graphics
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 47.
Hexidecimal [16-Bits]



   5FCE 77            [ 7] 2531                         ld      (hl), a                         ; write back to video
   5FCF 23            [ 4] 2532                         inc     hl                              ; next address
   5FD0 05            [ 4] 2533                         dec     b                               ; done?
   5FD1 C2 CB 5F      [ 9] 2534                         jp      NZ, loc_5D76                    ; no, loop
                           2535 
   5FD4                    2536 loc_5D7F:
   5FD4 3A 27 72      [12] 2537                         ld      a, (disable_pod_update)
   5FD7 A7            [ 4] 2538                         and     a                               ; disabled?
   5FD8 C2 55 60      [ 9] 2539                         jp      NZ, handle_cmd_entry            ; yes, skip
   5FDB 11 06 00      [ 9] 2540                         ld      de, #6                          ; 6 bytes per pod entry
   5FDE 21 0A 72      [ 9] 2541                         ld      hl, #antimatter_pod_tbl
                           2542 
   5FE1                    2543 loc_5D8C:                                                       ; pod status
   5FE1 7E            [ 6] 2544                         ld      a, (hl)
   5FE2 FE FF         [ 6] 2545                         cp      #0xFF                           ; end of table?
   5FE4 CA 55 60      [ 9] 2546                         jp      Z, handle_cmd_entry             ; yes, exit
   5FE7 A7            [ 4] 2547                         and     a                               ; unused?
   5FE8 C2 EF 5F      [ 9] 2548                         jp      NZ, get_pod_data                ; no, exit
                           2549 
   5FEB                    2550 next_pod:                                                       ; next pod entry
   5FEB 19            [ 7] 2551                         add     hl, de
   5FEC C3 E1 5F      [ 9] 2552                         jp      loc_5D8C                        ; loop
                           2553 ; ---------------------------------------------------------------------------
                           2554 
   5FEF                    2555 get_pod_data:                                                   ; pod launched?
   5FEF FE 01         [ 6] 2556                         cp      #1
   5FF1 C2 EB 5F      [ 9] 2557                         jp      NZ, next_pod                    ; no, return
   5FF4 E5            [11] 2558                         push    hl                              ; pod table entry
   5FF5 23            [ 4] 2559                         inc     hl
   5FF6 4E            [ 6] 2560                         ld      c, (hl)
   5FF7 23            [ 4] 2561                         inc     hl
   5FF8 46            [ 6] 2562                         ld      b, (hl)                         ; BC = video address delta
   5FF9 23            [ 4] 2563                         inc     hl
   5FFA 5E            [ 6] 2564                         ld      e, (hl)
   5FFB 23            [ 4] 2565                         inc     hl
   5FFC 56            [ 6] 2566                         ld      d, (hl)                         ; DE = video address
   5FFD 23            [ 4] 2567                         inc     hl
   5FFE 7E            [ 6] 2568                         ld      a, (hl)                         ; speed countdown
   5FFF A7            [ 4] 2569                         and     a                               ; zero?
   6000 CA 0C 60      [ 9] 2570                         jp      Z, move_pod                     ; yes, go
   6003 3D            [ 4] 2571                         dec     a                               ; decrement speed countdown
   6004 77            [ 7] 2572                         ld      (hl), a                         ; update
   6005 E1            [ 9] 2573                         pop     hl
                           2574 
   6006                    2575 offset_for_next_pod:                                            ; offset to next pod entry
   6006 11 06 00      [ 9] 2576                         ld      de, #6
   6009 C3 EB 5F      [ 9] 2577                         jp      next_pod
                           2578 ; ---------------------------------------------------------------------------
                           2579 
   600C                    2580 move_pod:                                                       ; reinit speed countdown
   600C 3A 95 6A      [12] 2581                         ld      a, (pod_speed)
   600F 77            [ 7] 2582                         ld      (hl), a                         ; update pod speed
   6010 62            [ 4] 2583                         ld      h, d
   6011 6B            [ 4] 2584                         ld      l, e                            ; HL = video address
   6012 36 2E         [ 9] 2585                         ld      (hl), #0x2E ; '.'               ; write empty sector to video
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 48.
Hexidecimal [16-Bits]



   6014 09            [ 7] 2586                         add     hl, bc                          ; add delta to address
   6015 7E            [ 6] 2587                         ld      a, (hl)                         ; get sector contents
   6016 FE 2E         [ 6] 2588                         cp      #0x2E ; '.'                     ; empty?
   6018 C2 2A 60      [ 9] 2589                         jp      NZ, change_pod_dir              ; no, go
   601B 36 23         [ 9] 2590                         ld      (hl), #0x23 ; '#'               ; write pod graphic to video
   601D D1            [ 9] 2591                         pop     de                              ; pod table entry
   601E D5            [11] 2592                         push    de
   601F 13            [ 4] 2593                         inc     de
   6020 13            [ 4] 2594                         inc     de
   6021 EB            [ 3] 2595                         ex      de, hl                          ; HL = pod table entry+2
                           2596 
   6022                    2597 update_pod_address:                                             ; next entry address
   6022 23            [ 4] 2598                         inc     hl
   6023 73            [ 7] 2599                         ld      (hl), e                         ; video address lsb
   6024 23            [ 4] 2600                         inc     hl
   6025 72            [ 7] 2601                         ld      (hl), d                         ; video address msb
   6026 E1            [ 9] 2602                         pop     hl
   6027 C3 06 60      [ 9] 2603                         jp      offset_for_next_pod
                           2604 ; ---------------------------------------------------------------------------
                           2605 
   602A                    2606 change_pod_dir:                                                 ; direction
   602A CD 55 5F      [16] 2607                         call    rand_0_9
   602D FE 08         [ 6] 2608                         cp      #8                              ; greater than 7?
   602F F2 2A 60      [ 9] 2609                         jp      P, change_pod_dir               ; regenerate
   6032 21 EF 6B      [ 9] 2610                         ld      hl, #dir_addr_delta_tbl
   6035 07            [ 3] 2611                         rlca                                    ; x2
   6036 85            [ 4] 2612                         add     a, l
   6037 6F            [ 4] 2613                         ld      l, a
   6038 7C            [ 4] 2614                         ld      a, h
   6039 CE 00         [ 6] 2615                         adc     a, #0
   603B 67            [ 4] 2616                         ld      h, a                            ; ptr direction delta address entry
   603C 7E            [ 6] 2617                         ld      a, (hl)
   603D 23            [ 4] 2618                         inc     hl
   603E 66            [ 6] 2619                         ld      h, (hl)
   603F 6F            [ 4] 2620                         ld      l, a                            ; HL = delta
   6040 44            [ 4] 2621                         ld      b, h
   6041 4D            [ 4] 2622                         ld      c, l                            ; BC = delta
   6042 19            [ 7] 2623                         add     hl, de                          ; add delta to video address
   6043 7E            [ 6] 2624                         ld      a, (hl)                         ; get sector contents
   6044 FE 2E         [ 6] 2625                         cp      #0x2E ; '.'                     ; empty?
   6046 C2 2A 60      [ 9] 2626                         jp      NZ, change_pod_dir              ; no, regenerate
   6049 36 23         [ 9] 2627                         ld      (hl), #0x23 ; '#'               ; write pod graphic to video
   604B D1            [ 9] 2628                         pop     de                              ; pod table entry
   604C D5            [11] 2629                         push    de
   604D 13            [ 4] 2630                         inc     de
   604E EB            [ 3] 2631                         ex      de, hl
   604F 71            [ 7] 2632                         ld      (hl), c                         ; new delta lsb
   6050 23            [ 4] 2633                         inc     hl
   6051 70            [ 7] 2634                         ld      (hl), b                         ; new delta msb
   6052 C3 22 60      [ 9] 2635                         jp      update_pod_address
                           2636 ; ---------------------------------------------------------------------------
                           2637 
   6055                    2638 handle_cmd_entry:
   6055 3A 20 72      [12] 2639                         ld      a, (cmd_flag)
   6058 A7            [ 4] 2640                         and     a                               ; new command already?
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 49.
Hexidecimal [16-Bits]



   6059 CA CD 60      [ 9] 2641                         jp      Z, loc_5E78                     ; yes, exit
   605C CD B6 53      [16] 2642                         call    keyboard_scan
   605F CA CD 60      [ 9] 2643                         jp      Z, loc_5E78                     ; no key, exit
   6062 FE 09         [ 6] 2644                         cp      #9                              ; <TAB>? (cancel command)
   6064 CA B4 60      [ 9] 2645                         jp      Z, clear_cmd_buffer             ; yes, go
   6067 2A 55 6A      [15] 2646                         ld      hl, (cmd_entry_addr)
   606A 77            [ 7] 2647                         ld      (hl), a                         ; display key
   606B 23            [ 4] 2648                         inc     hl                              ; next address
   606C 22 55 6A      [16] 2649                         ld      (cmd_entry_addr), hl            ; save
   606F FE 0D         [ 6] 2650                         cp      #0xD                            ; <ENTER>?
   6071 CA 83 60      [ 9] 2651                         jp      Z, cmd_entered                  ; yes, go
   6074 3A 21 72      [12] 2652                         ld      a, (cmd_len)
   6077 3C            [ 4] 2653                         inc     a
   6078 FE 07         [ 6] 2654                         cp      #7                              ; buffer full?
   607A F2 B4 60      [ 9] 2655                         jp      P, clear_cmd_buffer             ; yes, skip
   607D 32 21 72      [13] 2656                         ld      (cmd_len), a                    ; save new length
   6080 C3 CD 60      [ 9] 2657                         jp      loc_5E78                        ; exit
                           2658 ; ---------------------------------------------------------------------------
                           2659 
   6083                    2660 cmd_entered:                                                    ; zero
   6083 97            [ 4] 2661                         sub     a
   6084 32 20 72      [13] 2662                         ld      (cmd_flag), a                   ; flag new command
   6087 2B            [ 4] 2663                         dec     hl                              ; back to <ENTER>
   6088 36 80         [ 9] 2664                         ld      (hl), #0x80 ; 'Ä'               ; overwrite with graphical space
   608A 21 37 3F      [ 9] 2665                         ld      hl, # VIDEO+0x337               ; cmd entry
   608D 46            [ 6] 2666                         ld      b, (hl)                         ; get 1st char
   608E 3A 24 72      [12] 2667                         ld      a, (computer_malfunction)
   6091 A7            [ 4] 2668                         and     a
   6092 CA 9B 60      [ 9] 2669                         jp      Z, loc_5E46
   6095 78            [ 4] 2670                         ld      a, b                            ; 1st char of command
   6096 FE 49         [ 6] 2671                         cp      #0x49 ; 'I'                     ; ???
   6098 C2 B4 60      [ 9] 2672                         jp      NZ, clear_cmd_buffer            ; no, skip
                           2673 
   609B                    2674 loc_5E46:
   609B 23            [ 4] 2675                         inc     hl
   609C 22 55 6A      [16] 2676                         ld      (cmd_entry_addr), hl
   609F 21 6B 6A      [ 9] 2677                         ld      hl, #cmd_tbl                    ; "HIMTDSEXAL"
   60A2 11 57 6A      [ 9] 2678                         ld      de, #cmd_jmp_vectors
                           2679 
   60A5                    2680 lookup_cmd:                                                     ; get cmd entry
   60A5 7E            [ 6] 2681                         ld      a, (hl)
   60A6 A7            [ 4] 2682                         and     a                               ; end of table?
   60A7 CA B4 60      [ 9] 2683                         jp      Z, clear_cmd_buffer             ; yes, exit
   60AA B8            [ 4] 2684                         cp      b                               ; found cmd?
   60AB CA D1 60      [ 9] 2685                         jp      Z, found_cmd                    ; yes, go
   60AE 23            [ 4] 2686                         inc     hl                              ; next table entry
   60AF 13            [ 4] 2687                         inc     de
   60B0 13            [ 4] 2688                         inc     de                              ; next vector entry
   60B1 C3 A5 60      [ 9] 2689                         jp      lookup_cmd                      ; loop
                           2690 ; ---------------------------------------------------------------------------
                           2691 
   60B4                    2692 clear_cmd_buffer:
   60B4 21 37 3F      [ 9] 2693                         ld      hl, # VIDEO+0x337
   60B7 22 55 6A      [16] 2694                         ld      (cmd_entry_addr), hl            ; reset cmd entry
   60BA 3E FF         [ 6] 2695                         ld      a, #0xFF
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 50.
Hexidecimal [16-Bits]



   60BC 32 20 72      [13] 2696                         ld      (cmd_flag), a                   ; flag no command
                           2697 
   60BF                    2698 loc_5E6A:
   60BF 3E 20         [ 6] 2699                         ld      a, #0x20 ; ' '
   60C1 77            [ 7] 2700                         ld      (hl), a                         ; write space
   60C2 23            [ 4] 2701                         inc     hl                              ; next video address
   60C3 7E            [ 6] 2702                         ld      a, (hl)                         ; get char
   60C4 FE 20         [ 6] 2703                         cp      #0x20 ; ' '                     ; space?
   60C6 C2 BF 60      [ 9] 2704                         jp      NZ, loc_5E6A                    ; no, loop
   60C9 97            [ 4] 2705                         sub     a                               ; zero cmd_len
   60CA 32 21 72      [13] 2706                         ld      (cmd_len), a
                           2707 
   60CD                    2708 loc_5E78:
   60CD C1            [ 9] 2709                         pop     bc
   60CE D1            [ 9] 2710                         pop     de
   60CF E1            [ 9] 2711                         pop     hl
   60D0 C9            [ 9] 2712                         ret
                           2713 ; ---------------------------------------------------------------------------
                           2714 
   60D1                    2715 found_cmd:                                                      ; HL = jump vector
   60D1 EB            [ 3] 2716                         ex      de, hl
   60D2 11 B4 60      [ 9] 2717                         ld      de, #clear_cmd_buffer
   60D5 D5            [11] 2718                         push    de                              ; set return address
   60D6 C3 C0 57      [ 9] 2719                         jp      jump_HL_vector
                           2720 ; End of function update_chaser_pods_cmd_entry
                           2721 
                           2722 
                           2723 ; =============== S U B R O U T I N E =======================================
                           2724 
                           2725 
   60D9                    2726 animate_destruction:
   60D9 3E 01         [ 6] 2727                         ld      a, #1                           ; flag disabled
   60DB 32 27 72      [13] 2728                         ld      (disable_pod_update), a
   60DE 3E 01         [ 6] 2729                         ld      a, #1                           ; flag critical (self-destruct)
   60E0 32 28 72      [13] 2730                         ld      (critical), a
   60E3 3E 03         [ 6] 2731                         ld      a, #3
   60E5 32 1E 72      [13] 2732                         ld      (delay_duty_cycle_i), a
   60E8 21 BB 3C      [ 9] 2733                         ld      hl, # VIDEO+0xBB                ; condition value video address
   60EB 11 0D 64      [ 9] 2734                         ld      de, #aCrtcl                     ; "CRTCL"
   60EE CD 94 5F      [16] 2735                         call    print_string
   60F1 06 32         [ 6] 2736                         ld      b, #50
   60F3 CD 14 5F      [16] 2737                         call    delay_B_with_duty_cycle
   60F6 0E 1E         [ 6] 2738                         ld      c, #30                          ; loop 30 times
                           2739 
   60F8                    2740 loc_5EA3:
   60F8 06 2B         [ 6] 2741                         ld      b, #0x2B ; '+'
   60FA CD 49 5F      [16] 2742                         call    clear_video_with_B
   60FD 06 23         [ 6] 2743                         ld      b, #0x23 ; '#'
   60FF CD 49 5F      [16] 2744                         call    clear_video_with_B
   6102 06 2A         [ 6] 2745                         ld      b, #0x2A ; '*'
   6104 CD 49 5F      [16] 2746                         call    clear_video_with_B
   6107 06 BF         [ 6] 2747                         ld      b, #0xBF ; 'ø'
   6109 CD 49 5F      [16] 2748                         call    clear_video_with_B
   610C 0D            [ 4] 2749                         dec     c                               ; done?
   610D C2 F8 60      [ 9] 2750                         jp      NZ, loc_5EA3                    ; no, loop
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 51.
Hexidecimal [16-Bits]



   6110 97            [ 4] 2751                         sub     a                               ; flag enabled
   6111 32 27 72      [13] 2752                         ld      (disable_pod_update), a
   6114 C9            [ 9] 2753                         ret
                           2754 ; End of function animate_destruction
                           2755 
                           2756 
                           2757 ; =============== S U B R O U T I N E =======================================
                           2758 
                           2759 
   6115                    2760 clear_last_2_lines:
   6115 E5            [11] 2761                         push    hl                              ; save video address
   6116 3E 80         [ 6] 2762                         ld      a, #0x80 ; 'Ä'                  ; 2 lines to clear
   6118 21 80 3F      [ 9] 2763                         ld      hl, # VIDEO+0x380               ; 2nd-last line
                           2764 
   611B                    2765 loc_5EC6:                                                       ; <SPACE>
   611B 36 20         [ 9] 2766                         ld      (hl), #0x20 ; ' '
   611D 3D            [ 4] 2767                         dec     a                               ; done 2 lines?
   611E 23            [ 4] 2768                         inc     hl                              ; next video location
   611F C2 1B 61      [ 9] 2769                         jp      NZ, loc_5EC6                    ; no, loop
   6122 E1            [ 9] 2770                         pop     hl                              ; restore video location
   6123 C9            [ 9] 2771                         ret
                           2772 ; End of function clear_last_2_lines
                           2773 
                           2774 
                           2775 ; =============== S U B R O U T I N E =======================================
                           2776 
                           2777 
   6124                    2778 print_10_lines:
   6124 21 57 3C      [ 9] 2779                         ld      hl, # VIDEO+0x57
   6127 3E 0A         [ 6] 2780                         ld      a, #10                          ; # lines to print
                           2781 
   6129                    2782 loc_5ED4:
   6129 F5            [11] 2783                         push    af
   612A CD 94 5F      [16] 2784                         call    print_string
   612D F1            [ 9] 2785                         pop     af
   612E 01 2B 00      [ 9] 2786                         ld      bc, #0x2B ; '+'                 ; offset to next line
   6131 09            [ 7] 2787                         add     hl, bc                          ; next video address
   6132 3D            [ 4] 2788                         dec     a                               ; done all lines?
   6133 13            [ 4] 2789                         inc     de                              ; skip null
   6134 C2 29 61      [ 9] 2790                         jp      NZ, loc_5ED4                    ; no, loop
   6137 C9            [ 9] 2791                         ret
                           2792 ; End of function print_10_lines
                           2793 
                           2794 
                           2795 ; =============== S U B R O U T I N E =======================================
                           2796 
                           2797 
   6138                    2798 print_sector:
   6138 2A 7D 6A      [15] 2799                         ld      hl, (hephaestus_video_addr)
   613B 11 A9 C3      [ 9] 2800                         ld      de, #0xC3A9                     ; $3C58+$C3A9=$10001
   613E 19            [ 7] 2801                         add     hl, de
   613F 11 C0 FF      [ 9] 2802                         ld      de, #0xFFC0                     ; -64 (1 line)
   6142 06 00         [ 6] 2803                         ld      b, #0
                           2804 
   6144                    2805 loc_5EEF:                                                       ; subtract a line
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 52.
Hexidecimal [16-Bits]



   6144 19            [ 7] 2806                         add     hl, de
   6145 7C            [ 4] 2807                         ld      a, h
   6146 A7            [ 4] 2808                         and     a                               ; negative?
   6147 FA 4E 61      [ 9] 2809                         jp      M, loc_5EF9                     ; yes, exit
   614A 04            [ 4] 2810                         inc     b                               ; inc Y coord
   614B C3 44 61      [ 9] 2811                         jp      loc_5EEF                        ; loop
                           2812 ; ---------------------------------------------------------------------------
                           2813 
   614E                    2814 loc_5EF9:
   614E 11 40 00      [ 9] 2815                         ld      de, #0x40 ; '@'
   6151 19            [ 7] 2816                         add     hl, de                          ; re-adjust
   6152 7D            [ 4] 2817                         ld      a, l
   6153 0F            [ 3] 2818                         rrca                                    ; X coord
   6154 E6 0F         [ 6] 2819                         and     #0xF
   6156 C6 30         [ 6] 2820                         add     a, #0x30 ; '0'                  ; convert to ASCII
   6158 21 3E 3D      [ 9] 2821                         ld      hl, # VIDEO+0x13E               ; sector X video address
   615B 77            [ 7] 2822                         ld      (hl), a                         ; write to video
   615C 21 3C 3D      [ 9] 2823                         ld      hl, # VIDEO+0x13C               ; sector Y video address
   615F 78            [ 4] 2824                         ld      a, b
   6160 C6 30         [ 6] 2825                         add     a, #0x30 ; '0'                  ; convert to ASCII
   6162 77            [ 7] 2826                         ld      (hl), a                         ; write to video
   6163 C9            [ 9] 2827                         ret
                           2828 ; End of function print_sector
                           2829 
                           2830 
                           2831 ; =============== S U B R O U T I N E =======================================
                           2832 
                           2833 
   6164                    2834 update_star_time:
   6164 21 7F 3C      [ 9] 2835                         ld      hl, # VIDEO+0x7F                ; last digit STAR-TIME
                           2836 
   6167                    2837 loc_5F12:                                                       ; get digit
   6167 7E            [ 6] 2838                         ld      a, (hl)
   6168 3C            [ 4] 2839                         inc     a
   6169 77            [ 7] 2840                         ld      (hl), a                         ; write back to video
   616A FE 3A         [ 6] 2841                         cp      #0x3A ; ':'                     ; ASCII '9'+1?
   616C C0            [10] 2842                         ret     NZ                              ; no, return
   616D 36 30         [ 9] 2843                         ld      (hl), #0x30 ; '0'               ; write '0' to video
   616F 2B            [ 4] 2844                         dec     hl                              ; previous digit
   6170 C3 67 61      [ 9] 2845                         jp      loc_5F12                        ; loop
                           2846 ; End of function update_star_time
                           2847 
                           2848 
                           2849 ; =============== S U B R O U T I N E =======================================
                           2850 
                           2851 
   6173                    2852 dec_jovians:
   6173 3A B6 6A      [12] 2853                         ld      a, (quadrant)
   6176 CD EF 5D      [16] 2854                         call    get_ptr_quadrant_A_data
   6179 35            [10] 2855                         dec     (hl)                            ; dec warships
   617A 3A AD 6A      [12] 2856                         ld      a, (jovians_left)
   617D C6 99         [ 6] 2857                         add     a, #0x99 ; 'ô'
   617F 27            [ 4] 2858                         daa                                     ; dec jovians left
   6180 32 AD 6A      [13] 2859                         ld      (jovians_left), a               ; update
                           2860 ; End of function dec_jovians
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 53.
Hexidecimal [16-Bits]



                           2861 
                           2862 
                           2863 ; =============== S U B R O U T I N E =======================================
                           2864 
                           2865 
   6183                    2866 print_jovians_left:
   6183 3A AD 6A      [12] 2867                         ld      a, (jovians_left)
   6186 21 FE 3D      [ 9] 2868                         ld      hl, # VIDEO+0x1FE               ; video address
   6189 A7            [ 4] 2869                         and     a                               ; any left?
   618A C2 B8 61      [ 9] 2870                         jp      NZ, print_BCD_byte              ; yes, go
   618D CD B8 61      [16] 2871                         call    print_BCD_byte                  ; display Jovians left
   6190 21 80 3F      [ 9] 2872                         ld      hl, # VIDEO+0x380               ; 2nd-last line
   6193 11 30 67      [ 9] 2873                         ld      de, #aCommandHeadq_0            ; "COMMAND HEADQUARTERS:  CONGRATULATIONS,"...
   6196 CD 91 5F      [16] 2874                         call    clear_last_2_lines_print_string
   6199 21 C5 3C      [ 9] 2875                         ld      hl, # VIDEO+0xC5                ; current quadrant in LR sensor
   619C 36 30         [ 9] 2876                         ld      (hl), #0x30 ; '0'               ; write '0' to warships
                           2877 ; display officer from HQ
   619E 11 EC 6C      [ 9] 2878                         ld      de, #aHQ_Officer                ; "                     "
   61A1 CD 24 61      [16] 2879                         call    print_10_lines
   61A4 97            [ 4] 2880                         sub     a                               ; flag no command
   61A5 32 20 72      [13] 2881                         ld      (cmd_flag), a
   61A8 3E 01         [ 6] 2882                         ld      a, #1                           ; flag disabled
   61AA 32 27 72      [13] 2883                         ld      (disable_pod_update), a
   61AD 06 0C         [ 6] 2884                         ld      b, #0xC
   61AF C3 CB 55      [ 9] 2885                         jp      loc_53AB
                           2886 ; End of function print_jovians_left
                           2887 
                           2888 
                           2889 ; =============== S U B R O U T I N E =======================================
                           2890 
                           2891 
   61B2                    2892 print_power_avail:
   61B2 21 BD 3D      [ 9] 2893                         ld      hl, # VIDEO+0x1BD               ; POWER AVAIL value
   61B5 3A 0D 6C      [12] 2894                         ld      a, (power_avail)
                           2895 ; End of function print_power_avail
                           2896 
                           2897 
                           2898 ; =============== S U B R O U T I N E =======================================
                           2899 
                           2900 
   61B8                    2901 print_BCD_byte:
   61B8 5F            [ 4] 2902                         ld      e, a
   61B9 0F            [ 3] 2903                         rrca
   61BA 0F            [ 3] 2904                         rrca
   61BB 0F            [ 3] 2905                         rrca
   61BC 0F            [ 3] 2906                         rrca                                    ; high->low nibble
   61BD E6 0F         [ 6] 2907                         and     #0xF                            ; nibble only
   61BF C6 30         [ 6] 2908                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   61C1 77            [ 7] 2909                         ld      (hl), a                         ; write to video
   61C2 23            [ 4] 2910                         inc     hl                              ; next video address
   61C3 7B            [ 4] 2911                         ld      a, e
   61C4 E6 0F         [ 6] 2912                         and     #0xF                            ; low nibble only
   61C6 C6 30         [ 6] 2913                         add     a, #0x30 ; '0'                  ; convert to ASCII digit
   61C8 77            [ 7] 2914                         ld      (hl), a                         ; write to video
   61C9 C9            [ 9] 2915                         ret
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 54.
Hexidecimal [16-Bits]



                           2916 ; End of function print_BCD_byte
                           2917 
                           2918 
                           2919 ; =============== S U B R O U T I N E =======================================
                           2920 
                           2921 
   61CA                    2922 dec_triton_misls_and_print:
   61CA 21 7D 3D      [ 9] 2923                         ld      hl, # VIDEO+0x17D               ; triton msls value video address
   61CD 3A 0E 6C      [12] 2924                         ld      a, (triton_misls)
   61D0 A7            [ 4] 2925                         and     a                               ; none?
   61D1 C2 D6 61      [ 9] 2926                         jp      NZ, loc_5F81                    ; no, skip
   61D4 37            [ 3] 2927                         scf
   61D5 C9            [ 9] 2928                         ret
                           2929 ; ---------------------------------------------------------------------------
                           2930 
   61D6                    2931 loc_5F81:
   61D6 C6 99         [ 6] 2932                         add     a, #0x99 ; 'ô'
   61D8 27            [ 4] 2933                         daa                                     ; decrement
   61D9 32 0E 6C      [13] 2934                         ld      (triton_misls), a               ; update
   61DC C3 B8 61      [ 9] 2935                         jp      print_BCD_byte
                           2936 ; End of function dec_triton_misls_and_print
                           2937 
                           2938 ; ---------------------------------------------------------------------------
                     0000  2939 .ifndef BUILD_OPT_MIXED_CASE
                           2940 
                           2941 aCommandHeadqua:        .ascii 'COMMAND HEADQUARTERS: THE JOVIANS HAVE INVADED EARTH SPACE.     YOUR OR'
                           2942                         .ascii 'DERS ARE TO SEARCH FOR AND DESTROY ALL JOVIAN WAR        VESSELS IN EAR'
                           2943                         .ascii 'TH'
                           2944                         .db 0x27
                           2945                         .ascii 'S 100 QUADRANTS OF SPACE'
                           2946                         .db 0
                           2947 aHyprHIonIMsrMT:        .ascii 'HYPR=H,ION=I,MSR=M,TRM=T,PWRDST=D,SELFD=S,EXPRAY=E,POD=A,XPOD=X '
                           2948                         .db 0
                           2949 aEngineerComman:        .ascii 'ENGINEER:COMMANDER, THE ENGINES HAVEN'
                           2950                         .db 0x27
                           2951                         .ascii 'T THE POWER TO OPERATE'
                           2952                         .db 0
                           2953 aEngineerTheUnk:        .ascii 'ENGINEER:THE UNKNOWN WE SHOT DISABLED THE HYPERDRIVE. '
                           2954                         .db 0
                           2955 aFirstOfficerCa:        .ascii 'FIRST OFFICER:CAPTAIN, YOUR LAST COMMAND MADE NO SENSE'
                           2956                         .db 0
                           2957 aFirstOfficer_0:        .ascii 'FIRST OFFICER:CAPTAIN, WE HAVE BEEN BLOCKED BY AN UNKNOWN       OBJECT'
                           2958                         .db 0
                           2959 aCommunications:        .ascii 'COMMUNICATIONS:THE SPACE STATION HAS ACKNOWLEDGED OUR DOCKING.'
                           2960                         .db 0
                           2961 aDock:                  .ascii ' DOCK'
                           2962                         .db 0
                           2963 aGreen:                 .ascii 'GREEN'
                           2964                         .db 0
                           2965 aRed:                   .ascii ' RED '
                           2966                         .db 0
                           2967 aCrtcl:                 .ascii 'CRTCL'
                           2968                         .db 0
                           2969 aFirstOfficerSi:        .ascii 'FIRST OFFICER: SIR, WE HAVE HIT A TRITON MINE'
                           2970                         .db 0
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 55.
Hexidecimal [16-Bits]



                           2971 aCommunicatio_0:        .ascii 'COMMUNICATIONS:SIR, WE MADE CONTACT WITH A JOVIAN VESSEL'
                           2972                         .db 0
                           2973 aJovianWatchWhe:        .ascii 'JOVIAN: WATCH WHERE YOU ARE GOING YOU TURKEY!!'
                           2974                         .db 0
                           2975 aNavigatorWeHit:        .ascii 'NAVIGATOR:WE HIT A STAR!?!'
                           2976                         .db 0
                           2977 aEngineerComm_0:        .ascii 'ENGINEER:COMMANDER, WE HAVEN'
                           2978                         .db 0x27
                           2979                         .ascii 'T THE POWER TO FIRE MASERS'
                           2980                         .db 0
                           2981 aFirstOfficer_1:        .ascii 'FIRST OFFICER:SIR, MY SENSORS SHOW MASER HAD NO EFFECT'
                           2982                         .db 0
                           2983 aEngineerComm_1:        .ascii 'ENGINEER:COMMANDER, THE MISSILE TUBES ARE POWER DEFICIENT'
                           2984                         .db 0
                           2985 aComputerObject:        .ascii 'COMPUTER:OBJECT DESTROYED'
                           2986                         .db 0
                           2987 aNavigatorTheEn:        .ascii 'NAVIGATOR:THE ENGINES ARE EXPLODING'
                           2988                         .db 0
                           2989 aEngineerComm_2:        .ascii 'ENGINEER:COMMANDER, THE ENGINES ARE OVERLOADED, THEY CAN'
                           2990                         .db 0x27
                           2991                         .ascii 'T LAST    AT THAT RATE'
                           2992                         .db 0
                           2993 aComputerSelfDe:        .ascii 'COMPUTER:SELF DESTRUCT SEQUENCE INITIATED. 15 SECONDS REMAIN'
                           2994                         .db 0
                           2995 aComputerSelf_0:        .ascii 'COMPUTER:SELF DESTRUCT SEQUENCE ABORTED'
                           2996                         .db 0
                           2997 aMedicalOfficer:        .ascii 'MEDICAL OFFICER:I CAN'
                           2998                         .db 0x27
                           2999                         .ascii 'T ALLOW YOU TO FIRE THE EXPERIMENTAL RAY!'
                           3000                         .db 0
                           3001 aWeaponrySirWeH:        .ascii 'WEAPONRY:SIR, WE HAVE NO MORE TRITON MISSILES'
                           3002                         .db 0
                           3003 aEngineerThereG:        .ascii 'ENGINEER:THERE GOES A POWER CRYSTAL, COMMANDER'
                           3004                         .db 0
                           3005 aEngineerComm_3:        .ascii 'ENGINEER:COMMANDER, THE SHIELDS ARE FALLING APART!'
                           3006                         .db 0
                           3007 aCommandHeadq_0:        .ascii 'COMMAND HEADQUARTERS:  CONGRATULATIONS, YOU HAVE DESTROYED ALL    THE J'
                           3008                         .ascii 'OVIANS. YOU ARE PROMOTED TO ADMIRAL'
                           3009                         .db 0
                           3010 aFirstOfficerTh:        .ascii 'FIRST OFFICER: THE EXPERIMENTAL RAY'
                           3011                         .db 0
                           3012 aIsFiringTriton:        .ascii 'IS FIRING TRITON MISSILES'
                           3013                         .db 0
                           3014 aCausedAChangeI:        .ascii 'CAUSED A CHANGE IN SPACIAL     STRUCTURE'
                           3015                         .db 0
                           3016 aHasFrozenTimeF:        .ascii 'HAS FROZEN TIME FOR THE        JOVIANS'
                           3017                         .db 0
                           3018 aHasCausedTheJo:        .ascii 'HAS CAUSED THE JOVIANS TO      BECOME INVISIBLE'
                           3019                         .db 0
                           3020 aComputerTriton:        .ascii 'COMPUTER:TRITON MISSILE HAS NO EFFECT'
                           3021                         .db 0
                           3022 aHasJumbledTheQ:        .ascii 'HAS JUMBLED THE QUADRANT'
                           3023                         .db 0
                           3024 aHasDestroyedAl:        .ascii 'HAS DESTROYED ALL THE          JOVIANS IN THE QUADRANT'
                           3025                         .db 0
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 56.
Hexidecimal [16-Bits]



                           3026 aDestroysItself:        .ascii 'DESTROYS ITSELF'
                           3027                         .db 0
                           3028 aHasBackfiredOn:        .ascii 'HAS BACKFIRED ON US'
                           3029                         .db 0
                           3030 aHasCausedAComp:        .ascii 'HAS CAUSED A COMPUTER          MALFUNCTION'
                           3031                         .db 0
                           3032 aIsPermanentlyD:        .ascii 'IS PERMANENTLY DISABLED'
                           3033                         .db 0
                           3034 aShipLogUssPhae:        .ascii 'SHIP LOG-USS PHAETON-CAPTAIN DAR: SENSORS FOUND DEBRIS BELIEVED THAT OF'
                           3035                         .ascii ' USS HEPHAESTUS.'
                           3036                         .db 0
                           3037 aEnterSpeedFact:        .ascii 'ENTER SPEED FACTOR (0(FAST)-9(SLOW))'
                           3038                         .db 0
                           3039 aWeaponryWeReOu:        .ascii 'WEAPONRY: WE'
                           3040                         .db 0x27
                           3041                         .ascii 'RE OUT OF PODS'
                           3042                         .db 0
                           3043 aComputerThePod:        .ascii 'COMPUTER: THE POD HAS BEEN USED'
                           3044                         .db 0
                           3045 aComputerPodLau:        .ascii 'COMPUTER: POD LAUNCH IS BLOCKED'
                           3046                         .db 0
                           3047 aFirstOfficer_2:        .ascii 'FIRST OFFICER: THE UNKNOWN IS STEALING POWER CAPTAIN'
                           3048                         .db 0
                     0001  3049 .else
                           3050 
   61DF 43 4F 4D 4D 41 4E  3051 aCommandHeadqua:        .ascii 'COMMAND HEADQUARTERS: The Jovians have invaded earth space.     your or'
        44 20 48 45 41 44
        51 55 41 52 54 45
        52 53 3A 20 54 68
        65 20 4A 6F 76 69
        61 6E 73 20 68 61
        76 65 20 69 6E 76
        61 64 65 64 20 65
        61 72 74 68 20 73
        70 61 63 65 2E 20
        20 20 20 20 79 6F
        75 72 20 6F 72
   6226 64 65 72 73 20 61  3052                         .ascii 'ders are to search for and destroy all Jovian war        vessels in ear'
        72 65 20 74 6F 20
        73 65 61 72 63 68
        20 66 6F 72 20 61
        6E 64 20 64 65 73
        74 72 6F 79 20 61
        6C 6C 20 4A 6F 76
        69 61 6E 20 77 61
        72 20 20 20 20 20
        20 20 20 76 65 73
        73 65 6C 73 20 69
        6E 20 65 61 72
   626D 74 68              3053                         .ascii 'th'
   626F 27                 3054                         .db 0x27
   6270 73 20 31 30 30 20  3055                         .ascii 's 100 quadrants of space'
        71 75 61 64 72 61
        6E 74 73 20 6F 66
        20 73 70 61 63 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 57.
Hexidecimal [16-Bits]



   6288 00                 3056                         .db 0
   6289 48 79 70 72 3D 48  3057 aHyprHIonIMsrMT:        .ascii 'Hypr=H,Ion=I,Msr=M,Trm=T,Pwrdst=D,Selfd=S,Expray=E,Pod=A,Xpod=X '
        2C 49 6F 6E 3D 49
        2C 4D 73 72 3D 4D
        2C 54 72 6D 3D 54
        2C 50 77 72 64 73
        74 3D 44 2C 53 65
        6C 66 64 3D 53 2C
        45 78 70 72 61 79
        3D 45 2C 50 6F 64
        3D 41 2C 58 70 6F
        64 3D 58 20
   62C9 00                 3058                         .db 0
   62CA 45 4E 47 49 4E 45  3059 aEngineerComman:        .ascii 'ENGINEER:Commander, the engines haven'
        45 52 3A 43 6F 6D
        6D 61 6E 64 65 72
        2C 20 74 68 65 20
        65 6E 67 69 6E 65
        73 20 68 61 76 65
        6E
   62EF 27                 3060                         .db 0x27
   62F0 74 20 74 68 65 20  3061                         .ascii 't the power to operate'
        70 6F 77 65 72 20
        74 6F 20 6F 70 65
        72 61 74 65
   6306 00                 3062                         .db 0
   6307 45 4E 47 49 4E 45  3063 aEngineerTheUnk:        .ascii 'ENGINEER:The unknown we shot disabled the hyperdrive. '
        45 52 3A 54 68 65
        20 75 6E 6B 6E 6F
        77 6E 20 77 65 20
        73 68 6F 74 20 64
        69 73 61 62 6C 65
        64 20 74 68 65 20
        68 79 70 65 72 64
        72 69 76 65 2E 20
   633D 00                 3064                         .db 0
   633E 46 49 52 53 54 20  3065 aFirstOfficerCa:        .ascii 'FIRST OFFICER:Captain, your last command made no sense'
        4F 46 46 49 43 45
        52 3A 43 61 70 74
        61 69 6E 2C 20 79
        6F 75 72 20 6C 61
        73 74 20 63 6F 6D
        6D 61 6E 64 20 6D
        61 64 65 20 6E 6F
        20 73 65 6E 73 65
   6374 00                 3066                         .db 0
   6375 46 49 52 53 54 20  3067 aFirstOfficer_0:        .ascii 'FIRST OFFICER:Captain, we have been blocked by an unknown       object'
        4F 46 46 49 43 45
        52 3A 43 61 70 74
        61 69 6E 2C 20 77
        65 20 68 61 76 65
        20 62 65 65 6E 20
        62 6C 6F 63 6B 65
        64 20 62 79 20 61
        6E 20 75 6E 6B 6E
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 58.
Hexidecimal [16-Bits]



        6F 77 6E 20 20 20
        20 20 20 20 6F 62
        6A 65 63 74
   63BB 00                 3068                         .db 0
   63BC 43 4F 4D 4D 55 4E  3069 aCommunications:        .ascii 'COMMUNICATIONS:The Space Station has acknowledged our docking.'
        49 43 41 54 49 4F
        4E 53 3A 54 68 65
        20 53 70 61 63 65
        20 53 74 61 74 69
        6F 6E 20 68 61 73
        20 61 63 6B 6E 6F
        77 6C 65 64 67 65
        64 20 6F 75 72 20
        64 6F 63 6B 69 6E
        67 2E
   63FA 00                 3070                         .db 0
   63FB 20 44 4F 43 4B     3071 aDock:                  .ascii ' DOCK'
   6400 00                 3072                         .db 0
   6401 47 52 45 45 4E     3073 aGreen:                 .ascii 'GREEN'
   6406 00                 3074                         .db 0
   6407 20 52 45 44 20     3075 aRed:                   .ascii ' RED '
   640C 00                 3076                         .db 0
   640D 43 52 54 43 4C     3077 aCrtcl:                 .ascii 'CRTCL'
   6412 00                 3078                         .db 0
   6413 46 49 52 53 54 20  3079 aFirstOfficerSi:        .ascii 'FIRST OFFICER: Sir, we have hit a Triton Mine'
        4F 46 46 49 43 45
        52 3A 20 53 69 72
        2C 20 77 65 20 68
        61 76 65 20 68 69
        74 20 61 20 54 72
        69 74 6F 6E 20 4D
        69 6E 65
   6440 00                 3080                         .db 0
   6441 43 4F 4D 4D 55 4E  3081 aCommunicatio_0:        .ascii 'COMMUNICATIONS:Sir, we made contact with a Jovian vessel'
        49 43 41 54 49 4F
        4E 53 3A 53 69 72
        2C 20 77 65 20 6D
        61 64 65 20 63 6F
        6E 74 61 63 74 20
        77 69 74 68 20 61
        20 4A 6F 76 69 61
        6E 20 76 65 73 73
        65 6C
   6479 00                 3082                         .db 0
   647A 4A 4F 56 49 41 4E  3083 aJovianWatchWhe:        .ascii 'JOVIAN: Watch where you are going you TURKEY!!'
        3A 20 57 61 74 63
        68 20 77 68 65 72
        65 20 79 6F 75 20
        61 72 65 20 67 6F
        69 6E 67 20 79 6F
        75 20 54 55 52 4B
        45 59 21 21
   64A8 00                 3084                         .db 0
   64A9 4E 41 56 49 47 41  3085 aNavigatorWeHit:        .ascii 'NAVIGATOR:We hit a star!?!'
        54 4F 52 3A 57 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 59.
Hexidecimal [16-Bits]



        20 68 69 74 20 61
        20 73 74 61 72 21
        3F 21
   64C3 00                 3086                         .db 0
   64C4 45 4E 47 49 4E 45  3087 aEngineerComm_0:        .ascii 'ENGINEER:Commander, we haven'
        45 52 3A 43 6F 6D
        6D 61 6E 64 65 72
        2C 20 77 65 20 68
        61 76 65 6E
   64E0 27                 3088                         .db 0x27
   64E1 74 20 74 68 65 20  3089                         .ascii 't the power to fire Masers'
        70 6F 77 65 72 20
        74 6F 20 66 69 72
        65 20 4D 61 73 65
        72 73
   64FB 00                 3090                         .db 0
   64FC 46 49 52 53 54 20  3091 aFirstOfficer_1:        .ascii 'FIRST OFFICER:Sir, my sensors show Maser had no effect'
        4F 46 46 49 43 45
        52 3A 53 69 72 2C
        20 6D 79 20 73 65
        6E 73 6F 72 73 20
        73 68 6F 77 20 4D
        61 73 65 72 20 68
        61 64 20 6E 6F 20
        65 66 66 65 63 74
   6532 00                 3092                         .db 0
   6533 45 4E 47 49 4E 45  3093 aEngineerComm_1:        .ascii 'ENGINEER:Commander, the missile tubes are power deficient'
        45 52 3A 43 6F 6D
        6D 61 6E 64 65 72
        2C 20 74 68 65 20
        6D 69 73 73 69 6C
        65 20 74 75 62 65
        73 20 61 72 65 20
        70 6F 77 65 72 20
        64 65 66 69 63 69
        65 6E 74
   656C 00                 3094                         .db 0
   656D 43 4F 4D 50 55 54  3095 aComputerObject:        .ascii 'COMPUTER:Object destroyed'
        45 52 3A 4F 62 6A
        65 63 74 20 64 65
        73 74 72 6F 79 65
        64
   6586 00                 3096                         .db 0
   6587 4E 41 56 49 47 41  3097 aNavigatorTheEn:        .ascii 'NAVIGATOR:The engines are exploding'
        54 4F 52 3A 54 68
        65 20 65 6E 67 69
        6E 65 73 20 61 72
        65 20 65 78 70 6C
        6F 64 69 6E 67
   65AA 00                 3098                         .db 0
   65AB 45 4E 47 49 4E 45  3099 aEngineerComm_2:        .ascii 'ENGINEER:Commander, the engines are overloaded, they can'
        45 52 3A 43 6F 6D
        6D 61 6E 64 65 72
        2C 20 74 68 65 20
        65 6E 67 69 6E 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 60.
Hexidecimal [16-Bits]



        73 20 61 72 65 20
        6F 76 65 72 6C 6F
        61 64 65 64 2C 20
        74 68 65 79 20 63
        61 6E
   65E3 27                 3100                         .db 0x27
   65E4 74 20 6C 61 73 74  3101                         .ascii 't last    at that rate'
        20 20 20 20 61 74
        20 74 68 61 74 20
        72 61 74 65
   65FA 00                 3102                         .db 0
   65FB 43 4F 4D 50 55 54  3103 aComputerSelfDe:        .ascii 'COMPUTER:Self Destruct Sequence initiated. 15 seconds remain'
        45 52 3A 53 65 6C
        66 20 44 65 73 74
        72 75 63 74 20 53
        65 71 75 65 6E 63
        65 20 69 6E 69 74
        69 61 74 65 64 2E
        20 31 35 20 73 65
        63 6F 6E 64 73 20
        72 65 6D 61 69 6E
   6637 00                 3104                         .db 0
   6638 43 4F 4D 50 55 54  3105 aComputerSelf_0:        .ascii 'COMPUTER:Self Destruct Sequence aborted'
        45 52 3A 53 65 6C
        66 20 44 65 73 74
        72 75 63 74 20 53
        65 71 75 65 6E 63
        65 20 61 62 6F 72
        74 65 64
   665F 00                 3106                         .db 0
   6660 4D 45 44 49 43 41  3107 aMedicalOfficer:        .ascii 'MEDICAL OFFICER:I can'
        4C 20 4F 46 46 49
        43 45 52 3A 49 20
        63 61 6E
   6675 27                 3108                         .db 0x27
   6676 74 20 61 6C 6C 6F  3109                         .ascii 't allow you to fire the Experimental Ray!'
        77 20 79 6F 75 20
        74 6F 20 66 69 72
        65 20 74 68 65 20
        45 78 70 65 72 69
        6D 65 6E 74 61 6C
        20 52 61 79 21
   669F 00                 3110                         .db 0
   66A0 57 45 41 50 4F 4E  3111 aWeaponrySirWeH:        .ascii 'WEAPONRY:Sir, We have no more Triton Missiles'
        52 59 3A 53 69 72
        2C 20 57 65 20 68
        61 76 65 20 6E 6F
        20 6D 6F 72 65 20
        54 72 69 74 6F 6E
        20 4D 69 73 73 69
        6C 65 73
   66CD 00                 3112                         .db 0
   66CE 45 4E 47 49 4E 45  3113 aEngineerThereG:        .ascii 'ENGINEER:There goes a power crystal, Commander'
        45 52 3A 54 68 65
        72 65 20 67 6F 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 61.
Hexidecimal [16-Bits]



        73 20 61 20 70 6F
        77 65 72 20 63 72
        79 73 74 61 6C 2C
        20 43 6F 6D 6D 61
        6E 64 65 72
   66FC 00                 3114                         .db 0
   66FD 45 4E 47 49 4E 45  3115 aEngineerComm_3:        .ascii 'ENGINEER:Commander, the shields are falling apart!'
        45 52 3A 43 6F 6D
        6D 61 6E 64 65 72
        2C 20 74 68 65 20
        73 68 69 65 6C 64
        73 20 61 72 65 20
        66 61 6C 6C 69 6E
        67 20 61 70 61 72
        74 21
   672F 00                 3116                         .db 0
   6730 43 4F 4D 4D 41 4E  3117 aCommandHeadq_0:        .ascii 'COMMAND HEADQUARTERS:  Congratulations, you have destroyed all    the J'
        44 20 48 45 41 44
        51 55 41 52 54 45
        52 53 3A 20 20 43
        6F 6E 67 72 61 74
        75 6C 61 74 69 6F
        6E 73 2C 20 79 6F
        75 20 68 61 76 65
        20 64 65 73 74 72
        6F 79 65 64 20 61
        6C 6C 20 20 20 20
        74 68 65 20 4A
   6777 6F 76 69 61 6E 73  3118                         .ascii 'ovians. You are promoted to Admiral'
        2E 20 59 6F 75 20
        61 72 65 20 70 72
        6F 6D 6F 74 65 64
        20 74 6F 20 41 64
        6D 69 72 61 6C
   679A 00                 3119                         .db 0
   679B 46 49 52 53 54 20  3120 aFirstOfficerTh:        .ascii 'FIRST OFFICER: The Experimental Ray'
        4F 46 46 49 43 45
        52 3A 20 54 68 65
        20 45 78 70 65 72
        69 6D 65 6E 74 61
        6C 20 52 61 79
   67BE 00                 3121                         .db 0
   67BF 69 73 20 66 69 72  3122 aIsFiringTriton:        .ascii 'is firing Triton Missiles'
        69 6E 67 20 54 72
        69 74 6F 6E 20 4D
        69 73 73 69 6C 65
        73
   67D8 00                 3123                         .db 0
   67D9 63 61 75 73 65 64  3124 aCausedAChangeI:        .ascii 'caused a change in spacial     structure'
        20 61 20 63 68 61
        6E 67 65 20 69 6E
        20 73 70 61 63 69
        61 6C 20 20 20 20
        20 73 74 72 75 63
        74 75 72 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 62.
Hexidecimal [16-Bits]



   6801 00                 3125                         .db 0
   6802 68 61 73 20 66 72  3126 aHasFrozenTimeF:        .ascii 'has frozen time for the        Jovians'
        6F 7A 65 6E 20 74
        69 6D 65 20 66 6F
        72 20 74 68 65 20
        20 20 20 20 20 20
        20 4A 6F 76 69 61
        6E 73
   6828 00                 3127                         .db 0
   6829 68 61 73 20 63 61  3128 aHasCausedTheJo:        .ascii 'has caused the Jovians to      become invisible'
        75 73 65 64 20 74
        68 65 20 4A 6F 76
        69 61 6E 73 20 74
        6F 20 20 20 20 20
        20 62 65 63 6F 6D
        65 20 69 6E 76 69
        73 69 62 6C 65
   6858 00                 3129                         .db 0
   6859 43 4F 4D 50 55 54  3130 aComputerTriton:        .ascii 'COMPUTER:Triton Missile has no effect'
        45 52 3A 54 72 69
        74 6F 6E 20 4D 69
        73 73 69 6C 65 20
        68 61 73 20 6E 6F
        20 65 66 66 65 63
        74
   687E 00                 3131                         .db 0
   687F 68 61 73 20 6A 75  3132 aHasJumbledTheQ:        .ascii 'has jumbled the quadrant'
        6D 62 6C 65 64 20
        74 68 65 20 71 75
        61 64 72 61 6E 74
   6897 00                 3133                         .db 0
   6898 68 61 73 20 64 65  3134 aHasDestroyedAl:        .ascii 'has destroyed all the          Jovians in the quadrant'
        73 74 72 6F 79 65
        64 20 61 6C 6C 20
        74 68 65 20 20 20
        20 20 20 20 20 20
        20 4A 6F 76 69 61
        6E 73 20 69 6E 20
        74 68 65 20 71 75
        61 64 72 61 6E 74
   68CE 00                 3135                         .db 0
   68CF 64 65 73 74 72 6F  3136 aDestroysItself:        .ascii 'destroys itself'
        79 73 20 69 74 73
        65 6C 66
   68DE 00                 3137                         .db 0
   68DF 68 61 73 20 62 61  3138 aHasBackfiredOn:        .ascii 'has backfired on us'
        63 6B 66 69 72 65
        64 20 6F 6E 20 75
        73
   68F2 00                 3139                         .db 0
   68F3 68 61 73 20 63 61  3140 aHasCausedAComp:        .ascii 'has caused a computer          malfunction'
        75 73 65 64 20 61
        20 63 6F 6D 70 75
        74 65 72 20 20 20
        20 20 20 20 20 20
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 63.
Hexidecimal [16-Bits]



        20 6D 61 6C 66 75
        6E 63 74 69 6F 6E
   691D 00                 3141                         .db 0
   691E 69 73 20 70 65 72  3142 aIsPermanentlyD:        .ascii 'is permanently disabled'
        6D 61 6E 65 6E 74
        6C 79 20 64 69 73
        61 62 6C 65 64
   6935 00                 3143                         .db 0
   6936 53 48 49 50 20 4C  3144 aShipLogUssPhae:        .ascii 'SHIP LOG-USS PHAETON-CAPTAIN DAR: Sensors found debris believed that of'
        4F 47 2D 55 53 53
        20 50 48 41 45 54
        4F 4E 2D 43 41 50
        54 41 49 4E 20 44
        41 52 3A 20 53 65
        6E 73 6F 72 73 20
        66 6F 75 6E 64 20
        64 65 62 72 69 73
        20 62 65 6C 69 65
        76 65 64 20 74 68
        61 74 20 6F 66
   697D 20 55 53 53 20 48  3145                         .ascii ' USS Hephaestus.'
        65 70 68 61 65 73
        74 75 73 2E
   698D 00                 3146                         .db 0
   698E 45 6E 74 65 72 20  3147 aEnterSpeedFact:        .ascii 'Enter Speed Factor (0(Fast)-9(Slow))'
        53 70 65 65 64 20
        46 61 63 74 6F 72
        20 28 30 28 46 61
        73 74 29 2D 39 28
        53 6C 6F 77 29 29
   69B2 00                 3148                         .db 0
   69B3 57 45 41 50 4F 4E  3149 aWeaponryWeReOu:        .ascii 'WEAPONRY: We'
        52 59 3A 20 57 65
   69BF 27                 3150                         .db 0x27
   69C0 72 65 20 6F 75 74  3151                         .ascii 're out of pods'
        20 6F 66 20 70 6F
        64 73
   69CE 00                 3152                         .db 0
   69CF 43 4F 4D 50 55 54  3153 aComputerThePod:        .ascii 'COMPUTER: The pod has been used'
        45 52 3A 20 54 68
        65 20 70 6F 64 20
        68 61 73 20 62 65
        65 6E 20 75 73 65
        64
   69EE 00                 3154                         .db 0
   69EF 43 4F 4D 50 55 54  3155 aComputerPodLau:        .ascii 'COMPUTER: Pod launch is blocked'
        45 52 3A 20 50 6F
        64 20 6C 61 75 6E
        63 68 20 69 73 20
        62 6C 6F 63 6B 65
        64
   6A0E 00                 3156                         .db 0
   6A0F 46 49 52 53 54 20  3157 aFirstOfficer_2:        .ascii 'FIRST OFFICER: The unknown is stealing power Captain'
        4F 46 46 49 43 45
        52 3A 20 54 68 65
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 64.
Hexidecimal [16-Bits]



        20 75 6E 6B 6E 6F
        77 6E 20 69 73 20
        73 74 65 61 6C 69
        6E 67 20 70 6F 77
        65 72 20 43 61 70
        74 61 69 6E
   6A43 00                 3158                         .db 0
                           3159 .endif
                           3160                         
   6A44 19 3F              3161 chaser_addr:            .dw VIDEO+0x319
   6A46 00                 3162 tmp_delay_cycle:        .db 0
   6A47 00                 3163 delay_cycle:            .db 0
   6A48 00                 3164 tmp_sector_contents:    .db 0
   6A49 00                 3165                         .db 0
   6A4A 00                 3166                         .db 0
                           3167 ; table used in delay routine
                           3168 ; - scaling factors for duty cycle
   6A4B 02 02              3169 delay_duty_cycle_tbl:   .db 2, 2
   6A4D 55 02              3170                         .db 85, 2
   6A4F 18 18              3171                         .db 24, 24
   6A51 50 22              3172                         .db 80, 34
   6A53 00                 3173                         .db 0
   6A54 08                 3174 ion_speed:              .db 8
   6A55 37 3F              3175 cmd_entry_addr:         .dw VIDEO+0x337
   6A57 D4 53              3176 cmd_jmp_vectors:        .dw hyperdrive
   6A59 56 54              3177                         .dw ion_engine
   6A5B 4A 56              3178                         .dw maser
   6A5D 1B 57              3179                         .dw triton_missile
   6A5F BC 58              3180                         .dw power_distrib
   6A61 70 59              3181                         .dw self_destruct
   6A63 B1 59              3182                         .dw experimental_ray
   6A65 61 5B              3183                         .dw explode_pod
   6A67 A7 5A              3184                         .dw launch_antimatter
   6A69 19 1A              3185 cmd_l_vector:           .dw 0x1A19                              ; BASIC ENTRY POINT
   6A6B 48 49 4D 54 44 53  3186 cmd_tbl:                .ascii 'HIMTDSEXAL'
        45 58 41 4C
   6A75 00                 3187                         .db 0
   6A76 48 4C 53 44 4D 54  3188 pwr_subcmd_tbl:         .ascii 'HLSDMT'
   6A7C 00                 3189                         .db 0
   6A7D 02 00              3190 hephaestus_video_addr:  .dw 2
   6A7F 00                 3191 engine_explode_countdown:.db 0
   6A80 03                 3192 antimatter_pods:        .db 3
                           3193 ; when a triton missile hits an unknown object
                           3194 ; randomly vector to one of these locations
   6A81 DC 57              3195 missile_hit_unknown_tbl:.dw missile_hit_unk_079
   6A83 15 58              3196                         .dw missile_hit_unk_1
   6A85 45 58              3197                         .dw missile_hit_unk_2
   6A87 59 58              3198                         .dw missile_hit_unk_3
   6A89 7D 58              3199                         .dw missile_hit_unk_4
   6A8B 86 58              3200                         .dw missile_hit_unk_58
   6A8D 4D 58              3201                         .dw missile_hit_unk_6
   6A8F DC 57              3202                         .dw missile_hit_unk_079
   6A91 86 58              3203                         .dw missile_hit_unk_58
   6A93 DC 57              3204                         .dw missile_hit_unk_079
   6A95 06                 3205 pod_speed:              .db 6
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 65.
Hexidecimal [16-Bits]



   6A96 E6 59              3206 expr_tbl:               .dw expr_0
   6A98 0A 5A              3207                         .dw expr_1
   6A9A 15 5A              3208                         .dw expr_2
   6A9C 3D 5A              3209                         .dw expr_3
   6A9E 49 5A              3210                         .dw expr_4
   6AA0 76 5A              3211                         .dw expr_5
   6AA2 81 5A              3212                         .dw expr_6
   6AA4 96 5A              3213                         .dw expr_7
   6AA6 A1 5A              3214                         .dw expr_8
   6AA8 D2 59              3215                         .dw expr_9
   6AAA 00                 3216 blocked_by_unknown:     .db 0                                   ; $00=OK, $FF=blocked
   6AAB 00                 3217 ion_dir:                .db 0
   6AAC 00                 3218                         .db    0
   6AAD 00                 3219 jovians_left:           .db 0
   6AAE 90 91 01 11 10 09  3220 quadrant_delta_tbl:     .db 0x90, 0x91, 1, 0x11, 0x10, 9, 0x99, 0x89
        99 89
   6AB6 00                 3221 quadrant:               .db 0
                           3222 ; -- start of quadrant table
                           3223 ; 300 bytes cleared at startup
                           3224 ; - quadrant data, 3 bytes
                           3225 ;   +$00 - (3:0)=warships
                           3226 ;   +$01 - (3:0)=space stations
                           3227 ;   +$02 - (3:0)=stars
   6AB7 4C 4F 54 20 44 57  3228 quadrant_tbl:           .db 0x4C, 0x4F, 0x54, 0x20, 0x44, 0x57, 0x20, 0x30, 0xD
        20 30 0D
   6AC0 19 31 33 38 32 20  3229                         .db 0x19, 0x31, 0x33, 0x38, 0x32, 0x20, 0x43, 0x4C, 0x45
        43 4C 45
   6AC9 41 52 20 41 53 43  3230                         .db 0x41, 0x52, 0x20, 0x41, 0x53, 0x43, 0x20, 0x27, 0x20
        20 27 20
   6AD2 20 20 20 20 20 27  3231                         .db 0x20, 0x20, 0x20, 0x20, 0x20, 0x27, 0xD, 0xC, 0x31, 0x33
        0D 0C 31 33
   6ADC 38 33 20 20 44 42  3232                         .db 0x38, 0x33, 0x20, 0x20, 0x44, 0x42, 0x20, 0x30, 0xD
        20 30 0D
   6AE5 14 31 33 38 34 20  3233                         .db 0x14, 0x31, 0x33, 0x38, 0x34, 0x20, 0x20, 0x41, 0x53
        20 41 53
   6AEE 43 20 27 20 20 20  3234                         .db 0x43, 0x20, 0x27, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
        20 20 20
   6AF7 27 0D 0C 31 33 38  3235                         .db 0x27, 0xD, 0xC, 0x31, 0x33, 0x38, 0x35, 0x20, 0x20, 0x44
        35 20 20 44
   6B01 42 20 30 0D 13 31  3236                         .db 0x42, 0x20, 0x30, 0xD, 0x13, 0x31, 0x33, 0x38, 0x36
        33 38 36
   6B0A 20 53 57 54 31 20  3237                         .db 0x20, 0x53, 0x57, 0x54, 0x31, 0x20, 0x45, 0x51, 0x55
        45 51 55
   6B13 20 27 30 27 0D 13  3238                         .db 0x20, 0x27, 0x30, 0x27, 0xD, 0x13, 0x31, 0x33, 0x38
        31 33 38
   6B1C 37 20 53 57 54 32  3239                         .db 0x37, 0x20, 0x53, 0x57, 0x54, 0x32, 0x20, 0x45, 0x51
        20 45 51
   6B25 55 20 27 21 27 0D  3240                         .db 0x55, 0x20, 0x27, 0x21, 0x27, 0xD, 0x11, 0x31, 0x33
        11 31 33
   6B2E 38 38 20 58 46 4C  3241                         .db 0x38, 0x38, 0x20, 0x58, 0x46, 0x4C, 0x41, 0x47, 0x20
        41 47 20
   6B37 44 42 20 30 0D 11  3242                         .db 0x44, 0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x38
        31 33 38
   6B40 39 20 5A 46 4C 41  3243                         .db 0x39, 0x20, 0x5A, 0x46, 0x4C, 0x41, 0x47, 0x20, 0x44
        47 20 44
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 66.
Hexidecimal [16-Bits]



   6B49 42 20 30 0D 0F 31  3244                         .db 0x42, 0x20, 0x30, 0xD, 0xF, 0x31, 0x33, 0x39, 0x30, 0x20
        33 39 30 20
   6B53 57 48 31 20 44 42  3245                         .db 0x57, 0x48, 0x31, 0x20, 0x44, 0x42, 0x20, 0x30, 0xD
        20 30 0D
   6B5C 0F 31 33 39 31 20  3246                         .db 0xF, 0x31, 0x33, 0x39, 0x31, 0x20, 0x57, 0x48, 0x32
        57 48 32
   6B65 20 44 42 20 30 0D  3247                         .db 0x20, 0x44, 0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33
        11 31 33
   6B6E 39 32 20 44 44 45  3248                         .db 0x39, 0x32, 0x20, 0x44, 0x44, 0x45, 0x4D, 0x4F, 0x20
        4D 4F 20
   6B77 44 42 20 30 0D 11  3249                         .db 0x44, 0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x39
        31 33 39
   6B80 33 20 42 54 59 50  3250                         .db 0x33, 0x20, 0x42, 0x54, 0x59, 0x50, 0x45, 0x20, 0x44
        45 20 44
   6B89 42 20 30 0D 11 31  3251                         .db 0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x39, 0x34
        33 39 34
   6B92 20 4E 53 48 54 53  3252                         .db 0x20, 0x4E, 0x53, 0x48, 0x54, 0x53, 0x20, 0x44, 0x57
        20 44 57
   6B9B 20 30 0D 11 31 33  3253                         .db 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x39, 0x35, 0x20
        39 35 20
   6BA4 4E 48 49 54 53 20  3254                         .db 0x4E, 0x48, 0x49, 0x54, 0x53, 0x20, 0x44, 0x57, 0x20
        44 57 20
   6BAD 30 0D 27 31 33 39  3255                         .db 0x30, 0xD, 0x27, 0x31, 0x33, 0x39, 0x36, 0x20, 0x58
        36 20 58
   6BB6 50 4C 4F 31 20 44  3256                         .db 0x50, 0x4C, 0x4F, 0x31, 0x20, 0x44, 0x42, 0x20, 0x30
        42 20 30
   6BBF 32 30 48 2C 27 2A  3257                         .db 0x32, 0x30, 0x48, 0x2C, 0x27, 0x2A, 0x27, 0x2C, 0x31
        27 2C 31
   6BC8 39 31 2C 27 2A 27  3258                         .db 0x39, 0x31, 0x2C, 0x27, 0x2A, 0x27, 0x2C, 0x30, 0x32
        2C 30 32
   6BD1 30 48 2C 30 0D 20  3259                         .db 0x30, 0x48, 0x2C, 0x30, 0xD, 0x20, 0x31, 0x33, 0x39
        31 33 39
   6BDA 37 20 20 44 42 20  3260                         .db 0x37, 0x20, 0x20, 0x44, 0x42, 0x20, 0x27, 0x2A, 0x27
        27 2A 27
                           3261 ; -- end of quadrant table
   6BE3 3F 3F 3F 3F 3F 3F  3262                         .db 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F
   6BE9 20                 3263 pwr_hypr_ion:           .db 0x20
   6BEA 20                 3264 pwr_lr_sensor:          .db 0x20
   6BEB 10                 3265 pwr_sr_sensor:          .db 0x10
   6BEC 20                 3266 pwr_deflectors:         .db 0x20
   6BED 09                 3267 pwr_masers:             .db 9
   6BEE 11                 3268 pwr_trt_missl:          .db 0x11
   6BEF C0 FF              3269 dir_addr_delta_tbl:     .dw 0xFFC0                              ; N
   6BF1 C2 FF              3270                         .dw 0xFFC2                              ; NE
   6BF3 02 00              3271                         .dw 2                                   ; E
   6BF5 42 00              3272                         .dw 0x42                                ; SE
   6BF7 40 00              3273                         .dw 0x40                                ; S
   6BF9 3E 00              3274                         .dw 0x3E                                ; SW
   6BFB FE FF              3275                         .dw 0xFFFE                              ; W
   6BFD BE FF              3276                         .dw 0xFFBE                              ; NW
   6BFF 00                 3277 game_delay_factor:      .db 0                                   ; (0-9)x4+16
   6C00 00                 3278 time_to_jovian_fire:    .db 0
   6C01 00 00              3279 tmp_jovian_tbl_ptr:     .dw 0
                           3280 ; table of jovian vessel video addresses
                           3281 ; - maximum of 4 vessels, zero-terminated
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 67.
Hexidecimal [16-Bits]



   6C03 48 2C              3282 jovian_tbl:             .dw 0x2C48
   6C05 27 2A              3283                         .dw 0x2A27
   6C07 27 2C              3284                         .dw 0x2C27
   6C09 31 39              3285                         .dw 0x3931
   6C0B 31 2C              3286                         .dw 0x2C31
   6C0D 99                 3287 power_avail:            .db 0x99
   6C0E 10                 3288 triton_misls:           .db 0x10
   6C0F 03                 3289 unused_69BA:            .db 3
   6C10 20 20 20 20 20 20  3290 aJovian_Officer:        .ascii '                     '
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20
   6C25 00                 3291                         .db 0
   6C26 20 20 20 20 20 20  3292                         .ascii '        '
        20 20
   6C2E 98 83 83 83 A4     3293                         .db 0x98, 0x83, 0x83, 0x83, 0xA4
   6C33 20 20 20 20 20 20  3294                         .ascii '        '
        20 20
   6C3B 00                 3295                         .db 0
   6C3C 20 20 20 20 20 20  3296                         .ascii '       '
        20
   6C43 96 A0              3297                         .db 0x96, 0xA0
   6C45 20 20 20           3298                         .ascii '   '
   6C48 90 A9              3299                         .db 0x90, 0xA9
   6C4A 20 20 20 20 20 20  3300                         .ascii '       '
        20
   6C51 00                 3301                         .db 0
   6C52 20 20 20 20 20 20  3302                         .ascii '       '
        20
   6C59 95                 3303                         .db 0x95
   6C5A 20                 3304                         .ascii ' '
   6C5B 89                 3305                         .db 0x89
   6C5C 20                 3306                         .ascii ' '
   6C5D 86                 3307                         .db 0x86
   6C5E 20                 3308                         .ascii ' '
   6C5F AA                 3309                         .db 0xAA
   6C60 20 20 20 20 20 20  3310                         .ascii '       '
        20
   6C67 00                 3311                         .db 0
   6C68 20 20 20 20 20 20  3312                         .ascii '       '
        20
   6C6F 95 B7 95           3313                         .db 0x95, 0xB7, 0x95
   6C72 20                 3314                         .ascii ' '
   6C73 AA BB AA           3315                         .db 0xAA, 0xBB, 0xAA
   6C76 20 20 20 20 20 20  3316                         .ascii '       '
        20
   6C7D 00                 3317                         .db 0
   6C7E 20 20 20 20 20 20  3318                         .ascii '       '
        20
   6C85 95                 3319                         .db 0x95
   6C86 20 20 40 20 20     3320                         .ascii '  @  '
   6C8B AA                 3321                         .db 0xAA
   6C8C 20 20 20 20 20 20  3322                         .ascii '       '
        20
   6C93 00                 3323                         .db 0
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 68.
Hexidecimal [16-Bits]



   6C94 20 20 20 20 20 20  3324                         .ascii '       '
        20
   6C9B B5 B0              3325                         .db 0xB5, 0xB0
   6C9D 20 4F 20           3326                         .ascii ' O '
   6CA0 B0 BA              3327                         .db 0xB0, 0xBA
   6CA2 20 20 20 20 20 20  3328                         .ascii '       '
        20
   6CA9 00                 3329                         .db 0
   6CAA 20 20 20 20 20 20  3330                         .ascii '       '
        20
   6CB1 86 81 8C 8C 8C 82  3331                         .db 0x86, 0x81, 0x8C, 0x8C, 0x8C, 0x82, 0x89
        89
   6CB8 20 20 20 20 20 20  3332                         .ascii '       '
        20
   6CBF 00                 3333                         .db 0
   6CC0 20 20 20 20 20 20  3334                         .ascii '      '
   6CC6 86                 3335                         .db 0x86
   6CC7 20 20              3336                         .ascii '  '
   6CC9 89                 3337                         .db 0x89
   6CCA 20                 3338                         .ascii ' '
   6CCB 86                 3339                         .db 0x86
   6CCC 20 20              3340                         .ascii '  '
   6CCE 89                 3341                         .db 0x89
   6CCF 20 20 20 20 20 20  3342                         .ascii '      '
   6CD5 00                 3343                         .db 0
   6CD6 20 20 20 20 20     3344                         .ascii '     '
   6CDB 86                 3345                         .db 0x86
   6CDC 20 21 3E 3E 20 3C  3346                         .ascii ' !>> <<! '
        3C 21 20
   6CE5 89                 3347                         .db 0x89
   6CE6 20 20 20 20 20     3348                         .ascii '     '
   6CEB 00                 3349                         .db 0
   6CEC 20 20 20 20 20 20  3350 aHQ_Officer:            .ascii '                     '
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20
   6D01 00                 3351                         .db 0
   6D02 20 20 20 20 20 20  3352                         .ascii '        '
        20 20
   6D0A B0 8C 8F 8C B0     3353                         .db 0xB0, 0x8C, 0x8F, 0x8C, 0xB0
   6D0F 20 20 20 20 20 20  3354                         .ascii '        '
        20 20
   6D17 00                 3355                         .db 0
   6D18 20 20 20 20 20     3356                         .ascii '     '
   6D1D 83 83 9F 83 83 83  3357                         .db 0x83, 0x83, 0x9F, 0x83, 0x83, 0x83, 0x83, 0x83, 0xAF
        83 83 AF
   6D26 83 83              3358                         .db 0x83, 0x83
   6D28 20 20 20 20 20     3359                         .ascii '     '
   6D2D 00                 3360                         .db 0
   6D2E 20 20 20 20 20 20  3361                         .ascii '       '
        20
   6D35 95 B7 95           3362                         .db 0x95, 0xB7, 0x95
   6D38 20                 3363                         .ascii ' '
   6D39 AA BB AA           3364                         .db 0xAA, 0xBB, 0xAA
   6D3C 20 20 20 20 20 20  3365                         .ascii '       '
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 69.
Hexidecimal [16-Bits]



        20
   6D43 00                 3366                         .db 0
   6D44 20 20 20 20 20 20  3367                         .ascii '       '
        20
   6D4B 95                 3368                         .db 0x95
   6D4C 20 20              3369                         .ascii '  '
   6D4E B0                 3370                         .db 0xB0
   6D4F 20 20              3371                         .ascii '  '
   6D51 AA                 3372                         .db 0xAA
   6D52 20 20 20 20 20 20  3373                         .ascii '       '
        20
   6D59 00                 3374                         .db 0
   6D5A 20 20 20 20 20 20  3375                         .ascii '       '
        20
   6D61 95                 3376                         .db 0x95
   6D62 20                 3377                         .ascii ' '
   6D63 8C 8F 8C           3378                         .db 0x8C, 0x8F, 0x8C
   6D66 20                 3379                         .ascii ' '
   6D67 AA                 3380                         .db 0xAA
   6D68 20 20 20 20 20 20  3381                         .ascii '       '
        20
   6D6F 00                 3382                         .db 0
   6D70 20 20 20 20 20 20  3383                         .ascii '       '
        20
   6D77 A5                 3384                         .db 0xA5
   6D78 20 20 4F 20 20     3385                         .ascii '  O  '
   6D7D 9A                 3386                         .db 0x9A
   6D7E 20 20 20 20 20 20  3387                         .ascii '       '
        20
   6D85 00                 3388                         .db 0
   6D86 20 20 20 20 20 20  3389                         .ascii '        '
        20 20
   6D8E 89 B0 B0 B0 86     3390                         .db 0x89, 0xB0, 0xB0, 0xB0, 0x86
   6D93 20 20 20 20 20 20  3391                         .ascii '        '
        20 20
   6D9B 00                 3392                         .db 0
   6D9C 20 20 20 20 28 28  3393                         .ascii '    ((** < > **))    '
        2A 2A 20 3C 20 3E
        20 2A 2A 29 29 20
        20 20 20
   6DB1 00                 3394                         .db 0
   6DB2 20 20 20 20 28 28  3395                         .ascii '    ((  !! !!  ))    '
        20 20 21 21 20 21
        21 20 20 29 29 20
        20 20 20
   6DC7 00                 3396                         .db 0
                     0000  3397 .ifndef BUILD_OPT_MIXED_CASE
                           3398 aTitle:                 .ascii '  INVASION FORCE  -------  RADIO SHACK '
                           3399                         .db 0
                           3400 aMainDisplay:           .ascii ' L-R SENSOR  %-MINE   ------RADIO SHACK------ [ USS HEPHAESTUS ['
                           3401                         .ascii ' 000 000 000 [-HEPHS 0I                     I STAR-TIME   300200'
                           3402                         .ascii ' ----------- 0-SSTN  1I                     I CONDITION    STDBY'
                           3403                         .ascii ' 000 000 000 @-JCC   2I                     I QUADRANT      0-0 '
                           3404                         .ascii ' ----------- &-JBC   3I                     I SECTOR        0-0 '
                           3405                         .ascii ' 000 000 000 X-UNKN  4I                     I TRITON MISLS   10 '
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 70.
Hexidecimal [16-Bits]



                           3406                         .ascii '  PWR DIST   %       5I                     I POWER AVAIL    99%'
                           3407                         .ascii '  HYPR&ION   20      6I                     I JOVIANS LEFT   000'
                           3408                         .ascii '  LR SENSOR  10      7I                     I ANTIMATTER PODS 03'
                           3409 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                           3410                         .ascii '  SR SENSOR  20      8I                     I          7  0  1  '
                           3411                         .ascii '  DEFLECTORS 20      9I                     I   SCDM:  6  -  2  '
                           3412                         .ascii '  MASERS     09       I---------------------I          5  4  3  '
                           3413 .else                        
                           3414                         .ascii '  SR SENSOR  20      8I                     I          7  8  9  '
                           3415                         .ascii '  DEFLECTORS 20      9I                     I   SCDM:  4  -  6  '
                           3416                         .ascii '  MASERS     09       I---------------------I          1  2  3  '
                           3417 .endif                        
                           3418                         .ascii '  TRT MISSL  11       I 0 1 2 3 4 5 6 7 8 9 I  COMMAND:         '
                     0001  3419 .else
   6DC8 20 20 49 4E 56 41  3420 aTitle:                 .ascii '  INVASION FORCE+  -------  RADIO SHACK '
        53 49 4F 4E 20 46
        4F 52 43 45 2B 20
        20 2D 2D 2D 2D 2D
        2D 2D 20 20 52 41
        44 49 4F 20 53 48
        41 43 4B 20
   6DF0 00                 3421                         .db 0
   6DF1 20 4C 2D 52 20 53  3422 aMainDisplay:           .ascii ' L-R Sensor  %-Mine   ------RADIO SHACK------ [ USS Hephaestus ['
        65 6E 73 6F 72 20
        20 25 2D 4D 69 6E
        65 20 20 20 2D 2D
        2D 2D 2D 2D 52 41
        44 49 4F 20 53 48
        41 43 4B 2D 2D 2D
        2D 2D 2D 20 5B 20
        55 53 53 20 48 65
        70 68 61 65 73 74
        75 73 20 5B
   6E31 20 30 30 30 20 30  3423                         .ascii ' 000 000 000 [-Hephs 0I                     I Star-Time   300200'
        30 30 20 30 30 30
        20 5B 2D 48 65 70
        68 73 20 30 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 53 74
        61 72 2D 54 69 6D
        65 20 20 20 33 30
        30 32 30 30
   6E71 20 2D 2D 2D 2D 2D  3424                         .ascii ' ----------- 0-SStn  1I                     I Condition    STDBY'
        2D 2D 2D 2D 2D 2D
        20 30 2D 53 53 74
        6E 20 20 31 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 43 6F
        6E 64 69 74 69 6F
        6E 20 20 20 20 53
        54 44 42 59
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 71.
Hexidecimal [16-Bits]



   6EB1 20 30 30 30 20 30  3425                         .ascii ' 000 000 000 @-JCC   2I                     I Quadrant      0-0 '
        30 30 20 30 30 30
        20 40 2D 4A 43 43
        20 20 20 32 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 51 75
        61 64 72 61 6E 74
        20 20 20 20 20 20
        30 2D 30 20
   6EF1 20 2D 2D 2D 2D 2D  3426                         .ascii ' ----------- &-JBC   3I                     I Sector        0-0 '
        2D 2D 2D 2D 2D 2D
        20 26 2D 4A 42 43
        20 20 20 33 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 53 65
        63 74 6F 72 20 20
        20 20 20 20 20 20
        30 2D 30 20
   6F31 20 30 30 30 20 30  3427                         .ascii ' 000 000 000 X-Unkn  4I                     I Triton Misls   10 '
        30 30 20 30 30 30
        20 58 2D 55 6E 6B
        6E 20 20 34 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 54 72
        69 74 6F 6E 20 4D
        69 73 6C 73 20 20
        20 31 30 20
   6F71 20 20 50 77 72 20  3428                         .ascii '  Pwr Dist   %       5I                     I Power Avail    99%'
        44 69 73 74 20 20
        20 25 20 20 20 20
        20 20 20 35 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 50 6F
        77 65 72 20 41 76
        61 69 6C 20 20 20
        20 39 39 25
   6FB1 20 20 48 79 70 72  3429                         .ascii '  Hypr&Ion   20      6I                     I Jovians Left   000'
        26 49 6F 6E 20 20
        20 32 30 20 20 20
        20 20 20 36 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 4A 6F
        76 69 61 6E 73 20
        4C 65 66 74 20 20
        20 30 30 30
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 72.
Hexidecimal [16-Bits]



   6FF1 20 20 4C 52 20 53  3430                         .ascii '  LR Sensor  10      7I                     I Antimatter Pods 03'
        65 6E 73 6F 72 20
        20 31 30 20 20 20
        20 20 20 37 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 41 6E
        74 69 6D 61 74 74
        65 72 20 50 6F 64
        73 20 30 33
                     0000  3431 .ifndef BUILD_OPT_KEYPAD_DIRS                        
                           3432                         .ascii '  SR Sensor  20      8I                     I          7  0  1  '
                           3433                         .ascii '  Deflectors 20      9I                     I   SCDM:  6  -  2  '
                           3434                         .ascii '  Masers     09       I---------------------I          5  4  3  '
                     0001  3435 .else                        
   7031 20 20 53 52 20 53  3436                         .ascii '  SR Sensor  20      8I                     I          7  8  9  '
        65 6E 73 6F 72 20
        20 32 30 20 20 20
        20 20 20 38 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 20 20
        20 20 20 20 20 20
        20 37 20 20 38 20
        20 39 20 20
   7071 20 20 44 65 66 6C  3437                         .ascii '  Deflectors 20      9I                     I   SCDM:  4  -  6  '
        65 63 74 6F 72 73
        20 32 30 20 20 20
        20 20 20 39 49 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 49 20 20 20
        53 43 44 4D 3A 20
        20 34 20 20 2D 20
        20 36 20 20
   70B1 20 20 4D 61 73 65  3438                         .ascii '  Masers     09       I---------------------I          1  2  3  '
        72 73 20 20 20 20
        20 30 39 20 20 20
        20 20 20 20 49 2D
        2D 2D 2D 2D 2D 2D
        2D 2D 2D 2D 2D 2D
        2D 2D 2D 2D 2D 2D
        2D 2D 49 20 20 20
        20 20 20 20 20 20
        20 31 20 20 32 20
        20 33 20 20
                           3439 .endif                        
   70F1 20 20 54 72 74 20  3440                         .ascii '  Trt Missl  11       I 0 1 2 3 4 5 6 7 8 9 I  Command:         '
        4D 69 73 73 6C 20
        20 31 31 20 20 20
        20 20 20 20 49 20
        30 20 31 20 32 20
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 73.
Hexidecimal [16-Bits]



        33 20 34 20 35 20
        36 20 37 20 38 20
        39 20 49 20 20 43
        6F 6D 6D 61 6E 64
        3A 20 20 20 20 20
        20 20 20 20
                           3441 .endif
   7131 20 20 20 20 20 20  3442                         .ascii '                                                                '
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20
   7171 20 20 20 20 20 20  3443                         .ascii '                                                                '
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20
   71B1 20 20 20 20 20 20  3444                         .ascii '                                                                '
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 20 20 20
                           3445 
                     0001  3446 .ifdef BUILD_OPT_KEYPAD_DIRS
   7200                    3447                         .bndry 16
   7200 FF 05 04 03 06 FF  3448 dir_xlate_tbl:          .db 0xFF, 5, 4, 3, 6, 0xFF, 2, 7, 0, 1
        02 07 00 01
                           3449 .endif                        
                           3450 
                           3451 ; $45 bytes cleared at startup
                           3452 
                           3453 ; - antimatter pod table
                           3454 ;   - 3x 6-byte entries
                           3455 ;     +$0 = pod status (0=used, 1=launched, 2=exploded)
                           3456 ;     +$1/2 = pod video address delta
                           3457 ;     +$3/4 = pod video address
                           3458 ;     +$5 = pod speed countdown
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 74.
Hexidecimal [16-Bits]



   720A 23 C3 BD 6F 01 CB  3459 antimatter_pod_tbl:     .db 0x23, 0xC3, 0xBD, 0x6F, 1, 0xCB
   7210 21 7E FE C3 C2 E0  3460                         .db 0x21, 0x7E, 0xFE, 0xC3, 0xC2, 0xE0
   7216 6F 2B 7E B7 CA BD  3461                         .db 0x6F, 0x2B, 0x7E, 0xB7, 0xCA, 0xBD
                           3462 ;
   721C 6F                 3463 eot:                    .db 0x6F
   721D FE                 3464 always_zero:            .db 0xFE
   721E 7F                 3465 delay_duty_cycle_i:     .db 0x7F
   721F C2                 3466 power_overflow:         .db 0xC2                                ; $00=OK, $FF=overflow
   7220 E0                 3467 cmd_flag:               .db 0xE0                                ; 00=new, $FF=none
   7221 6F                 3468 cmd_len:                .db 0x6F
   7222 2E                 3469 hyperdrive_disabled:    .db 0x2E                                ; $00=OK, $FF=disabled
   7223 1F                 3470 maser_fired:            .db 0x1F                                ; $00=NO, $FF=fired
   7224 22                 3471 computer_malfunction:   .db 0x22                                ; $00=OK, $FF=malfunctioned
   7225 06                 3472 jovian_time_frozen:     .db 6                                   ; $00=normal, $FF=frozen
   7226 70                 3473 experimental_ray_disabled:.db 0x70                              ; $00=OK, $FF=disabled
   7227 2E                 3474 disable_pod_update:     .db 0x2E                                ; $00=OK, $XX=disabled
   7228 04                 3475 critical:               .db 4                                   ; $00=OK, $01=SELF-DESTRUCT, $FF=EXPLODING
   7229 22                 3476                         .db 0x22 ; "
   722A 14                 3477                         .db 0x14
   722B 68                 3478                         .db 0x68 ; h
                           3479 ; looks like this had some debug code
                           3480 ; hooked at $7036
   722C 21                 3481 unk_6FBD:               .db 0x21 ; !
   722D 00                 3482                         .db    0
   722E 00                 3483                         .db    0
   722F 0A                 3484                         .db  0xA
   7230 22                 3485                         .db 0x22 ; "
   7231 00                 3486                         .db    0
   7232 00                 3487                         .db    0
   7233 22                 3488                         .db 0x22 ; "
   7234 02                 3489                         .db    2
   7235 00                 3490                         .db    0
   7236 21                 3491                         .db 0x21 ; !
   7237 73                 3492                         .db 0x73 ; s
   7238 6B                 3493                         .db 0x6B ; k
   7239 11                 3494                         .db 0x11
   723A 42                 3495                         .db 0x42 ; B
   723B 70                 3496                         .db 0x70 ; p
   723C C3                 3497                         .db 0xC3 ; √
   723D 01                 3498                         .db    1
   723E 50                 3499                         .db 0x50 ; P
   723F 91                 3500                         .db 0x91 ; ë
   7240 96                 3501                         .db 0x96 ; ñ
   7241 E3                 3502                         .db 0xE3 ; „
   7242 C2                 3503                         .db 0xC2 ; ¬
   7243 0E                 3504                         .db  0xE
   7244 70                 3505                         .db 0x70 ; p
   7245 E3                 3506                         .db 0xE3 ; „
   7246 23                 3507                         .db 0x23 ; #
   7247 05                 3508                         .db    5
   7248 13                 3509                         .db 0x13
   7249 C2                 3510                         .db 0xC2 ; ¬
   724A CD                 3511                         .db 0xCD ; Õ
   724B 6F                 3512                         .db 0x6F ; o
   724C C3                 3513                         .db 0xC3 ; √
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 75.
Hexidecimal [16-Bits]



   724D 01                 3514                         .db    1
   724E 50                 3515                         .db 0x50 ; P
                           3516 ;
                           3517 ; --- end of area cleared at startup ---
                           3518 ;
   724F 3A                 3519                         .db 0x3A ; :
   7250 00                 3520                         .db    0
   7251 E0                 3521                         .db 0xE0 ; ‡
   7252 B7                 3522                         .db 0xB7 ; ∑
   7253 C2                 3523                         .db 0xC2 ; ¬
   7254 1C                 3524                         .db 0x1C
   7255 70                 3525                         .db 0x70 ; p
   7256 3A                 3526                         .db 0x3A ; :
   7257 01                 3527                         .db    1
   7258 E0                 3528                         .db 0xE0 ; ‡
   7259 FE                 3529                         .db 0xFE ; ˛
   725A C3                 3530                         .db 0xC3 ; √
   725B C2                 3531                         .db 0xC2 ; ¬
   725C 1C                 3532                         .db 0x1C
   725D 70                 3533                         .db 0x70 ; p
   725E 3E                 3534                         .db 0x3E ; >
   725F CD                 3535                         .db 0xCD ; Õ
   7260 32                 3536                         .db 0x32 ; 2
   7261 B6                 3537                         .db 0xB6 ; ∂
   7262 51                 3538                         .db 0x51 ; Q
   7263 21                 3539                         .db 0x21 ; !
   7264 A4                 3540                         .db 0xA4 ; §
   7265 D0                 3541                         .db 0xD0 ; –
   7266 22                 3542                         .db 0x22 ; "
   7267 06                 3543                         .db    6
   7268 70                 3544                         .db 0x70 ; p
   7269 21                 3545                         .db 0x21 ; !
   726A 60 E0              3546 STACK_WATERMARK:        .dw 0xE060
   726C 22                 3547                         .db 0x22 ; "
   726D 14                 3548                         .db 0x14
   726E 68                 3549                         .db 0x68 ; h
   726F 21                 3550                         .db 0x21 ; !
   7270 CC                 3551                         .db 0xCC ; Ã
   7271 D0                 3552                         .db 0xD0 ; –
   7272 22                 3553                         .db 0x22 ; "
   7273 08                 3554                         .db    8
   7274 70                 3555                         .db 0x70 ; p
   7275 3E                 3556                         .db 0x3E ; >
   7276 CD                 3557                         .db 0xCD ; Õ
   7277 32                 3558                         .db 0x32 ; 2
   7278 0B                 3559                         .db  0xB
   7279 70                 3560                         .db 0x70 ; p
   727A C3                 3561                         .db 0xC3 ; √
   727B BD                 3562                         .db 0xBD ; Ω
   727C 6F                 3563                         .db 0x6F ; o
   727D 2A                 3564                         .db 0x2A ; *
   727E 2E                 3565                         .db 0x2E ; .
   727F 70                 3566                         .db 0x70 ; p
   7280 77                 3567                         .db 0x77 ; w
   7281 23                 3568                         .db 0x23 ; #
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 76.
Hexidecimal [16-Bits]



   7282 1A                 3569                         .db 0x1A
   7283 77                 3570                         .db 0x77 ; w
   7284 23                 3571                         .db 0x23 ; #
   7285 22                 3572                         .db 0x22 ; "
   7286 2E                 3573                         .db 0x2E ; .
   7287 70                 3574                         .db 0x70 ; p
   7288 C3                 3575                         .db 0xC3 ; √
   7289 D6                 3576                         .db 0xD6 ; ÷
   728A 6F                 3577                         .db 0x6F ; o
   728B 21                 3578                         .db 0x21 ; !
   728C 39                 3579                         .db 0x39 ; 9
   728D 70                 3580                         .db 0x70 ; p
   728E 11                 3581                         .db 0x11
   728F B6                 3582                         .db 0xB6 ; ∂
   7290 51                 3583                         .db 0x51 ; Q
                           3584 ; ---------------------------------------------------------------------------
                           3585 
   7291                    3586 loc_7022:
   7291 7E            [ 6] 3587                         ld      a, (hl)
   7292 FE FF         [ 6] 3588                         cp      #0xFF
   7294 CA 9F 72      [ 9] 3589                         jp      Z, loc_7030
   7297 12            [ 7] 3590                         ld      (de), a
   7298 23            [ 4] 3591                         inc     hl
   7299 13            [ 4] 3592                         inc     de
   729A C3 91 72      [ 9] 3593                         jp      loc_7022
                           3594 ; ---------------------------------------------------------------------------
   729D 0C                 3595                         .db  0xC
   729E 5B                 3596                         .db 0x5B ; [
                           3597 ; ---------------------------------------------------------------------------
                           3598 
   729F                    3599 loc_7030:
   729F 21 03 00      [ 9] 3600                         ld      hl, #3
   72A2 22 69 6A      [16] 3601                         ld      (cmd_l_vector), hl              ; hook "L" cmd
   72A5 C3 2C 72      [ 9] 3602                         jp      unk_6FBD                        ; debug code???
                           3603 ; ---------------------------------------------------------------------------
   72A8 DB 00 00 E6 40 C8  3604                         .db 0xDB, 0, 0, 0xE6, 0x40, 0xC8, 0xDB, 1, 0xFF, 0, 0x27
        DB 01 FF 00 27
   72B3 5A 2E 2C 5A 27 0D  3605                         .db 0x5A, 0x2E, 0x2C, 0x5A, 0x27, 0xD, 0xD, 0x31, 0x34, 0x37
        0D 31 34 37
   72BD 31 20 20 44 53 20  3606                         .db 0x31, 0x20, 0x20, 0x44, 0x53, 0x20, 0x33, 0x32, 0xD
        33 32 0D
   72C6 11 31 34 37 32 20  3607                         .db 0x11, 0x31, 0x34, 0x37, 0x32, 0x20, 0x53, 0x54, 0x41
        53 54 41
   72CF 43 4B 20 44 42 20  3608                         .db 0x43, 0x4B, 0x20, 0x44, 0x42, 0x20, 0x30, 0xD, 1, 0x20
        30 0D 01 20
   72D9 33 38 0D 34 31 32  3609                         .db 0x33, 0x38, 0xD, 0x34, 0x31, 0x32, 0x38, 0x30, 0x20
        38 30 20
   72E2 20 41 53 43 20 2F  3610                         .db 0x20, 0x41, 0x53, 0x43, 0x20, 0x2F, 0x41, 0x52, 0x45
        41 52 45
   72EB 20 53 55 43 48 20  3611                         .db 0x20, 0x53, 0x55, 0x43, 0x48, 0x20, 0x51, 0x55, 0x45
        51 55 45
   72F4 53 54 49 4F 4E 53  3612                         .db 0x53, 0x54, 0x49, 0x4F, 0x4E, 0x53, 0x20, 0x4F, 0x4E
        20 4F 4E
   72FD 20 59 4F 55 52 20  3613                         .db 0x20, 0x59, 0x4F, 0x55, 0x52, 0x20, 0x4D, 0x49, 0x4E
        4D 49 4E
ASxxxx Assembler V05.00  (Zilog Z80 / Hitachi HD64180), page 77.
Hexidecimal [16-Bits]



   7306 44 20 4F 46 54 45  3614                         .db 0x44, 0x20, 0x4F, 0x46, 0x54, 0x45, 0x4E, 0x3F, 0x2F
        4E 3F 2F
   730F 0D 0D 31 32 38 31  3615                         .db 0xD, 0xD, 0x31, 0x32, 0x38, 0x31, 0x20, 0x20, 0x44, 0x42
        20 20 44 42
   7319 20 34 30 0D 36 31  3616                         .db 0x20, 0x34, 0x30, 0xD, 0x36, 0x31, 0x32, 0x38, 0x32
        32 38 32
   7322 20 20 41 53 43 20  3617                         .db 0x20, 0x20, 0x41, 0x53, 0x43, 0x20, 0x2F, 0x57, 0x48
        2F 57 48
   732B 41 54 20 49 53 20  3618                         .db 0x41, 0x54, 0x20, 0x49, 0x53, 0x20, 0x49, 0x54, 0x20
        49 54 20
   7334 54 48 41 54 20 59  3619                         .db 0x54, 0x48, 0x41, 0x54, 0x20, 0x59, 0x4F, 0x55, 0x20
        4F 55 20
   733D 52 45 00 00 00 00  3620                         .db 0x52, 0x45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        00 00 00 00 00 00
        00 00 00 00
   734D 00 00 00 00 00 00  3621                         .db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        00 00 00 00 00 00
        00 00 00 00 00 00
   735F 00 00 00 00 00 00  3622                         .db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0xF1
        00 00 00 00 00 00
        00 00 00 00 F1
                           3623 ; end of 'CODE'
                           3624 
                     5200  3625                         .end START
