RAM:0000	     ;
RAM:0000	     ; +-------------------------------------------------------------------------+
RAM:0000	     ; |   This	file has been generated	by The Interactive Disassembler	(IDA)	 |
RAM:0000	     ; |	   Copyright (c) 2015 Hex-Rays,	<support@hex-rays.com>		 |
RAM:0000	     ; |		      License info: 48-B437-7294-77			 |
RAM:0000	     ; |			Chris Nott, Virtual Logic			 |
RAM:0000	     ; +-------------------------------------------------------------------------+
RAM:0000	     ;
RAM:0000	     ; Input SHA256 : 7D2DB31FCD46BC48A128A1E9C73AC701E23C468F48E4126FEADC89C89CBB56DE
RAM:0000	     ; Input MD5    : 4B489B0086CCEDD87DD0A0245DE67B43
RAM:0000	     ; Input CRC32  : D803FFD0
RAM:0000
RAM:0000	     ; ---------------------------------------------------------------------------
RAM:0000	     ; +-----------------------------------+
RAM:0000	     ; | SOL-20	Trek-80	Disassembly v0.90  |
RAM:0000	     ; |   - by	tcdev (msmcdoug@gmail.com) |
RAM:0000	     ; +-----------------------------------+
RAM:0000	     ;
RAM:0000
RAM:0000	     ; File Name   : E:\dev\pace\pacedev.net\sw\re\platform\trs80\invforce\sol20\trk80.bin
RAM:0000	     ; Format	   : Binary file
RAM:0000	     ; Base Address: 0000h Range: 0000h	- 1EA1h	Loaded length: 00001EA1h
RAM:0000
RAM:0000	     ; Processor       : z80 []
RAM:0000	     ; Target assembler: ASxxxx	by Alan	R. Baldwin v1.5
RAM:0000		    .area   idaseg (ABS)
RAM:0000		    .hd64 ; this is needed only	for HD64180
RAM:0000
RAM:0000	     ; ===========================================================================
RAM:0000
RAM:0000	     ; Segment type: Regular
RAM:0000
RAM:0000	     loc_0:								   ; DATA XREF:	RAM:1DA6w
RAM:0000 AF			     xor     a
RAM:0001
RAM:0001	     loc_1:								   ; DATA XREF:	RAM:1DA9w
RAM:0001 C3 5C 1D		     jp	     antimatter_pod_tbl				   ; SOL-20 startup code (returns)
RAM:0004	     ; ---------------------------------------------------------------------------
RAM:0004	     ; START OF	FUNCTION CHUNK FOR handle_low_power
RAM:0004
RAM:0004	     loc_4:								   ; CODE XREF:	handle_low_power-5D4j
RAM:0004										   ; RAM:loc_1DD1j
RAM:0004 3E 03			     ld	     a,	#3
RAM:0006 32 BD 17		     ld	     (antimatter_pods),	a
RAM:0009 3E 06			     ld	     a,	#6
RAM:000B 32 D2 17		     ld	     (pod_speed), a
RAM:000E 21 5C 1D		     ld	     hl, #antimatter_pod_tbl
RAM:0011 AF			     xor     a
RAM:0012 D3 C8			     out     (0xC8), a
RAM:0014 D3 FE			     out     (0xFE), a
RAM:0016 06 1F			     ld	     b,	#0x1F
RAM:0018
RAM:0018	     loc_18:								   ; CODE XREF:	handle_low_power-97Ej
RAM:0018 77			     ld	     (hl), a
RAM:0019 23			     inc     hl
RAM:001A 05			     dec     b
RAM:001B C2 18 00		     jp	     NZ, loc_18
RAM:001E 3D			     dec     a
RAM:001F 32 6E 1D		     ld	     (eot), a					   ; flag end of pod table
RAM:0022 31 FB 1F		     ld	     sp, #0x1FFB
RAM:0025	     ; display title screen, prompt for	speed factor
RAM:0025 06 20			     ld	     b,	#0x20 ;	' '
RAM:0027 CD EC 0C		     call    clear_video_with_B
RAM:002A 11 AF 16		     ld	     de, #aEnterSpeedFact			   ; "ENTER SPEED FACTOR (9(SLOW)-0(FAST))"
RAM:002D CD 31 0D		     call    print_string_last_line
RAM:0030 21 00 CD		     ld	     hl, # VIDEO+0x100
RAM:0033 11 05 1B		     ld	     de, #aTitle				   ; "COPYRIGHT	(C) 1977  PROCESSOR TECHNOLOG"...
RAM:0036 CD 37 0D		     call    print_string
RAM:0039
RAM:0039	     loc_39:								   ; CODE XREF:	handle_low_power-95Dj
RAM:0039 CD C3 01		     call    keyboard_scan
RAM:003C CA 39 00		     jp	     Z,	loc_39					   ; no	key, loop
RAM:003F FE 4C			     cp	     #0x4C ; 'L'                                   ; leave the game?
RAM:0041 CA 04 C0		     jp	     Z,	0xC004					   ; yes, exit
RAM:0044 E6 0F			     and     #0xF
RAM:0046 07			     rlca
RAM:0047 07			     rlca
RAM:0048 C6 10			     add     a,	#16
RAM:004A 32 3C 19		     ld	     (game_delay_factor), a
RAM:004D 3E 02			     ld	     a,	#2
RAM:004F 32 3D 19		     ld	     (time_to_klingon_fire), a
RAM:0052 3E 10			     ld	     a,	#0x10
RAM:0054 32 4B 19		     ld	     (photon_torps), a
RAM:0057 3E 08			     ld	     a,	#8
RAM:0059 32 91 17		     ld	     (impulse_speed), a
RAM:005C 3E 99			     ld	     a,	#0x99 ;	'™'
RAM:005E 32 4A 19		     ld	     (power_avail), a
RAM:0061 21 B7 CE		     ld	     hl, # VIDEO+0x2B7
RAM:0064 22 92 17		     ld	     (cmd_entry_addr), hl
RAM:0067	     ; print main display
RAM:0067 21 34 1B		     ld	     hl, #aMainDisplay				   ; " L-R SENSOR  \x19-MINE   -Processor  Te"...
RAM:006A 11 00 CC		     ld	     de, #VIDEO
RAM:006D
RAM:006D	     loc_6D:								   ; CODE XREF:	handle_low_power-917j
RAM:006D 7E			     ld	     a,	(hl)
RAM:006E 06 01			     ld	     b,	#1
RAM:0070 B8			     cp	     b
RAM:0071 C2 78 00		     jp	     NZ, loc_78
RAM:0074 23			     inc     hl
RAM:0075 46			     ld	     b,	(hl)
RAM:0076 23			     inc     hl
RAM:0077 7E			     ld	     a,	(hl)
RAM:0078
RAM:0078	     loc_78:								   ; CODE XREF:	handle_low_power-928j
RAM:0078										   ; handle_low_power-91Ej
RAM:0078 12			     ld	     (de), a
RAM:0079 13			     inc     de
RAM:007A 05			     dec     b
RAM:007B C2 78 00		     jp	     NZ, loc_78
RAM:007E 23			     inc     hl
RAM:007F 7A			     ld	     a,	d
RAM:0080 FE D0			     cp	     #0xD0 ; 'Ð'
RAM:0082 C2 6D 00		     jp	     NZ, loc_6D
RAM:0085 2A 84 17		     ld	     hl, (chaser_addr)
RAM:0088 36 A0			     ld	     (hl), #0xA0 ; ' '
RAM:008A	     ; init power distribution
RAM:008A 21 26 19		     ld	     hl, #pwr_warp_impulse
RAM:008D 06 04			     ld	     b,	#4
RAM:008F
RAM:008F	     loc_8F:								   ; CODE XREF:	handle_low_power-906j
RAM:008F 36 20			     ld	     (hl), #0x20 ; ' '
RAM:0091 23			     inc     hl
RAM:0092 05			     dec     b
RAM:0093 C2 8F 00		     jp	     NZ, loc_8F
RAM:0096 36 09			     ld	     (hl), #9
RAM:0098 23			     inc     hl
RAM:0099 36 11			     ld	     (hl), #0x11
RAM:009B 3E 10			     ld	     a,	#0x10
RAM:009D 32 27 19		     ld	     (pwr_lr_sensor), a
RAM:00A0	     ; zero quadrant data
RAM:00A0 11 2C 01		     ld	     de, #300
RAM:00A3 21 F4 17		     ld	     hl, #quadrant_tbl
RAM:00A6
RAM:00A6	     loc_A6:								   ; CODE XREF:	handle_low_power-8EDj
RAM:00A6 36 00			     ld	     (hl), #0
RAM:00A8 23			     inc     hl
RAM:00A9 1B			     dec     de
RAM:00AA 7A			     ld	     a,	d
RAM:00AB B3			     or	     e
RAM:00AC C2 A6 00		     jp	     NZ, loc_A6
RAM:00AF
RAM:00AF	     init_klingons_left:						   ; CODE XREF:	handle_low_power-8E5j
RAM:00AF										   ; handle_low_power-8E0j
RAM:00AF CD F8 0C		     call    rand_0_9
RAM:00B2 FE 03			     cp	     #3
RAM:00B4 FA AF 00		     jp	     M,	init_klingons_left
RAM:00B7 FE 06			     cp	     #6
RAM:00B9 F2 AF 00		     jp	     P,	init_klingons_left
RAM:00BC 07			     rlca
RAM:00BD 07			     rlca
RAM:00BE 07			     rlca
RAM:00BF 07			     rlca
RAM:00C0 47			     ld	     b,	a
RAM:00C1 CD F8 0C		     call    rand_0_9
RAM:00C4 80			     add     a,	b
RAM:00C5 47			     ld	     b,	a
RAM:00C6 32 EA 17		     ld	     (klingons_left), a
RAM:00C9
RAM:00C9	     loc_C9:								   ; CODE XREF:	handle_low_power-8BDj
RAM:00C9										   ; handle_low_power-8AAj ...
RAM:00C9 CD F8 0C		     call    rand_0_9
RAM:00CC 07			     rlca
RAM:00CD 07			     rlca
RAM:00CE 07			     rlca
RAM:00CF 07			     rlca
RAM:00D0 4F			     ld	     c,	a
RAM:00D1 CD F8 0C		     call    rand_0_9
RAM:00D4 81			     add     a,	c
RAM:00D5 C5			     push    bc
RAM:00D6 CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:00D9 C1			     pop     bc
RAM:00DA 7E			     ld	     a,	(hl)
RAM:00DB A7			     and     a
RAM:00DC C2 C9 00		     jp	     NZ, loc_C9
RAM:00DF
RAM:00DF	     loc_DF:								   ; CODE XREF:	handle_low_power-8B5j
RAM:00DF										   ; handle_low_power-8B0j
RAM:00DF CD F8 0C		     call    rand_0_9
RAM:00E2 FE 05			     cp	     #5
RAM:00E4 F2 DF 00		     jp	     P,	loc_DF
RAM:00E7 3D			     dec     a
RAM:00E8 B8			     cp	     b
RAM:00E9 F2 DF 00		     jp	     P,	loc_DF
RAM:00EC 3C			     inc     a
RAM:00ED 77			     ld	     (hl), a
RAM:00EE A7			     and     a
RAM:00EF CA C9 00		     jp	     Z,	loc_C9
RAM:00F2 57			     ld	     d,	a
RAM:00F3 78			     ld	     a,	b
RAM:00F4
RAM:00F4	     loc_F4:								   ; CODE XREF:	handle_low_power-89Ej
RAM:00F4 C6 99			     add     a,	#0x99 ;	'™'
RAM:00F6 27			     daa
RAM:00F7 CA 02 01		     jp	     Z,	init_stars
RAM:00FA 15			     dec     d
RAM:00FB C2 F4 00		     jp	     NZ, loc_F4
RAM:00FE 47			     ld	     b,	a
RAM:00FF C3 C9 00		     jp	     loc_C9
RAM:0102	     ; ---------------------------------------------------------------------------
RAM:0102
RAM:0102	     init_stars:							   ; CODE XREF:	handle_low_power-8A2j
RAM:0102 21 F4 17		     ld	     hl, #quadrant_tbl
RAM:0105 0E 64			     ld	     c,	#100
RAM:0107
RAM:0107	     loc_107:								   ; CODE XREF:	handle_low_power-88Aj
RAM:0107 CD F8 0C		     call    rand_0_9
RAM:010A 23			     inc     hl
RAM:010B 23			     inc     hl
RAM:010C 77			     ld	     (hl), a
RAM:010D 23			     inc     hl
RAM:010E 0D			     dec     c
RAM:010F C2 07 01		     jp	     NZ, loc_107
RAM:0112	     ; 1-3 space stations in game
RAM:0112
RAM:0112	     init_space_stations:						   ; CODE XREF:	handle_low_power-883j
RAM:0112										   ; handle_low_power-87Ej
RAM:0112 CD F8 0C		     call    rand_0_9
RAM:0115 A7			     and     a
RAM:0116 CA 12 01		     jp	     Z,	init_space_stations
RAM:0119 FE 04			     cp	     #4
RAM:011B F2 12 01		     jp	     P,	init_space_stations
RAM:011E 4F			     ld	     c,	a
RAM:011F
RAM:011F	     loc_11F:								   ; CODE XREF:	handle_low_power-866j
RAM:011F										   ; handle_low_power-860j
RAM:011F CD F8 0C		     call    rand_0_9
RAM:0122 07			     rlca
RAM:0123 07			     rlca
RAM:0124 07			     rlca
RAM:0125 07			     rlca
RAM:0126 47			     ld	     b,	a
RAM:0127 CD F8 0C		     call    rand_0_9
RAM:012A 80			     add     a,	b
RAM:012B C5			     push    bc
RAM:012C CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:012F C1			     pop     bc
RAM:0130 23			     inc     hl
RAM:0131 7E			     ld	     a,	(hl)
RAM:0132 A7			     and     a
RAM:0133 C2 1F 01		     jp	     NZ, loc_11F
RAM:0136 36 01			     ld	     (hl), #1
RAM:0138 0D			     dec     c
RAM:0139 C2 1F 01		     jp	     NZ, loc_11F
RAM:013C	     ; init starting quadrant
RAM:013C CD F8 0C		     call    rand_0_9
RAM:013F 47			     ld	     b,	a
RAM:0140 CD F8 0C		     call    rand_0_9
RAM:0143 07			     rlca
RAM:0144 07			     rlca
RAM:0145 07			     rlca
RAM:0146 07			     rlca
RAM:0147 80			     add     a,	b
RAM:0148 32 F3 17		     ld	     (quadrant), a
RAM:014B CD 23 0F		     call    print_klingons_left
RAM:014E 3E 03			     ld	     a,	#3
RAM:0150 32 79 1D		     ld	     (experimental_ray_disabled+1), a		   ; *** disable_pod_update
RAM:0153 0E 01			     ld	     c,	#1
RAM:0155 CD 10 0B		     call    move_quadrant
RAM:0158 CD 79 0B		     call    print_quadrant
RAM:015B CD 43 0D		     call    update_chaser_pods_cmd_entry
RAM:015E 11 29 1A		     ld	     de, #aHQ_Officer				   ; "	       ...	   "
RAM:0161 CD C4 0E		     call    print_10_lines
RAM:0164 11 7F 0F		     ld	     de, #aStarfleetCom_0			   ; "STARFLEET	COMMAND:(CODE 7)THE KLINGONS "...
RAM:0167 21 40 CF		     ld	     hl, # VIDEO+0x340
RAM:016A CD 37 0D		     call    print_string
RAM:016D 1E 11			     ld	     e,	#17
RAM:016F
RAM:016F	     loc_16F:								   ; CODE XREF:	handle_low_power-807j
RAM:016F CD B2 0C		     call    rnd_delay
RAM:0172 21 62 CD		     ld	     hl, # VIDEO+0x162
RAM:0175 36 1B			     ld	     (hl), #0x1B
RAM:0177 21 E1 CD		     ld	     hl, # VIDEO+0x1E1
RAM:017A 36 4F			     ld	     (hl), #0x4F ; 'O'
RAM:017C CD B2 0C		     call    rnd_delay
RAM:017F 21 62 CD		     ld	     hl, # VIDEO+0x162
RAM:0182 36 0F			     ld	     (hl), #0xF
RAM:0184 CD F8 0C		     call    rand_0_9
RAM:0187 FE 09			     cp	     #9
RAM:0189 D2 91 01		     jp	     NC, loc_191
RAM:018C 21 E1 CD		     ld	     hl, # VIDEO+0x1E1
RAM:018F 36 2D			     ld	     (hl), #0x2D ; '-'
RAM:0191
RAM:0191	     loc_191:								   ; CODE XREF:	handle_low_power-810j
RAM:0191 1D			     dec     e
RAM:0192 C2 6F 01		     jp	     NZ, loc_16F
RAM:0195 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0198 CD C4 0B		     call    init_quadrant
RAM:019B 21 40 CF		     ld	     hl, # VIDEO+0x340
RAM:019E 11 1B 10		     ld	     de, #aWarpWImpIPhrPP			   ; "WARP=W,IMP=I,PHR=P,PTP=T,PWRDST=D,SELFD"...
RAM:01A1 CD 34 0D		     call    clear_last_2_lines_print_string
RAM:01A4
RAM:01A4	     game_loop:								   ; CODE XREF:	handle_low_power-7B7j
RAM:01A4										   ; DATA XREF:	RAM:0B06o
RAM:01A4 3E FF			     ld	     a,	#0xFF
RAM:01A6 32 72 1D		     ld	     (cmd_flag), a
RAM:01A9 3A 7A 1D		     ld	     a,	(experimental_ray_disabled+2)		   ; *** critical
RAM:01AC A7			     and     a
RAM:01AD CA CE 01		     jp	     Z,	loc_1CE
RAM:01B0 3A BC 17		     ld	     a,	(engine_explode_countdown)
RAM:01B3 3D			     dec     a
RAM:01B4 32 BC 17		     ld	     (engine_explode_countdown), a
RAM:01B7 F2 CE 01		     jp	     P,	loc_1CE
RAM:01BA 11 E5 12		     ld	     de, #aSuluTheEngines			   ; "SULU:THE ENGINES ARE EXPLODING"
RAM:01BD CD 31 0D		     call    print_string_last_line
RAM:01C0 C3 9B 03		     jp	     print_game_over_screen
RAM:01C0	     ; END OF FUNCTION CHUNK FOR handle_low_power
RAM:01C3	     ; ---------------------------------------------------------------------------
RAM:01C3
RAM:01C3	     keyboard_scan:							   ; CODE XREF:	handle_low_power:loc_39p
RAM:01C3										   ; RAM:024Bp	...
RAM:01C3 CD 1F C0		     call    0xC01F
RAM:01C6 C8			     ret     Z
RAM:01C6	     ; ---------------------------------------------------------------------------
RAM:01C7 00	     byte_1C7:	     .db 0						   ; DATA XREF:	RAM:1E3Dw
RAM:01C8 00 00	     word_1C8:	     .dw 0						   ; DATA XREF:	RAM:1E38w
RAM:01CA 00			     .db    0
RAM:01CB E6			     .db 0xE6 ;	æ
RAM:01CC 7F			     .db 0x7F ;	
RAM:01CD C9			     .db 0xC9 ;	É
RAM:01CE	     ; ---------------------------------------------------------------------------
RAM:01CE	     ; START OF	FUNCTION CHUNK FOR handle_low_power
RAM:01CE
RAM:01CE	     loc_1CE:								   ; CODE XREF:	handle_low_power-7ECj
RAM:01CE										   ; handle_low_power-7E2j
RAM:01CE CD 43 0D		     call    update_chaser_pods_cmd_entry
RAM:01D1 CD 99 09		     call    handle_low_power
RAM:01D4 3A 3C 19		     ld	     a,	(game_delay_factor)
RAM:01D7 47			     ld	     b,	a
RAM:01D8 CD B7 0C		     call    delay_B_with_duty_cycle
RAM:01DB 97			     sub     a
RAM:01DC 32 75 1D		     ld	     (loc_1D73+2), a				   ; *** maser_fired
RAM:01DF CD 04 0F		     call    update_star_time
RAM:01E2 C3 A4 01		     jp	     game_loop
RAM:01E2	     ; END OF FUNCTION CHUNK FOR handle_low_power
RAM:01E5	     ; ---------------------------------------------------------------------------
RAM:01E5
RAM:01E5	     warp_drive:							   ; DATA XREF:	RAM:cmd_jump_vectorso
RAM:01E5 CD B5 0E		     call    clear_last_2_lines
RAM:01E8 97			     sub     a
RAM:01E9 32 77 1D		     ld	     (klingon_time_frozen), a
RAM:01EC 3A 74 1D		     ld	     a,	(loc_1D73+1)
RAM:01EF A7			     and     a
RAM:01F0 FA 13 02		     jp	     M,	loc_213
RAM:01F3 CD F8 0C		     call    rand_0_9
RAM:01F6 FE 05			     cp	     #5
RAM:01F8 3A 26 19		     ld	     a,	(pwr_warp_impulse)
RAM:01FB DA 05 02		     jp	     C,	loc_205
RAM:01FE B7			     or	     a
RAM:01FF CA 0D 02		     jp	     Z,	loc_20D
RAM:0202 C6 99			     add     a,	#0x99 ;	'™'
RAM:0204 27			     daa
RAM:0205
RAM:0205	     loc_205:								   ; CODE XREF:	RAM:01FBj
RAM:0205 32 26 19		     ld	     (pwr_warp_impulse), a
RAM:0208 FE 06			     cp	     #6
RAM:020A F2 19 02		     jp	     P,	loc_219
RAM:020D
RAM:020D	     loc_20D:								   ; CODE XREF:	RAM:01FFj
RAM:020D										   ; RAM:025Cj
RAM:020D 11 5C 10		     ld	     de, #aScottyCaptainT			   ; "SCOTTY:CAPTAIN, THE ENGINES HAVEN'T THE"...
RAM:0210 C3 31 0D		     jp	     print_string_last_line
RAM:0213	     ; ---------------------------------------------------------------------------
RAM:0213
RAM:0213	     loc_213:								   ; CODE XREF:	RAM:01F0j
RAM:0213 11 95 10		     ld	     de, #aScottTheUnknow			   ; "SCOTT: THE UNKNOWN WE SHOT DISABLED THE"...
RAM:0216 C3 31 0D		     jp	     print_string_last_line
RAM:0219	     ; ---------------------------------------------------------------------------
RAM:0219
RAM:0219	     loc_219:								   ; CODE XREF:	RAM:020Aj
RAM:0219 CD F8 0C		     call    rand_0_9
RAM:021C FE 06			     cp	     #6
RAM:021E DA 24 02		     jp	     C,	loc_224
RAM:0221 CD 5E 0A		     call    klingon_attack_and_move
RAM:0224
RAM:0224	     loc_224:								   ; CODE XREF:	RAM:021Ej
RAM:0224 CD 9F 0C		     call    get_next_cmd_char
RAM:0227
RAM:0227	     loc_227:								   ; CODE XREF:	RAM:0254j
RAM:0227 D6 30			     sub     #0x30 ; '0'
RAM:0229 47			     ld	     b,	a
RAM:022A FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:022D FE 08			     cp	     #8
RAM:022F F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:0232
RAM:0232	     loc_232:								   ; CODE XREF:	RAM:024Ej
RAM:0232 C5			     push    bc
RAM:0233 78			     ld	     a,	b
RAM:0234 0E 01			     ld	     c,	#1
RAM:0236 CD 10 0B		     call    move_quadrant
RAM:0239 CD 79 0B		     call    print_quadrant
RAM:023C 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:023F CD C4 0B		     call    init_quadrant
RAM:0242 CD D8 0E		     call    init_sector
RAM:0245 06 08			     ld	     b,	#8
RAM:0247 CD 40 0D		     call    delay_B_and_update_all
RAM:024A C1			     pop     bc
RAM:024B CD C3 01		     call    keyboard_scan
RAM:024E CA 32 02		     jp	     Z,	loc_232
RAM:0251 FE 1B			     cp	     #0x1B					   ; <ESC>?
RAM:0253 C8			     ret     Z
RAM:0254 C3 27 02		     jp	     loc_227
RAM:0257	     ; ---------------------------------------------------------------------------
RAM:0257
RAM:0257	     impulse_drive:							   ; DATA XREF:	RAM:1796o
RAM:0257 3A 26 19		     ld	     a,	(pwr_warp_impulse)
RAM:025A FE 05			     cp	     #5
RAM:025C FA 0D 02		     jp	     M,	loc_20D
RAM:025F CD F8 0C		     call    rand_0_9
RAM:0262 FE 03			     cp	     #3
RAM:0264 D2 6A 02		     jp	     NC, loc_26A
RAM:0267 CD 5E 0A		     call    klingon_attack_and_move
RAM:026A
RAM:026A	     loc_26A:								   ; CODE XREF:	RAM:0264j
RAM:026A CD B5 0E		     call    clear_last_2_lines
RAM:026D CD 9F 0C		     call    get_next_cmd_char
RAM:0270
RAM:0270	     loc_270:								   ; CODE XREF:	RAM:02C5j
RAM:0270 D6 30			     sub     #0x30 ; '0'
RAM:0272 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:0275 FE 08			     cp	     #8
RAM:0277 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:027A 4F			     ld	     c,	a
RAM:027B CD 9F 0C		     call    get_next_cmd_char
RAM:027E CA 8C 02		     jp	     Z,	loc_28C
RAM:0281 47			     ld	     b,	a
RAM:0282 3E 3A			     ld	     a,	#0x3A ;	':'
RAM:0284 90			     sub     b
RAM:0285 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:0288 3C			     inc     a
RAM:0289 32 91 17		     ld	     (impulse_speed), a
RAM:028C
RAM:028C	     loc_28C:								   ; CODE XREF:	RAM:027Ej
RAM:028C 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:028F 79			     ld	     a,	c
RAM:0290 32 E8 17		     ld	     (impulse_dir), a
RAM:0293 A7			     and     a
RAM:0294 CA 9D 02		     jp	     Z,	loc_29D
RAM:0297
RAM:0297	     loc_297:								   ; CODE XREF:	RAM:029Aj
RAM:0297 23			     inc     hl
RAM:0298 23			     inc     hl
RAM:0299 3D			     dec     a
RAM:029A C2 97 02		     jp	     NZ, loc_297
RAM:029D
RAM:029D	     loc_29D:								   ; CODE XREF:	RAM:0294j
RAM:029D 5E			     ld	     e,	(hl)
RAM:029E 23			     inc     hl
RAM:029F 56			     ld	     d,	(hl)
RAM:02A0 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:02A3
RAM:02A3	     loc_2A3:								   ; CODE XREF:	RAM:02C0j
RAM:02A3 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:02A5 E5			     push    hl
RAM:02A6 19			     add     hl, de
RAM:02A7 7E			     ld	     a,	(hl)
RAM:02A8 E6 7F			     and     #0x7F ; ''
RAM:02AA FE 2E			     cp	     #0x2E ; '.'
RAM:02AC C2 D0 02		     jp	     NZ, loc_2D0
RAM:02AF 36 0C			     ld	     (hl), #0xC
RAM:02B1 3A 91 17		     ld	     a,	(impulse_speed)
RAM:02B4 47			     ld	     b,	a
RAM:02B5 CD 40 0D		     call    delay_B_and_update_all
RAM:02B8 E3			     ex	     (sp), hl
RAM:02B9 E1			     pop     hl
RAM:02BA 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:02BD CD C3 01		     call    keyboard_scan
RAM:02C0 CA A3 02		     jp	     Z,	loc_2A3
RAM:02C3 FE 1B			     cp	     #0x1B
RAM:02C5 C2 70 02		     jp	     NZ, loc_270
RAM:02C8 36 0C			     ld	     (hl), #0xC
RAM:02CA 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:02CD C3 D8 0E		     jp	     init_sector
RAM:02D0	     ; ---------------------------------------------------------------------------
RAM:02D0
RAM:02D0	     loc_2D0:								   ; CODE XREF:	RAM:02ACj
RAM:02D0 E1			     pop     hl
RAM:02D1 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:02D4 D5			     push    de
RAM:02D5 CD D8 0E		     call    init_sector
RAM:02D8 D1			     pop     de
RAM:02D9 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:02DC 36 0C			     ld	     (hl), #0xC
RAM:02DE 19			     add     hl, de
RAM:02DF 7E			     ld	     a,	(hl)
RAM:02E0 E6 7F			     and     #0x7F ; ''
RAM:02E2 FE 7F			     cp	     #0x7F ; ''
RAM:02E4 CA 19 03		     jp	     Z,	loc_319
RAM:02E7 FE 0E			     cp	     #0xE
RAM:02E9 CA 38 03		     jp	     Z,	dock_space_station
RAM:02EC FE 19			     cp	     #0x19
RAM:02EE CA 95 03		     jp	     Z,	hit_triton_mine
RAM:02F1 FE 07			     cp	     #7
RAM:02F3 CA C8 03		     jp	     Z,	hit_klingon_warship
RAM:02F6 FE 0F			     cp	     #0xF
RAM:02F8 CA C8 03		     jp	     Z,	hit_klingon_warship
RAM:02FB FE 2A			     cp	     #0x2A ; '*'
RAM:02FD CA 13 04		     jp	     Z,	hit_star
RAM:0300 FE 05			     cp	     #5
RAM:0302 C2 24 03		     jp	     NZ, left_quadrant
RAM:0305 3E FF			     ld	     a,	#0xFF
RAM:0307 32 E7 17		     ld	     (blocked_by_unknown), a
RAM:030A E5			     push    hl
RAM:030B 11 0B 11		     ld	     de, #aSpockCaptainWe			   ; "SPOCK:CAPTAIN, WE	HAVE BEEN BLOCKED BY "...
RAM:030E CD 31 0D		     call    print_string_last_line
RAM:0311 06 08			     ld	     b,	#8
RAM:0313 CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0316 C3 5A 05		     jp	     loc_55A
RAM:0319	     ; ---------------------------------------------------------------------------
RAM:0319
RAM:0319	     loc_319:								   ; CODE XREF:	RAM:02E4j
RAM:0319 AF			     xor     a
RAM:031A 32 27 19		     ld	     (pwr_lr_sensor), a
RAM:031D 32 28 19		     ld	     (pwr_sr_sensor), a
RAM:0320 3D			     dec     a
RAM:0321 32 76 1D		     ld	     (computer_malfunction), a
RAM:0324
RAM:0324	     left_quadrant:							   ; CODE XREF:	RAM:0302j
RAM:0324 3A E8 17		     ld	     a,	(impulse_dir)
RAM:0327 0E 01			     ld	     c,	#1
RAM:0329 CD 10 0B		     call    move_quadrant
RAM:032C CD 79 0B		     call    print_quadrant
RAM:032F 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0332 CD C4 0B		     call    init_quadrant
RAM:0335 C3 D8 0E		     jp	     init_sector
RAM:0338	     ; ---------------------------------------------------------------------------
RAM:0338
RAM:0338	     dock_space_station:						   ; CODE XREF:	RAM:02E9j
RAM:0338 11 44 11		     ld	     de, #aUhuraTheStarba			   ; "UHURA:THE	STARBASE HAS ACKNOWLEDGED OUR"...
RAM:033B CD 31 0D		     call    print_string_last_line
RAM:033E 97			     sub     a
RAM:033F 32 7A 1D		     ld	     (experimental_ray_disabled+2), a		   ; *** critical
RAM:0342 32 6F 1D		     ld	     (always_zero), a
RAM:0345 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:0348 21 BB CC		     ld	     hl, # VIDEO+0xBB
RAM:034B 11 7D 11		     ld	     de, #aDock					   ; " DOCK"
RAM:034E CD 37 0D		     call    print_string
RAM:0351 06 1A			     ld	     b,	#26
RAM:0353 CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0356 3E 99			     ld	     a,	#0x99 ;	'™'
RAM:0358 32 4A 19		     ld	     (power_avail), a
RAM:035B CD 52 0F		     call    print_power_avail
RAM:035E CD AD 06		     call    update_power_distribution
RAM:0361 21 7D CD		     ld	     hl, # VIDEO+0x17D
RAM:0364 36 31			     ld	     (hl), #0x31 ; '1'
RAM:0366 23			     inc     hl
RAM:0367 36 30			     ld	     (hl), #0x30 ; '0'
RAM:0369 3E 10			     ld	     a,	#0x10
RAM:036B 32 4B 19		     ld	     (photon_torps), a
RAM:036E 3E 03			     ld	     a,	#3
RAM:0370 32 4C 19		     ld	     (unused_194C), a
RAM:0373 32 BD 17		     ld	     (antimatter_pods),	a
RAM:0376 21 3E CE		     ld	     hl, # VIDEO+0x23E
RAM:0379 CD 58 0F		     call    print_BCD_byte
RAM:037C 21 5C 1D		     ld	     hl, #antimatter_pod_tbl
RAM:037F 11 06 00		     ld	     de, #6
RAM:0382 06 03			     ld	     b,	#3
RAM:0384
RAM:0384	     loc_384:								   ; CODE XREF:	RAM:0388j
RAM:0384 36 00			     ld	     (hl), #0
RAM:0386 19			     add     hl, de
RAM:0387 05			     dec     b
RAM:0388 C2 84 03		     jp	     NZ, loc_384
RAM:038B 97			     sub     a
RAM:038C 32 74 1D		     ld	     (loc_1D73+1), a				   ; *** warp_disabled
RAM:038F 32 76 1D		     ld	     (computer_malfunction), a
RAM:0392 C3 B5 0E		     jp	     clear_last_2_lines
RAM:0395	     ; ---------------------------------------------------------------------------
RAM:0395	     ; START OF	FUNCTION CHUNK FOR move_photon_torpedo
RAM:0395
RAM:0395	     hit_triton_mine:							   ; CODE XREF:	RAM:02EEj
RAM:0395										   ; fire_phasor+3Dj ...
RAM:0395 11 95 11		     ld	     de, #aSpockSirWeHave			   ; "SPOCK: SIR, WE HAVE HIT A	TRITON MINE"
RAM:0398 CD 31 0D		     call    print_string_last_line
RAM:0398	     ; END OF FUNCTION CHUNK FOR move_photon_torpedo
RAM:039B	     ; START OF	FUNCTION CHUNK FOR handle_low_power
RAM:039B
RAM:039B	     print_game_over_screen:						   ; CODE XREF:	handle_low_power-7D9j
RAM:039B										   ; RAM:0422j	...
RAM:039B 97			     sub     a
RAM:039C 32 72 1D		     ld	     (cmd_flag), a
RAM:039F CD 76 0E		     call    animate_destruction
RAM:03A2 06 20			     ld	     b,	#0x20 ;	' '
RAM:03A4 CD EC 0C		     call    clear_video_with_B
RAM:03A7 11 29 1A		     ld	     de, #aHQ_Officer				   ; "	       ...	   "
RAM:03AA CD C4 0E		     call    print_10_lines
RAM:03AD 11 57 16		     ld	     de, #aShipsLogUssExe			   ; "SHIPS LOG-USS EXETER-CAPTAIN FOX:	SENSO"...
RAM:03B0 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:03B3 CD 37 0D		     call    print_string
RAM:03B6 06 11			     ld	     b,	#0x11
RAM:03B8
RAM:03B8	     loc_3B8:								   ; CODE XREF:	print_klingons_left+2Cj
RAM:03B8 11 00 00		     ld	     de, #0
RAM:03BB
RAM:03BB	     loc_3BB:								   ; CODE XREF:	handle_low_power-5DBj
RAM:03BB										   ; handle_low_power-5D7j
RAM:03BB 1B			     dec     de
RAM:03BC 7A			     ld	     a,	d
RAM:03BD B3			     or	     e
RAM:03BE C2 BB 03		     jp	     NZ, loc_3BB
RAM:03C1 05			     dec     b
RAM:03C2 C2 BB 03		     jp	     NZ, loc_3BB
RAM:03C5 C3 04 00		     jp	     loc_4
RAM:03C5	     ; END OF FUNCTION CHUNK FOR handle_low_power
RAM:03C8	     ; ---------------------------------------------------------------------------
RAM:03C8
RAM:03C8	     hit_klingon_warship:						   ; CODE XREF:	RAM:02F3j
RAM:03C8										   ; RAM:02F8j
RAM:03C8 11 4D 19		     ld	     de, #aJovianOfficer			   ; "	      .---.	   "
RAM:03CB CD C4 0E		     call    print_10_lines
RAM:03CE 11 EC 11		     ld	     de, #aKlingonWatchWh			   ; "KLINGON: WATCH WHERE YOU ARE GOING YOU "...
RAM:03D1 CD 31 0D		     call    print_string_last_line
RAM:03D4 11 BB 11		     ld	     de, #aUhuraSirWeMade			   ; "UHURA:SIR, WE MADE CONTACT WITH A	KLING"...
RAM:03D7 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:03DA CD 37 0D		     call    print_string
RAM:03DD 3E 01			     ld	     a,	#1
RAM:03DF 32 79 1D		     ld	     (experimental_ray_disabled+1), a		   ; *** disable_pod_update
RAM:03E2 1E 14			     ld	     e,	#0x14
RAM:03E4
RAM:03E4	     loc_3E4:								   ; CODE XREF:	RAM:040Aj
RAM:03E4 CD B2 0C		     call    rnd_delay
RAM:03E7 21 20 CD		     ld	     hl, # VIDEO+0x120
RAM:03EA 36 13			     ld	     (hl), #0x13
RAM:03EC 23			     inc     hl
RAM:03ED 23			     inc     hl
RAM:03EE 36 13			     ld	     (hl), #0x13
RAM:03F0 21 E1 CD		     ld	     hl, # VIDEO+0x1E1
RAM:03F3 36 2D			     ld	     (hl), #0x2D ; '-'
RAM:03F5 CD B2 0C		     call    rnd_delay
RAM:03F8 21 20 CD		     ld	     hl, # VIDEO+0x120
RAM:03FB 36 12			     ld	     (hl), #0x12
RAM:03FD 23			     inc     hl
RAM:03FE 23			     inc     hl
RAM:03FF 36 12			     ld	     (hl), #0x12
RAM:0401 21 E1 CD		     ld	     hl, # VIDEO+0x1E1
RAM:0404 36 1B			     ld	     (hl), #0x1B
RAM:0406 CD 43 0D		     call    update_chaser_pods_cmd_entry
RAM:0409 1D			     dec     e
RAM:040A C2 E4 03		     jp	     NZ, loc_3E4
RAM:040D 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0410 C3 C4 0B		     jp	     init_quadrant
RAM:0413	     ; ---------------------------------------------------------------------------
RAM:0413
RAM:0413	     hit_star:								   ; CODE XREF:	RAM:02FDj
RAM:0413 11 1C 12		     ld	     de, #aSuluWeHitAStar			   ; "SULU:WE HIT A STAR!?!"
RAM:0416 CD 31 0D		     call    print_string_last_line
RAM:0419	     ; *** BUG #002
RAM:0419	     ; this value is an	index into a duty cycle	table
RAM:0419	     ; which only has 4	entries
RAM:0419	     ; - can only assume it's picking up a garbage value
RAM:0419 3E 11			     ld	     a,	#17
RAM:041B 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:041E 47			     ld	     b,	a
RAM:041F CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0422 C3 9B 03		     jp	     print_game_over_screen
RAM:0425	     ; ---------------------------------------------------------------------------
RAM:0425
RAM:0425	     phasors:								   ; DATA XREF:	RAM:1798o
RAM:0425 CD B5 0E		     call    clear_last_2_lines
RAM:0428 3E FF			     ld	     a,	#0xFF
RAM:042A 32 75 1D		     ld	     (loc_1D73+2), a				   ; *** phasor_fired
RAM:042D 3A 2A 19		     ld	     a,	(pwr_phasors)
RAM:0430 FE 08			     cp	     #8
RAM:0432 F2 3B 04		     jp	     P,	loc_43B
RAM:0435 11 32 12		     ld	     de, #aScottCaptainWe			   ; "SCOTT:CAPTAIN, WE	HAVEN'T THE POWER TO "...
RAM:0438 C3 31 0D		     jp	     print_string_last_line
RAM:043B	     ; ---------------------------------------------------------------------------
RAM:043B
RAM:043B	     loc_43B:								   ; CODE XREF:	RAM:0432j
RAM:043B CD 9F 0C		     call    get_next_cmd_char
RAM:043E D6 30			     sub     #0x30 ; '0'
RAM:0440 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:0443 FE 08			     cp	     #8
RAM:0445 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:0448
RAM:0448	     ; =============== S U B R O U T I N E =======================================
RAM:0448
RAM:0448
RAM:0448	     fire_phasor:							   ; CODE XREF:	RAM:059Cp
RAM:0448 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:044B A7			     and     a
RAM:044C CA 55 04		     jp	     Z,	loc_455
RAM:044F
RAM:044F	     loc_44F:								   ; CODE XREF:	fire_phasor+Aj
RAM:044F 23			     inc     hl
RAM:0450 23			     inc     hl
RAM:0451 3D			     dec     a
RAM:0452 C2 4F 04		     jp	     NZ, loc_44F
RAM:0455
RAM:0455	     loc_455:								   ; CODE XREF:	fire_phasor+4j
RAM:0455 5E			     ld	     e,	(hl)
RAM:0456 23			     inc     hl
RAM:0457 56			     ld	     d,	(hl)
RAM:0458 3A 70 1D		     ld	     a,	(delay_duty_cycle_i)
RAM:045B 32 86 17		     ld	     (tmp_delay_cycle),	a
RAM:045E 3E 02			     ld	     a,	#2
RAM:0460 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:0463 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:0466 06 00			     ld	     b,	#0
RAM:0468 D5			     push    de
RAM:0469
RAM:0469	     move_phasor:							   ; CODE XREF:	fire_phasor+33j
RAM:0469 19			     add     hl, de
RAM:046A 7E			     ld	     a,	(hl)
RAM:046B C6 80			     add     a,	#0x80 ;	'€'
RAM:046D 77			     ld	     (hl), a
RAM:046E C5			     push    bc
RAM:046F 06 01			     ld	     b,	#1
RAM:0471 CD 40 0D		     call    delay_B_and_update_all
RAM:0474 C1			     pop     bc
RAM:0475 7E			     ld	     a,	(hl)
RAM:0476 E6 7F			     and     #0x7F ; ''
RAM:0478 04			     inc     b
RAM:0479 FE 2E			     cp	     #0x2E ; '.'
RAM:047B CA 69 04		     jp	     Z,	move_phasor
RAM:047E FE 07			     cp	     #7
RAM:0480 CA A5 04		     jp	     Z,	phasor_hit_klingon
RAM:0483 FE 19			     cp	     #0x19
RAM:0485 CA 95 03		     jp	     Z,	hit_triton_mine
RAM:0488 FE 05			     cp	     #5
RAM:048A C2 9A 04		     jp	     NZ, phasor_miss
RAM:048D D1			     pop     de
RAM:048E E5			     push    hl
RAM:048F 21 97 04		     ld	     hl, #loc_497
RAM:0492 E3			     ex	     (sp), hl
RAM:0493 D5			     push    de
RAM:0494 C3 BB 04		     jp	     wipe_phasor
RAM:0497	     ; ---------------------------------------------------------------------------
RAM:0497
RAM:0497	     loc_497:								   ; DATA XREF:	fire_phasor+47o
RAM:0497 C3 59 05		     jp	     shot_hit_unknown
RAM:049A	     ; ---------------------------------------------------------------------------
RAM:049A
RAM:049A	     phasor_miss:							   ; CODE XREF:	fire_phasor+42j
RAM:049A 11 66 12		     ld	     de, #aSpockSirMySens			   ; "SPOCK:SIR, MY SENSORS SHOW PHASER	HAD N"...
RAM:049D C5			     push    bc
RAM:049E CD 31 0D		     call    print_string_last_line
RAM:04A1 C1			     pop     bc
RAM:04A2 C3 BB 04		     jp	     wipe_phasor
RAM:04A5	     ; ---------------------------------------------------------------------------
RAM:04A5
RAM:04A5	     phasor_hit_klingon:						   ; CODE XREF:	fire_phasor+38j
RAM:04A5 CD F8 0C		     call    rand_0_9
RAM:04A8 FE 07			     cp	     #7
RAM:04AA FA BB 04		     jp	     M,	wipe_phasor
RAM:04AD 36 AE			     ld	     (hl), #0xAE ; '®'
RAM:04AF C5			     push    bc
RAM:04B0 CD 13 0F		     call    dec_klingons
RAM:04B3 C1			     pop     bc
RAM:04B4 3A C5 CC		     ld	     a,	(VIDEO+0xC5)
RAM:04B7 3D			     dec     a
RAM:04B8 32 C5 CC		     ld	     (VIDEO+0xC5), a
RAM:04BB
RAM:04BB	     wipe_phasor:							   ; CODE XREF:	fire_phasor+4Cj
RAM:04BB										   ; fire_phasor+5Aj ...
RAM:04BB CD 43 0D		     call    update_chaser_pods_cmd_entry
RAM:04BE D1			     pop     de
RAM:04BF 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:04C2
RAM:04C2	     loc_4C2:								   ; CODE XREF:	fire_phasor+87j
RAM:04C2 19			     add     hl, de
RAM:04C3 7E			     ld	     a,	(hl)
RAM:04C4 D6 80			     sub     #0x80 ; '€'
RAM:04C6 77			     ld	     (hl), a
RAM:04C7 C5			     push    bc
RAM:04C8 06 01			     ld	     b,	#1
RAM:04CA CD 40 0D		     call    delay_B_and_update_all
RAM:04CD C1			     pop     bc
RAM:04CE 05			     dec     b
RAM:04CF C2 C2 04		     jp	     NZ, loc_4C2
RAM:04D2 3A 86 17		     ld	     a,	(tmp_delay_cycle)
RAM:04D5 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:04D8 C9			     ret
RAM:04D8	     ; End of function fire_phasor
RAM:04D8
RAM:04D9	     ; ---------------------------------------------------------------------------
RAM:04D9
RAM:04D9	     photon_torpedo:							   ; DATA XREF:	RAM:179Ao
RAM:04D9 CD B5 0E		     call    clear_last_2_lines
RAM:04DC CD 6A 0F		     call    dec_photon_torps_and_print
RAM:04DF DA 69 06		     jp	     C,	print_no_more_photon_torps
RAM:04E2 3A 2B 19		     ld	     a,	(pwr_photon_torps)
RAM:04E5 FE 0A			     cp	     #0xA
RAM:04E7 F2 F0 04		     jp	     P,	photon_pwr_ok
RAM:04EA
RAM:04EA	     loc_4EA:								   ; CODE XREF:	RAM:0875j
RAM:04EA 11 96 12		     ld	     de, #aScottCaptain_1			   ; "SCOTT:CAPTAIN, THE TORPEDO TUBES ARE PO"...
RAM:04ED C3 31 0D		     jp	     print_string_last_line
RAM:04F0	     ; ---------------------------------------------------------------------------
RAM:04F0
RAM:04F0	     photon_pwr_ok:							   ; CODE XREF:	RAM:04E7j
RAM:04F0 CD 9F 0C		     call    get_next_cmd_char
RAM:04F3 D6 30			     sub     #0x30 ; '0'
RAM:04F5 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:04F8 FE 08			     cp	     #8
RAM:04FA F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:04FD
RAM:04FD	     ; =============== S U B R O U T I N E =======================================
RAM:04FD
RAM:04FD
RAM:04FD	     move_photon_torpedo:						   ; CODE XREF:	RAM:05B7p
RAM:04FD										   ; RAM:079Fp	...
RAM:04FD
RAM:04FD	     ; FUNCTION	CHUNK AT RAM:0395 SIZE 00000006	BYTES
RAM:04FD	     ; FUNCTION	CHUNK AT RAM:056F SIZE 00000017	BYTES
RAM:04FD	     ; FUNCTION	CHUNK AT RAM:0655 SIZE 00000014	BYTES
RAM:04FD	     ; FUNCTION	CHUNK AT RAM:0846 SIZE 0000000F	BYTES
RAM:04FD
RAM:04FD 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:0500 A7			     and     a
RAM:0501 CA 0A 05		     jp	     Z,	loc_50A
RAM:0504
RAM:0504	     loc_504:								   ; CODE XREF:	move_photon_torpedo+Aj
RAM:0504 23			     inc     hl
RAM:0505 23			     inc     hl
RAM:0506 3D			     dec     a
RAM:0507 C2 04 05		     jp	     NZ, loc_504
RAM:050A
RAM:050A	     loc_50A:								   ; CODE XREF:	move_photon_torpedo+4j
RAM:050A 5E			     ld	     e,	(hl)
RAM:050B 23			     inc     hl
RAM:050C 56			     ld	     d,	(hl)
RAM:050D 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:0510
RAM:0510	     loc_510:								   ; CODE XREF:	move_photon_torpedo+28j
RAM:0510										   ; move_photon_torpedo+2Dj
RAM:0510 19			     add     hl, de
RAM:0511 7E			     ld	     a,	(hl)
RAM:0512 E6 7F			     and     #0x7F ; ''
RAM:0514 FE 2E			     cp	     #0x2E ; '.'
RAM:0516 C2 2D 05		     jp	     NZ, loc_52D
RAM:0519 36 AB			     ld	     (hl), #0xAB ; '«'
RAM:051B 06 06			     ld	     b,	#6
RAM:051D CD 40 0D		     call    delay_B_and_update_all
RAM:0520 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:0522 CD C3 01		     call    keyboard_scan
RAM:0525 CA 10 05		     jp	     Z,	loc_510
RAM:0528 FE 1B			     cp	     #0x1B
RAM:052A C2 10 05		     jp	     NZ, loc_510
RAM:052D
RAM:052D	     loc_52D:								   ; CODE XREF:	move_photon_torpedo+19j
RAM:052D 7E			     ld	     a,	(hl)
RAM:052E C6 80			     add     a,	#0x80 ;	'€'
RAM:0530 77			     ld	     (hl), a
RAM:0531 06 06			     ld	     b,	#6
RAM:0533 CD 40 0D		     call    delay_B_and_update_all
RAM:0536 7E			     ld	     a,	(hl)
RAM:0537 D6 80			     sub     #0x80 ; '€'
RAM:0539 77			     ld	     (hl), a
RAM:053A FE 0E			     cp	     #0xE
RAM:053C CA 61 06		     jp	     Z,	torpedo_destroyed_object
RAM:053F FE 07			     cp	     #7
RAM:0541 CA 55 06		     jp	     Z,	torpedo_hit_klingon
RAM:0544 FE 19			     cp	     #0x19
RAM:0546 CA 95 03		     jp	     Z,	hit_triton_mine
RAM:0549 FE 05			     cp	     #5
RAM:054B CA 59 05		     jp	     Z,	shot_hit_unknown
RAM:054E FE 0C			     cp	     #0xC
RAM:0550 CA 46 08		     jp	     Z,	power_minus_2_and_update
RAM:0553 11 87 15		     ld	     de, #aComputerPhoton			   ; "COMPUTER:PHOTON TORPEDO HAS NO EFFECT"
RAM:0556 C3 31 0D		     jp	     print_string_last_line
RAM:0559	     ; ---------------------------------------------------------------------------
RAM:0559
RAM:0559	     shot_hit_unknown:							   ; CODE XREF:	fire_phasor:loc_497j
RAM:0559										   ; move_photon_torpedo+4Ej
RAM:0559 E5			     push    hl
RAM:055A
RAM:055A	     loc_55A:								   ; CODE XREF:	RAM:0316j
RAM:055A										   ; RAM:0630j
RAM:055A CD F8 0C		     call    rand_0_9
RAM:055D A7			     and     a
RAM:055E CA 6F 05		     jp	     Z,	finish_shot
RAM:0561 21 BC 17		     ld	     hl, #0x17BC				   ; *** missile_hit_unknown_tbl-2
RAM:0564
RAM:0564	     loc_564:								   ; CODE XREF:	move_photon_torpedo+6Aj
RAM:0564 3D			     dec     a
RAM:0565 23			     inc     hl
RAM:0566 23			     inc     hl
RAM:0567 C2 64 05		     jp	     NZ, loc_564
RAM:0567	     ; End of function move_photon_torpedo
RAM:0567
RAM:056A	     ; START OF	FUNCTION CHUNK FOR update_chaser_pods_cmd_entry
RAM:056A
RAM:056A	     jump_HL_vector:							   ; CODE XREF:	RAM:0793j
RAM:056A										   ; update_chaser_pods_cmd_entry+130j
RAM:056A 7E			     ld	     a,	(hl)
RAM:056B 23			     inc     hl
RAM:056C 66			     ld	     h,	(hl)
RAM:056D 6F			     ld	     l,	a
RAM:056E E9			     jp	     (hl)
RAM:056E	     ; END OF FUNCTION CHUNK FOR update_chaser_pods_cmd_entry
RAM:056F	     ; ---------------------------------------------------------------------------
RAM:056F	     ; START OF	FUNCTION CHUNK FOR move_photon_torpedo
RAM:056F
RAM:056F	     finish_shot:							   ; CODE XREF:	move_photon_torpedo+61j
RAM:056F E1			     pop     hl
RAM:0570 3A E7 17		     ld	     a,	(blocked_by_unknown)
RAM:0573 A7			     and     a
RAM:0574 F2 7C 05		     jp	     P,	loc_57C
RAM:0577 AF			     xor     a
RAM:0578 32 E7 17		     ld	     (blocked_by_unknown), a
RAM:057B C9			     ret
RAM:057C	     ; ---------------------------------------------------------------------------
RAM:057C
RAM:057C	     loc_57C:								   ; CODE XREF:	move_photon_torpedo+77j
RAM:057C 3A 75 1D		     ld	     a,	(loc_1D73+2)				   ; *** phasor_fired
RAM:057F 97			     sub     a
RAM:0580 32 75 1D		     ld	     (loc_1D73+2), a				   ; *** phasor_fired
RAM:0583 C3 61 06		     jp	     torpedo_destroyed_object
RAM:0583	     ; END OF FUNCTION CHUNK FOR move_photon_torpedo
RAM:0586	     ; ---------------------------------------------------------------------------
RAM:0586
RAM:0586	     torpedo_hit_unk_079:						   ; DATA XREF:	RAM:torpedo_hit_unknown_tblo
RAM:0586										   ; RAM:17CCo	...
RAM:0586 3A 75 1D		     ld	     a,	(loc_1D73+2)				   ; *** phasor_fired
RAM:0589 A7			     and     a
RAM:058A 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:058D E3			     ex	     (sp), hl
RAM:058E 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:0591 F2 A2 05		     jp	     P,	loc_5A2
RAM:0594
RAM:0594	     loc_594:								   ; CODE XREF:	RAM:0599j
RAM:0594 CD F8 0C		     call    rand_0_9
RAM:0597 FE 08			     cp	     #8
RAM:0599 F2 94 05		     jp	     P,	loc_594
RAM:059C CD 48 04		     call    fire_phasor
RAM:059F C3 BA 05		     jp	     loc_5BA
RAM:05A2	     ; ---------------------------------------------------------------------------
RAM:05A2
RAM:05A2	     loc_5A2:								   ; CODE XREF:	RAM:0591j
RAM:05A2 3A E7 17		     ld	     a,	(blocked_by_unknown)
RAM:05A5 B7			     or	     a
RAM:05A6 F2 AF 05		     jp	     P,	loc_5AF
RAM:05A9 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:05AB E1			     pop     hl
RAM:05AC 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:05AE C9			     ret
RAM:05AF	     ; ---------------------------------------------------------------------------
RAM:05AF
RAM:05AF	     loc_5AF:								   ; CODE XREF:	RAM:05A6j
RAM:05AF										   ; RAM:05B4j
RAM:05AF CD F8 0C		     call    rand_0_9
RAM:05B2 FE 08			     cp	     #8
RAM:05B4 F2 AF 05		     jp	     P,	loc_5AF
RAM:05B7 CD FD 04		     call    move_photon_torpedo
RAM:05BA
RAM:05BA	     loc_5BA:								   ; CODE XREF:	RAM:059Fj
RAM:05BA E1			     pop     hl
RAM:05BB 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:05BE C9			     ret
RAM:05BF	     ; ---------------------------------------------------------------------------
RAM:05BF
RAM:05BF	     torpedo_hit_unk_1:							   ; DATA XREF:	RAM:17C0o
RAM:05BF 3E 05			     ld	     a,	#5
RAM:05C1 32 D5 05		     ld	     (loc_5D4+1), a				   ; patch!
RAM:05C4
RAM:05C4	     loc_5C4:								   ; CODE XREF:	RAM:05F4j
RAM:05C4 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:05C7 11 2B 00		     ld	     de, #0x2B ; '+'
RAM:05CA 06 0A			     ld	     b,	#0xA
RAM:05CC
RAM:05CC	     loc_5CC:								   ; CODE XREF:	RAM:05DDj
RAM:05CC 0E 15			     ld	     c,	#0x15
RAM:05CE
RAM:05CE	     loc_5CE:								   ; CODE XREF:	RAM:05D8j
RAM:05CE 7E			     ld	     a,	(hl)
RAM:05CF FE 2E			     cp	     #0x2E ; '.'
RAM:05D1 C2 D6 05		     jp	     NZ, loc_5D6
RAM:05D4	     ; the object graphic is patched ()
RAM:05D4
RAM:05D4	     loc_5D4:								   ; DATA XREF:	RAM:05C1w
RAM:05D4										   ; RAM:05F1w
RAM:05D4 36 05			     ld	     (hl), #5
RAM:05D6
RAM:05D6	     loc_5D6:								   ; CODE XREF:	RAM:05D1j
RAM:05D6 0D			     dec     c
RAM:05D7 23			     inc     hl
RAM:05D8 C2 CE 05		     jp	     NZ, loc_5CE
RAM:05DB 19			     add     hl, de
RAM:05DC 05			     dec     b
RAM:05DD C2 CC 05		     jp	     NZ, loc_5CC
RAM:05E0 CD F8 0C		     call    rand_0_9
RAM:05E3 FE 05			     cp	     #5
RAM:05E5 D2 ED 05		     jp	     NC, loc_5ED
RAM:05E8 3E FF			     ld	     a,	#0xFF
RAM:05EA 32 74 1D		     ld	     (loc_1D73+1), a				   ; *** warp_disabled
RAM:05ED
RAM:05ED	     loc_5ED:								   ; CODE XREF:	RAM:05E5j
RAM:05ED E1			     pop     hl
RAM:05EE C9			     ret
RAM:05EF	     ; ---------------------------------------------------------------------------
RAM:05EF
RAM:05EF	     torpedo_hit_unk_2:							   ; DATA XREF:	RAM:17C2o
RAM:05EF 3E 19			     ld	     a,	#0x19
RAM:05F1 32 D5 05		     ld	     (loc_5D4+1), a				   ; patch!
RAM:05F4 C3 C4 05		     jp	     loc_5C4
RAM:05F7	     ; ---------------------------------------------------------------------------
RAM:05F7
RAM:05F7	     torpedo_hit_unk_6:							   ; DATA XREF:	RAM:17CAo
RAM:05F7 CD F8 0C		     call    rand_0_9
RAM:05FA FE 05			     cp	     #5
RAM:05FC DA 27 06		     jp	     C,	torpedo_hit_unk_4
RAM:05FF E1			     pop     hl
RAM:0600 36 0E			     ld	     (hl), #0xE
RAM:0602 C9			     ret
RAM:0603	     ; ---------------------------------------------------------------------------
RAM:0603
RAM:0603	     torpedo_hit_unk_3:							   ; DATA XREF:	RAM:17C4o
RAM:0603 CD F8 0C		     call    rand_0_9
RAM:0606 07			     rlca
RAM:0607 07			     rlca
RAM:0608 07			     rlca
RAM:0609 07			     rlca
RAM:060A 47			     ld	     b,	a
RAM:060B CD F8 0C		     call    rand_0_9
RAM:060E 80			     add     a,	b
RAM:060F 32 F3 17		     ld	     (quadrant), a
RAM:0612 3E 03			     ld	     a,	#3
RAM:0614 0E 01			     ld	     c,	#1
RAM:0616 CD 10 0B		     call    move_quadrant
RAM:0619 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:061C CD C4 0B		     call    init_quadrant
RAM:061F CD 79 0B		     call    print_quadrant
RAM:0622 CD D8 0E		     call    init_sector
RAM:0625 E1			     pop     hl
RAM:0626 C9			     ret
RAM:0627	     ; ---------------------------------------------------------------------------
RAM:0627
RAM:0627	     torpedo_hit_unk_4:							   ; CODE XREF:	RAM:05FCj
RAM:0627										   ; DATA XREF:	RAM:17C6o
RAM:0627 CD F8 0C		     call    rand_0_9
RAM:062A CD B2 0C		     call    rnd_delay
RAM:062D 32 6F 1D		     ld	     (always_zero), a
RAM:0630 C3 5A 05		     jp	     loc_55A
RAM:0633	     ; ---------------------------------------------------------------------------
RAM:0633
RAM:0633	     torpedo_hit_unk_58:						   ; DATA XREF:	RAM:17C8o
RAM:0633										   ; RAM:17CEo
RAM:0633 11 57 17		     ld	     de, #aSpockTheUnknow			   ; "SPOCK: THE UNKNOWN IS STEALING POWER CA"...
RAM:0636 CD 31 0D		     call    print_string_last_line
RAM:0639 E1			     pop     hl
RAM:063A
RAM:063A	     loc_63A:								   ; CODE XREF:	RAM:064Aj
RAM:063A CD F8 0C		     call    rand_0_9
RAM:063D FE 04			     cp	     #4
RAM:063F DA 4D 06		     jp	     C,	loc_64D
RAM:0642 06 12			     ld	     b,	#18
RAM:0644 CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0647 CD 5E 0A		     call    klingon_attack_and_move
RAM:064A C3 3A 06		     jp	     loc_63A
RAM:064D	     ; ---------------------------------------------------------------------------
RAM:064D
RAM:064D	     loc_64D:								   ; CODE XREF:	RAM:063Fj
RAM:064D 06 19			     ld	     b,	#25
RAM:064F CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0652 C3 B5 0E		     jp	     clear_last_2_lines
RAM:0655	     ; ---------------------------------------------------------------------------
RAM:0655	     ; START OF	FUNCTION CHUNK FOR move_photon_torpedo
RAM:0655
RAM:0655	     torpedo_hit_klingon:						   ; CODE XREF:	move_photon_torpedo+44j
RAM:0655 E5			     push    hl
RAM:0656 CD 13 0F		     call    dec_klingons
RAM:0659 3A C5 CC		     ld	     a,	(VIDEO+0xC5)
RAM:065C 3D			     dec     a
RAM:065D 32 C5 CC		     ld	     (VIDEO+0xC5), a
RAM:0660 E1			     pop     hl
RAM:0661
RAM:0661	     torpedo_destroyed_object:						   ; CODE XREF:	move_photon_torpedo+3Fj
RAM:0661										   ; move_photon_torpedo+86j
RAM:0661 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:0663 11 CB 12		     ld	     de, #aComputerObject			   ; "COMPUTER:OBJECT DESTROYED"
RAM:0666 C3 31 0D		     jp	     print_string_last_line
RAM:0666	     ; END OF FUNCTION CHUNK FOR move_photon_torpedo
RAM:0669	     ; ---------------------------------------------------------------------------
RAM:0669
RAM:0669	     print_no_more_photon_torps:					   ; CODE XREF:	RAM:04DFj
RAM:0669 11 E8 13		     ld	     de, #aChekovSirWeHav			   ; "CHEKOV:SIR, WE HAVE NO MORE PHOTON TORP"...
RAM:066C C3 31 0D		     jp	     print_string_last_line
RAM:066F	     ; ---------------------------------------------------------------------------
RAM:066F
RAM:066F	     power_distribution:						   ; DATA XREF:	RAM:179Co
RAM:066F 97			     sub     a
RAM:0670 32 7A 1D		     ld	     (experimental_ray_disabled+2), a		   ; *** critical
RAM:0673 CD B5 0E		     call    clear_last_2_lines
RAM:0676 CD 9F 0C		     call    get_next_cmd_char
RAM:0679 21 B3 17		     ld	     hl, #pwr_subcmd_tbl			   ; "WLSDPT"
RAM:067C 11 26 19		     ld	     de, #pwr_warp_impulse
RAM:067F 47			     ld	     b,	a
RAM:0680
RAM:0680	     loc_680:								   ; CODE XREF:	RAM:068Bj
RAM:0680 7E			     ld	     a,	(hl)
RAM:0681 A7			     and     a
RAM:0682 CA FD 0A		     jp	     Z,	print_no_sense_and_ret
RAM:0685 B8			     cp	     b
RAM:0686 CA 8E 06		     jp	     Z,	pwr_subcmd_ok
RAM:0689 23			     inc     hl
RAM:068A 13			     inc     de
RAM:068B C3 80 06		     jp	     loc_680
RAM:068E	     ; ---------------------------------------------------------------------------
RAM:068E
RAM:068E	     pwr_subcmd_ok:							   ; CODE XREF:	RAM:0686j
RAM:068E CD 9F 0C		     call    get_next_cmd_char
RAM:0691 CA 96 06		     jp	     Z,	loc_696
RAM:0694 D6 30			     sub     #0x30 ; '0'
RAM:0696
RAM:0696	     loc_696:								   ; CODE XREF:	RAM:0691j
RAM:0696 47			     ld	     b,	a
RAM:0697 CD 9F 0C		     call    get_next_cmd_char
RAM:069A C2 A3 06		     jp	     NZ, loc_6A3
RAM:069D 48			     ld	     c,	b
RAM:069E 06 00			     ld	     b,	#0
RAM:06A0 C3 A6 06		     jp	     loc_6A6
RAM:06A3	     ; ---------------------------------------------------------------------------
RAM:06A3
RAM:06A3	     loc_6A3:								   ; CODE XREF:	RAM:069Aj
RAM:06A3 D6 30			     sub     #0x30 ; '0'
RAM:06A5 4F			     ld	     c,	a
RAM:06A6
RAM:06A6	     loc_6A6:								   ; CODE XREF:	RAM:06A0j
RAM:06A6 78			     ld	     a,	b
RAM:06A7 0F			     rrca
RAM:06A8 0F			     rrca
RAM:06A9 0F			     rrca
RAM:06AA 0F			     rrca
RAM:06AB B1			     or	     c
RAM:06AC 12			     ld	     (de), a
RAM:06AD
RAM:06AD	     ; =============== S U B R O U T I N E =======================================
RAM:06AD
RAM:06AD
RAM:06AD	     update_power_distribution:						   ; CODE XREF:	RAM:035Ep
RAM:06AD										   ; move_photon_torpedo+355j ...
RAM:06AD 06 06			     ld	     b,	#6
RAM:06AF 11 CD CD		     ld	     de, # VIDEO+0x1CD
RAM:06B2 97			     sub     a
RAM:06B3 32 71 1D		     ld	     (power_overflow), a
RAM:06B6 21 26 19		     ld	     hl, #pwr_warp_impulse
RAM:06B9
RAM:06B9	     loc_6B9:								   ; CODE XREF:	update_power_distribution+32j
RAM:06B9 86			     add     a,	(hl)
RAM:06BA 27			     daa
RAM:06BB D2 C3 06		     jp	     NC, loc_6C3
RAM:06BE 3E FF			     ld	     a,	#0xFF
RAM:06C0 32 71 1D		     ld	     (power_overflow), a
RAM:06C3
RAM:06C3	     loc_6C3:								   ; CODE XREF:	update_power_distribution+Ej
RAM:06C3 4F			     ld	     c,	a
RAM:06C4 7E			     ld	     a,	(hl)
RAM:06C5 0F			     rrca
RAM:06C6 0F			     rrca
RAM:06C7 0F			     rrca
RAM:06C8 0F			     rrca
RAM:06C9 E6 0F			     and     #0xF
RAM:06CB C6 30			     add     a,	#0x30 ;	'0'
RAM:06CD 12			     ld	     (de), a
RAM:06CE 13			     inc     de
RAM:06CF 7E			     ld	     a,	(hl)
RAM:06D0 E6 0F			     and     #0xF
RAM:06D2 C6 30			     add     a,	#0x30 ;	'0'
RAM:06D4 12			     ld	     (de), a
RAM:06D5 E5			     push    hl
RAM:06D6 21 3F 00		     ld	     hl, #0x3F ; '?'
RAM:06D9 19			     add     hl, de
RAM:06DA EB			     ex	     de, hl
RAM:06DB E1			     pop     hl
RAM:06DC 05			     dec     b
RAM:06DD 23			     inc     hl
RAM:06DE 79			     ld	     a,	c
RAM:06DF C2 B9 06		     jp	     NZ, loc_6B9
RAM:06E2 47			     ld	     b,	a
RAM:06E3 3A 71 1D		     ld	     a,	(power_overflow)
RAM:06E6 A7			     and     a
RAM:06E7 FA EF 06		     jp	     M,	loc_6EF
RAM:06EA 3A 4A 19		     ld	     a,	(power_avail)
RAM:06ED B8			     cp	     b
RAM:06EE D0			     ret     NC
RAM:06EF
RAM:06EF	     loc_6EF:								   ; CODE XREF:	update_power_distribution+3Aj
RAM:06EF 11 04 13		     ld	     de, #aScottCaptain_0			   ; "SCOTT:CAPTAIN, THE ENGINES ARE OVERLOAD"...
RAM:06F2 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:06F5 CD 34 0D		     call    clear_last_2_lines_print_string
RAM:06F8 06 10			     ld	     b,	#16
RAM:06FA CD B7 0C		     call    delay_B_with_duty_cycle
RAM:06FD 3A 7A 1D		     ld	     a,	(experimental_ray_disabled+2)
RAM:0700 A7			     and     a
RAM:0701 F8			     ret     M
RAM:0702
RAM:0702	     loc_702:								   ; CODE XREF:	update_power_distribution+5Aj
RAM:0702 CD F8 0C		     call    rand_0_9
RAM:0705 FE 04			     cp	     #4
RAM:0707 DA 02 07		     jp	     C,	loc_702
RAM:070A 32 BC 17		     ld	     (engine_explode_countdown), a
RAM:070D 3E FF			     ld	     a,	#0xFF
RAM:070F 32 7A 1D		     ld	     (experimental_ray_disabled+2), a		   ; *** critical
RAM:0712 3E 03			     ld	     a,	#3
RAM:0714 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:0717 21 BB CC		     ld	     hl, # VIDEO+0xBB
RAM:071A 11 8F 11		     ld	     de, #aCrtcl				   ; "CRTCL"
RAM:071D CD 34 0D		     call    clear_last_2_lines_print_string
RAM:0720 C3 43 0D		     jp	     update_chaser_pods_cmd_entry
RAM:0720	     ; End of function update_power_distribution
RAM:0720
RAM:0723	     ; ---------------------------------------------------------------------------
RAM:0723
RAM:0723	     self_destruct:							   ; DATA XREF:	RAM:179Eo
RAM:0723 CD F8 0C		     call    rand_0_9
RAM:0726 FE 08			     cp	     #8
RAM:0728 CA 6C 07		     jp	     Z,	loc_76C
RAM:072B 11 4E 13		     ld	     de, #aComputerSelf_0			   ; "COMPUTER:SELF DESTRUCT SEQUENCE INITIAT"...
RAM:072E CD 31 0D		     call    print_string_last_line
RAM:0731 1E 15			     ld	     e,	#0x15
RAM:0733 21 EB CF		     ld	     hl, # VIDEO+0x3EB
RAM:0736
RAM:0736	     loc_736:								   ; CODE XREF:	RAM:0758j
RAM:0736										   ; RAM:075Ej	...
RAM:0736 06 10			     ld	     b,	#16
RAM:0738 CD 40 0D		     call    delay_B_and_update_all
RAM:073B 7B			     ld	     a,	e
RAM:073C C6 99			     add     a,	#0x99 ;	'™'
RAM:073E 27			     daa
RAM:073F 5F			     ld	     e,	a
RAM:0740 0F			     rrca
RAM:0741 0F			     rrca
RAM:0742 0F			     rrca
RAM:0743 0F			     rrca
RAM:0744 E6 0F			     and     #0xF
RAM:0746 C6 30			     add     a,	#0x30 ;	'0'
RAM:0748 77			     ld	     (hl), a
RAM:0749 23			     inc     hl
RAM:074A 7B			     ld	     a,	e
RAM:074B E6 0F			     and     #0xF
RAM:074D C6 30			     add     a,	#0x30 ;	'0'
RAM:074F 77			     ld	     (hl), a
RAM:0750 2B			     dec     hl
RAM:0751 7B			     ld	     a,	e
RAM:0752 A7			     and     a
RAM:0753 CA 9B 03		     jp	     Z,	print_game_over_screen
RAM:0756 FE 06			     cp	     #6
RAM:0758 FA 36 07		     jp	     M,	loc_736
RAM:075B CD C3 01		     call    keyboard_scan
RAM:075E CA 36 07		     jp	     Z,	loc_736
RAM:0761 FE 1B			     cp	     #27					   ; <ESC>?
RAM:0763 C2 36 07		     jp	     NZ, loc_736
RAM:0766 11 8B 13		     ld	     de, #aComputerSelfDe			   ; "COMPUTER:SELF DESTRUCT SEQUENCE ABORTED"
RAM:0769 C3 31 0D		     jp	     print_string_last_line
RAM:076C	     ; ---------------------------------------------------------------------------
RAM:076C
RAM:076C	     loc_76C:								   ; CODE XREF:	RAM:0728j
RAM:076C 11 2F 17		     ld	     de, #aComputerTheKli			   ; "COMPUTER:	THE KLINGONS HAVE SURRENDERED"
RAM:076F CD 31 0D		     call    print_string_last_line
RAM:0772 C3 11 08		     jp	     loc_811
RAM:0775	     ; ---------------------------------------------------------------------------
RAM:0775
RAM:0775	     experimental_ray:							   ; DATA XREF:	RAM:17A0o
RAM:0775 3A 78 1D		     ld	     a,	(experimental_ray_disabled)
RAM:0778 A7			     and     a
RAM:0779 F2 82 07		     jp	     P,	loc_782
RAM:077C 11 3F 16		     ld	     de, #aIsPermanentlyD			   ; "IS PERMANENTLY DISABLED"
RAM:077F C3 21 0D		     jp	     print_experimental_ray_outcome
RAM:0782	     ; ---------------------------------------------------------------------------
RAM:0782
RAM:0782	     loc_782:								   ; CODE XREF:	RAM:0779j
RAM:0782 CD F8 0C		     call    rand_0_9
RAM:0785 A7			     and     a
RAM:0786 CA 96 07		     jp	     Z,	expr_9
RAM:0789 11 D1 17		     ld	     de, #0x17D1				   ; *** expr_tbl-2
RAM:078C
RAM:078C	     loc_78C:								   ; CODE XREF:	RAM:078Fj
RAM:078C 3D			     dec     a
RAM:078D 13			     inc     de
RAM:078E 13			     inc     de
RAM:078F C2 8C 07		     jp	     NZ, loc_78C
RAM:0792 EB			     ex	     de, hl
RAM:0793 C3 6A 05		     jp	     jump_HL_vector
RAM:0796	     ; ---------------------------------------------------------------------------
RAM:0796
RAM:0796	     expr_9:								   ; CODE XREF:	RAM:0786j
RAM:0796										   ; DATA XREF:	RAM:17E5o
RAM:0796 11 F3 14		     ld	     de, #aIsFiringPhoton			   ; "IS FIRING	PHOTON TORPEDOES"
RAM:0799 CD 21 0D		     call    print_experimental_ray_outcome
RAM:079C 3E 07			     ld	     a,	#7
RAM:079E
RAM:079E	     loc_79E:								   ; CODE XREF:	RAM:07A4j
RAM:079E F5			     push    af
RAM:079F CD FD 04		     call    move_photon_torpedo
RAM:07A2 F1			     pop     af
RAM:07A3 3D			     dec     a
RAM:07A4 C2 9E 07		     jp	     NZ, loc_79E
RAM:07A7 C3 FD 04		     jp	     move_photon_torpedo
RAM:07AA	     ; ---------------------------------------------------------------------------
RAM:07AA
RAM:07AA	     expr_0:								   ; DATA XREF:	RAM:expr_tblo
RAM:07AA 11 0E 15		     ld	     de, #aCausedAChangeI			   ; "CAUSED A CHANGE IN SPACIAL STRUCTURE"
RAM:07AD CD 21 0D		     call    print_experimental_ray_outcome
RAM:07B0 3E 01			     ld	     a,	#1
RAM:07B2 32 79 1D		     ld	     (experimental_ray_disabled+1), a		   ; *** disable_pod_update
RAM:07B5 11 2B 00		     ld	     de, #0x2B ; '+'
RAM:07B8 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:07BB 06 0A			     ld	     b,	#10
RAM:07BD
RAM:07BD	     loc_7BD:								   ; CODE XREF:	RAM:07CAj
RAM:07BD 0E 15			     ld	     c,	#21
RAM:07BF
RAM:07BF	     loc_7BF:								   ; CODE XREF:	RAM:07C5j
RAM:07BF 7E			     ld	     a,	(hl)
RAM:07C0 C6 80			     add     a,	#0x80 ;	'€'
RAM:07C2 77			     ld	     (hl), a
RAM:07C3 23			     inc     hl
RAM:07C4 0D			     dec     c
RAM:07C5 C2 BF 07		     jp	     NZ, loc_7BF
RAM:07C8 19			     add     hl, de
RAM:07C9 05			     dec     b
RAM:07CA C2 BD 07		     jp	     NZ, loc_7BD
RAM:07CD C9			     ret
RAM:07CE	     ; ---------------------------------------------------------------------------
RAM:07CE
RAM:07CE	     expr_1:								   ; DATA XREF:	RAM:17D5o
RAM:07CE 11 33 15		     ld	     de, #aHasFrozenTimeF			   ; "HAS FROZEN TIME FOR THE KLINGONS"
RAM:07D1 3E FF			     ld	     a,	#0xFF
RAM:07D3 32 77 1D		     ld	     (klingon_time_frozen), a
RAM:07D6 C3 21 0D		     jp	     print_experimental_ray_outcome
RAM:07D9	     ; ---------------------------------------------------------------------------
RAM:07D9
RAM:07D9	     expr_2:								   ; DATA XREF:	RAM:17D7o
RAM:07D9 11 54 15		     ld	     de, #aHasCausedAllTh			   ; "HAS CAUSED ALL THE KLINGONS TO BECOME  "...
RAM:07DC CD 21 0D		     call    print_experimental_ray_outcome
RAM:07DF 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:07E2 11 2B 00		     ld	     de, #0x2B ; '+'
RAM:07E5 06 0A			     ld	     b,	#10
RAM:07E7
RAM:07E7	     loc_7E7:								   ; CODE XREF:	RAM:07F8j
RAM:07E7 0E 15			     ld	     c,	#21
RAM:07E9
RAM:07E9	     loc_7E9:								   ; CODE XREF:	RAM:07F3j
RAM:07E9 7E			     ld	     a,	(hl)
RAM:07EA FE 07			     cp	     #7						   ; klingon?
RAM:07EC C2 F1 07		     jp	     NZ, loc_7F1				   ; no, skip
RAM:07EF 36 2E			     ld	     (hl), #0x2E ; '.'                             ; write empty sector to video
RAM:07F1
RAM:07F1	     loc_7F1:								   ; CODE XREF:	RAM:07ECj
RAM:07F1 23			     inc     hl
RAM:07F2 0D			     dec     c
RAM:07F3 C2 E9 07		     jp	     NZ, loc_7E9
RAM:07F6 19			     add     hl, de
RAM:07F7 05			     dec     b
RAM:07F8 C2 E7 07		     jp	     NZ, loc_7E7
RAM:07FB C9			     ret
RAM:07FC	     ; ---------------------------------------------------------------------------
RAM:07FC
RAM:07FC	     expr_3:								   ; DATA XREF:	RAM:17D9o
RAM:07FC 11 AD 15		     ld	     de, #aHasJumbledTheQ			   ; "HAS JUMBLED THE QUADRANT"
RAM:07FF CD 21 0D		     call    print_experimental_ray_outcome
RAM:0802 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0805 C3 C4 0B		     jp	     init_quadrant
RAM:0808	     ; ---------------------------------------------------------------------------
RAM:0808
RAM:0808	     expr_4:								   ; DATA XREF:	RAM:17DBo
RAM:0808 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:080B 11 C6 15		     ld	     de, #aHasDestroyedAl			   ; "HAS DESTROYED ALL	THE KLINGONS IN	    T"...
RAM:080E CD 21 0D		     call    print_experimental_ray_outcome
RAM:0811
RAM:0811	     loc_811:								   ; CODE XREF:	RAM:0772j
RAM:0811 3A F3 17		     ld	     a,	(quadrant)
RAM:0814 CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:0817 46			     ld	     b,	(hl)
RAM:0818 05			     dec     b
RAM:0819 3E 99			     ld	     a,	#0x99 ;	'™'
RAM:081B 90			     sub     b
RAM:081C 47			     ld	     b,	a
RAM:081D 3A EA 17		     ld	     a,	(klingons_left)
RAM:0820 80			     add     a,	b
RAM:0821 27			     daa
RAM:0822 32 EA 17		     ld	     (klingons_left), a
RAM:0825 36 01			     ld	     (hl), #1
RAM:0827 3E 30			     ld	     a,	#0x30 ;	'0'
RAM:0829 32 C5 CC		     ld	     (VIDEO+0xC5), a
RAM:082C CD 13 0F		     call    dec_klingons
RAM:082F 21 C5 CC		     ld	     hl, #0xCCC5
RAM:0832 C3 C4 0B		     jp	     init_quadrant
RAM:0835	     ; ---------------------------------------------------------------------------
RAM:0835
RAM:0835	     expr_5:								   ; DATA XREF:	RAM:17DDo
RAM:0835 11 F9 15		     ld	     de, #aDestroysItself			   ; "DESTROYS ITSELF"
RAM:0838 3E FF			     ld	     a,	#0xFF
RAM:083A 32 78 1D		     ld	     (experimental_ray_disabled), a
RAM:083D C3 21 0D		     jp	     print_experimental_ray_outcome
RAM:0840	     ; ---------------------------------------------------------------------------
RAM:0840
RAM:0840	     expr_6:								   ; DATA XREF:	RAM:17DFo
RAM:0840 11 09 16		     ld	     de, #aHasBackfiredOn			   ; "HAS BACKFIRED ON US"
RAM:0843 CD 21 0D		     call    print_experimental_ray_outcome
RAM:0846	     ; START OF	FUNCTION CHUNK FOR move_photon_torpedo
RAM:0846
RAM:0846	     power_minus_2_and_update:						   ; CODE XREF:	move_photon_torpedo+53j
RAM:0846 3A 4A 19		     ld	     a,	(power_avail)
RAM:0849 C6 98			     add     a,	#0x98 ;	'˜'
RAM:084B 27			     daa
RAM:084C 32 4A 19		     ld	     (power_avail), a
RAM:084F CD 52 0F		     call    print_power_avail
RAM:0852 C3 AD 06		     jp	     update_power_distribution
RAM:0852	     ; END OF FUNCTION CHUNK FOR move_photon_torpedo
RAM:0855	     ; ---------------------------------------------------------------------------
RAM:0855
RAM:0855	     expr_7:								   ; DATA XREF:	RAM:17E1o
RAM:0855 11 1D 16		     ld	     de, #aHasCausedAComp			   ; "HAS CAUSED A COMPUTER MALFUNCTION"
RAM:0858 3E FF			     ld	     a,	#0xFF
RAM:085A 32 76 1D		     ld	     (computer_malfunction), a
RAM:085D C3 21 0D		     jp	     print_experimental_ray_outcome
RAM:0860	     ; ---------------------------------------------------------------------------
RAM:0860
RAM:0860	     expr_8:								   ; DATA XREF:	RAM:17E3o
RAM:0860 11 B3 13		     ld	     de, #aMccoyICanTAllo			   ; "MCCOY:I CAN'T ALLOW YOU TO FIRE THE EXP"...
RAM:0863 C3 31 0D		     jp	     print_string_last_line
RAM:0866	     ; ---------------------------------------------------------------------------
RAM:0866
RAM:0866	     antimatter_pod:							   ; DATA XREF:	RAM:17A4o
RAM:0866 3A BD 17		     ld	     a,	(antimatter_pods)
RAM:0869 A7			     and     a
RAM:086A 11 D4 16		     ld	     de, #aCheckovWeReOut			   ; "CHECKOV: WE'RE OUT OF PODS"
RAM:086D CA 31 0D		     jp	     Z,	print_string_last_line
RAM:0870 3A 2B 19		     ld	     a,	(pwr_photon_torps)
RAM:0873 FE 08			     cp	     #8
RAM:0875 FA EA 04		     jp	     M,	loc_4EA
RAM:0878 CD 9F 0C		     call    get_next_cmd_char
RAM:087B CA FD 0A		     jp	     Z,	print_no_sense_and_ret
RAM:087E D6 31			     sub     #0x31 ; '1'
RAM:0880 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:0883 FE 03			     cp	     #3
RAM:0885 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:0888 21 5C 1D		     ld	     hl, #antimatter_pod_tbl
RAM:088B 47			     ld	     b,	a
RAM:088C 07			     rlca
RAM:088D 80			     add     a,	b
RAM:088E 07			     rlca
RAM:088F 85			     add     a,	l
RAM:0890 6F			     ld	     l,	a
RAM:0891 7E			     ld	     a,	(hl)
RAM:0892 A7			     and     a
RAM:0893 11 EF 16		     ld	     de, #aComputerThePod			   ; "COMPUTER:	THE POD	HAS BEEN USED"
RAM:0896 C2 31 0D		     jp	     NZ, print_string_last_line
RAM:0899 CD 9F 0C		     call    get_next_cmd_char
RAM:089C CA FD 0A		     jp	     Z,	print_no_sense_and_ret
RAM:089F D6 30			     sub     #0x30 ; '0'
RAM:08A1 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:08A4 FE 08			     cp	     #8
RAM:08A6 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:08A9 F5			     push    af
RAM:08AA CD 9F 0C		     call    get_next_cmd_char
RAM:08AD CA BF 08		     jp	     Z,	loc_8BF
RAM:08B0 D6 30			     sub     #0x30 ; '0'
RAM:08B2 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:08B5 FE 0A			     cp	     #0xA
RAM:08B7 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:08BA 3C			     inc     a
RAM:08BB 07			     rlca
RAM:08BC 32 D2 17		     ld	     (pod_speed), a
RAM:08BF
RAM:08BF	     loc_8BF:								   ; CODE XREF:	RAM:08ADj
RAM:08BF 36 01			     ld	     (hl), #1
RAM:08C1 F1			     pop     af
RAM:08C2 E5			     push    hl
RAM:08C3 23			     inc     hl
RAM:08C4 EB			     ex	     de, hl
RAM:08C5 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:08C8 07			     rlca
RAM:08C9 85			     add     a,	l
RAM:08CA 6F			     ld	     l,	a
RAM:08CB 7E			     ld	     a,	(hl)
RAM:08CC 12			     ld	     (de), a
RAM:08CD 23			     inc     hl
RAM:08CE 13			     inc     de
RAM:08CF 7E			     ld	     a,	(hl)
RAM:08D0 12			     ld	     (de), a
RAM:08D1 D5			     push    de
RAM:08D2 1B			     dec     de
RAM:08D3 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:08D6 1A			     ld	     a,	(de)
RAM:08D7 85			     add     a,	l
RAM:08D8 6F			     ld	     l,	a
RAM:08D9 13			     inc     de
RAM:08DA 1A			     ld	     a,	(de)
RAM:08DB 8C			     adc     a,	h
RAM:08DC 67			     ld	     h,	a
RAM:08DD D1			     pop     de
RAM:08DE 13			     inc     de
RAM:08DF 7D			     ld	     a,	l
RAM:08E0 12			     ld	     (de), a
RAM:08E1 13			     inc     de
RAM:08E2 7C			     ld	     a,	h
RAM:08E3 12			     ld	     (de), a
RAM:08E4 7E			     ld	     a,	(hl)
RAM:08E5 FE 2E			     cp	     #0x2E ; '.'
RAM:08E7 C2 FF 08		     jp	     NZ, print_pod_blocked
RAM:08EA 36 23			     ld	     (hl), #0x23 ; '#'
RAM:08EC 13			     inc     de
RAM:08ED 3A D2 17		     ld	     a,	(pod_speed)
RAM:08F0 12			     ld	     (de), a
RAM:08F1 3A BD 17		     ld	     a,	(antimatter_pods)
RAM:08F4 3D			     dec     a
RAM:08F5 32 BD 17		     ld	     (antimatter_pods),	a
RAM:08F8 E1			     pop     hl
RAM:08F9 21 3E CE		     ld	     hl, # VIDEO+0x23E
RAM:08FC C3 58 0F		     jp	     print_BCD_byte
RAM:08FF	     ; ---------------------------------------------------------------------------
RAM:08FF
RAM:08FF	     print_pod_blocked:							   ; CODE XREF:	RAM:08E7j
RAM:08FF 11 0F 17		     ld	     de, #aComputerPodLau			   ; "COMPUTER:	POD LAUNCH IS BLOCKED"
RAM:0902 E1			     pop     hl
RAM:0903 36 00			     ld	     (hl), #0
RAM:0905 C3 31 0D		     jp	     print_string_last_line
RAM:0908	     ; ---------------------------------------------------------------------------
RAM:0908
RAM:0908	     explode_pod:							   ; DATA XREF:	RAM:17A2o
RAM:0908 CD 9F 0C		     call    get_next_cmd_char
RAM:090B CA FD 0A		     jp	     Z,	print_no_sense_and_ret
RAM:090E D6 31			     sub     #0x31 ; '1'
RAM:0910 FA FD 0A		     jp	     M,	print_no_sense_and_ret
RAM:0913 FE 03			     cp	     #3
RAM:0915 F2 FD 0A		     jp	     P,	print_no_sense_and_ret
RAM:0918 47			     ld	     b,	a
RAM:0919 07			     rlca
RAM:091A 80			     add     a,	b
RAM:091B 07			     rlca
RAM:091C 21 5C 1D		     ld	     hl, #antimatter_pod_tbl
RAM:091F 85			     add     a,	l
RAM:0920 6F			     ld	     l,	a
RAM:0921 7E			     ld	     a,	(hl)
RAM:0922 A7			     and     a
RAM:0923 CA FD 0A		     jp	     Z,	print_no_sense_and_ret
RAM:0926 FE 01			     cp	     #1
RAM:0928 CA 31 09		     jp	     Z,	explode_pod_ok
RAM:092B 11 EF 16		     ld	     de, #aComputerThePod			   ; "COMPUTER:	THE POD	HAS BEEN USED"
RAM:092E C3 31 0D		     jp	     print_string_last_line
RAM:0931	     ; ---------------------------------------------------------------------------
RAM:0931
RAM:0931	     explode_pod_ok:							   ; CODE XREF:	RAM:0928j
RAM:0931 36 02			     ld	     (hl), #2
RAM:0933 23			     inc     hl
RAM:0934 23			     inc     hl
RAM:0935 23			     inc     hl
RAM:0936 7E			     ld	     a,	(hl)
RAM:0937 23			     inc     hl
RAM:0938 66			     ld	     h,	(hl)
RAM:0939 6F			     ld	     l,	a
RAM:093A 36 7F			     ld	     (hl), #0x7F ; ''
RAM:093C EB			     ex	     de, hl
RAM:093D 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:0940 06 08			     ld	     b,	#8
RAM:0942
RAM:0942	     loc_942:								   ; CODE XREF:	RAM:0981j
RAM:0942 E5			     push    hl
RAM:0943 7E			     ld	     a,	(hl)
RAM:0944 23			     inc     hl
RAM:0945 66			     ld	     h,	(hl)
RAM:0946 6F			     ld	     l,	a
RAM:0947 19			     add     hl, de
RAM:0948 7E			     ld	     a,	(hl)
RAM:0949 FE 07			     cp	     #7
RAM:094B CA 85 09		     jp	     Z,	pod_hit_klingon
RAM:094E FE 0F			     cp	     #0xF
RAM:0950 CA 85 09		     jp	     Z,	pod_hit_klingon
RAM:0953 FE 19			     cp	     #0x19
RAM:0955 CA 95 03		     jp	     Z,	hit_triton_mine
RAM:0958 FE 0C			     cp	     #0xC
RAM:095A CA 9B 03		     jp	     Z,	print_game_over_screen
RAM:095D FE 23			     cp	     #0x23 ; '#'
RAM:095F CA 9B 03		     jp	     Z,	print_game_over_screen
RAM:0962 FE 0E			     cp	     #0xE
RAM:0964 CA 7B 09		     jp	     Z,	pod_animate_object
RAM:0967 FE 2A			     cp	     #0x2A ; '*'
RAM:0969 CA 7B 09		     jp	     Z,	pod_animate_object
RAM:096C FE 2B			     cp	     #0x2B ; '+'
RAM:096E CA 7B 09		     jp	     Z,	pod_animate_object
RAM:0971 FE 05			     cp	     #5
RAM:0973 CA 7B 09		     jp	     Z,	pod_animate_object
RAM:0976 FE 2E			     cp	     #0x2E ; '.'
RAM:0978 C2 7D 09		     jp	     NZ, loc_97D
RAM:097B
RAM:097B	     pod_animate_object:						   ; CODE XREF:	RAM:0964j
RAM:097B										   ; RAM:0969j	...
RAM:097B 36 7F			     ld	     (hl), #0x7F ; ''
RAM:097D
RAM:097D	     loc_97D:								   ; CODE XREF:	RAM:0978j
RAM:097D E1			     pop     hl
RAM:097E 23			     inc     hl
RAM:097F 23			     inc     hl
RAM:0980 05			     dec     b
RAM:0981 C2 42 09		     jp	     NZ, loc_942
RAM:0984 C9			     ret
RAM:0985	     ; ---------------------------------------------------------------------------
RAM:0985
RAM:0985	     pod_hit_klingon:							   ; CODE XREF:	RAM:094Bj
RAM:0985										   ; RAM:0950j
RAM:0985 E5			     push    hl
RAM:0986 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0989 7E			     ld	     a,	(hl)
RAM:098A C6 99			     add     a,	#0x99 ;	'™'
RAM:098C 27			     daa
RAM:098D 77			     ld	     (hl), a
RAM:098E C5			     push    bc
RAM:098F D5			     push    de
RAM:0990 CD 13 0F		     call    dec_klingons
RAM:0993 D1			     pop     de
RAM:0994 C1			     pop     bc
RAM:0995 E1			     pop     hl
RAM:0996 C3 7B 09		     jp	     pod_animate_object
RAM:0999
RAM:0999	     ; =============== S U B R O U T I N E =======================================
RAM:0999
RAM:0999
RAM:0999	     handle_low_power:							   ; CODE XREF:	handle_low_power-7C8p
RAM:0999
RAM:0999	     ; FUNCTION	CHUNK AT RAM:0004 SIZE 000001BF	BYTES
RAM:0999	     ; FUNCTION	CHUNK AT RAM:01CE SIZE 00000017	BYTES
RAM:0999	     ; FUNCTION	CHUNK AT RAM:039B SIZE 0000002D	BYTES
RAM:0999
RAM:0999 3A 27 19		     ld	     a,	(pwr_lr_sensor)
RAM:099C FE 05			     cp	     #5
RAM:099E F2 CC 09		     jp	     P,	check_sr_sensor
RAM:09A1 21 41 CC		     ld	     hl, # VIDEO+0x41
RAM:09A4 11 C1 CC		     ld	     de, # VIDEO+0xC1
RAM:09A7 01 41 CD		     ld	     bc, # VIDEO+0x141
RAM:09AA 3E 0B			     ld	     a,	#0xB
RAM:09AC
RAM:09AC	     loc_9AC:								   ; CODE XREF:	handle_low_power+30j
RAM:09AC F5			     push    af
RAM:09AD 3E 20			     ld	     a,	#0x20 ;	' '
RAM:09AF 02			     ld	     (bc), a
RAM:09B0 77			     ld	     (hl), a
RAM:09B1 7B			     ld	     a,	e
RAM:09B2 FE C5			     cp	     #0xC5 ; 'Å'
RAM:09B4 CA C4 09		     jp	     Z,	loc_9C4
RAM:09B7 FE C6			     cp	     #0xC6 ; 'Æ'
RAM:09B9 CA C4 09		     jp	     Z,	loc_9C4
RAM:09BC FE C7			     cp	     #0xC7 ; 'Ç'
RAM:09BE CA C4 09		     jp	     Z,	loc_9C4
RAM:09C1 3E 20			     ld	     a,	#0x20 ;	' '
RAM:09C3 12			     ld	     (de), a
RAM:09C4
RAM:09C4	     loc_9C4:								   ; CODE XREF:	handle_low_power+1Bj
RAM:09C4										   ; handle_low_power+20j ...
RAM:09C4 13			     inc     de
RAM:09C5 23			     inc     hl
RAM:09C6 03			     inc     bc
RAM:09C7 F1			     pop     af
RAM:09C8 3D			     dec     a
RAM:09C9 C2 AC 09		     jp	     NZ, loc_9AC
RAM:09CC
RAM:09CC	     check_sr_sensor:							   ; CODE XREF:	handle_low_power+5j
RAM:09CC 3A 28 19		     ld	     a,	(pwr_sr_sensor)
RAM:09CF FE 03			     cp	     #3
RAM:09D1 F2 F1 09		     jp	     P,	check_klingon_threat
RAM:09D4 3E 01			     ld	     a,	#1
RAM:09D6 32 79 1D		     ld	     (experimental_ray_disabled+1), a
RAM:09D9 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:09DC 11 2C 00		     ld	     de, #0x2C ; ','
RAM:09DF 06 0A			     ld	     b,	#0xA
RAM:09E1
RAM:09E1	     loc_9E1:								   ; CODE XREF:	handle_low_power+55j
RAM:09E1 0E 14			     ld	     c,	#0x14
RAM:09E3
RAM:09E3	     loc_9E3:								   ; CODE XREF:	handle_low_power+4Ej
RAM:09E3 36 20			     ld	     (hl), #0x20 ; ' '
RAM:09E5 23			     inc     hl
RAM:09E6 0D			     dec     c
RAM:09E7 C2 E3 09		     jp	     NZ, loc_9E3
RAM:09EA 36 20			     ld	     (hl), #0x20 ; ' '
RAM:09EC 19			     add     hl, de
RAM:09ED 05			     dec     b
RAM:09EE C2 E1 09		     jp	     NZ, loc_9E1
RAM:09F1
RAM:09F1	     check_klingon_threat:						   ; CODE XREF:	handle_low_power+38j
RAM:09F1 3A 77 1D		     ld	     a,	(klingon_time_frozen)
RAM:09F4 A7			     and     a
RAM:09F5 FA 01 0A		     jp	     M,	condition_green
RAM:09F8 3A C5 CC		     ld	     a,	(VIDEO+0xC5)
RAM:09FB D6 30			     sub     #0x30 ; '0'
RAM:09FD A7			     and     a
RAM:09FE C2 15 0A		     jp	     NZ, condition_red
RAM:0A01
RAM:0A01	     condition_green:							   ; CODE XREF:	handle_low_power+5Cj
RAM:0A01 3A 7A 1D		     ld	     a,	(experimental_ray_disabled+2)
RAM:0A04 A7			     and     a
RAM:0A05 F8			     ret     M
RAM:0A06 3A 6F 1D		     ld	     a,	(always_zero)
RAM:0A09 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:0A0C 21 BB CC		     ld	     hl, # VIDEO+0xBB
RAM:0A0F 11 83 11		     ld	     de, #aGreen				   ; "GREEN"
RAM:0A12 C3 37 0D		     jp	     print_string
RAM:0A15	     ; ---------------------------------------------------------------------------
RAM:0A15
RAM:0A15	     condition_red:							   ; CODE XREF:	handle_low_power+65j
RAM:0A15 3A 7A 1D		     ld	     a,	(experimental_ray_disabled+2)
RAM:0A18 A7			     and     a
RAM:0A19 FA 2A 0A		     jp	     M,	loc_A2A
RAM:0A1C 3E 01			     ld	     a,	#1
RAM:0A1E 32 70 1D		     ld	     (delay_duty_cycle_i), a
RAM:0A21 21 BB CC		     ld	     hl, # VIDEO+0xBB
RAM:0A24 11 89 11		     ld	     de, #aRed					   ; " RED "
RAM:0A27 CD 37 0D		     call    print_string
RAM:0A2A
RAM:0A2A	     loc_A2A:								   ; CODE XREF:	handle_low_power+80j
RAM:0A2A 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:0A2D 7E			     ld	     a,	(hl)
RAM:0A2E F6 80			     or	     #0x80 ; '€'
RAM:0A30 77			     ld	     (hl), a
RAM:0A31 3A 3C 19		     ld	     a,	(game_delay_factor)
RAM:0A34 0F			     rrca
RAM:0A35 3C			     inc     a
RAM:0A36 47			     ld	     b,	a
RAM:0A37 CD 40 0D		     call    delay_B_and_update_all
RAM:0A3A 7E			     ld	     a,	(hl)
RAM:0A3B E6 7F			     and     #0x7F ; ''
RAM:0A3D 77			     ld	     (hl), a
RAM:0A3E 3A C5 CC		     ld	     a,	(VIDEO+0xC5)
RAM:0A41 D6 30			     sub     #0x30 ; '0'
RAM:0A43 FE 04			     cp	     #4
RAM:0A45 F4 D6 0A		     call    P,	lose_power_crystal
RAM:0A48 3A 29 19		     ld	     a,	(pwr_shields)
RAM:0A4B FE 05			     cp	     #5
RAM:0A4D FC F4 0A		     call    M,	print_shields_failing
RAM:0A50 0E 00			     ld	     c,	#0
RAM:0A52 21 29 19		     ld	     hl, #pwr_shields
RAM:0A55 7E			     ld	     a,	(hl)
RAM:0A56 A7			     and     a
RAM:0A57 CA 5E 0A		     jp	     Z,	klingon_attack_and_move
RAM:0A5A C6 99			     add     a,	#0x99 ;	'™'
RAM:0A5C 27			     daa
RAM:0A5D 77			     ld	     (hl), a
RAM:0A5E
RAM:0A5E	     klingon_attack_and_move:						   ; CODE XREF:	RAM:0221p
RAM:0A5E										   ; RAM:0267p	...
RAM:0A5E 3A 4A 19		     ld	     a,	(power_avail)
RAM:0A61 C6 99			     add     a,	#0x99 ;	'™'
RAM:0A63 27			     daa
RAM:0A64 32 4A 19		     ld	     (power_avail), a
RAM:0A67 CD AD 06		     call    update_power_distribution
RAM:0A6A CD 52 0F		     call    print_power_avail
RAM:0A6D 3A EA 17		     ld	     a,	(klingons_left)
RAM:0A70 A7			     and     a
RAM:0A71 CA 9B 03		     jp	     Z,	print_game_over_screen
RAM:0A74 3A 3D 19		     ld	     a,	(time_to_klingon_fire)
RAM:0A77 3D			     dec     a
RAM:0A78 32 3D 19		     ld	     (time_to_klingon_fire), a
RAM:0A7B C0			     ret     NZ
RAM:0A7C
RAM:0A7C	     loc_A7C:								   ; CODE XREF:	handle_low_power+E8j
RAM:0A7C										   ; handle_low_power+EDj
RAM:0A7C CD F8 0C		     call    rand_0_9
RAM:0A7F FE 01			     cp	     #1
RAM:0A81 FA 7C 0A		     jp	     M,	loc_A7C
RAM:0A84 FE 05			     cp	     #5
RAM:0A86 F2 7C 0A		     jp	     P,	loc_A7C
RAM:0A89 32 3D 19		     ld	     (time_to_klingon_fire), a
RAM:0A8C 16 04			     ld	     d,	#4
RAM:0A8E 21 40 19		     ld	     hl, #klingon_tbl
RAM:0A91
RAM:0A91	     get_klingon_address:						   ; CODE XREF:	handle_low_power+13Aj
RAM:0A91 7E			     ld	     a,	(hl)
RAM:0A92 A7			     and     a
RAM:0A93 C8			     ret     Z
RAM:0A94 4E			     ld	     c,	(hl)
RAM:0A95 23			     inc     hl
RAM:0A96 46			     ld	     b,	(hl)
RAM:0A97 E5			     push    hl
RAM:0A98
RAM:0A98	     move_klingon:							   ; CODE XREF:	handle_low_power+104j
RAM:0A98 CD F8 0C		     call    rand_0_9
RAM:0A9B FE 08			     cp	     #8
RAM:0A9D F2 98 0A		     jp	     P,	move_klingon
RAM:0AA0 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:0AA3 A7			     and     a
RAM:0AA4
RAM:0AA4	     loc_AA4:								   ; CODE XREF:	handle_low_power+111j
RAM:0AA4 CA AD 0A		     jp	     Z,	loc_AAD
RAM:0AA7 23			     inc     hl
RAM:0AA8 23			     inc     hl
RAM:0AA9 3D			     dec     a
RAM:0AAA C3 A4 0A		     jp	     loc_AA4
RAM:0AAD	     ; ---------------------------------------------------------------------------
RAM:0AAD
RAM:0AAD	     loc_AAD:								   ; CODE XREF:	handle_low_power:loc_AA4j
RAM:0AAD 5E			     ld	     e,	(hl)
RAM:0AAE 23			     inc     hl
RAM:0AAF 56			     ld	     d,	(hl)
RAM:0AB0 60			     ld	     h,	b
RAM:0AB1 69			     ld	     l,	c
RAM:0AB2 19			     add     hl, de
RAM:0AB3 7E			     ld	     a,	(hl)
RAM:0AB4 FE 2E			     cp	     #0x2E ; '.'
RAM:0AB6 C2 D2 0A		     jp	     NZ, next_klingon
RAM:0AB9 0A			     ld	     a,	(bc)
RAM:0ABA FE 07			     cp	     #7
RAM:0ABC CA C4 0A		     jp	     Z,	loc_AC4
RAM:0ABF FE 0F			     cp	     #0xF
RAM:0AC1 C2 D2 0A		     jp	     NZ, next_klingon
RAM:0AC4
RAM:0AC4	     loc_AC4:								   ; CODE XREF:	handle_low_power+123j
RAM:0AC4 77			     ld	     (hl), a
RAM:0AC5 3E 2E			     ld	     a,	#0x2E ;	'.'
RAM:0AC7 02			     ld	     (bc), a
RAM:0AC8 D1			     pop     de
RAM:0AC9 1B			     dec     de
RAM:0ACA 7D			     ld	     a,	l
RAM:0ACB 12			     ld	     (de), a
RAM:0ACC 7C			     ld	     a,	h
RAM:0ACD 13			     inc     de
RAM:0ACE 12			     ld	     (de), a
RAM:0ACF EB			     ex	     de, hl
RAM:0AD0 23			     inc     hl
RAM:0AD1 E5			     push    hl
RAM:0AD2
RAM:0AD2	     next_klingon:							   ; CODE XREF:	handle_low_power+11Dj
RAM:0AD2										   ; handle_low_power+128j
RAM:0AD2 E1			     pop     hl
RAM:0AD3 C3 91 0A		     jp	     get_klingon_address
RAM:0AD3	     ; End of function handle_low_power
RAM:0AD3
RAM:0AD6
RAM:0AD6	     ; =============== S U B R O U T I N E =======================================
RAM:0AD6
RAM:0AD6
RAM:0AD6	     lose_power_crystal:						   ; CODE XREF:	handle_low_power+ACp
RAM:0AD6 11 15 14		     ld	     de, #aScottThereGoes			   ; "SCOTT:THERE GOES A DILITHIUM CRYSTAL, C"...
RAM:0AD9 CD 31 0D		     call    print_string_last_line
RAM:0ADC
RAM:0ADC	     loc_ADC:								   ; CODE XREF:	print_shields_failing+6j
RAM:0ADC 3A 4A 19		     ld	     a,	(power_avail)
RAM:0ADF 06 05			     ld	     b,	#5
RAM:0AE1
RAM:0AE1	     loc_AE1:								   ; CODE XREF:	lose_power_crystal+12j
RAM:0AE1 C6 99			     add     a,	#0x99 ;	'™'
RAM:0AE3 27			     daa
RAM:0AE4 CA 9B 03		     jp	     Z,	print_game_over_screen
RAM:0AE7 05			     dec     b
RAM:0AE8 C2 E1 0A		     jp	     NZ, loc_AE1
RAM:0AEB 32 4A 19		     ld	     (power_avail), a
RAM:0AEE CD 52 0F		     call    print_power_avail
RAM:0AF1 C3 AD 06		     jp	     update_power_distribution
RAM:0AF1	     ; End of function lose_power_crystal
RAM:0AF1
RAM:0AF4
RAM:0AF4	     ; =============== S U B R O U T I N E =======================================
RAM:0AF4
RAM:0AF4
RAM:0AF4	     print_shields_failing:						   ; CODE XREF:	handle_low_power+B4p
RAM:0AF4 11 43 14		     ld	     de, #aScottCaptainTh			   ; "SCOTT:CAPTAIN, THE SHIELDS ARE FALLING "...
RAM:0AF7 CD 31 0D		     call    print_string_last_line
RAM:0AFA C3 DC 0A		     jp	     loc_ADC
RAM:0AFA	     ; End of function print_shields_failing
RAM:0AFA
RAM:0AFD	     ; ---------------------------------------------------------------------------
RAM:0AFD
RAM:0AFD	     print_no_sense_and_ret:						   ; CODE XREF:	RAM:022Aj
RAM:0AFD										   ; RAM:022Fj	...
RAM:0AFD 11 D0 10		     ld	     de, #aSpockCaptainIA			   ; "SPOCK:CAPTAIN, I AM AFRAID YOUR LAST CO"...
RAM:0B00 CD 31 0D		     call    print_string_last_line
RAM:0B03 31 FB 1F		     ld	     sp, #0x1FFB
RAM:0B06 11 A4 01		     ld	     de, #game_loop
RAM:0B09 D5			     push    de
RAM:0B0A E5			     push    hl
RAM:0B0B D5			     push    de
RAM:0B0C C5			     push    bc
RAM:0B0D C3 51 0E		     jp	     clear_cmd_buffer
RAM:0B10
RAM:0B10	     ; =============== S U B R O U T I N E =======================================
RAM:0B10
RAM:0B10
RAM:0B10	     move_quadrant:							   ; CODE XREF:	handle_low_power-844p
RAM:0B10										   ; RAM:0236p	...
RAM:0B10 21 EA 17		     ld	     hl, #0x17EA				   ; *** quadrant_delta_tbl-1
RAM:0B13 3C			     inc     a
RAM:0B14 06 03			     ld	     b,	#3
RAM:0B16 C5			     push    bc
RAM:0B17
RAM:0B17	     loc_B17:								   ; CODE XREF:	move_quadrant+9j
RAM:0B17 23			     inc     hl
RAM:0B18 3D			     dec     a
RAM:0B19 C2 17 0B		     jp	     NZ, loc_B17
RAM:0B1C 3A F3 17		     ld	     a,	(quadrant)
RAM:0B1F
RAM:0B1F	     loc_B1F:								   ; CODE XREF:	move_quadrant+12j
RAM:0B1F 86			     add     a,	(hl)
RAM:0B20 27			     daa
RAM:0B21 0D			     dec     c
RAM:0B22 C2 1F 0B		     jp	     NZ, loc_B1F
RAM:0B25 32 F3 17		     ld	     (quadrant), a
RAM:0B28 C6 89			     add     a,	#0x89 ;	'‰'
RAM:0B2A 27			     daa
RAM:0B2B 11 41 CC		     ld	     de, # VIDEO+0x41
RAM:0B2E
RAM:0B2E	     loc_B2E:								   ; CODE XREF:	move_quadrant+48j
RAM:0B2E F5			     push    af
RAM:0B2F D5			     push    de
RAM:0B30 CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:0B33 D1			     pop     de
RAM:0B34 0E 03			     ld	     c,	#3
RAM:0B36
RAM:0B36	     loc_B36:								   ; CODE XREF:	move_quadrant+36j
RAM:0B36 06 03			     ld	     b,	#3
RAM:0B38
RAM:0B38	     loc_B38:								   ; CODE XREF:	move_quadrant+31j
RAM:0B38 7E			     ld	     a,	(hl)
RAM:0B39 E6 0F			     and     #0xF
RAM:0B3B C6 30			     add     a,	#0x30 ;	'0'
RAM:0B3D 12			     ld	     (de), a
RAM:0B3E 13			     inc     de
RAM:0B3F 23			     inc     hl
RAM:0B40 05			     dec     b
RAM:0B41 C2 38 0B		     jp	     NZ, loc_B38
RAM:0B44 13			     inc     de
RAM:0B45 0D			     dec     c
RAM:0B46 C2 36 0B		     jp	     NZ, loc_B36
RAM:0B49 F1			     pop     af
RAM:0B4A C6 10			     add     a,	#0x10
RAM:0B4C 27			     daa
RAM:0B4D C1			     pop     bc
RAM:0B4E 05			     dec     b
RAM:0B4F CA 5B 0B		     jp	     Z,	loc_B5B
RAM:0B52 C5			     push    bc
RAM:0B53 21 74 00		     ld	     hl, #0x74 ; 't'
RAM:0B56 19			     add     hl, de
RAM:0B57 EB			     ex	     de, hl
RAM:0B58 C3 2E 0B		     jp	     loc_B2E
RAM:0B5B	     ; ---------------------------------------------------------------------------
RAM:0B5B
RAM:0B5B	     loc_B5B:								   ; CODE XREF:	move_quadrant+3Fj
RAM:0B5B 3A F3 17		     ld	     a,	(quadrant)
RAM:0B5E 0E 01			     ld	     c,	#1
RAM:0B60 CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:0B63 06 03			     ld	     b,	#3
RAM:0B65 11 C5 CC		     ld	     de, # VIDEO+0xC5
RAM:0B68
RAM:0B68	     loc_B68:								   ; CODE XREF:	move_quadrant+61j
RAM:0B68 7E			     ld	     a,	(hl)
RAM:0B69 E6 0F			     and     #0xF
RAM:0B6B C6 30			     add     a,	#0x30 ;	'0'
RAM:0B6D 12			     ld	     (de), a
RAM:0B6E 13			     inc     de
RAM:0B6F 23			     inc     hl
RAM:0B70 05			     dec     b
RAM:0B71 C2 68 0B		     jp	     NZ, loc_B68
RAM:0B74 97			     sub     a
RAM:0B75 32 77 1D		     ld	     (klingon_time_frozen), a
RAM:0B78 C9			     ret
RAM:0B78	     ; End of function move_quadrant
RAM:0B78
RAM:0B79
RAM:0B79	     ; =============== S U B R O U T I N E =======================================
RAM:0B79
RAM:0B79
RAM:0B79	     print_quadrant:							   ; CODE XREF:	handle_low_power-841p
RAM:0B79										   ; RAM:0239p	...
RAM:0B79 3A F3 17		     ld	     a,	(quadrant)
RAM:0B7C 21 FC CC		     ld	     hl, # VIDEO+0xFC
RAM:0B7F 4F			     ld	     c,	a
RAM:0B80 E6 F0			     and     #0xF0 ; 'ð'
RAM:0B82 0F			     rrca
RAM:0B83 0F			     rrca
RAM:0B84 0F			     rrca
RAM:0B85 0F			     rrca
RAM:0B86 C6 30			     add     a,	#0x30 ;	'0'
RAM:0B88 77			     ld	     (hl), a
RAM:0B89 23			     inc     hl
RAM:0B8A 23			     inc     hl
RAM:0B8B 79			     ld	     a,	c
RAM:0B8C E6 0F			     and     #0xF
RAM:0B8E C6 30			     add     a,	#0x30 ;	'0'
RAM:0B90 77			     ld	     (hl), a
RAM:0B91 C9			     ret
RAM:0B91	     ; End of function print_quadrant
RAM:0B91
RAM:0B92
RAM:0B92	     ; =============== S U B R O U T I N E =======================================
RAM:0B92
RAM:0B92
RAM:0B92	     get_ptr_quadrant_A_Data:						   ; CODE XREF:	handle_low_power-8C3p
RAM:0B92										   ; handle_low_power-86Dp ...
RAM:0B92 4F			     ld	     c,	a
RAM:0B93 E6 F0			     and     #0xF0 ; 'ð'
RAM:0B95 0F			     rrca
RAM:0B96 0F			     rrca
RAM:0B97 0F			     rrca
RAM:0B98 0F			     rrca
RAM:0B99 21 00 00		     ld	     hl, #0
RAM:0B9C 11 1E 00		     ld	     de, #0x1E
RAM:0B9F 06 08			     ld	     b,	#8
RAM:0BA1
RAM:0BA1	     loc_BA1:								   ; CODE XREF:	get_ptr_quadrant_A_Data+18j
RAM:0BA1 29			     add     hl, hl
RAM:0BA2 17			     rla
RAM:0BA3 D2 A9 0B		     jp	     NC, loc_BA9
RAM:0BA6 19			     add     hl, de
RAM:0BA7 CE 00			     adc     a,	#0
RAM:0BA9
RAM:0BA9	     loc_BA9:								   ; CODE XREF:	get_ptr_quadrant_A_Data+11j
RAM:0BA9 05			     dec     b
RAM:0BAA C2 A1 0B		     jp	     NZ, loc_BA1
RAM:0BAD EB			     ex	     de, hl
RAM:0BAE 79			     ld	     a,	c
RAM:0BAF E6 0F			     and     #0xF
RAM:0BB1 6F			     ld	     l,	a
RAM:0BB2 06 03			     ld	     b,	#3
RAM:0BB4
RAM:0BB4	     loc_BB4:								   ; CODE XREF:	get_ptr_quadrant_A_Data+2Aj
RAM:0BB4 83			     add     a,	e
RAM:0BB5 5F			     ld	     e,	a
RAM:0BB6 3E 00			     ld	     a,	#0
RAM:0BB8 8A			     adc     a,	d
RAM:0BB9 57			     ld	     d,	a
RAM:0BBA 7D			     ld	     a,	l
RAM:0BBB 05			     dec     b
RAM:0BBC C2 B4 0B		     jp	     NZ, loc_BB4
RAM:0BBF 21 F4 17		     ld	     hl, #quadrant_tbl
RAM:0BC2 19			     add     hl, de
RAM:0BC3 C9			     ret
RAM:0BC3	     ; End of function get_ptr_quadrant_A_Data
RAM:0BC3
RAM:0BC4
RAM:0BC4	     ; =============== S U B R O U T I N E =======================================
RAM:0BC4
RAM:0BC4
RAM:0BC4	     init_quadrant:							   ; CODE XREF:	handle_low_power-801p
RAM:0BC4										   ; RAM:023Fp	...
RAM:0BC4 E5			     push    hl
RAM:0BC5 97			     sub     a
RAM:0BC6 32 79 1D		     ld	     (experimental_ray_disabled+1), a		   ; *** disable_pod_update
RAM:0BC9 11 2C 00		     ld	     de, #0x2C ; ','
RAM:0BCC 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:0BCF 06 0A			     ld	     b,	#10
RAM:0BD1
RAM:0BD1	     loc_BD1:								   ; CODE XREF:	init_quadrant+1Dj
RAM:0BD1 0E 0A			     ld	     c,	#10
RAM:0BD3
RAM:0BD3	     loc_BD3:								   ; CODE XREF:	init_quadrant+16j
RAM:0BD3 36 20			     ld	     (hl), #0x20 ; ' '
RAM:0BD5 23			     inc     hl
RAM:0BD6 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:0BD8 23			     inc     hl
RAM:0BD9 0D			     dec     c
RAM:0BDA C2 D3 0B		     jp	     NZ, loc_BD3
RAM:0BDD 36 20			     ld	     (hl), #0x20 ; ' '
RAM:0BDF 19			     add     hl, de
RAM:0BE0 05			     dec     b
RAM:0BE1 C2 D1 0B		     jp	     NZ, loc_BD1
RAM:0BE4	     ; init warships
RAM:0BE4 E1			     pop     hl
RAM:0BE5 7E			     ld	     a,	(hl)
RAM:0BE6 23			     inc     hl
RAM:0BE7 E5			     push    hl
RAM:0BE8 D6 30			     sub     #0x30 ; '0'
RAM:0BEA CA 0A 0C		     jp	     Z,	loc_C0A
RAM:0BED 21 40 19		     ld	     hl, #klingon_tbl
RAM:0BF0 22 3E 19		     ld	     (tmp_klingon_tbl_ptr), hl
RAM:0BF3 57			     ld	     d,	a
RAM:0BF4
RAM:0BF4	     loc_BF4:								   ; CODE XREF:	init_quadrant+43j
RAM:0BF4 CD F8 0C		     call    rand_0_9
RAM:0BF7 FE 01			     cp	     #1
RAM:0BF9 F2 01 0C		     jp	     P,	loc_C01
RAM:0BFC 1E 0F			     ld	     e,	#0xF
RAM:0BFE C3 03 0C		     jp	     loc_C03
RAM:0C01	     ; ---------------------------------------------------------------------------
RAM:0C01
RAM:0C01	     loc_C01:								   ; CODE XREF:	init_quadrant+35j
RAM:0C01 1E 07			     ld	     e,	#7					   ; klingon warship
RAM:0C03
RAM:0C03	     loc_C03:								   ; CODE XREF:	init_quadrant+3Aj
RAM:0C03 CD 67 0C		     call    add_obj_to_quadrant
RAM:0C06 15			     dec     d
RAM:0C07 C2 F4 0B		     jp	     NZ, loc_BF4
RAM:0C0A
RAM:0C0A	     loc_C0A:								   ; CODE XREF:	init_quadrant+26j
RAM:0C0A 2A 3E 19		     ld	     hl, (tmp_klingon_tbl_ptr)
RAM:0C0D 36 00			     ld	     (hl), #0
RAM:0C0F E1			     pop     hl
RAM:0C10 7E			     ld	     a,	(hl)
RAM:0C11 23			     inc     hl
RAM:0C12 E5			     push    hl
RAM:0C13 D6 30			     sub     #0x30 ; '0'
RAM:0C15 CA 22 0C		     jp	     Z,	loc_C22
RAM:0C18 57			     ld	     d,	a
RAM:0C19 1E 0E			     ld	     e,	#0xE
RAM:0C1B
RAM:0C1B	     loc_C1B:								   ; CODE XREF:	init_quadrant+5Bj
RAM:0C1B CD 67 0C		     call    add_obj_to_quadrant
RAM:0C1E 15			     dec     d
RAM:0C1F C2 1B 0C		     jp	     NZ, loc_C1B
RAM:0C22
RAM:0C22	     loc_C22:								   ; CODE XREF:	init_quadrant+51j
RAM:0C22 E1			     pop     hl
RAM:0C23 7E			     ld	     a,	(hl)
RAM:0C24 D6 30			     sub     #0x30 ; '0'
RAM:0C26 CA 33 0C		     jp	     Z,	loc_C33
RAM:0C29 57			     ld	     d,	a
RAM:0C2A 1E 2A			     ld	     e,	#0x2A ;	'*'
RAM:0C2C
RAM:0C2C	     loc_C2C:								   ; CODE XREF:	init_quadrant+6Cj
RAM:0C2C CD 67 0C		     call    add_obj_to_quadrant
RAM:0C2F 15			     dec     d
RAM:0C30 C2 2C 0C		     jp	     NZ, loc_C2C
RAM:0C33
RAM:0C33	     loc_C33:								   ; CODE XREF:	init_quadrant+62j
RAM:0C33 1E 0C			     ld	     e,	#0xC
RAM:0C35 CD 67 0C		     call    add_obj_to_quadrant
RAM:0C38 22 BA 17		     ld	     (enterprise_video_addr), hl
RAM:0C3B
RAM:0C3B	     loc_C3B:								   ; CODE XREF:	init_quadrant+7Cj
RAM:0C3B CD F8 0C		     call    rand_0_9
RAM:0C3E FE 03			     cp	     #3
RAM:0C40 F2 3B 0C		     jp	     P,	loc_C3B
RAM:0C43 A7			     and     a
RAM:0C44 CA 51 0C		     jp	     Z,	loc_C51
RAM:0C47 57			     ld	     d,	a
RAM:0C48 1E 19			     ld	     e,	#0x19
RAM:0C4A
RAM:0C4A	     loc_C4A:								   ; CODE XREF:	init_quadrant+8Aj
RAM:0C4A CD 67 0C		     call    add_obj_to_quadrant
RAM:0C4D 15			     dec     d
RAM:0C4E C2 4A 0C		     jp	     NZ, loc_C4A
RAM:0C51
RAM:0C51	     loc_C51:								   ; CODE XREF:	init_quadrant+80j
RAM:0C51										   ; init_quadrant+92j
RAM:0C51 CD F8 0C		     call    rand_0_9
RAM:0C54 FE 04			     cp	     #4
RAM:0C56 F2 51 0C		     jp	     P,	loc_C51
RAM:0C59 A7			     and     a
RAM:0C5A 57			     ld	     d,	a
RAM:0C5B
RAM:0C5B	     loc_C5B:								   ; CODE XREF:	init_quadrant+A0j
RAM:0C5B CA D8 0E		     jp	     Z,	init_sector
RAM:0C5E 1E 05			     ld	     e,	#5
RAM:0C60 CD 67 0C		     call    add_obj_to_quadrant
RAM:0C63 15			     dec     d
RAM:0C64 C3 5B 0C		     jp	     loc_C5B
RAM:0C64	     ; End of function init_quadrant
RAM:0C64
RAM:0C67
RAM:0C67	     ; =============== S U B R O U T I N E =======================================
RAM:0C67
RAM:0C67
RAM:0C67	     add_obj_to_quadrant:						   ; CODE XREF:	init_quadrant:loc_C03p
RAM:0C67										   ; init_quadrant:loc_C1Bp ...
RAM:0C67 CD F8 0C		     call    rand_0_9
RAM:0C6A 21 58 CC		     ld	     hl, # VIDEO+0x58
RAM:0C6D 01 40 00		     ld	     bc, #0x40 ; '@'
RAM:0C70 A7			     and     a
RAM:0C71 CA 79 0C		     jp	     Z,	loc_C79
RAM:0C74
RAM:0C74	     loc_C74:								   ; CODE XREF:	add_obj_to_quadrant+Fj
RAM:0C74 09			     add     hl, bc
RAM:0C75 3D			     dec     a
RAM:0C76 C2 74 0C		     jp	     NZ, loc_C74
RAM:0C79
RAM:0C79	     loc_C79:								   ; CODE XREF:	add_obj_to_quadrant+Aj
RAM:0C79 CD F8 0C		     call    rand_0_9
RAM:0C7C 07			     rlca
RAM:0C7D 4F			     ld	     c,	a
RAM:0C7E 06 00			     ld	     b,	#0
RAM:0C80 09			     add     hl, bc
RAM:0C81 7E			     ld	     a,	(hl)
RAM:0C82 FE 2E			     cp	     #0x2E ; '.'
RAM:0C84 C2 67 0C		     jp	     NZ, add_obj_to_quadrant
RAM:0C87 73			     ld	     (hl), e
RAM:0C88 7B			     ld	     a,	e
RAM:0C89 FE 0F			     cp	     #0xF
RAM:0C8B CA 91 0C		     jp	     Z,	loc_C91
RAM:0C8E FE 07			     cp	     #7
RAM:0C90 C0			     ret     NZ
RAM:0C91
RAM:0C91	     loc_C91:								   ; CODE XREF:	add_obj_to_quadrant+24j
RAM:0C91 D5			     push    de
RAM:0C92 EB			     ex	     de, hl
RAM:0C93 2A 3E 19		     ld	     hl, (tmp_klingon_tbl_ptr)
RAM:0C96 73			     ld	     (hl), e
RAM:0C97 23			     inc     hl
RAM:0C98 72			     ld	     (hl), d
RAM:0C99 23			     inc     hl
RAM:0C9A 22 3E 19		     ld	     (tmp_klingon_tbl_ptr), hl
RAM:0C9D D1			     pop     de
RAM:0C9E C9			     ret
RAM:0C9E	     ; End of function add_obj_to_quadrant
RAM:0C9E
RAM:0C9F
RAM:0C9F	     ; =============== S U B R O U T I N E =======================================
RAM:0C9F
RAM:0C9F
RAM:0C9F	     get_next_cmd_char:							   ; CODE XREF:	RAM:loc_224p
RAM:0C9F										   ; RAM:026Dp	...
RAM:0C9F E5			     push    hl
RAM:0CA0 2A 92 17		     ld	     hl, (cmd_entry_addr)
RAM:0CA3 7E			     ld	     a,	(hl)
RAM:0CA4 FE 0D			     cp	     #0xD
RAM:0CA6 CA AF 0C		     jp	     Z,	loc_CAF
RAM:0CA9 23			     inc     hl
RAM:0CAA 22 92 17		     ld	     (cmd_entry_addr), hl
RAM:0CAD E1			     pop     hl
RAM:0CAE C9			     ret
RAM:0CAF	     ; ---------------------------------------------------------------------------
RAM:0CAF
RAM:0CAF	     loc_CAF:								   ; CODE XREF:	get_next_cmd_char+7j
RAM:0CAF 97			     sub     a
RAM:0CB0 E1			     pop     hl
RAM:0CB1 C9			     ret
RAM:0CB1	     ; End of function get_next_cmd_char
RAM:0CB1
RAM:0CB2
RAM:0CB2	     ; =============== S U B R O U T I N E =======================================
RAM:0CB2
RAM:0CB2
RAM:0CB2	     rnd_delay:								   ; CODE XREF:	handle_low_power:loc_16Fp
RAM:0CB2										   ; handle_low_power-81Dp ...
RAM:0CB2 CD F8 0C		     call    rand_0_9
RAM:0CB5 3C			     inc     a
RAM:0CB6 47			     ld	     b,	a
RAM:0CB6	     ; End of function rnd_delay
RAM:0CB6
RAM:0CB7
RAM:0CB7	     ; =============== S U B R O U T I N E =======================================
RAM:0CB7
RAM:0CB7
RAM:0CB7	     delay_B_with_duty_cycle:						   ; CODE XREF:	handle_low_power-7C1p
RAM:0CB7										   ; RAM:0313p	...
RAM:0CB7 E5			     push    hl
RAM:0CB8 D5			     push    de
RAM:0CB9
RAM:0CB9	     loc_CB9:								   ; CODE XREF:	delay_B_with_duty_cycle+2Fj
RAM:0CB9 21 88 17		     ld	     hl, #delay_duty_cycle_tbl
RAM:0CBC 3A 70 1D		     ld	     a,	(delay_duty_cycle_i)
RAM:0CBF 07			     rlca
RAM:0CC0 85			     add     a,	l
RAM:0CC1 6F			     ld	     l,	a
RAM:0CC2 3E 01			     ld	     a,	#1
RAM:0CC4
RAM:0CC4	     loc_CC4:								   ; CODE XREF:	delay_B_with_duty_cycle+2Cj
RAM:0CC4 32 87 17		     ld	     (delay_cycle), a
RAM:0CC7 16 10			     ld	     d,	#16
RAM:0CC9
RAM:0CC9	     loc_CC9:								   ; CODE XREF:	delay_B_with_duty_cycle+18j
RAM:0CC9										   ; delay_B_with_duty_cycle+1Cj
RAM:0CC9 1D			     dec     e
RAM:0CCA C2 CE 0C		     jp	     NZ, loc_CCE
RAM:0CCD 5E			     ld	     e,	(hl)
RAM:0CCE
RAM:0CCE	     loc_CCE:								   ; CODE XREF:	delay_B_with_duty_cycle+13j
RAM:0CCE 0D			     dec     c
RAM:0CCF C2 C9 0C		     jp	     NZ, loc_CC9
RAM:0CD2 15			     dec     d
RAM:0CD3 C2 C9 0C		     jp	     NZ, loc_CC9
RAM:0CD6 23			     inc     hl
RAM:0CD7 CD 43 0D		     call    update_chaser_pods_cmd_entry
RAM:0CDA 05			     dec     b
RAM:0CDB CA E9 0C		     jp	     Z,	delay_exit
RAM:0CDE 3A 87 17		     ld	     a,	(delay_cycle)
RAM:0CE1 EE 01			     xor     #1
RAM:0CE3 CA C4 0C		     jp	     Z,	loc_CC4
RAM:0CE6 C3 B9 0C		     jp	     loc_CB9
RAM:0CE9	     ; ---------------------------------------------------------------------------
RAM:0CE9
RAM:0CE9	     delay_exit:							   ; CODE XREF:	delay_B_with_duty_cycle+24j
RAM:0CE9 D1			     pop     de
RAM:0CEA E1			     pop     hl
RAM:0CEB C9			     ret
RAM:0CEB	     ; End of function delay_B_with_duty_cycle
RAM:0CEB
RAM:0CEC
RAM:0CEC	     ; =============== S U B R O U T I N E =======================================
RAM:0CEC
RAM:0CEC
RAM:0CEC	     clear_video_with_B:						   ; CODE XREF:	handle_low_power-972p
RAM:0CEC										   ; handle_low_power-5F5p
RAM:0CEC 21 00 CC		     ld	     hl, #VIDEO
RAM:0CEF
RAM:0CEF	     loc_CEF:								   ; CODE XREF:	clear_video_with_B+8j
RAM:0CEF 70			     ld	     (hl), b
RAM:0CF0 23			     inc     hl
RAM:0CF1 7C			     ld	     a,	h
RAM:0CF2 FE D0			     cp	     #0xD0 ; 'Ð'
RAM:0CF4 C2 EF 0C		     jp	     NZ, loc_CEF
RAM:0CF7 C9			     ret
RAM:0CF7	     ; End of function clear_video_with_B
RAM:0CF7
RAM:0CF8
RAM:0CF8	     ; =============== S U B R O U T I N E =======================================
RAM:0CF8
RAM:0CF8
RAM:0CF8	     rand_0_9:								   ; CODE XREF:	handle_low_power:init_klingons_leftp
RAM:0CF8										   ; handle_low_power-8D8p ...
RAM:0CF8 C5			     push    bc
RAM:0CF9 E5			     push    hl
RAM:0CFA 2A FB 1F		     ld	     hl, (0x1FFB)
RAM:0CFD
RAM:0CFD	     loc_CFD:								   ; CODE XREF:	rand_0_9+23j
RAM:0CFD 06 17			     ld	     b,	#23
RAM:0CFF 7D			     ld	     a,	l
RAM:0D00
RAM:0D00	     loc_D00:								   ; CODE XREF:	rand_0_9+18j
RAM:0D00 E6 06			     and     #6
RAM:0D02 37			     scf
RAM:0D03 EA 07 0D		     jp	     PE, loc_D07
RAM:0D06 3F			     ccf
RAM:0D07
RAM:0D07	     loc_D07:								   ; CODE XREF:	rand_0_9+Bj
RAM:0D07 7C			     ld	     a,	h
RAM:0D08 1F			     rra
RAM:0D09 67			     ld	     h,	a
RAM:0D0A 7D			     ld	     a,	l
RAM:0D0B 1F			     rra
RAM:0D0C E6 FE			     and     #0xFE ; 'þ'
RAM:0D0E 6F			     ld	     l,	a
RAM:0D0F 05			     dec     b
RAM:0D10 C2 00 0D		     jp	     NZ, loc_D00
RAM:0D13 22 FB 1F		     ld	     (0x1FFB), hl
RAM:0D16 7C			     ld	     a,	h
RAM:0D17 E6 0F			     and     #0xF
RAM:0D19 FE 0A			     cp	     #0xA
RAM:0D1B D2 FD 0C		     jp	     NC, loc_CFD
RAM:0D1E E1			     pop     hl
RAM:0D1F C1			     pop     bc
RAM:0D20 C9			     ret
RAM:0D20	     ; End of function rand_0_9
RAM:0D20
RAM:0D21
RAM:0D21	     ; =============== S U B R O U T I N E =======================================
RAM:0D21
RAM:0D21
RAM:0D21	     print_experimental_ray_outcome:					   ; CODE XREF:	RAM:077Fj
RAM:0D21										   ; RAM:0799p	...
RAM:0D21 D5			     push    de
RAM:0D22 11 D7 14		     ld	     de, #aSpockTheExperi			   ; "SPOCK: THE EXPERIMENTAL RAY"
RAM:0D25 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:0D28 CD 34 0D		     call    clear_last_2_lines_print_string
RAM:0D2B D1			     pop     de
RAM:0D2C 23			     inc     hl
RAM:0D2D CD 37 0D		     call    print_string
RAM:0D30 C9			     ret
RAM:0D30	     ; End of function print_experimental_ray_outcome
RAM:0D30
RAM:0D31
RAM:0D31	     ; =============== S U B R O U T I N E =======================================
RAM:0D31
RAM:0D31
RAM:0D31	     print_string_last_line:						   ; CODE XREF:	handle_low_power-96Cp
RAM:0D31										   ; handle_low_power-7DCp ...
RAM:0D31 21 C0 CF		     ld	     hl, # VIDEO+0x3C0
RAM:0D31	     ; End of function print_string_last_line
RAM:0D31
RAM:0D34
RAM:0D34	     ; =============== S U B R O U T I N E =======================================
RAM:0D34
RAM:0D34
RAM:0D34	     clear_last_2_lines_print_string:					   ; CODE XREF:	handle_low_power-7F8p
RAM:0D34										   ; update_power_distribution+48p ...
RAM:0D34 CD B5 0E		     call    clear_last_2_lines
RAM:0D34	     ; End of function clear_last_2_lines_print_string
RAM:0D34
RAM:0D37
RAM:0D37	     ; =============== S U B R O U T I N E =======================================
RAM:0D37
RAM:0D37
RAM:0D37	     print_string:							   ; CODE XREF:	handle_low_power-963p
RAM:0D37										   ; handle_low_power-82Fp ...
RAM:0D37 1A			     ld	     a,	(de)
RAM:0D38 B7			     or	     a
RAM:0D39 C8			     ret     Z
RAM:0D3A 77			     ld	     (hl), a
RAM:0D3B 13			     inc     de
RAM:0D3C 23			     inc     hl
RAM:0D3D C3 37 0D		     jp	     print_string
RAM:0D3D	     ; End of function print_string
RAM:0D3D
RAM:0D40
RAM:0D40	     ; =============== S U B R O U T I N E =======================================
RAM:0D40
RAM:0D40
RAM:0D40	     delay_B_and_update_all:						   ; CODE XREF:	RAM:0247p
RAM:0D40										   ; RAM:02B5p	...
RAM:0D40 CD B7 0C		     call    delay_B_with_duty_cycle
RAM:0D40	     ; End of function delay_B_and_update_all
RAM:0D40
RAM:0D43
RAM:0D43	     ; =============== S U B R O U T I N E =======================================
RAM:0D43
RAM:0D43
RAM:0D43	     update_chaser_pods_cmd_entry:					   ; CODE XREF:	handle_low_power-83Ep
RAM:0D43										   ; handle_low_power:loc_1CEp	...
RAM:0D43
RAM:0D43	     ; FUNCTION	CHUNK AT RAM:056A SIZE 00000005	BYTES
RAM:0D43
RAM:0D43 E5			     push    hl
RAM:0D44 D5			     push    de
RAM:0D45 C5			     push    bc
RAM:0D46 2A 84 17		     ld	     hl, (chaser_addr)
RAM:0D49 7E			     ld	     a,	(hl)
RAM:0D4A C6 80			     add     a,	#0x80 ;	'€'
RAM:0D4C 77			     ld	     (hl), a
RAM:0D4D 23			     inc     hl
RAM:0D4E 23			     inc     hl
RAM:0D4F 7D			     ld	     a,	l
RAM:0D50 FE 2B			     cp	     #0x2B ; '+'
RAM:0D52 FA 57 0D		     jp	     M,	loc_D57
RAM:0D55 2E 19			     ld	     l,	#0x19
RAM:0D57
RAM:0D57	     loc_D57:								   ; CODE XREF:	update_chaser_pods_cmd_entry+Fj
RAM:0D57 7E			     ld	     a,	(hl)
RAM:0D58 C6 80			     add     a,	#0x80 ;	'€'
RAM:0D5A 77			     ld	     (hl), a
RAM:0D5B 22 84 17		     ld	     (chaser_addr), hl
RAM:0D5E 3A 7A 1D		     ld	     a,	(experimental_ray_disabled+2)
RAM:0D61 A7			     and     a
RAM:0D62 CA 73 0D		     jp	     Z,	loc_D73
RAM:0D65 06 05			     ld	     b,	#5
RAM:0D67 21 BB CC		     ld	     hl, # VIDEO+0xBB
RAM:0D6A
RAM:0D6A	     loc_D6A:								   ; CODE XREF:	update_chaser_pods_cmd_entry+2Dj
RAM:0D6A 7E			     ld	     a,	(hl)
RAM:0D6B C6 80			     add     a,	#0x80 ;	'€'
RAM:0D6D 77			     ld	     (hl), a
RAM:0D6E 23			     inc     hl
RAM:0D6F 05			     dec     b
RAM:0D70 C2 6A 0D		     jp	     NZ, loc_D6A
RAM:0D73
RAM:0D73	     loc_D73:								   ; CODE XREF:	update_chaser_pods_cmd_entry+1Fj
RAM:0D73 3A 79 1D		     ld	     a,	(experimental_ray_disabled+1)
RAM:0D76 A7			     and     a
RAM:0D77 C2 F0 0D		     jp	     NZ, handle_cmd_entry
RAM:0D7A 11 06 00		     ld	     de, #6
RAM:0D7D 21 5C 1D		     ld	     hl, #antimatter_pod_tbl
RAM:0D80
RAM:0D80	     loc_D80:								   ; CODE XREF:	update_chaser_pods_cmd_entry+48j
RAM:0D80 7E			     ld	     a,	(hl)
RAM:0D81 FE FF			     cp	     #0xFF
RAM:0D83 CA F0 0D		     jp	     Z,	handle_cmd_entry
RAM:0D86 A7			     and     a
RAM:0D87 C2 8E 0D		     jp	     NZ, get_pod_data
RAM:0D8A
RAM:0D8A	     next_pod:								   ; CODE XREF:	update_chaser_pods_cmd_entry+4Dj
RAM:0D8A										   ; update_chaser_pods_cmd_entry+65j
RAM:0D8A 19			     add     hl, de
RAM:0D8B C3 80 0D		     jp	     loc_D80
RAM:0D8E	     ; ---------------------------------------------------------------------------
RAM:0D8E
RAM:0D8E	     get_pod_data:							   ; CODE XREF:	update_chaser_pods_cmd_entry+44j
RAM:0D8E FE 01			     cp	     #1
RAM:0D90 C2 8A 0D		     jp	     NZ, next_pod
RAM:0D93 E5			     push    hl
RAM:0D94 23			     inc     hl
RAM:0D95 4E			     ld	     c,	(hl)
RAM:0D96 23			     inc     hl
RAM:0D97 46			     ld	     b,	(hl)
RAM:0D98 23			     inc     hl
RAM:0D99 5E			     ld	     e,	(hl)
RAM:0D9A 23			     inc     hl
RAM:0D9B 56			     ld	     d,	(hl)
RAM:0D9C 23			     inc     hl
RAM:0D9D 7E			     ld	     a,	(hl)
RAM:0D9E A7			     and     a
RAM:0D9F CA AB 0D		     jp	     Z,	move_pod
RAM:0DA2 3D			     dec     a
RAM:0DA3 77			     ld	     (hl), a
RAM:0DA4 E1			     pop     hl
RAM:0DA5
RAM:0DA5	     offset_for_next_pod:						   ; CODE XREF:	update_chaser_pods_cmd_entry+83j
RAM:0DA5 11 06 00		     ld	     de, #6
RAM:0DA8 C3 8A 0D		     jp	     next_pod
RAM:0DAB	     ; ---------------------------------------------------------------------------
RAM:0DAB
RAM:0DAB	     move_pod:								   ; CODE XREF:	update_chaser_pods_cmd_entry+5Cj
RAM:0DAB 3A D2 17		     ld	     a,	(pod_speed)
RAM:0DAE 77			     ld	     (hl), a
RAM:0DAF 62			     ld	     h,	d
RAM:0DB0 6B			     ld	     l,	e
RAM:0DB1 36 2E			     ld	     (hl), #0x2E ; '.'
RAM:0DB3 09			     add     hl, bc
RAM:0DB4 7E			     ld	     a,	(hl)
RAM:0DB5 FE 2E			     cp	     #0x2E ; '.'
RAM:0DB7 C2 C9 0D		     jp	     NZ, change_pod_dir
RAM:0DBA 36 23			     ld	     (hl), #0x23 ; '#'
RAM:0DBC D1			     pop     de
RAM:0DBD D5			     push    de
RAM:0DBE 13			     inc     de
RAM:0DBF 13			     inc     de
RAM:0DC0 EB			     ex	     de, hl
RAM:0DC1
RAM:0DC1	     loc_DC1:								   ; CODE XREF:	update_chaser_pods_cmd_entry+AAj
RAM:0DC1 23			     inc     hl
RAM:0DC2 73			     ld	     (hl), e
RAM:0DC3 23			     inc     hl
RAM:0DC4 72			     ld	     (hl), d
RAM:0DC5 E1			     pop     hl
RAM:0DC6 C3 A5 0D		     jp	     offset_for_next_pod
RAM:0DC9	     ; ---------------------------------------------------------------------------
RAM:0DC9
RAM:0DC9	     change_pod_dir:							   ; CODE XREF:	update_chaser_pods_cmd_entry+74j
RAM:0DC9										   ; update_chaser_pods_cmd_entry+8Bj ...
RAM:0DC9 CD F8 0C		     call    rand_0_9
RAM:0DCC FE 08			     cp	     #8
RAM:0DCE F2 C9 0D		     jp	     P,	change_pod_dir
RAM:0DD1 21 2C 19		     ld	     hl, #dir_addr_delta_tbl
RAM:0DD4 07			     rlca
RAM:0DD5 85			     add     a,	l
RAM:0DD6 6F			     ld	     l,	a
RAM:0DD7 7E			     ld	     a,	(hl)
RAM:0DD8 23			     inc     hl
RAM:0DD9 66			     ld	     h,	(hl)
RAM:0DDA 6F			     ld	     l,	a
RAM:0DDB 44			     ld	     b,	h
RAM:0DDC 4D			     ld	     c,	l
RAM:0DDD 19			     add     hl, de
RAM:0DDE 7E			     ld	     a,	(hl)
RAM:0DDF FE 2E			     cp	     #0x2E ; '.'
RAM:0DE1 C2 C9 0D		     jp	     NZ, change_pod_dir
RAM:0DE4 36 23			     ld	     (hl), #0x23 ; '#'
RAM:0DE6 D1			     pop     de
RAM:0DE7 D5			     push    de
RAM:0DE8 13			     inc     de
RAM:0DE9 EB			     ex	     de, hl
RAM:0DEA 71			     ld	     (hl), c
RAM:0DEB 23			     inc     hl
RAM:0DEC 70			     ld	     (hl), b
RAM:0DED C3 C1 0D		     jp	     loc_DC1
RAM:0DF0	     ; ---------------------------------------------------------------------------
RAM:0DF0
RAM:0DF0	     handle_cmd_entry:							   ; CODE XREF:	update_chaser_pods_cmd_entry+34j
RAM:0DF0										   ; update_chaser_pods_cmd_entry+40j
RAM:0DF0 3A 72 1D		     ld	     a,	(cmd_flag)
RAM:0DF3 A7			     and     a
RAM:0DF4 CA 6A 0E		     jp	     Z,	loc_E6A
RAM:0DF7 CD C3 01		     call    keyboard_scan
RAM:0DFA CA 6A 0E		     jp	     Z,	loc_E6A
RAM:0DFD FE 7F			     cp	     #0x7F ; ''
RAM:0DFF CA 51 0E		     jp	     Z,	clear_cmd_buffer
RAM:0E02 2A 92 17		     ld	     hl, (cmd_entry_addr)
RAM:0E05 77			     ld	     (hl), a
RAM:0E06 23			     inc     hl
RAM:0E07 22 92 17		     ld	     (cmd_entry_addr), hl
RAM:0E0A FE 0D			     cp	     #0xD
RAM:0E0C CA 1E 0E		     jp	     Z,	cmd_entered
RAM:0E0F 3A 73 1D		     ld	     a,	(loc_1D73)
RAM:0E12 3C			     inc     a
RAM:0E13 FE 07			     cp	     #7
RAM:0E15 F2 51 0E		     jp	     P,	clear_cmd_buffer
RAM:0E18 32 73 1D		     ld	     (loc_1D73), a
RAM:0E1B C3 6A 0E		     jp	     loc_E6A
RAM:0E1E	     ; ---------------------------------------------------------------------------
RAM:0E1E
RAM:0E1E	     cmd_entered:							   ; CODE XREF:	update_chaser_pods_cmd_entry+C9j
RAM:0E1E 97			     sub     a
RAM:0E1F 32 72 1D		     ld	     (cmd_flag), a
RAM:0E22 21 B7 CE		     ld	     hl, # VIDEO+0x2B7
RAM:0E25 46			     ld	     b,	(hl)
RAM:0E26 3A 76 1D		     ld	     a,	(computer_malfunction)
RAM:0E29 A7			     and     a
RAM:0E2A CA 38 0E		     jp	     Z,	loc_E38
RAM:0E2D 78			     ld	     a,	b
RAM:0E2E FE 4C			     cp	     #0x4C ; 'L'
RAM:0E30 CA 04 C0		     jp	     Z,	0xC004
RAM:0E33 FE 49			     cp	     #0x49 ; 'I'
RAM:0E35 C2 51 0E		     jp	     NZ, clear_cmd_buffer
RAM:0E38
RAM:0E38	     loc_E38:								   ; CODE XREF:	update_chaser_pods_cmd_entry+E7j
RAM:0E38 23			     inc     hl
RAM:0E39 22 92 17		     ld	     (cmd_entry_addr), hl
RAM:0E3C 21 A8 17		     ld	     hl, #cmd_tbl				   ; "WIPTDSEXAL"
RAM:0E3F 11 94 17		     ld	     de, #cmd_jump_vectors
RAM:0E42
RAM:0E42	     lookup_cmd:							   ; CODE XREF:	update_chaser_pods_cmd_entry+10Bj
RAM:0E42 7E			     ld	     a,	(hl)
RAM:0E43 A7			     and     a
RAM:0E44 CA 51 0E		     jp	     Z,	clear_cmd_buffer
RAM:0E47 B8			     cp	     b
RAM:0E48 CA 6E 0E		     jp	     Z,	found_cmd
RAM:0E4B 23			     inc     hl
RAM:0E4C 13			     inc     de
RAM:0E4D 13			     inc     de
RAM:0E4E C3 42 0E		     jp	     lookup_cmd
RAM:0E51	     ; ---------------------------------------------------------------------------
RAM:0E51
RAM:0E51	     clear_cmd_buffer:							   ; CODE XREF:	RAM:0B0Dj
RAM:0E51										   ; update_chaser_pods_cmd_entry+BCj ...
RAM:0E51 21 B7 CE		     ld	     hl, # VIDEO+0x2B7
RAM:0E54 22 92 17		     ld	     (cmd_entry_addr), hl
RAM:0E57 3E FF			     ld	     a,	#0xFF
RAM:0E59 32 72 1D		     ld	     (cmd_flag), a
RAM:0E5C
RAM:0E5C	     loc_E5C:								   ; CODE XREF:	update_chaser_pods_cmd_entry+120j
RAM:0E5C 3E 20			     ld	     a,	#0x20 ;	' '
RAM:0E5E 77			     ld	     (hl), a
RAM:0E5F 23			     inc     hl
RAM:0E60 7E			     ld	     a,	(hl)
RAM:0E61 FE 20			     cp	     #0x20 ; ' '
RAM:0E63 C2 5C 0E		     jp	     NZ, loc_E5C
RAM:0E66 97			     sub     a
RAM:0E67 32 73 1D		     ld	     (loc_1D73), a
RAM:0E6A
RAM:0E6A	     loc_E6A:								   ; CODE XREF:	update_chaser_pods_cmd_entry+B1j
RAM:0E6A										   ; update_chaser_pods_cmd_entry+B7j ...
RAM:0E6A C1			     pop     bc
RAM:0E6B D1			     pop     de
RAM:0E6C E1			     pop     hl
RAM:0E6D C9			     ret
RAM:0E6E	     ; ---------------------------------------------------------------------------
RAM:0E6E
RAM:0E6E	     found_cmd:								   ; CODE XREF:	update_chaser_pods_cmd_entry+105j
RAM:0E6E EB			     ex	     de, hl
RAM:0E6F 11 51 0E		     ld	     de, #clear_cmd_buffer
RAM:0E72 D5			     push    de
RAM:0E73 C3 6A 05		     jp	     jump_HL_vector
RAM:0E73	     ; End of function update_chaser_pods_cmd_entry
RAM:0E73
RAM:0E76	     ; different to TRS-80 version
RAM:0E76
RAM:0E76	     ; =============== S U B R O U T I N E =======================================
RAM:0E76
RAM:0E76
RAM:0E76	     animate_destruction:						   ; CODE XREF:	handle_low_power-5FAp
RAM:0E76 3E 01			     ld	     a,	#1
RAM:0E78 32 79 1D		     ld	     (experimental_ray_disabled+1), a		   ; *** disable_pod_update
RAM:0E7B 21 00 CC		     ld	     hl, #VIDEO
RAM:0E7E 11 A8 0E		     ld	     de, #destruct_code
RAM:0E81 06 0D			     ld	     b,	#0xD
RAM:0E83
RAM:0E83	     loc_E83:								   ; CODE XREF:	animate_destruction+12j
RAM:0E83 1A			     ld	     a,	(de)
RAM:0E84 77			     ld	     (hl), a
RAM:0E85 13			     inc     de
RAM:0E86 23			     inc     hl
RAM:0E87 05			     dec     b
RAM:0E88 C2 83 0E		     jp	     NZ, loc_E83
RAM:0E8B 1E 0A			     ld	     e,	#0xA
RAM:0E8D
RAM:0E8D	     loc_E8D:								   ; CODE XREF:	animate_destruction+1Ej
RAM:0E8D CD 00 CC		     call    VIDEO
RAM:0E90 CD B2 0C		     call    rnd_delay
RAM:0E93 1D			     dec     e
RAM:0E94 C2 8D 0E		     jp	     NZ, loc_E8D
RAM:0E97 21 00 CC		     ld	     hl, #VIDEO
RAM:0E9A 06 0D			     ld	     b,	#0xD
RAM:0E9C
RAM:0E9C	     loc_E9C:								   ; CODE XREF:	animate_destruction+2Aj
RAM:0E9C 36 20			     ld	     (hl), #0x20 ; ' '
RAM:0E9E 05			     dec     b
RAM:0E9F 23			     inc     hl
RAM:0EA0 C2 9C 0E		     jp	     NZ, loc_E9C
RAM:0EA3 97			     sub     a
RAM:0EA4 32 79 1D		     ld	     (experimental_ray_disabled+1), a
RAM:0EA7 C9			     ret
RAM:0EA7	     ; End of function animate_destruction
RAM:0EA7
RAM:0EA8	     ; ---------------------------------------------------------------------------
RAM:0EA8	     ; this is moved to	video memory and executed there
RAM:0EA8
RAM:0EA8	     destruct_code:							   ; DATA XREF:	animate_destruction+8o
RAM:0EA8 0E 54			     ld	     c,	#0x54 ;	'T'
RAM:0EAA 3E FF			     ld	     a,	#0xFF
RAM:0EAC 3D			     dec     a
RAM:0EAD C2 04 CC		     jp	     NZ, VIDEO+4
RAM:0EB0 0D			     dec     c
RAM:0EB1 C2 02 CC		     jp	     NZ, VIDEO+2
RAM:0EB4 C9			     ret
RAM:0EB5
RAM:0EB5	     ; =============== S U B R O U T I N E =======================================
RAM:0EB5
RAM:0EB5
RAM:0EB5	     clear_last_2_lines:						   ; CODE XREF:	RAM:warp_drivep
RAM:0EB5										   ; RAM:loc_26Ap ...
RAM:0EB5 E5			     push    hl
RAM:0EB6 3E 80			     ld	     a,	#0x80 ;	'€'
RAM:0EB8 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:0EBB
RAM:0EBB	     loc_EBB:								   ; CODE XREF:	clear_last_2_lines+Aj
RAM:0EBB 36 20			     ld	     (hl), #0x20 ; ' '
RAM:0EBD 3D			     dec     a
RAM:0EBE 23			     inc     hl
RAM:0EBF C2 BB 0E		     jp	     NZ, loc_EBB
RAM:0EC2 E1			     pop     hl
RAM:0EC3 C9			     ret
RAM:0EC3	     ; End of function clear_last_2_lines
RAM:0EC3
RAM:0EC4
RAM:0EC4	     ; =============== S U B R O U T I N E =======================================
RAM:0EC4
RAM:0EC4
RAM:0EC4	     print_10_lines:							   ; CODE XREF:	handle_low_power-838p
RAM:0EC4										   ; handle_low_power-5EFp ...
RAM:0EC4 21 57 CC		     ld	     hl, # VIDEO+0x57
RAM:0EC7 3E 0A			     ld	     a,	#10
RAM:0EC9
RAM:0EC9	     loc_EC9:								   ; CODE XREF:	print_10_lines+10j
RAM:0EC9 F5			     push    af
RAM:0ECA CD 37 0D		     call    print_string
RAM:0ECD F1			     pop     af
RAM:0ECE 01 2B 00		     ld	     bc, #0x2B ; '+'
RAM:0ED1 09			     add     hl, bc
RAM:0ED2 3D			     dec     a
RAM:0ED3 13			     inc     de
RAM:0ED4 C2 C9 0E		     jp	     NZ, loc_EC9
RAM:0ED7 C9			     ret
RAM:0ED7	     ; End of function print_10_lines
RAM:0ED7
RAM:0ED8
RAM:0ED8	     ; =============== S U B R O U T I N E =======================================
RAM:0ED8
RAM:0ED8
RAM:0ED8	     init_sector:							   ; CODE XREF:	RAM:0242p
RAM:0ED8										   ; RAM:02CDj	...
RAM:0ED8 2A BA 17		     ld	     hl, (enterprise_video_addr)
RAM:0EDB 11 A9 33		     ld	     de, #0x33A9
RAM:0EDE 19			     add     hl, de
RAM:0EDF 11 C0 FF		     ld	     de, #0xFFC0
RAM:0EE2 06 00			     ld	     b,	#0
RAM:0EE4
RAM:0EE4	     loc_EE4:								   ; CODE XREF:	init_sector+13j
RAM:0EE4 19			     add     hl, de
RAM:0EE5 7C			     ld	     a,	h
RAM:0EE6 A7			     and     a
RAM:0EE7 FA EE 0E		     jp	     M,	loc_EEE
RAM:0EEA 04			     inc     b
RAM:0EEB C3 E4 0E		     jp	     loc_EE4
RAM:0EEE	     ; ---------------------------------------------------------------------------
RAM:0EEE
RAM:0EEE	     loc_EEE:								   ; CODE XREF:	init_sector+Fj
RAM:0EEE 11 40 00		     ld	     de, #0x40 ; '@'
RAM:0EF1 19			     add     hl, de
RAM:0EF2 7D			     ld	     a,	l
RAM:0EF3 0F			     rrca
RAM:0EF4 E6 0F			     and     #0xF
RAM:0EF6 C6 30			     add     a,	#0x30 ;	'0'
RAM:0EF8 21 3E CD		     ld	     hl, # VIDEO+0x13E
RAM:0EFB 77			     ld	     (hl), a
RAM:0EFC 21 3C CD		     ld	     hl, # VIDEO+0x13C
RAM:0EFF 78			     ld	     a,	b
RAM:0F00 C6 30			     add     a,	#0x30 ;	'0'
RAM:0F02 77			     ld	     (hl), a
RAM:0F03 C9			     ret
RAM:0F03	     ; End of function init_sector
RAM:0F03
RAM:0F04
RAM:0F04	     ; =============== S U B R O U T I N E =======================================
RAM:0F04
RAM:0F04
RAM:0F04	     update_star_time:							   ; CODE XREF:	handle_low_power-7BAp
RAM:0F04 21 7F CC		     ld	     hl, # VIDEO+0x7F
RAM:0F07
RAM:0F07	     loc_F07:								   ; CODE XREF:	update_star_time+Cj
RAM:0F07 7E			     ld	     a,	(hl)
RAM:0F08 3C			     inc     a
RAM:0F09 77			     ld	     (hl), a
RAM:0F0A FE 3A			     cp	     #0x3A ; ':'
RAM:0F0C C0			     ret     NZ
RAM:0F0D 36 30			     ld	     (hl), #0x30 ; '0'
RAM:0F0F 2B			     dec     hl
RAM:0F10 C3 07 0F		     jp	     loc_F07
RAM:0F10	     ; End of function update_star_time
RAM:0F10
RAM:0F13
RAM:0F13	     ; =============== S U B R O U T I N E =======================================
RAM:0F13
RAM:0F13
RAM:0F13	     dec_klingons:							   ; CODE XREF:	fire_phasor+68p
RAM:0F13										   ; move_photon_torpedo+159p ...
RAM:0F13 3A F3 17		     ld	     a,	(quadrant)
RAM:0F16 CD 92 0B		     call    get_ptr_quadrant_A_Data
RAM:0F19 35			     dec     (hl)
RAM:0F1A 3A EA 17		     ld	     a,	(klingons_left)
RAM:0F1D C6 99			     add     a,	#0x99 ;	'™'
RAM:0F1F 27			     daa
RAM:0F20 32 EA 17		     ld	     (klingons_left), a
RAM:0F20	     ; End of function dec_klingons
RAM:0F20
RAM:0F23
RAM:0F23	     ; =============== S U B R O U T I N E =======================================
RAM:0F23
RAM:0F23
RAM:0F23	     print_klingons_left:						   ; CODE XREF:	handle_low_power-84Ep
RAM:0F23 3A EA 17		     ld	     a,	(klingons_left)
RAM:0F26 21 FE CD		     ld	     hl, # VIDEO+0x1FE
RAM:0F29 A7			     and     a
RAM:0F2A C2 58 0F		     jp	     NZ, print_BCD_byte
RAM:0F2D CD 58 0F		     call    print_BCD_byte
RAM:0F30 21 80 CF		     ld	     hl, # VIDEO+0x380
RAM:0F33 11 71 14		     ld	     de, #aStarfleetComma			   ; "STARFLEET	COMMAND:  CONGRATULATIONS, YO"...
RAM:0F36 CD 34 0D		     call    clear_last_2_lines_print_string
RAM:0F39 21 C5 CC		     ld	     hl, # VIDEO+0xC5
RAM:0F3C 36 30			     ld	     (hl), #0x30 ; '0'
RAM:0F3E 11 29 1A		     ld	     de, #aHQ_Officer				   ; "	       ...	   "
RAM:0F41 CD C4 0E		     call    print_10_lines
RAM:0F44 97			     sub     a
RAM:0F45 32 72 1D		     ld	     (cmd_flag), a
RAM:0F48 3E 01			     ld	     a,	#1
RAM:0F4A 32 79 1D		     ld	     (experimental_ray_disabled+1), a
RAM:0F4D 06 0C			     ld	     b,	#0xC
RAM:0F4F C3 B8 03		     jp	     loc_3B8
RAM:0F4F	     ; End of function print_klingons_left
RAM:0F4F
RAM:0F52
RAM:0F52	     ; =============== S U B R O U T I N E =======================================
RAM:0F52
RAM:0F52
RAM:0F52	     print_power_avail:							   ; CODE XREF:	RAM:035Bp
RAM:0F52										   ; move_photon_torpedo+352p ...
RAM:0F52 21 BD CD		     ld	     hl, # VIDEO+0x1BD
RAM:0F55 3A 4A 19		     ld	     a,	(power_avail)
RAM:0F55	     ; End of function print_power_avail
RAM:0F55
RAM:0F58
RAM:0F58	     ; =============== S U B R O U T I N E =======================================
RAM:0F58
RAM:0F58
RAM:0F58	     print_BCD_byte:							   ; CODE XREF:	RAM:0379p
RAM:0F58										   ; RAM:08FCj	...
RAM:0F58 5F			     ld	     e,	a
RAM:0F59 0F			     rrca
RAM:0F5A 0F			     rrca
RAM:0F5B 0F			     rrca
RAM:0F5C 0F			     rrca
RAM:0F5D E6 0F			     and     #0xF
RAM:0F5F C6 30			     add     a,	#0x30 ;	'0'
RAM:0F61 77			     ld	     (hl), a
RAM:0F62 23			     inc     hl
RAM:0F63 7B			     ld	     a,	e
RAM:0F64 E6 0F			     and     #0xF
RAM:0F66 C6 30			     add     a,	#0x30 ;	'0'
RAM:0F68 77			     ld	     (hl), a
RAM:0F69 C9			     ret
RAM:0F69	     ; End of function print_BCD_byte
RAM:0F69
RAM:0F6A
RAM:0F6A	     ; =============== S U B R O U T I N E =======================================
RAM:0F6A
RAM:0F6A
RAM:0F6A	     dec_photon_torps_and_print:					   ; CODE XREF:	RAM:04DCp
RAM:0F6A 21 7D CD		     ld	     hl, # VIDEO+0x17D
RAM:0F6D 3A 4B 19		     ld	     a,	(photon_torps)
RAM:0F70 A7			     and     a
RAM:0F71 C2 76 0F		     jp	     NZ, loc_F76
RAM:0F74 37			     scf
RAM:0F75 C9			     ret
RAM:0F76	     ; ---------------------------------------------------------------------------
RAM:0F76
RAM:0F76	     loc_F76:								   ; CODE XREF:	dec_photon_torps_and_print+7j
RAM:0F76 C6 99			     add     a,	#0x99 ;	'™'
RAM:0F78 27			     daa
RAM:0F79 32 4B 19		     ld	     (photon_torps), a
RAM:0F7C C3 58 0F		     jp	     print_BCD_byte
RAM:0F7C	     ; End of function dec_photon_torps_and_print
RAM:0F7C
RAM:0F7C	     ; ---------------------------------------------------------------------------
RAM:0F7F 53 54 41 52+aStarfleetCom_0:.ascii 'STARFLEET COMMAND:(CODE 7)THE KLINGONS HAVE BROKEN INTERGALACTICTREATY.  YOUR ORDERS ARE TO'
RAM:0F7F 46 4C 45 45+									   ; DATA XREF:	handle_low_power-835o
RAM:0F7F 54 20 43 4F+		     .ascii ' ADVANCE TO KLINGON TERRITORY AND    DESTROY ALL KLINGON VESSELS'
RAM:0F7F 4D 4D 41 4E+		     .db 0
RAM:101B 57 41 52 50+aWarpWImpIPhrPP:.ascii 'WARP=W,IMP=I,PHR=P,PTP=T,PWRDST=D,SELFD=S,EXPRAY=E,POD=A,XPOD=X '
RAM:101B 3D 57 2C 49+									   ; DATA XREF:	handle_low_power-7FBo
RAM:101B 4D 50 3D 49+		     .db 0
RAM:105C 53 43 4F 54+aScottyCaptainT:.ascii 'SCOTTY:CAPTAIN, THE ENGINES HAVEN'            ; DATA XREF: RAM:loc_20Do
RAM:105C 54 59 3A 43+		     .db 0x27
RAM:105C 41 50 54 41+		     .ascii 'T THE POWER TO OPERATE'
RAM:105C 49 4E 2C 20+		     .db 0
RAM:1095 53 43 4F 54+aScottTheUnknow:.ascii 'SCOTT: THE UNKNOWN WE SHOT DISABLED THE WARP DRIVE CAPTAIN'
RAM:1095 54 3A 20 54+									   ; DATA XREF:	RAM:loc_213o
RAM:1095 48 45 20 55+		     .db 0
RAM:10D0 53 50 4F 43+aSpockCaptainIA:.ascii 'SPOCK:CAPTAIN, I AM AFRAID YOUR LAST COMMAND MADE NO SENSE'
RAM:10D0 4B 3A 43 41+									   ; DATA XREF:	RAM:print_no_sense_and_reto
RAM:10D0 50 54 41 49+		     .db 0
RAM:110B 53 50 4F 43+aSpockCaptainWe:.ascii 'SPOCK:CAPTAIN, WE HAVE BEEN BLOCKED BY AN UNKNOWN OBJECT'
RAM:110B 4B 3A 43 41+									   ; DATA XREF:	RAM:030Bo
RAM:110B 50 54 41 49+		     .db 0
RAM:1144 55 48 55 52+aUhuraTheStarba:.ascii 'UHURA:THE STARBASE HAS ACKNOWLEDGED OUR DOCKING, CAPTAIN'
RAM:1144 41 3A 54 48+									   ; DATA XREF:	RAM:dock_space_stationo
RAM:1144 45 20 53 54+		     .db 0
RAM:117D 20 44 4F 43+aDock:	     .ascii ' DOCK'                                        ; DATA XREF: RAM:034Bo
RAM:117D 4B 00			     .db 0
RAM:1183 47 52 45 45+aGreen:	     .ascii 'GREEN'                                        ; DATA XREF: handle_low_power+76o
RAM:1183 4E 00			     .db 0
RAM:1189 20 52 45 44+aRed:	     .ascii ' RED '                                        ; DATA XREF: handle_low_power+8Bo
RAM:1189 20 00			     .db 0
RAM:118F 43 52 54 43+aCrtcl:	     .ascii 'CRTCL'                                        ; DATA XREF: update_power_distribution+6Do
RAM:118F 4C 00			     .db 0
RAM:1195 53 50 4F 43+aSpockSirWeHave:.ascii 'SPOCK: SIR, WE HAVE HIT A TRITON MINE'        ; DATA XREF: move_photon_torpedo:hit_triton_mineo
RAM:1195 4B 3A 20 53+		     .db 0
RAM:11BB 55 48 55 52+aUhuraSirWeMade:.ascii 'UHURA:SIR, WE MADE CONTACT WITH A KLINGON VESSEL'
RAM:11BB 41 3A 53 49+									   ; DATA XREF:	RAM:03D4o
RAM:11BB 52 2C 20 57+		     .db 0
RAM:11EC 4B 4C 49 4E+aKlingonWatchWh:.ascii 'KLINGON: WATCH WHERE YOU ARE GOING YOU TURKEY!!'
RAM:11EC 47 4F 4E 3A+									   ; DATA XREF:	RAM:03CEo
RAM:11EC 20 57 41 54+		     .db 0
RAM:121C 53 55 4C 55+aSuluWeHitAStar:.ascii 'SULU:WE HIT A STAR!?!'                        ; DATA XREF: RAM:hit_staro
RAM:121C 3A 57 45 20+		     .db 0
RAM:1232 53 43 4F 54+aScottCaptainWe:.ascii 'SCOTT:CAPTAIN, WE HAVEN'                      ; DATA XREF: RAM:0435o
RAM:1232 54 3A 43 41+		     .db 0x27
RAM:1232 50 54 41 49+		     .ascii 'T THE POWER TO FIRE PHASERS'
RAM:1232 4E 2C 20 57+		     .db 0
RAM:1266 53 50 4F 43+aSpockSirMySens:.ascii 'SPOCK:SIR, MY SENSORS SHOW PHASER HAD NO EFFECT'
RAM:1266 4B 3A 53 49+									   ; DATA XREF:	fire_phasor:phasor_misso
RAM:1266 52 2C 20 4D+		     .db 0
RAM:1296 53 43 4F 54+aScottCaptain_1:.ascii 'SCOTT:CAPTAIN, THE TORPEDO TUBES ARE POWER DEFICIENT'
RAM:1296 54 3A 43 41+									   ; DATA XREF:	RAM:loc_4EAo
RAM:1296 50 54 41 49+		     .db 0
RAM:12CB 43 4F 4D 50+aComputerObject:.ascii 'COMPUTER:OBJECT DESTROYED'                    ; DATA XREF: move_photon_torpedo+166o
RAM:12CB 55 54 45 52+		     .db 0
RAM:12E5 53 55 4C 55+aSuluTheEngines:.ascii 'SULU:THE ENGINES ARE EXPLODING'               ; DATA XREF: handle_low_power-7DFo
RAM:12E5 3A 54 48 45+		     .db 0
RAM:1304 53 43 4F 54+aScottCaptain_0:.ascii 'SCOTT:CAPTAIN, THE ENGINES ARE OVERLOADED, THEY CAN'
RAM:1304 54 3A 43 41+									   ; DATA XREF:	update_power_distribution:loc_6EFo
RAM:1304 50 54 41 49+		     .db 0x27
RAM:1304 4E 2C 20 54+		     .ascii 'T LAST AT   THAT RATE'
RAM:1304 48 45 20 45+		     .db 0
RAM:134E 43 4F 4D 50+aComputerSelf_0:.ascii 'COMPUTER:SELF DESTRUCT SEQUENCE INITIATED. 15 SECONDS REMAIN'
RAM:134E 55 54 45 52+									   ; DATA XREF:	RAM:072Bo
RAM:134E 3A 53 45 4C+		     .db 0
RAM:138B 43 4F 4D 50+aComputerSelfDe:.ascii 'COMPUTER:SELF DESTRUCT SEQUENCE ABORTED'      ; DATA XREF: RAM:0766o
RAM:138B 55 54 45 52+		     .db 0
RAM:13B3 4D 43 43 4F+aMccoyICanTAllo:.ascii 'MCCOY:I CAN'                                  ; DATA XREF: RAM:expr_8o
RAM:13B3 59 3A 49 20+		     .db 0x27
RAM:13B3 43 41 4E 27+		     .ascii 'T ALLOW YOU TO FIRE THE EXPERIMENTAL RAY'
RAM:13B3 54 20 41 4C+		     .db 0
RAM:13E8 43 48 45 4B+aChekovSirWeHav:.ascii 'CHEKOV:SIR, WE HAVE NO MORE PHOTON TORPEDOES' ; DATA XREF: RAM:print_no_more_photon_torpso
RAM:13E8 4F 56 3A 53+		     .db 0
RAM:1415 53 43 4F 54+aScottThereGoes:.ascii 'SCOTT:THERE GOES A DILITHIUM CRYSTAL, CAPTAIN'
RAM:1415 54 3A 54 48+									   ; DATA XREF:	lose_power_crystalo
RAM:1415 45 52 45 20+		     .db 0
RAM:1443 53 43 4F 54+aScottCaptainTh:.ascii 'SCOTT:CAPTAIN, THE SHIELDS ARE FALLING APART!'
RAM:1443 54 3A 43 41+									   ; DATA XREF:	print_shields_failingo
RAM:1443 50 54 41 49+		     .db 0
RAM:1471 53 54 41 52+aStarfleetComma:.ascii 'STARFLEET COMMAND:  CONGRATULATIONS, YOU HAVE DESTROYED ALL THE KLINGONS. YOU ARE PROMOTED '
RAM:1471 46 4C 45 45+									   ; DATA XREF:	print_klingons_left+10o
RAM:1471 54 20 43 4F+		     .ascii 'TO ADMIRAL'
RAM:1471 4D 4D 41 4E+		     .db 0
RAM:14D7 53 50 4F 43+aSpockTheExperi:.ascii 'SPOCK: THE EXPERIMENTAL RAY'                  ; DATA XREF: print_experimental_ray_outcome+1o
RAM:14D7 4B 3A 20 54+		     .db 0
RAM:14F3 49 53 20 46+aIsFiringPhoton:.ascii 'IS FIRING PHOTON TORPEDOES'                   ; DATA XREF: RAM:expr_9o
RAM:14F3 49 52 49 4E+		     .db 0
RAM:150E 43 41 55 53+aCausedAChangeI:.ascii 'CAUSED A CHANGE IN SPACIAL STRUCTURE'         ; DATA XREF: RAM:expr_0o
RAM:150E 45 44 20 41+		     .db 0
RAM:1533 48 41 53 20+aHasFrozenTimeF:.ascii 'HAS FROZEN TIME FOR THE KLINGONS'             ; DATA XREF: RAM:expr_1o
RAM:1533 46 52 4F 5A+		     .db 0
RAM:1554 48 41 53 20+aHasCausedAllTh:.ascii 'HAS CAUSED ALL THE KLINGONS TO BECOME    INVISIBLE'
RAM:1554 43 41 55 53+									   ; DATA XREF:	RAM:expr_2o
RAM:1554 45 44 20 41+		     .db 0
RAM:1587 43 4F 4D 50+aComputerPhoton:.ascii 'COMPUTER:PHOTON TORPEDO HAS NO EFFECT'        ; DATA XREF: move_photon_torpedo+56o
RAM:1587 55 54 45 52+		     .db 0
RAM:15AD 48 41 53 20+aHasJumbledTheQ:.ascii 'HAS JUMBLED THE QUADRANT'                     ; DATA XREF: RAM:expr_3o
RAM:15AD 4A 55 4D 42+		     .db 0
RAM:15C6 48 41 53 20+aHasDestroyedAl:.ascii 'HAS DESTROYED ALL THE KLINGONS IN     THE QUADRANT'
RAM:15C6 44 45 53 54+									   ; DATA XREF:	RAM:080Bo
RAM:15C6 52 4F 59 45+		     .db 0
RAM:15F9 44 45 53 54+aDestroysItself:.ascii 'DESTROYS ITSELF'                              ; DATA XREF: RAM:expr_5o
RAM:15F9 52 4F 59 53+		     .db 0
RAM:1609 48 41 53 20+aHasBackfiredOn:.ascii 'HAS BACKFIRED ON US'                          ; DATA XREF: RAM:expr_6o
RAM:1609 42 41 43 4B+		     .db 0
RAM:161D 48 41 53 20+aHasCausedAComp:.ascii 'HAS CAUSED A COMPUTER MALFUNCTION'            ; DATA XREF: RAM:expr_7o
RAM:161D 43 41 55 53+		     .db 0
RAM:163F 49 53 20 50+aIsPermanentlyD:.ascii 'IS PERMANENTLY DISABLED'                      ; DATA XREF: RAM:077Co
RAM:163F 45 52 4D 41+		     .db 0
RAM:1657 53 48 49 50+aShipsLogUssExe:.ascii 'SHIPS LOG-USS EXETER-CAPTAIN FOX: SENSORS FOUND DEBRIS BELIEVED THAT OF USS ENTERPRISE.'
RAM:1657 53 20 4C 4F+									   ; DATA XREF:	handle_low_power-5ECo
RAM:1657 47 2D 55 53+		     .db 0
RAM:16AF 45 4E 54 45+aEnterSpeedFact:.ascii 'ENTER SPEED FACTOR (9(SLOW)-0(FAST))'         ; DATA XREF: handle_low_power-96Fo
RAM:16AF 52 20 53 50+		     .db 0
RAM:16D4 43 48 45 43+aCheckovWeReOut:.ascii 'CHECKOV: WE'                                  ; DATA XREF: RAM:086Ao
RAM:16D4 4B 4F 56 3A+		     .db 0x27
RAM:16D4 20 57 45 27+		     .ascii 'RE OUT OF PODS'
RAM:16D4 52 45 20 4F+		     .db 0
RAM:16EF 43 4F 4D 50+aComputerThePod:.ascii 'COMPUTER: THE POD HAS BEEN USED'              ; DATA XREF: RAM:0893o
RAM:16EF 55 54 45 52+									   ; RAM:092Bo
RAM:16EF 3A 20 54 48+		     .db 0
RAM:170F 43 4F 4D 50+aComputerPodLau:.ascii 'COMPUTER: POD LAUNCH IS BLOCKED'              ; DATA XREF: RAM:print_pod_blockedo
RAM:170F 55 54 45 52+		     .db 0
RAM:172F 43 4F 4D 50+aComputerTheKli:.ascii 'COMPUTER: THE KLINGONS HAVE SURRENDERED'      ; DATA XREF: RAM:loc_76Co
RAM:172F 55 54 45 52+		     .db 0
RAM:1757 53 50 4F 43+aSpockTheUnknow:.ascii 'SPOCK: THE UNKNOWN IS STEALING POWER CAPTAIN' ; DATA XREF: RAM:torpedo_hit_unk_58o
RAM:1757 4B 3A 20 54+		     .db 0
RAM:1784 19 CF	     chaser_addr:    .dw 0xCF19						   ; DATA XREF:	handle_low_power-914r
RAM:1784										   ; update_chaser_pods_cmd_entry+3r ...
RAM:1786 00	     tmp_delay_cycle:.db 0						   ; DATA XREF:	fire_phasor+13w
RAM:1786										   ; fire_phasor+8Ar
RAM:1787 00	     delay_cycle:    .db 0						   ; DATA XREF:	delay_B_with_duty_cycle:loc_CC4w
RAM:1787										   ; delay_B_with_duty_cycle+27r
RAM:1788 02 02	     delay_duty_cycle_tbl:.db 2, 2					   ; DATA XREF:	delay_B_with_duty_cycle:loc_CB9o
RAM:178A 55 02			     .db 85, 2
RAM:178C 18 18			     .db 24, 24
RAM:178E 50 22			     .db 80, 34
RAM:1790 00			     .db    0
RAM:1791 08	     impulse_speed:  .db 8						   ; DATA XREF:	handle_low_power-940w
RAM:1791										   ; RAM:0289w	...
RAM:1792 B7 CE	     cmd_entry_addr: .dw 0xCEB7						   ; DATA XREF:	handle_low_power-935w
RAM:1792										   ; get_next_cmd_char+1r ...
RAM:1794 E5 01	     cmd_jump_vectors:.dw warp_drive					   ; DATA XREF:	update_chaser_pods_cmd_entry+FCo
RAM:1796 57 02			     .dw impulse_drive
RAM:1798 25 04			     .dw phasors
RAM:179A D9 04			     .dw photon_torpedo
RAM:179C 6F 06			     .dw power_distribution
RAM:179E 23 07			     .dw self_destruct
RAM:17A0 75 07			     .dw experimental_ray
RAM:17A2 08 09			     .dw explode_pod
RAM:17A4 66 08			     .dw antimatter_pod
RAM:17A6 04 C0	     cmd_l_vector:   .dw 0xC004						   ; DATA XREF:	RAM:1D9Fw
RAM:17A6										   ; RAM:1E32w	...
RAM:17A6										   ; leave game
RAM:17A8 57 49 50 54+cmd_tbl:	     .ascii 'WIPTDSEXAL'                                   ; DATA XREF: update_chaser_pods_cmd_entry+F9o
RAM:17A8 44 53 45 58+		     .db 0
RAM:17B3 57 4C 53 44+pwr_subcmd_tbl: .ascii 'WLSDPT'                                       ; DATA XREF: RAM:0679o
RAM:17B3 50 54 00		     .db 0
RAM:17BA 02 00	     enterprise_video_addr:.dw 2					   ; DATA XREF:	RAM:02A0r
RAM:17BA										   ; RAM:02BAw	...
RAM:17BC 00	     engine_explode_countdown:.db 0					   ; DATA XREF:	handle_low_power-7E9r
RAM:17BC										   ; handle_low_power-7E5w ...
RAM:17BD 03	     antimatter_pods:.db 3						   ; DATA XREF:	handle_low_power-993w
RAM:17BD										   ; RAM:0373w	...
RAM:17BE 86 05	     torpedo_hit_unknown_tbl:.dw torpedo_hit_unk_079
RAM:17C0 BF 05			     .dw torpedo_hit_unk_1
RAM:17C2 EF 05			     .dw torpedo_hit_unk_2
RAM:17C4 03 06			     .dw torpedo_hit_unk_3
RAM:17C6 27 06			     .dw torpedo_hit_unk_4
RAM:17C8 33 06			     .dw torpedo_hit_unk_58
RAM:17CA F7 05			     .dw torpedo_hit_unk_6
RAM:17CC 86 05			     .dw torpedo_hit_unk_079
RAM:17CE 33 06			     .dw torpedo_hit_unk_58
RAM:17D0 86 05			     .dw torpedo_hit_unk_079
RAM:17D2 06	     pod_speed:	     .db 6						   ; DATA XREF:	handle_low_power-98Ew
RAM:17D2										   ; RAM:08BCw	...
RAM:17D3 AA 07	     expr_tbl:	     .dw expr_0
RAM:17D5 CE 07			     .dw expr_1
RAM:17D7 D9 07			     .dw expr_2
RAM:17D9 FC 07			     .dw expr_3
RAM:17DB 08 08			     .dw expr_4
RAM:17DD 35 08			     .dw expr_5
RAM:17DF 40 08			     .dw expr_6
RAM:17E1 55 08			     .dw expr_7
RAM:17E3 60 08			     .dw expr_8
RAM:17E5 96 07			     .dw expr_9
RAM:17E7 00	     blocked_by_unknown:.db 0						   ; DATA XREF:	RAM:0307w
RAM:17E7										   ; move_photon_torpedo+73r ...
RAM:17E8 00	     impulse_dir:    .db 0						   ; DATA XREF:	RAM:0290w
RAM:17E8										   ; RAM:left_quadrantr
RAM:17E9 00			     .db    0
RAM:17EA 00	     klingons_left:  .db 0						   ; DATA XREF:	handle_low_power-8D3w
RAM:17EA										   ; RAM:081Dr	...
RAM:17EB 90			     .db 0x90 ;	
RAM:17EC 91			     .db 0x91 ;	‘
RAM:17ED 01			     .db    1
RAM:17EE 11			     .db 0x11
RAM:17EF 10			     .db 0x10
RAM:17F0 09			     .db    9
RAM:17F1 99			     .db 0x99 ;	™
RAM:17F2 89			     .db 0x89 ;	‰
RAM:17F3 00	     quadrant:	     .db 0						   ; DATA XREF:	handle_low_power-851w
RAM:17F3										   ; RAM:060Fw	...
RAM:17F4 00 00 00 00+quadrant_tbl:   .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+									   ; DATA XREF:	handle_low_power-8F6o
RAM:17F4 00 00 00 00+									   ; handle_low_power:init_starso ...
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
RAM:17F4 00 00 00 00+		     .db 0, 0, 0
RAM:1920 3F 3F 3F 3F+		     .db 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F
RAM:1926 20	     pwr_warp_impulse:.db 0x20						   ; DATA XREF:	handle_low_power-90Fo
RAM:1926										   ; RAM:01F8r	...
RAM:1927 20	     pwr_lr_sensor:  .db 0x20						   ; DATA XREF:	handle_low_power-8FCw
RAM:1927										   ; RAM:031Aw	...
RAM:1928 10	     pwr_sr_sensor:  .db 0x10						   ; DATA XREF:	RAM:031Dw
RAM:1928										   ; handle_low_power:check_sr_sensorr
RAM:1929 20	     pwr_shields:    .db 0x20						   ; DATA XREF:	handle_low_power+AFr
RAM:1929										   ; handle_low_power+B9o
RAM:192A 09	     pwr_phasors:    .db 9						   ; DATA XREF:	RAM:042Dr
RAM:192B 11	     pwr_photon_torps:.db 0x11						   ; DATA XREF:	RAM:04E2r
RAM:192B										   ; RAM:0870r
RAM:192C C0 FF	     dir_addr_delta_tbl:.dw 0xFFC0					   ; DATA XREF:	RAM:loc_28Co
RAM:192C										   ; fire_phasoro ...
RAM:192E C2 FF			     .dw 0xFFC2
RAM:1930 02 00			     .dw 2
RAM:1932 42 00			     .dw 0x42
RAM:1934 40 00			     .dw 0x40
RAM:1936 3E 00			     .dw 0x3E
RAM:1938 FE FF			     .dw 0xFFFE
RAM:193A BE FF			     .dw 0xFFBE
RAM:193C 00	     game_delay_factor:.db 0						   ; DATA XREF:	handle_low_power-94Fw
RAM:193C										   ; handle_low_power-7C5r ...
RAM:193D 00	     time_to_klingon_fire:.db 0						   ; DATA XREF:	handle_low_power-94Aw
RAM:193D										   ; handle_low_power+DBr ...
RAM:193E 00 00	     tmp_klingon_tbl_ptr:.dw 0						   ; DATA XREF:	init_quadrant+2Cw
RAM:193E										   ; init_quadrant:loc_C0Ar ...
RAM:1940 00	     klingon_tbl:    .db    0						   ; DATA XREF:	handle_low_power+F5o
RAM:1940										   ; init_quadrant+29o
RAM:1941 00			     .db    0
RAM:1942 00			     .db    0
RAM:1943 00			     .db    0
RAM:1944 00			     .db    0
RAM:1945 00			     .db    0
RAM:1946 00			     .db    0
RAM:1947 00			     .db    0
RAM:1948 00			     .db    0
RAM:1949 00			     .db    0
RAM:194A 99	     power_avail:    .db 0x99						   ; DATA XREF:	handle_low_power-93Bw
RAM:194A										   ; RAM:0358w	...
RAM:194B 10	     photon_torps:   .db 0x10						   ; DATA XREF:	handle_low_power-945w
RAM:194B										   ; RAM:036Bw	...
RAM:194C 03	     unused_194C:    .db 3						   ; DATA XREF:	RAM:0370w
RAM:194D 20 20 20 20+aJovianOfficer: .ascii '        .---.        '                        ; DATA XREF: RAM:hit_klingon_warshipo
RAM:194D 20 20 20 20+		     .db 0
RAM:1963 20 20 20 20+		     .ascii '        /'
RAM:1963 20 20 20 20+		     .db 0x27, 0x19, 0x27
RAM:1963 2F 27 19 27+		     .ascii '/        '
RAM:1963 2F 20 20 20+		     .db 0
RAM:1979 20 20 20 20+a?:	     .ascii '       <?/ /'
RAM:1979 20 20 20 3C+		     .db 0x1A
RAM:1979 3F 2F 20 2F+		     .ascii '>       '
RAM:1979 1A 3E 20 20+		     .db 0
RAM:198F 20 20 20 20+a__2:	     .ascii '       | '
RAM:198F 20 20 20 7C+		     .db 0x12
RAM:198F 20 12 5F 12+		     .ascii '_'
RAM:198F 20 7C 20 20+		     .db 0x12
RAM:198F 20 20 20 20+		     .ascii ' |       '
RAM:198F 20 00			     .db 0
RAM:19A5 20 20 20 20+		     .ascii '       |{ '
RAM:19A5 20 20 20 7C+		     .db 7
RAM:19A5 7B 20 07 20+		     .ascii ' }|       '
RAM:19A5 7D 7C 20 20+		     .db 0
RAM:19BB 20 20 20 20+		     .ascii '       / / \ \       '
RAM:19BB 20 20 20 2F+		     .db 0
RAM:19D1 20 20 20 20+		     .ascii '        /|'
RAM:19D1 20 20 20 20+		     .db 0x1B
RAM:19D1 2F 7C 1B 7C+		     .ascii '|\        '
RAM:19D1 5C 20 20 20+		     .db 0
RAM:19E7 20 20 20 20+aV_0:	     .ascii '        /^V^\        '
RAM:19E7 20 20 20 20+		     .db 0
RAM:19FD 20 20 20 20+aV:	     .ascii '      /\ V /\      '
RAM:19FD 20 20 2F 7F+		     .db 0
RAM:1A13 20 20 20 20+		     .ascii '      | //'
RAM:1A13 20 20 7C 20+		     .db 2
RAM:1A13 2F 2F 02 5C+		     .ascii '\\ |      '
RAM:1A13 5C 20 7C 20+		     .db 0
RAM:1A29 20 20 20 20+aHQ_Officer:    .ascii '         ...         '                        ; DATA XREF: handle_low_power-83Bo
RAM:1A29 20 20 20 20+									   ; handle_low_power-5F2o ...
RAM:1A29 20 2E 2E 2E+		     .db 0
RAM:1A3F 20 20 20 20+		     .ascii '        *****        '
RAM:1A3F 20 20 20 20+		     .db 0
RAM:1A55 20 20 20 20+		     .ascii '       ^]'
RAM:1A55 20 20 20 5E+		     .db 0x27, 0x27, 0x27
RAM:1A55 5D 27 27 27+		     .ascii '[^       '
RAM:1A55 5B 5E 20 20+		     .db 0
RAM:1A6B 20 20 20 20+		     .ascii '       |     |       '
RAM:1A6B 20 20 20 7C+		     .db 0
RAM:1A81 20 20 20 20+		     .ascii '       ['
RAM:1A81 20 20 20 5B+		     .db 9, 0xF
RAM:1A81 09 0F 20 0F+		     .ascii ' '
RAM:1A81 0D 5D 20 20+		     .db 0xF, 0xD
RAM:1A81 20 20 20 20+		     .ascii ']       '
RAM:1A81 20 00			     .db 0
RAM:1A97 20 20 20 20+		     .ascii '       |  '
RAM:1A97 20 20 20 7C+		     .db 0xE
RAM:1A97 20 20 0E 20+		     .ascii '  |       '
RAM:1A97 20 7C 20 20+		     .db 0
RAM:1AAD 20 20 20 20+		     .ascii '       {  -  }       '
RAM:1AAD 20 20 20 7B+		     .db 0
RAM:1AC3 20 20 20 20+a__1:	     .ascii '        /'
RAM:1AC3 20 20 20 20+		     .db 2
RAM:1AC3 2F 02 5F 02+		     .ascii '_'
RAM:1AC3 5C 20 20 20+		     .db 2
RAM:1AC3 20 20 20 20+		     .ascii '\        '
RAM:1AC3 20 00			     .db 0
RAM:1AD9 20 20 20 20+a__0:	     .ascii '      ('
RAM:1AD9 20 20 28 0A+		     .db 0xA
RAM:1AD9 20 18 2E 18+		     .ascii ' '
RAM:1AD9 20 0A 29 20+		     .db 0x18
RAM:1AD9 20 20 20 20+		     .ascii '.'
RAM:1AD9 20 00			     .db 0x18
RAM:1AD9			     .ascii ' '
RAM:1AD9			     .db 0xA
RAM:1AD9			     .ascii ')      '
RAM:1AD9			     .db 0
RAM:1AEF 20 20 20 20+a_:	     .ascii '      ( (|.|) )      '
RAM:1AEF 20 20 28 20+		     .db 0
RAM:1B05 43 4F 50 59+aTitle:	     .ascii 'COPYRIGHT (C) 1977  PROCESSOR TECHNOLOGY CORP.'
RAM:1B05 52 49 47 48+									   ; DATA XREF:	handle_low_power-966o
RAM:1B05 54 20 28 43+		     .db 0
RAM:1B34 20 4C 2D 52+aMainDisplay:   .ascii ' L-R SENSOR  '                                ; DATA XREF: handle_low_power-932o
RAM:1B34 20 53 45 4E+		     .db 0x19
RAM:1B34 53 4F 52 20+		     .ascii '-MINE   -Processor  Technology- '
RAM:1B34 20 19 2D 4D+		     .db 0xC
RAM:1B34 49 4E 45 20+		     .ascii ' USS ENTERPRISE '
RAM:1B34 20 20 2D 50+		     .db 0xC
RAM:1B74 20 30 30 30+		     .ascii ' 000 000 000 '
RAM:1B74 20 30 30 30+		     .db 0xC
RAM:1B74 20 30 30 30+		     .ascii '-ENTPR 0I'
RAM:1B74 20 0C 2D 45+		     .db 1, 0x15
RAM:1B74 4E 54 50 52+		     .ascii ' I STARDATE    300200'
RAM:1BA2 20 01 0B 2D+		     .ascii ' '
RAM:1BA2 20 0E 2D 42+		     .db 1, 0xB
RAM:1BA2 41 53 45 20+		     .ascii '- '
RAM:1BA2 20 31 49 01+		     .db 0xE
RAM:1BA2 15 20 49 20+		     .ascii '-BASE  1I'
RAM:1BA2 43 4F 4E 44+		     .db 1, 0x15
RAM:1BA2 49 54 49 4F+		     .ascii ' I CONDITION    STDBY'
RAM:1BC8 20 30 30 30+		     .ascii ' 000 000 000 '
RAM:1BC8 20 30 30 30+		     .db 0xF
RAM:1BC8 20 30 30 30+		     .ascii '-KBC   2I'
RAM:1BC8 20 0F 2D 4B+		     .db 1, 0x15
RAM:1BC8 42 43 20 20+		     .ascii ' I QUADRANT      0-0 '
RAM:1BF6 20 01 0B 2D+		     .ascii ' '
RAM:1BF6 20 07 2D 4B+		     .db 1, 0xB
RAM:1BF6 4D 54 20 20+		     .ascii '- '
RAM:1BF6 20 33 49 01+		     .db 7
RAM:1BF6 15 20 49 20+		     .ascii '-KMT   3I'
RAM:1BF6 53 45 43 54+		     .db 1, 0x15
RAM:1BF6 4F 52 20 20+		     .ascii ' I SECTOR        0-0 '
RAM:1C1C 20 30 30 30+		     .ascii ' 000 000 000 '
RAM:1C1C 20 30 30 30+		     .db 5
RAM:1C1C 20 30 30 30+		     .ascii '-UNKN  4I'
RAM:1C1C 20 05 2D 55+		     .db 1, 0x15
RAM:1C1C 4E 4B 4E 20+		     .ascii ' I PHOTON TORPS   10 '
RAM:1C4A 20 20 50 57+		     .ascii '  PWR DIST   %       5I'
RAM:1C4A 52 20 44 49+		     .db 1, 0x15
RAM:1C4A 53 54 20 20+		     .ascii ' I POWER AVAIL    99%'
RAM:1C78 20 20 57 41+		     .ascii '  WARP&IMP   20      6I'
RAM:1C78 52 50 26 49+		     .db 1, 0x15
RAM:1C78 4D 50 20 20+		     .ascii ' I KLINGONS LEFT  000'
RAM:1CA6 20 20 4C 52+		     .ascii '  LR SENSOR  10      7I'
RAM:1CA6 20 53 45 4E+		     .db 1, 0x15
RAM:1CA6 53 4F 52 20+		     .ascii ' I ANTIMATTER PODS 03'
RAM:1CD4 20 20 53 52+		     .ascii '  SR SENSOR  20      8I'
RAM:1CD4 20 53 45 4E+		     .db 1, 0x15
RAM:1CD4 53 4F 52 20+		     .ascii ' I'
RAM:1CD4 20 32 30 20+		     .db 1, 0x13
RAM:1CD4 20 20 20 20+		     .ascii ' '
RAM:1CF2 20 20 44 45+		     .ascii '  DEFLECTORS 20      9I'
RAM:1CF2 46 4C 45 43+		     .db 1, 0x15
RAM:1CF2 54 4F 52 53+		     .ascii ' I  COMMAND:'
RAM:1CF2 20 32 30 20+		     .db 1, 9
RAM:1CF2 20 20 20 20+		     .ascii ' '
RAM:1D1A 20 20 50 48+		     .ascii '  PHASERS    09       I-0-1-2-3-4-5-6-7-8-9-I'
RAM:1D1A 41 53 45 52+		     .db 1, 0x13
RAM:1D1A 53 20 20 20+		     .ascii ' '
RAM:1D4A 20 20 54 4F+		     .ascii '  TORPEDOES  11'
RAM:1D59 01			     .db    1
RAM:1D5A F1			     .db 0xF1 ;	ñ
RAM:1D5B 20			     .db 0x20
RAM:1D5C	     ; ---------------------------------------------------------------------------
RAM:1D5C
RAM:1D5C	     antimatter_pod_tbl:						   ; CODE XREF:	RAM:loc_1j
RAM:1D5C										   ; DATA XREF:	handle_low_power-98Bo ...
RAM:1D5C 22 9C 1E		     ld	     (word_1E9C), hl
RAM:1D5F 21 99 1E		     ld	     hl, #unk_1E99
RAM:1D62 11 00 00		     ld	     de, #0
RAM:1D65 AF			     xor     a
RAM:1D66 F5			     push    af
RAM:1D67
RAM:1D67	     loc_1D67:								   ; CODE XREF:	RAM:loc_1D73j
RAM:1D67 F1			     pop     af
RAM:1D68 7E			     ld	     a,	(hl)
RAM:1D69 8B			     adc     a,	e
RAM:1D6A 5F			     ld	     e,	a
RAM:1D6B 7A			     ld	     a,	d
RAM:1D6C CE 00			     adc     a,	#0
RAM:1D6E
RAM:1D6E	     eot:								   ; DATA XREF:	handle_low_power-97Aw
RAM:1D6E 57			     ld	     d,	a
RAM:1D6F
RAM:1D6F	     always_zero:							   ; DATA XREF:	RAM:0342w
RAM:1D6F										   ; RAM:062Dw	...
RAM:1D6F F5			     push    af
RAM:1D70
RAM:1D70	     delay_duty_cycle_i:						   ; DATA XREF:	RAM:0345w
RAM:1D70										   ; RAM:041Bw	...
RAM:1D70 7C			     ld	     a,	h
RAM:1D71
RAM:1D71	     power_overflow:							   ; DATA XREF:	update_power_distribution+6w
RAM:1D71										   ; update_power_distribution+13w ...
RAM:1D71 B5			     or	     l
RAM:1D72
RAM:1D72	     cmd_flag:								   ; DATA XREF:	handle_low_power-7F3w
RAM:1D72										   ; handle_low_power-5FDw ...
RAM:1D72 2B			     dec     hl
RAM:1D73
RAM:1D73	     loc_1D73:								   ; DATA XREF:	update_chaser_pods_cmd_entry+CCr
RAM:1D73										   ; update_chaser_pods_cmd_entry+D5w ...
RAM:1D73 C2 67 1D		     jp	     NZ, loc_1D67
RAM:1D76
RAM:1D76	     computer_malfunction:						   ; DATA XREF:	RAM:0321w
RAM:1D76										   ; RAM:038Fw	...
RAM:1D76 F1			     pop     af
RAM:1D77
RAM:1D77	     klingon_time_frozen:						   ; DATA XREF:	RAM:01E9w
RAM:1D77										   ; RAM:07D3w	...
RAM:1D77 EB			     ex	     de, hl
RAM:1D78
RAM:1D78	     experimental_ray_disabled:						   ; DATA XREF:	RAM:experimental_rayr
RAM:1D78										   ; RAM:083Aw	...
RAM:1D78 22 9E 1E		     ld	     (word_1E9E), hl
RAM:1D7B 2A 9C 1E		     ld	     hl, (word_1E9C)
RAM:1D7E 23			     inc     hl
RAM:1D7F 01 CB 21		     ld	     bc, #0x21CB
RAM:1D82 7E			     ld	     a,	(hl)
RAM:1D83 FE C3			     cp	     #0xC3 ; 'Ã'
RAM:1D85 C2 15 1E		     jp	     NZ, loc_1E15
RAM:1D88 2B			     dec     hl
RAM:1D89 7E			     ld	     a,	(hl)
RAM:1D8A B7			     or	     a
RAM:1D8B CA A2 1D		     jp	     Z,	loc_1DA2
RAM:1D8E FE 7F			     cp	     #0x7F ; ''
RAM:1D90 C2 15 1E		     jp	     NZ, loc_1E15
RAM:1D93 2E 1F			     ld	     l,	#0x1F
RAM:1D95 22 C4 01		     ld	     (keyboard_scan+1),	hl
RAM:1D98 2E 19			     ld	     l,	#0x19
RAM:1D9A 22 EC 1E		     ld	     (0x1EEC), hl
RAM:1D9D 2E 04			     ld	     l,	#4
RAM:1D9F 22 A6 17		     ld	     (cmd_l_vector), hl
RAM:1DA2
RAM:1DA2	     loc_1DA2:								   ; CODE XREF:	RAM:1D8Bj
RAM:1DA2										   ; RAM:1E40j	...
RAM:1DA2 21 00 00		     ld	     hl, #0
RAM:1DA5 0A			     ld	     a,	(bc)
RAM:1DA6 22 00 00		     ld	     (loc_0), hl
RAM:1DA9 22 02 00		     ld	     (loc_1+1),	hl
RAM:1DAC 21 05 1B		     ld	     hl, #0x1B05
RAM:1DAF 11 77 1E		     ld	     de, #0x1E77
RAM:1DB2
RAM:1DB2	     loc_1DB2:								   ; CODE XREF:	RAM:1DBDj
RAM:1DB2 1A			     ld	     a,	(de)
RAM:1DB3 91			     sub     c
RAM:1DB4 96			     sub     (hl)
RAM:1DB5 E3			     ex	     (sp), hl
RAM:1DB6 C2 43 1E		     jp	     NZ, loc_1E43
RAM:1DB9
RAM:1DB9	     loc_1DB9:								   ; CODE XREF:	RAM:1E4Ej
RAM:1DB9 E3			     ex	     (sp), hl
RAM:1DBA 23			     inc     hl
RAM:1DBB 05			     dec     b
RAM:1DBC 13			     inc     de
RAM:1DBD C2 B2 1D		     jp	     NZ, loc_1DB2
RAM:1DC0 2A 9A 1E		     ld	     hl, (word_1E9A)
RAM:1DC3 EB			     ex	     de, hl
RAM:1DC4 2A 9E 1E		     ld	     hl, (word_1E9E)
RAM:1DC7 7A			     ld	     a,	d
RAM:1DC8 94			     sub     h
RAM:1DC9 C2 D4 1D		     jp	     NZ, loc_1DD4
RAM:1DCC 7B			     ld	     a,	e
RAM:1DCD 95			     sub     l
RAM:1DCE C2 D4 1D		     jp	     NZ, loc_1DD4
RAM:1DD1
RAM:1DD1	     loc_1DD1:								   ; CODE XREF:	RAM:1DE5j
RAM:1DD1 C3 04 00		     jp	     loc_4
RAM:1DD4	     ; ---------------------------------------------------------------------------
RAM:1DD4
RAM:1DD4	     loc_1DD4:								   ; CODE XREF:	RAM:1DC9j
RAM:1DD4										   ; RAM:1DCEj
RAM:1DD4 11 E8 1D		     ld	     de, #0x1DE8
RAM:1DD7 97			     sub     a
RAM:1DD8 D3 C8			     out     (0xC8), a
RAM:1DDA D3 FE			     out     (0xFE), a
RAM:1DDC CD 31 0D		     call    print_string_last_line
RAM:1DDF
RAM:1DDF	     loc_1DDF:								   ; CODE XREF:	RAM:1DE2j
RAM:1DDF CD C3 01		     call    keyboard_scan
RAM:1DE2 CA DF 1D		     jp	     Z,	loc_1DDF
RAM:1DE5 C3 D1 1D		     jp	     loc_1DD1
RAM:1DE5	     ; ---------------------------------------------------------------------------
RAM:1DE8 43 48 45 43+aChecksumFailed:.ascii 'CHECKSUM FAILED, STRIKE ANY KEY TO CONTINUE '
RAM:1DE8 4B 53 55 4D+		     .db 0
RAM:1E15	     ; ---------------------------------------------------------------------------
RAM:1E15
RAM:1E15	     loc_1E15:								   ; CODE XREF:	RAM:1D85j
RAM:1E15										   ; RAM:1D90j
RAM:1E15 3A 00 E0		     ld	     a,	(0xE000)
RAM:1E18 B7			     or	     a
RAM:1E19 C2 51 1E		     jp	     NZ, loc_1E51
RAM:1E1C 3A 01 E0		     ld	     a,	(0xE001)
RAM:1E1F FE C3			     cp	     #0xC3 ; 'Ã'
RAM:1E21 C2 51 1E		     jp	     NZ, loc_1E51
RAM:1E24 3E CD			     ld	     a,	#0xCD ;	'Í'
RAM:1E26 32 C3 01		     ld	     (keyboard_scan), a
RAM:1E29 21 A4 D0		     ld	     hl, #0xD0A4
RAM:1E2C 22 C4 01		     ld	     (keyboard_scan+1),	hl
RAM:1E2F 21 60 E0		     ld	     hl, #0xE060
RAM:1E32 22 A6 17		     ld	     (cmd_l_vector), hl
RAM:1E35 21 CC D0		     ld	     hl, #0xD0CC
RAM:1E38 22 C8 01		     ld	     (word_1C8), hl
RAM:1E3B 3E CD			     ld	     a,	#0xCD ;	'Í'
RAM:1E3D 32 C7 01		     ld	     (byte_1C7), a
RAM:1E40 C3 A2 1D		     jp	     loc_1DA2
RAM:1E43	     ; ---------------------------------------------------------------------------
RAM:1E43
RAM:1E43	     loc_1E43:								   ; CODE XREF:	RAM:1DB6j
RAM:1E43 2A 63 1E		     ld	     hl, (word_1E63)
RAM:1E46 77			     ld	     (hl), a
RAM:1E47 23			     inc     hl
RAM:1E48 1A			     ld	     a,	(de)
RAM:1E49 77			     ld	     (hl), a
RAM:1E4A 23			     inc     hl
RAM:1E4B 22 63 1E		     ld	     (word_1E63), hl
RAM:1E4E C3 B9 1D		     jp	     loc_1DB9
RAM:1E51	     ; ---------------------------------------------------------------------------
RAM:1E51
RAM:1E51	     loc_1E51:								   ; CODE XREF:	RAM:1E19j
RAM:1E51										   ; RAM:1E21j
RAM:1E51 21 6E 1E		     ld	     hl, #0x1E6E
RAM:1E54 11 C3 01		     ld	     de, #0x1C3
RAM:1E57
RAM:1E57	     loc_1E57:								   ; CODE XREF:	RAM:1E60j
RAM:1E57 7E			     ld	     a,	(hl)
RAM:1E58 FE FF			     cp	     #0xFF
RAM:1E5A CA 65 1E		     jp	     Z,	loc_1E65
RAM:1E5D 12			     ld	     (de), a
RAM:1E5E 23			     inc     hl
RAM:1E5F 13			     inc     de
RAM:1E60 C3 57 1E		     jp	     loc_1E57
RAM:1E60	     ; ---------------------------------------------------------------------------
RAM:1E63 04 0B	     word_1E63:	     .dw 0xB04						   ; DATA XREF:	RAM:loc_1E43r
RAM:1E63										   ; RAM:1E4Bw
RAM:1E65	     ; ---------------------------------------------------------------------------
RAM:1E65
RAM:1E65	     loc_1E65:								   ; CODE XREF:	RAM:1E5Aj
RAM:1E65 21 03 00		     ld	     hl, #3
RAM:1E68 22 A6 17		     ld	     (cmd_l_vector), hl
RAM:1E6B C3 A2 1D		     jp	     loc_1DA2
RAM:1E6B	     ; ---------------------------------------------------------------------------
RAM:1E6E DB			     .db 0xDB ;	Û
RAM:1E6F 00			     .db    0
RAM:1E70 00			     .db    0
RAM:1E71 E6			     .db 0xE6 ;	æ
RAM:1E72 40			     .db 0x40 ;	@
RAM:1E73 C8			     .db 0xC8 ;	È
RAM:1E74 DB			     .db 0xDB ;	Û
RAM:1E75 01			     .db    1
RAM:1E76 FF			     .db 0xFF
RAM:1E77 0E			     .db  0xE
RAM:1E78 1A			     .db 0x1A
RAM:1E79 1B			     .db 0x1B
RAM:1E7A 24			     .db 0x24 ;	$
RAM:1E7B 1D			     .db 0x1D
RAM:1E7C 14			     .db 0x14
RAM:1E7D 12			     .db 0x12
RAM:1E7E 13			     .db 0x13
RAM:1E7F 1F			     .db 0x1F
RAM:1E80 EB			     .db 0xEB ;	ë
RAM:1E81 F3			     .db 0xF3 ;	ó
RAM:1E82 0E			     .db  0xE
RAM:1E83 F4			     .db 0xF4 ;	ô
RAM:1E84 EB			     .db 0xEB ;	ë
RAM:1E85 FC			     .db 0xFC ;	ü
RAM:1E86 04			     .db    4
RAM:1E87 02			     .db    2
RAM:1E88 02			     .db    2
RAM:1E89 EB			     .db 0xEB ;	ë
RAM:1E8A EB			     .db 0xEB ;	ë
RAM:1E8B 1B			     .db 0x1B
RAM:1E8C 1D			     .db 0x1D
RAM:1E8D 1A			     .db 0x1A
RAM:1E8E 0E			     .db  0xE
RAM:1E8F 10			     .db 0x10
RAM:1E90 1E			     .db 0x1E
RAM:1E91 1E			     .db 0x1E
RAM:1E92 1A			     .db 0x1A
RAM:1E93 1D			     .db 0x1D
RAM:1E94 EB			     .db 0xEB ;	ë
RAM:1E95 1F			     .db 0x1F
RAM:1E96 10			     .db 0x10
RAM:1E97 0E			     .db  0xE
RAM:1E98 13			     .db 0x13
RAM:1E99 EB	     unk_1E99:	     .db 0xEB ;	ë					   ; DATA XREF:	RAM:1D5Fo
RAM:1E9A 9B 7D	     word_1E9A:	     .dw 0x7D9B						   ; DATA XREF:	RAM:1DC0r
RAM:1E9C 00 00	     word_1E9C:	     .dw 0						   ; DATA XREF:	RAM:antimatter_pod_tblw
RAM:1E9C										   ; RAM:1D7Br
RAM:1E9E 00 00	     word_1E9E:	     .dw 0						   ; DATA XREF:	RAM:experimental_ray_disabledw
RAM:1E9E										   ; RAM:1DC4r
RAM:1EA0 00			     .db    0
RAM:1EA0	     ; end of 'RAM'
RAM:1EA0
VIDEO:CC00	       ; ===========================================================================
VIDEO:CC00
VIDEO:CC00	       ; Segment type: Regular
VIDEO:CC00			       .org 0xCC00
VIDEO:CC00 ?? ?? ?? ??+VIDEO:	       .ds 0x400					     ; CODE XREF: animate_destruction:loc_E8Dp
VIDEO:CC00 ?? ?? ?? ??+									     ; RAM:0EB1j ...
VIDEO:CC00 ?? ?? ?? ??+; end of	'VIDEO'
VIDEO:CC00 ?? ?? ?? ??+
VIDEO:CC00 ?? ?? ?? ??+; end of	file
