VIDEO:3C00	       ;
VIDEO:3C00	       ; +-------------------------------------------------------------------------+
VIDEO:3C00	       ; |   This file has been	generated by The Interactive Disassembler (IDA)	   |
VIDEO:3C00	       ; |	     Copyright (c) 2015	Hex-Rays, <support@hex-rays.com>	   |
VIDEO:3C00	       ; |			License	info: 48-B437-7294-77			   |
VIDEO:3C00	       ; |			  Chris	Nott, Virtual Logic			   |
VIDEO:3C00	       ; +-------------------------------------------------------------------------+
VIDEO:3C00	       ;
VIDEO:3C00	       ; Input SHA256 :	A26E8D2B6DD07FB70E7F8536CC21B2DD16DB582658D4BD812E736B43E4FE0F04
VIDEO:3C00	       ; Input MD5    :	3AEF1A9DCFEF59139AA2EEF16A9A4F47
VIDEO:3C00	       ; Input CRC32  :	E4993BA1
VIDEO:3C00
VIDEO:3C00
VIDEO:3C00	       ; +----------------------------------------------------+
VIDEO:3C00	       ; | TRS-80 Model	I Invasion Force Disassembly v1.00rc1 |
VIDEO:3C00	       ; |    -	by tcdev (msmcdoug@gmail.com)		      |
VIDEO:3C00	       ; +----------------------------------------------------+
VIDEO:3C00	       ;
VIDEO:3C00	       ; Memory	Map:
VIDEO:3C00	       ;
VIDEO:3C00	       ; $5000-$5F89 - Code
VIDEO:3C00	       ; $5F8A-$67EE - Strings
VIDEO:3C00	       ; $67EF-$69BA - Data & Variables	(mixed)
VIDEO:3C00	       ; $69BB-$6F9A - ASCII/Block Graphics
VIDEO:3C00	       ; $6F9B-$6FDF - Variable	space cleared each game
VIDEO:3C00	       ; $6FE0-$6FFB - Stack
VIDEO:3C00	       ; $6FFC-$7101 - Garbage?
VIDEO:3C00
VIDEO:3C00	       ; Processor	 : z80 []
VIDEO:3C00	       ; Target	assembler: ASxxxx by Alan R. Baldwin v1.5
VIDEO:3C00		      .area   idaseg (ABS)
VIDEO:3C00		      .hd64 ; this is needed only for HD64180
VIDEO:3C00
VIDEO:3C00	       ; ===========================================================================
VIDEO:3C00
VIDEO:3C00	       ; Segment type: Regular
VIDEO:3C00				       .org 0x3C00
VIDEO:3C00 ?? ?? ?? ??+VIDEO:		       .ds 0x400
VIDEO:3C00 ?? ?? ?? ??+; end of	'VIDEO'
VIDEO:3C00 ?? ?? ?? ??+
CODE:5000	      ;	---------------------------------------------------------------------------
CODE:5000	      ;	File Name   : E:\dev\pace\pacedev.net\sw\re\platform\trs80\invforce\invforc1.bin
CODE:5000	      ;	Format	    : Binary file
CODE:5000	      ;	Base Address: 0000h Range: 4000h - 10000h Loaded length: 0000C000h
CODE:5000	      ;	===========================================================================
CODE:5000
CODE:5000	      ;	Segment	type: Regular
CODE:5000				      .org 0x5000
CODE:5000 AF				      xor     a
CODE:5001	      ;	START OF FUNCTION CHUNK	FOR handle_low_power
CODE:5001
CODE:5001	      START:
CODE:5001 3E 03				      ld      a, #3
CODE:5003 32 2B	68			      ld      (antimatter_pods), a
CODE:5006 3E 06				      ld      a, #6
CODE:5008 32 40	68			      ld      (pod_speed), a
CODE:500B	      ;	clear $45 bytes	@$6f9b
CODE:500B 21 9B	6F			      ld      hl, #antimatter_pod_tbl	      ;	start of scratch RAM
CODE:500E 97				      sub     a
CODE:500F 06 45				      ld      b, #0x45 ; 'E'                  ; length of scratch RAM
CODE:5011
CODE:5011	      loc_5011:
CODE:5011 77				      ld      (hl), a
CODE:5012 23				      inc     hl
CODE:5013 05				      dec     b				      ;	done all bytes?
CODE:5014 C2 11	50			      jp      NZ, loc_5011		      ;	no, loop
CODE:5017 3D				      dec     a				      ;	$FF
CODE:5018 32 AD	6F			      ld      (eot), a			      ;	flag end of pod	table
CODE:501B 31 FB	6F			      ld      sp, #STACK_WATERMARK
CODE:501E	      ;	display	title screen, prompt for speed factor
CODE:501E 06 20				      ld      b, #0x20 ; ' '                  ; <SPACE>
CODE:5020 CD F4	5C			      call    clear_video_with_B
CODE:5023 11 39	67			      ld      de, #aEnterSpeedFact	      ;	"ENTER SPEED FACTOR (0(FAST)-9(SLOW))"
CODE:5026 CD 39	5D			      call    print_string_last_line
CODE:5029 21 00	3D			      ld      hl, # VIDEO+0x100
CODE:502C 11 73	6B			      ld      de, #aInvasionForceR	      ;	"  INVASION FORCE  -------  RADIO SHACK	"
CODE:502F CD 3F	5D			      call    print_string
CODE:5032
CODE:5032	      loc_5032:
CODE:5032 CD B6	51			      call    keyboard_scan
CODE:5035 CA 32	50			      jp      Z, loc_5032		      ;	no key,	loop
CODE:5038 E6 0F				      and     #0xF			      ;	low nibble of key (supposedly 0-9)
CODE:503A 07				      rlca
CODE:503B 07				      rlca				      ;	x4
CODE:503C C6 10				      add     a, #16			      ;	x4 + 16
CODE:503E 32 AA	69			      ld      (game_delay_factor), a
CODE:5041 3E 02				      ld      a, #2
CODE:5043 32 AB	69			      ld      (time_to_jovian_fire), a
CODE:5046 3E 10				      ld      a, #0x10			      ;	init number of triton missiles (10)
CODE:5048 32 B9	69			      ld      (triton_misls), a
CODE:504B 3E 08				      ld      a, #8			      ;	init ion drive speed
CODE:504D 32 FF	67			      ld      (ion_speed), a
CODE:5050 3E 99				      ld      a, #0x99 ; 'ô'                  ; init power available (99%)
CODE:5052 32 B8	69			      ld      (power_avail), a
CODE:5055 21 37	3F			      ld      hl, # VIDEO+0x337		      ;	init command entry buffer (on screen)
CODE:5058 22 00	68			      ld      (cmd_entry_addr),	hl
CODE:505B	      ;	print main display
CODE:505B 21 9B	6B			      ld      hl, #aLRSensorMineRa	      ;	" L-R SENSOR  %-MINE   ------RADIO SHACK"...
CODE:505E 11 00	3C			      ld      de, #VIDEO
CODE:5061
CODE:5061	      loc_5061:							      ;	get char
CODE:5061 7E				      ld      a, (hl)
CODE:5062 12				      ld      (de), a			      ;	write to video
CODE:5063 13				      inc     de			      ;	next video address
CODE:5064 23				      inc     hl			      ;	next source address
CODE:5065 7A				      ld      a, d
CODE:5066 FE 40				      cp      #0x40 ; '@'                     ; end of video?
CODE:5068 C2 61	50			      jp      NZ, loc_5061		      ;	no, loop
CODE:506B 2A EF	67			      ld      hl, (chaser_addr)
CODE:506E 36 A0				      ld      (hl), #0xA0 ; '†'               ; graphic at chaser location
CODE:5070	      ;	init power distribution
CODE:5070	      ;	20, 10,	20, 20,	9, 11%
CODE:5070 21 94	69			      ld      hl, #pwr_hypr_ion
CODE:5073 06 04				      ld      b, #4			      ;	4 power	distribution values to init
CODE:5075
CODE:5075	      loc_5075:							      ;	init power distibution to 20%
CODE:5075 36 20				      ld      (hl), #0x20 ; ' '
CODE:5077 23				      inc     hl			      ;	next power value address
CODE:5078 05				      dec     b				      ;	done all values?
CODE:5079 C2 75	50			      jp      NZ, loc_5075		      ;	no, loop
CODE:507C 36 09				      ld      (hl), #9			      ;	init masers to 9%
CODE:507E 23				      inc     hl			      ;	next pwer value	address
CODE:507F 36 11				      ld      (hl), #0x11		      ;	init triton missiles to	11%
CODE:5081 3E 10				      ld      a, #0x10			      ;	re-init	lr power to 10%
CODE:5083 32 95	69			      ld      (pwr_lr_sensor), a
CODE:5086	      ;	zero quadrant data
CODE:5086 11 2C	01			      ld      de, #300			      ;	# bytes	to clear
CODE:5089 21 62	68			      ld      hl, #quadrant_tbl		      ;	start of quadrant data
CODE:508C
CODE:508C	      loc_508C:							      ;	zero byte
CODE:508C 36 00				      ld      (hl), #0
CODE:508E 23				      inc     hl			      ;	next location
CODE:508F 1B				      dec     de
CODE:5090 7A				      ld      a, d
CODE:5091 B3				      or      e				      ;	done all bytes?
CODE:5092 C2 8C	50			      jp      NZ, loc_508C		      ;	no, loop
CODE:5095
CODE:5095	      init_jovians_left:
CODE:5095 CD 00	5D			      call    rand_0_9
CODE:5098 FE 03				      cp      #3			      ;	less than 3?
CODE:509A FA 95	50			      jp      M, init_jovians_left	      ;	yes, regenerate
CODE:509D FE 06				      cp      #6			      ;	greater	than 5?
CODE:509F F2 95	50			      jp      P, init_jovians_left	      ;	yes, regenerate
CODE:50A2 07				      rlca
CODE:50A3 07				      rlca
CODE:50A4 07				      rlca
CODE:50A5 07				      rlca				      ;	(3-5)*16
CODE:50A6 47				      ld      b, a
CODE:50A7 CD 00	5D			      call    rand_0_9
CODE:50AA 80				      add     a, b			      ;	(3-5)*16 + rnd()
CODE:50AB 47				      ld      b, a			      ;	jovians	left to	init
CODE:50AC 32 58	68			      ld      (jovians_left), a
CODE:50AF
CODE:50AF	      loc_50AF:
CODE:50AF CD 00	5D			      call    rand_0_9
CODE:50B2 07				      rlca
CODE:50B3 07				      rlca
CODE:50B4 07				      rlca
CODE:50B5 07				      rlca
CODE:50B6 4F				      ld      c, a
CODE:50B7 CD 00	5D			      call    rand_0_9
CODE:50BA 81				      add     a, c			      ;	random quadrant
CODE:50BB C5				      push    bc
CODE:50BC CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:50BF C1				      pop     bc
CODE:50C0 7E				      ld      a, (hl)			      ;	get warships in	quadrant
CODE:50C1 A7				      and     a				      ;	zero?
CODE:50C2 C2 AF	50			      jp      NZ, loc_50AF		      ;	no, regenerate
CODE:50C5
CODE:50C5	      loc_50C5:
CODE:50C5 CD 00	5D			      call    rand_0_9
CODE:50C8 FE 05				      cp      #5			      ;	greater	than 4?
CODE:50CA F2 C5	50			      jp      P, loc_50C5		      ;	yes, regenerate
CODE:50CD 3D				      dec     a
CODE:50CE B8				      cp      b				      ;	more than jovians left?
CODE:50CF F2 C5	50			      jp      P, loc_50C5		      ;	yes, regenerate
CODE:50D2 3C				      inc     a
CODE:50D3 77				      ld      (hl), a			      ;	init warships in quadrant
CODE:50D4 A7				      and     a				      ;	zero?
CODE:50D5 CA AF	50			      jp      Z, loc_50AF		      ;	yes, regenerate
CODE:50D8 57				      ld      d, a
CODE:50D9 78				      ld      a, b			      ;	jovians	left to	init
CODE:50DA
CODE:50DA	      loc_50DA:
CODE:50DA C6 99				      add     a, #0x99 ; 'ô'
CODE:50DC 27				      daa				      ;	all done?
CODE:50DD CA E8	50			      jp      Z, init_stars		      ;	yes, go
CODE:50E0 15				      dec     d				      ;	done for this quadrant?
CODE:50E1 C2 DA	50			      jp      NZ, loc_50DA		      ;	no, loop
CODE:50E4 47				      ld      b, a			      ;	update jovians left to init
CODE:50E5 C3 AF	50			      jp      loc_50AF			      ;	loop
CODE:50E8	      ;	---------------------------------------------------------------------------
CODE:50E8	      ;	0-9 stars in each quadrant
CODE:50E8
CODE:50E8	      init_stars:						      ;	quadrant data
CODE:50E8 21 62	68			      ld      hl, #quadrant_tbl
CODE:50EB 0E 64				      ld      c, #100			      ;	# quadrants to init
CODE:50ED
CODE:50ED	      loc_50ED:
CODE:50ED CD 00	5D			      call    rand_0_9
CODE:50F0 23				      inc     hl
CODE:50F1 23				      inc     hl
CODE:50F2 77				      ld      (hl), a			      ;	init stars in quadrant
CODE:50F3 23				      inc     hl			      ;	next quadrant
CODE:50F4 0D				      dec     c				      ;	done all quadrants?
CODE:50F5 C2 ED	50			      jp      NZ, loc_50ED		      ;	no, loop
CODE:50F8	      ;	1-3 space stations in the game
CODE:50F8
CODE:50F8	      init_space_stations:
CODE:50F8 CD 00	5D			      call    rand_0_9
CODE:50FB A7				      and     a				      ;	zero?
CODE:50FC CA F8	50			      jp      Z, init_space_stations	      ;	yes, regenerate
CODE:50FF FE 04				      cp      #4			      ;	greater	than 3?
CODE:5101 F2 F8	50			      jp      P, init_space_stations	      ;	yes, regenerate
CODE:5104 4F				      ld      c, a			      ;	(1-3)
CODE:5105
CODE:5105	      loc_5105:
CODE:5105 CD 00	5D			      call    rand_0_9
CODE:5108 07				      rlca
CODE:5109 07				      rlca
CODE:510A 07				      rlca
CODE:510B 07				      rlca
CODE:510C 47				      ld      b, a
CODE:510D CD 00	5D			      call    rand_0_9
CODE:5110 80				      add     a, b			      ;	random quadrant
CODE:5111 C5				      push    bc
CODE:5112 CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:5115 C1				      pop     bc
CODE:5116 23				      inc     hl			      ;	space stations in quadrant
CODE:5117 7E				      ld      a, (hl)
CODE:5118 A7				      and     a				      ;	zero?
CODE:5119 C2 05	51			      jp      NZ, loc_5105		      ;	no, regenerate
CODE:511C 36 01				      ld      (hl), #1			      ;	add a space station
CODE:511E 0D				      dec     c				      ;	done all space stations?
CODE:511F C2 05	51			      jp      NZ, loc_5105		      ;	no, loop
CODE:5122	      ;	init starting quadrant
CODE:5122 CD 00	5D			      call    rand_0_9			      ;	starting quadrant X
CODE:5125 47				      ld      b, a
CODE:5126 CD 00	5D			      call    rand_0_9			      ;	starting quadrant Y
CODE:5129 07				      rlca
CODE:512A 07				      rlca
CODE:512B 07				      rlca
CODE:512C 07				      rlca
CODE:512D 80				      add     a, b			      ;	combine
CODE:512E 32 61	68			      ld      (quadrant), a		      ;	init starting quadrant
CODE:5131 CD 2E	5F			      call    print_jovians_left
CODE:5134 3E 03				      ld      a, #3			      ;	SE, flag disabled
CODE:5136 32 B8	6F			      ld      (disable_pod_update), a
CODE:5139 0E 01				      ld      c, #1			      ;	1 quadrant
CODE:513B CD 18	5B			      call    move_quadrant
CODE:513E CD 81	5B			      call    print_quadrant
CODE:5141 CD 4B	5D			      call    update_chaser_pods_cmd_entry
CODE:5144 3A C0	53			      ld      a, (played_before)
CODE:5147 A7				      and     a				      ;	played a game before this?
CODE:5148 C2 88	51			      jp      NZ, loc_5188		      ;	yes, skip animated intro message
CODE:514B 11 97	6A			      ld      de, #hq_officer		      ;	"		      "
CODE:514E CD CF	5E			      call    print_10_lines
CODE:5151 11 8A	5F			      ld      de, #aCommandHeadqua	      ;	"COMMAND HEADQUARTERS: THE JOVIANS HAVE	"...
CODE:5154 21 40	3F			      ld      hl, # VIDEO+0x340
CODE:5157 CD 3F	5D			      call    print_string
CODE:515A	      ;	animate	HQ officer
CODE:515A 1E 11				      ld      e, #17			      ;	# animation loops
CODE:515C
CODE:515C	      loc_515C:
CODE:515C CD BA	5C			      call    rnd_delay
CODE:515F 21 22	3D			      ld      hl, # VIDEO+0x122		      ;	HQ commander's eye
CODE:5162 36 88				      ld      (hl), #0x88 ; 'à'
CODE:5164 23				      inc     hl
CODE:5165 36 8C				      ld      (hl), #0x8C ; 'å'
CODE:5167 21 E1	3D			      ld      hl, # VIDEO+0x1E1		      ;	HQ commander's mouth
CODE:516A 36 4F				      ld      (hl), #0x4F ; 'O'
CODE:516C CD BA	5C			      call    rnd_delay
CODE:516F 21 22	3D			      ld      hl, # VIDEO+0x122		      ;	HQ commander's eye
CODE:5172 36 AA				      ld      (hl), #0xAA ; '™'
CODE:5174 23				      inc     hl
CODE:5175 36 BB				      ld      (hl), #0xBB ; 'ª'
CODE:5177 CD 00	5D			      call    rand_0_9
CODE:517A FE 09				      cp      #9			      ;	9?
CODE:517C D2 84	51			      jp      NC, loc_5184		      ;	ues, skip
CODE:517F 21 E1	3D			      ld      hl, # VIDEO+0x1E1		      ;	HQ commander's mouth
CODE:5182 36 2D				      ld      (hl), #0x2D ; '-'
CODE:5184
CODE:5184	      loc_5184:
CODE:5184 1D				      dec     e
CODE:5185 C2 5C	51			      jp      NZ, loc_515C
CODE:5188
CODE:5188	      loc_5188:							      ;	current	quadrant on LR sensor display
CODE:5188 21 C5	3C			      ld      hl, # VIDEO+0xC5
CODE:518B CD CC	5B			      call    init_quadrant		      ;	quadrant display
CODE:518E 21 40	3F			      ld      hl, # VIDEO+0x340
CODE:5191 11 34	60			      ld      de, #aHyprHIonIMsrMT	      ;	"HYPR=H,ION=I,MSR=M,TRM=T,PWRDST=D,SELFD"...
CODE:5194 CD 3C	5D			      call    clear_last_2_lines_print_string
CODE:5197
CODE:5197	      game_loop:						      ;	flag no	cmd
CODE:5197 3E FF				      ld      a, #0xFF
CODE:5199 32 B1	6F			      ld      (cmd_flag), a
CODE:519C 3A B9	6F			      ld      a, (critical)
CODE:519F A7				      and     a				      ;	condition critical?
CODE:51A0 CA BD	51			      jp      Z, loc_51BD		      ;	no, skip
CODE:51A3 3A 2A	68			      ld      a, (engine_explode_countdown)
CODE:51A6 3D				      dec     a				      ;	tick!
CODE:51A7 32 2A	68			      ld      (engine_explode_countdown), a
CODE:51AA F2 BD	51			      jp      P, loc_51BD		      ;	set to explode?	no, skip
CODE:51AD 11 32	63			      ld      de, #aNavigatorTheEn	      ;	"NAVIGATOR:THE ENGINES ARE EXPLODING"
CODE:51B0 CD 39	5D			      call    print_string_last_line
CODE:51B3 C3 8E	53			      jp      print_game_over_screen
CODE:51B3	      ;	END OF FUNCTION	CHUNK FOR handle_low_power
CODE:51B6
CODE:51B6	      ;	===============	S U B R	O U T I	N E =======================================
CODE:51B6
CODE:51B6
CODE:51B6	      keyboard_scan:
CODE:51B6 D5				      push    de
CODE:51B7 CD 2B	00			      call    0x2B			      ;	KBDSCN
CODE:51BA A7				      and     a				      ;	set flag for key
CODE:51BB D1				      pop     de
CODE:51BC C9				      ret
CODE:51BC	      ;	End of function	keyboard_scan
CODE:51BC
CODE:51BD	      ;	---------------------------------------------------------------------------
CODE:51BD	      ;	START OF FUNCTION CHUNK	FOR handle_low_power
CODE:51BD
CODE:51BD	      loc_51BD:
CODE:51BD CD 4B	5D			      call    update_chaser_pods_cmd_entry
CODE:51C0 CD A1	59			      call    handle_low_power
CODE:51C3 3A AA	69			      ld      a, (game_delay_factor)
CODE:51C6 47				      ld      b, a
CODE:51C7 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:51CA 97				      sub     a				      ;	flag not fired
CODE:51CB 32 B4	6F			      ld      (maser_fired), a
CODE:51CE CD 0F	5F			      call    update_star_time
CODE:51D1 C3 97	51			      jp      game_loop
CODE:51D1	      ;	END OF FUNCTION	CHUNK FOR handle_low_power
CODE:51D4	      ;	---------------------------------------------------------------------------
CODE:51D4
CODE:51D4	      hyperdrive:
CODE:51D4 CD C0	5E			      call    clear_last_2_lines
CODE:51D7 97				      sub     a				      ;	flag normal
CODE:51D8 32 B6	6F			      ld      (jovian_time_frozen), a
CODE:51DB 3A B3	6F			      ld      a, (hyperdrive_disabled)
CODE:51DE A7				      and     a				      ;	disabled?
CODE:51DF FA 02	52			      jp      M, loc_5202		      ;	yes, exit
CODE:51E2 CD 00	5D			      call    rand_0_9
CODE:51E5 FE 05				      cp      #5			      ;	less than 5?
CODE:51E7 3A 94	69			      ld      a, (pwr_hypr_ion)
CODE:51EA DA F4	51			      jp      C, loc_51F4		      ;	yes, skip
CODE:51ED B7				      or      a				      ;	zero power?
CODE:51EE CA FC	51			      jp      Z, loc_51FC		      ;	yes, skip
CODE:51F1 C6 99				      add     a, #0x99 ; 'ô'
CODE:51F3 27				      daa				      ;	decrement ion power
CODE:51F4
CODE:51F4	      loc_51F4:							      ;	update
CODE:51F4 32 94	69			      ld      (pwr_hypr_ion), a
CODE:51F7 FE 06				      cp      #6			      ;	greater	than 5%?
CODE:51F9 F2 08	52			      jp      P, loc_5208		      ;	yes, go
CODE:51FC
CODE:51FC	      loc_51FC:							      ;	"ENGINEER:COMMANDER, THE ENGINES HAVEN'T"...
CODE:51FC 11 75	60			      ld      de, #aEngineerComman
CODE:51FF C3 39	5D			      jp      print_string_last_line
CODE:5202	      ;	---------------------------------------------------------------------------
CODE:5202
CODE:5202	      loc_5202:							      ;	"ENGINEER:THE UNKNOWN WE SHOT DISABLED T"...
CODE:5202 11 B2	60			      ld      de, #aEngineerTheUnk
CODE:5205 C3 39	5D			      jp      print_string_last_line
CODE:5208	      ;	---------------------------------------------------------------------------
CODE:5208
CODE:5208	      loc_5208:
CODE:5208 CD 00	5D			      call    rand_0_9
CODE:520B FE 06				      cp      #6			      ;	less than 6?
CODE:520D DA 13	52			      jp      C, loc_5213		      ;	yes, skip
CODE:5210 CD 66	5A			      call    jovian_attack_and_move
CODE:5213
CODE:5213	      loc_5213:							      ;	direction
CODE:5213 CD A7	5C			      call    get_next_cmd_char
CODE:5216
CODE:5216	      loc_5216:							      ;	less than '0'?
CODE:5216 D6 30				      sub     #0x30 ; '0'
CODE:5218 47				      ld      b, a
CODE:5219 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	yes, exit
CODE:521C FE 08				      cp      #8			      ;	greater	than 7?
CODE:521E F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:5221
CODE:5221	      loc_5221:
CODE:5221 C5				      push    bc
CODE:5222 78				      ld      a, b			      ;	direction
CODE:5223 0E 01				      ld      c, #1			      ;	move 1 quadrant
CODE:5225 CD 18	5B			      call    move_quadrant
CODE:5228 CD 81	5B			      call    print_quadrant
CODE:522B 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant in LR sensor
CODE:522E CD CC	5B			      call    init_quadrant
CODE:5231 CD E3	5E			      call    print_sector
CODE:5234 06 08				      ld      b, #8
CODE:5236 CD 48	5D			      call    delay_B_and_update_all
CODE:5239 C1				      pop     bc
CODE:523A CD B6	51			      call    keyboard_scan
CODE:523D CA 21	52			      jp      Z, loc_5221		      ;	no key,	loop
CODE:5240 FE 09				      cp      #9			      ;	tab?
CODE:5242 C8				      ret     Z				      ;	yes, return
CODE:5243 C3 16	52			      jp      loc_5216			      ;	loop
CODE:5246	      ;	---------------------------------------------------------------------------
CODE:5246
CODE:5246	      ion_engine:
CODE:5246 3A 94	69			      ld      a, (pwr_hypr_ion)
CODE:5249 FE 05				      cp      #5			      ;	less than 5%?
CODE:524B FA FC	51			      jp      M, loc_51FC		      ;	yes, exit
CODE:524E CD 00	5D			      call    rand_0_9
CODE:5251 FE 03				      cp      #3			      ;	greater	than 2?
CODE:5253 D2 59	52			      jp      NC, loc_5259		      ;	yes, skip
CODE:5256 CD 66	5A			      call    jovian_attack_and_move
CODE:5259
CODE:5259	      loc_5259:
CODE:5259 CD C0	5E			      call    clear_last_2_lines
CODE:525C CD A7	5C			      call    get_next_cmd_char		      ;	direction
CODE:525F
CODE:525F	      get_dir:							      ;	digit?
CODE:525F D6 30				      sub     #0x30 ; '0'
CODE:5261 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	no, exit
CODE:5264 FE 08				      cp      #8			      ;	greater	than 7?
CODE:5266 F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:5269 4F				      ld      c, a			      ;	tmp store direction
CODE:526A CD A7	5C			      call    get_next_cmd_char		      ;	speed
CODE:526D CA 7F	52			      jp      Z, loc_527F		      ;	not specified, skip
CODE:5270 D6 30				      sub     #0x30 ; '0'                     ; digit?
CODE:5272 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	no, exit
CODE:5275 FE 0A				      cp      #10			      ;	greater	than 9?
CODE:5277 D2 05	5B			      jp      NC, print_no_sense_and_ret      ;	yes, exit
CODE:527A 3C				      inc     a
CODE:527B 3C				      inc     a				      ;	speed += 2
CODE:527C 32 FF	67			      ld      (ion_speed), a		      ;	store
CODE:527F
CODE:527F	      loc_527F:
CODE:527F 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5282 79				      ld      a, c			      ;	direction
CODE:5283 32 56	68			      ld      (ion_dir), a		      ;	save
CODE:5286 A7				      and     a				      ;	up?
CODE:5287 CA 90	52			      jp      Z, loc_5290		      ;	yes, skip
CODE:528A
CODE:528A	      loc_528A:
CODE:528A 23				      inc     hl
CODE:528B 23				      inc     hl			      ;	next table entry
CODE:528C 3D				      dec     a				      ;	done?
CODE:528D C2 8A	52			      jp      NZ, loc_528A		      ;	no, loop
CODE:5290
CODE:5290	      loc_5290:
CODE:5290 5E				      ld      e, (hl)
CODE:5291 23				      inc     hl
CODE:5292 56				      ld      d, (hl)			      ;	DE = video address delta
CODE:5293 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:5296
CODE:5296	      loc_5296:							      ;	write empty star to quadrant display
CODE:5296 36 2E				      ld      (hl), #0x2E ; '.'
CODE:5298 E5				      push    hl			      ;	save old address
CODE:5299 19				      add     hl, de			      ;	update USS Hephaestus video address
CODE:529A 7E				      ld      a, (hl)			      ;	get sector contents
CODE:529B E6 7F				      and     #0x7F ; ''
CODE:529D FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:529F C2 C3	52			      jp      NZ, loc_52C3		      ;	no, skip
CODE:52A2 36 5B				      ld      (hl), #0x5B ; '['               ; USS Hephaestus graphic
CODE:52A4 3A FF	67			      ld      a, (ion_speed)
CODE:52A7 47				      ld      b, a
CODE:52A8 CD 48	5D			      call    delay_B_and_update_all
CODE:52AB E3				      ex      (sp), hl			      ;	push new address, HL = old address
CODE:52AC E1				      pop     hl			      ;	pop new	address
CODE:52AD 22 28	68			      ld      (hephaestus_video_addr), hl     ;	update
CODE:52B0 CD B6	51			      call    keyboard_scan
CODE:52B3 CA 96	52			      jp      Z, loc_5296		      ;	no key,	loop
CODE:52B6 FE 09				      cp      #9			      ;	<TAB>?
CODE:52B8 C2 5F	52			      jp      NZ, get_dir		      ;	no, loop
CODE:52BB 36 5B				      ld      (hl), #0x5B ; '['               ; write USS Hephaestus graphic to video
CODE:52BD 22 28	68			      ld      (hephaestus_video_addr), hl     ;	update
CODE:52C0 C3 E3	5E			      jp      print_sector
CODE:52C3	      ;	---------------------------------------------------------------------------
CODE:52C3
CODE:52C3	      loc_52C3:							      ;	old address
CODE:52C3 E1				      pop     hl
CODE:52C4 22 28	68			      ld      (hephaestus_video_addr), hl     ;	update (stop)
CODE:52C7 D5				      push    de
CODE:52C8 CD E3	5E			      call    print_sector
CODE:52CB D1				      pop     de
CODE:52CC 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:52CF 36 5B				      ld      (hl), #0x5B ; '['               ; display USS Hephaestus graphic
CODE:52D1 19				      add     hl, de			      ;	(potential) new	address
CODE:52D2 7E				      ld      a, (hl)			      ;	get sector contents
CODE:52D3 FE 8F				      cp      #0x8F ; 'è'                     ; ???
CODE:52D5 CA 0C	53			      jp      Z, loc_530C
CODE:52D8 E6 7F				      and     #0x7F ; ''
CODE:52DA FE 30				      cp      #0x30 ; '0'                     ; space station?
CODE:52DC CA 2B	53			      jp      Z, dock_space_station	      ;	yes, go
CODE:52DF FE 25				      cp      #0x25 ; '%'                     ; triton mine
CODE:52E1 CA 88	53			      jp      Z, hit_triton_mine	      ;	yes, go
CODE:52E4 FE 26				      cp      #0x26 ; '&'                     ; jovian battle cruiser?
CODE:52E6 CA C1	53			      jp      Z, hit_jovian_warship	      ;	yes, go
CODE:52E9 FE 40				      cp      #0x40 ; '@'                     ; jovian command cruiser?
CODE:52EB CA C1	53			      jp      Z, hit_jovian_warship	      ;	yes, go
CODE:52EE FE 2A				      cp      #0x2A ; '*'                     ; star?
CODE:52F0 CA 18	54			      jp      Z, hit_star		      ;	yes, go
CODE:52F3 FE 58				      cp      #0x58 ; 'X'                     ; unknown?
CODE:52F5 C2 17	53			      jp      NZ, left_quadrant		      ;	no, go
CODE:52F8 3E FF				      ld      a, #0xFF			      ;	flag as	blocked
CODE:52FA 32 55	68			      ld      (blocked_by_unknown), a
CODE:52FD E5				      push    hl
CODE:52FE 11 20	61			      ld      de, #aFirstOfficer_0	      ;	"FIRST OFFICER:CAPTAIN,	WE HAVE	BEEN BLO"...
CODE:5301 CD 39	5D			      call    print_string_last_line
CODE:5304 06 08				      ld      b, #8
CODE:5306 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:5309 C3 70	55			      jp      loc_5570
CODE:530C	      ;	---------------------------------------------------------------------------
CODE:530C
CODE:530C	      loc_530C:							      ;	zero power
CODE:530C AF				      xor     a
CODE:530D 32 95	69			      ld      (pwr_lr_sensor), a
CODE:5310 32 96	69			      ld      (pwr_sr_sensor), a
CODE:5313 3D				      dec     a				      ;	flag malfunctioned
CODE:5314 32 B5	6F			      ld      (computer_malfunction), a
CODE:5317
CODE:5317	      left_quadrant:						      ;	direction
CODE:5317 3A 56	68			      ld      a, (ion_dir)
CODE:531A 0E 01				      ld      c, #1			      ;	1 quadrant
CODE:531C CD 18	5B			      call    move_quadrant
CODE:531F CD 81	5B			      call    print_quadrant
CODE:5322 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant on LR sensor
CODE:5325 CD CC	5B			      call    init_quadrant
CODE:5328 C3 E3	5E			      jp      print_sector
CODE:532B	      ;	---------------------------------------------------------------------------
CODE:532B
CODE:532B	      dock_space_station:					      ;	"COMMUNICATIONS:THE SPACE STATION HAS AC"...
CODE:532B 11 67	61			      ld      de, #aCommunications
CODE:532E CD 39	5D			      call    print_string_last_line
CODE:5331 97				      sub     a				      ;	A=0
CODE:5332 32 B9	6F			      ld      (critical), a		      ;	flag OK
CODE:5335 32 AE	6F			      ld      (always_zero), a
CODE:5338 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:533B 21 BB	3C			      ld      hl, # VIDEO+0xBB
CODE:533E 11 A6	61			      ld      de, #aDock		      ;	" DOCK"
CODE:5341 CD 3F	5D			      call    print_string
CODE:5344 06 1A				      ld      b, #26
CODE:5346 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:5349 3E 99				      ld      a, #0x99 ; 'ô'                  ; full power
CODE:534B 32 B8	69			      ld      (power_avail), a
CODE:534E CD 5D	5F			      call    print_power_avail
CODE:5351 CD BA	56			      call    update_power_distribution
CODE:5354 21 7D	3D			      ld      hl, # VIDEO+0x17D		      ;	triton misls value video address
CODE:5357 36 31				      ld      (hl), #0x31 ; '1'
CODE:5359 23				      inc     hl
CODE:535A 36 30				      ld      (hl), #0x30 ; '0'               ; display '10'
CODE:535C 3E 10				      ld      a, #0x10			      ;	max triton missiles
CODE:535E 32 B9	69			      ld      (triton_misls), a
CODE:5361 3E 03				      ld      a, #3
CODE:5363 32 BA	69			      ld      (unused_69BA), a
CODE:5366 32 2B	68			      ld      (antimatter_pods), a
CODE:5369 21 3E	3E			      ld      hl, # VIDEO+0x23E		      ;	antimatter pods	value video address
CODE:536C CD 63	5F			      call    print_BCD_byte		      ;	display	antimatter pods
CODE:536F 21 9B	6F			      ld      hl, #antimatter_pod_tbl
CODE:5372 11 06	00			      ld      de, #6			      ;	offset to next byte
CODE:5375 06 03				      ld      b, #3			      ;	bytes to clear
CODE:5377
CODE:5377	      loc_5377:							      ;	flag pod unused
CODE:5377 36 00				      ld      (hl), #0
CODE:5379 19				      add     hl, de			      ;	next entry
CODE:537A 05				      dec     b				      ;	done all bytes?
CODE:537B C2 77	53			      jp      NZ, loc_5377		      ;	no, loop
CODE:537E 97				      sub     a
CODE:537F 32 B3	6F			      ld      (hyperdrive_disabled), a	      ;	repair hyperdrive
CODE:5382 32 B5	6F			      ld      (computer_malfunction), a	      ;	repair malfunction
CODE:5385 C3 C0	5E			      jp      clear_last_2_lines
CODE:5388	      ;	---------------------------------------------------------------------------
CODE:5388	      ;	START OF FUNCTION CHUNK	FOR fire_maser
CODE:5388
CODE:5388	      hit_triton_mine:						      ;	"FIRST OFFICER:	SIR, WE	HAVE HIT A TRITO"...
CODE:5388 11 BE	61			      ld      de, #aFirstOfficerSi
CODE:538B CD 39	5D			      call    print_string_last_line
CODE:538B	      ;	END OF FUNCTION	CHUNK FOR fire_maser
CODE:538E	      ;	START OF FUNCTION CHUNK	FOR handle_low_power
CODE:538E
CODE:538E	      print_game_over_screen:					      ;	-1
CODE:538E 97				      sub     a
CODE:538F 32 B1	6F			      ld      (cmd_flag), a		      ;	disable	cmd entry
CODE:5392 CD 84	5E			      call    animate_destruction
CODE:5395 06 20				      ld      b, #0x20 ; ' '                  ; <SPACE>
CODE:5397 CD F4	5C			      call    clear_video_with_B
CODE:539A 11 97	6A			      ld      de, #hq_officer		      ;	"		      "
CODE:539D CD CF	5E			      call    print_10_lines
CODE:53A0 11 E1	66			      ld      de, #aShipLogUssPhae	      ;	"SHIP LOG-USS PHAETON-CAPTAIN DAR: SENSO"...
CODE:53A3 21 80	3F			      ld      hl, # VIDEO+0x380
CODE:53A6 CD 3F	5D			      call    print_string
CODE:53A9 06 11				      ld      b, #17			      ;	delay outer loop counter
CODE:53AB
CODE:53AB	      loc_53AB:							      ;	delay inner loop counter
CODE:53AB 11 00	00			      ld      de, #0
CODE:53AE
CODE:53AE	      delay:
CODE:53AE 1B				      dec     de
CODE:53AF 7A				      ld      a, d
CODE:53B0 B3				      or      e
CODE:53B1 C2 AE	53			      jp      NZ, delay
CODE:53B4 05				      dec     b
CODE:53B5 C2 AE	53			      jp      NZ, delay
CODE:53B8 3E 01				      ld      a, #1			      ;	flag as	played
CODE:53BA 32 C0	53			      ld      (played_before), a
CODE:53BD C3 01	50			      jp      START
CODE:53BD	      ;	END OF FUNCTION	CHUNK FOR handle_low_power
CODE:53BD	      ;	---------------------------------------------------------------------------
CODE:53C0 00	      played_before:	      .db 0
CODE:53C1	      ;	---------------------------------------------------------------------------
CODE:53C1
CODE:53C1	      hit_jovian_warship:					      ;	"		      "
CODE:53C1 11 BB	69			      ld      de, #jovian_officer
CODE:53C4 CD CF	5E			      call    print_10_lines
CODE:53C7 11 25	62			      ld      de, #aJovianWatchWhe	      ;	"JOVIAN: WATCH WHERE YOU ARE GOING YOU T"...
CODE:53CA CD 39	5D			      call    print_string_last_line
CODE:53CD 11 EC	61			      ld      de, #aCommunicatio_0	      ;	"COMMUNICATIONS:SIR, WE	MADE CONTACT WIT"...
CODE:53D0 21 80	3F			      ld      hl, # VIDEO+0x380
CODE:53D3 CD 3F	5D			      call    print_string
CODE:53D6 3E 01				      ld      a, #1			      ;	flag disabled
CODE:53D8 32 B8	6F			      ld      (disable_pod_update), a
CODE:53DB 1E 14				      ld      e, #20			      ;	20 iterations
CODE:53DD
CODE:53DD	      loc_53DD:
CODE:53DD CD BA	5C			      call    rnd_delay
CODE:53E0	      ;	animate	jovian officer
CODE:53E0 21 5F	3D			      ld      hl, # VIDEO+0x15F
CODE:53E3 36 8C				      ld      (hl), #0x8C ; 'å'
CODE:53E5 23				      inc     hl
CODE:53E6 36 84				      ld      (hl), #0x84 ; 'Ñ'
CODE:53E8 23				      inc     hl
CODE:53E9 23				      inc     hl
CODE:53EA 36 AA				      ld      (hl), #0xAA ; '™'
CODE:53EC 23				      inc     hl
CODE:53ED 36 BB				      ld      (hl), #0xBB ; 'ª'
CODE:53EF 21 E1	3D			      ld      hl, # VIDEO+0x1E1
CODE:53F2 36 3D				      ld      (hl), #0x3D ; '='
CODE:53F4 CD BA	5C			      call    rnd_delay
CODE:53F7 21 5F	3D			      ld      hl, # VIDEO+0x15F
CODE:53FA 36 B7				      ld      (hl), #0xB7 ; '∑'
CODE:53FC 23				      inc     hl
CODE:53FD 36 95				      ld      (hl), #0x95 ; 'ï'
CODE:53FF 23				      inc     hl
CODE:5400 23				      inc     hl
CODE:5401 36 88				      ld      (hl), #0x88 ; 'à'
CODE:5403 23				      inc     hl
CODE:5404 36 8C				      ld      (hl), #0x8C ; 'å'
CODE:5406 21 E1	3D			      ld      hl, # VIDEO+0x1E1
CODE:5409 36 4F				      ld      (hl), #0x4F ; 'O'
CODE:540B CD 4B	5D			      call    update_chaser_pods_cmd_entry
CODE:540E 1D				      dec     e				      ;	done animation?
CODE:540F C2 DD	53			      jp      NZ, loc_53DD		      ;	no, loop
CODE:5412 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	ptr current quadrant on	LR sensor
CODE:5415 C3 CC	5B			      jp      init_quadrant		      ;	randomise again!
CODE:5418	      ;	---------------------------------------------------------------------------
CODE:5418
CODE:5418	      hit_star:							      ;	"NAVIGATOR:WE HIT A STAR!?!"
CODE:5418 11 54	62			      ld      de, #aNavigatorWeHit
CODE:541B CD 39	5D			      call    print_string_last_line
CODE:541E 3E 11				      ld      a, #17
CODE:5420 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5423 47				      ld      b, a
CODE:5424 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:5427 C3 8E	53			      jp      print_game_over_screen
CODE:542A	      ;	---------------------------------------------------------------------------
CODE:542A
CODE:542A	      maser:
CODE:542A CD C0	5E			      call    clear_last_2_lines
CODE:542D 3E FF				      ld      a, #0xFF			      ;	flag fired
CODE:542F 32 B4	6F			      ld      (maser_fired), a
CODE:5432 3A 98	69			      ld      a, (pwr_masers)
CODE:5435 FE 08				      cp      #8			      ;	less than 8%?
CODE:5437 F2 40	54			      jp      P, loc_5440		      ;	no, skip
CODE:543A 11 6F	62			      ld      de, #aEngineerComm_0	      ;	"ENGINEER:COMMANDER, WE	HAVEN'T THE POWE"...
CODE:543D C3 39	5D			      jp      print_string_last_line
CODE:5440	      ;	---------------------------------------------------------------------------
CODE:5440
CODE:5440	      loc_5440:							      ;	direction
CODE:5440 CD A7	5C			      call    get_next_cmd_char
CODE:5443 D6 30				      sub     #0x30 ; '0'                     ; digit?
CODE:5445 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	no, exit
CODE:5448 FE 08				      cp      #8			      ;	greater	than 7?
CODE:544A F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:544D
CODE:544D	      ;	===============	S U B R	O U T I	N E =======================================
CODE:544D
CODE:544D
CODE:544D	      fire_maser:
CODE:544D
CODE:544D	      ;	FUNCTION CHUNK AT CODE:5388 SIZE 00000006 BYTES
CODE:544D
CODE:544D 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5450 A7				      and     a				      ;	up?
CODE:5451 CA 5A	54			      jp      Z, loc_545A		      ;	yes, exit
CODE:5454
CODE:5454	      loc_5454:
CODE:5454 23				      inc     hl
CODE:5455 23				      inc     hl			      ;	next table entry
CODE:5456 3D				      dec     a				      ;	done?
CODE:5457 C2 54	54			      jp      NZ, loc_5454		      ;	no, loop
CODE:545A
CODE:545A	      loc_545A:
CODE:545A 5E				      ld      e, (hl)
CODE:545B 23				      inc     hl
CODE:545C 56				      ld      d, (hl)			      ;	DE = delta
CODE:545D 3A AF	6F			      ld      a, (delay_duty_cycle_i)
CODE:5460 32 F1	67			      ld      (tmp_delay_cycle), a
CODE:5463 3E 02				      ld      a, #2
CODE:5465 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5468 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:546B 06 00				      ld      b, #0			      ;	init maser path	length
CODE:546D D5				      push    de
CODE:546E
CODE:546E	      move_maser:						      ;	add delta
CODE:546E 19				      add     hl, de
CODE:546F 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5470 32 F3	67			      ld      (tmp_sector_contents), a
CODE:5473 36 BF				      ld      (hl), #0xBF ; 'ø'               ; write maser graphic to video
CODE:5475 C5				      push    bc
CODE:5476 06 01				      ld      b, #1
CODE:5478 CD 48	5D			      call    delay_B_and_update_all
CODE:547B C1				      pop     bc
CODE:547C 3A F3	67			      ld      a, (tmp_sector_contents)
CODE:547F E6 7F				      and     #0x7F ; ''
CODE:5481 04				      inc     b				      ;	inc maser path length
CODE:5482 FE 2E				      cp      #0x2E ; '.'                     ; empty sector?
CODE:5484 CA 6E	54			      jp      Z, move_maser		      ;	yes, loop
CODE:5487 FE 26				      cp      #0x26 ; '&'                     ; jovian battle cruiser?
CODE:5489 CA AE	54			      jp      Z, maser_hit_jovian	      ;	yes, go
CODE:548C FE 25				      cp      #0x25 ; '%'
CODE:548E CA 88	53			      jp      Z, hit_triton_mine
CODE:5491 FE 58				      cp      #0x58 ; 'X'
CODE:5493 C2 A3	54			      jp      NZ, maser_miss		      ;	no, go
CODE:5496 D1				      pop     de
CODE:5497 E5				      push    hl
CODE:5498 21 A0	54			      ld      hl, #loc_54A0		      ;	return address
CODE:549B E3				      ex      (sp), hl
CODE:549C D5				      push    de
CODE:549D C3 C9	54			      jp      wipe_maser
CODE:54A0	      ;	---------------------------------------------------------------------------
CODE:54A0
CODE:54A0	      loc_54A0:
CODE:54A0 C3 6F	55			      jp      shot_hit_unknown
CODE:54A3	      ;	---------------------------------------------------------------------------
CODE:54A3
CODE:54A3	      maser_miss:						      ;	"FIRST OFFICER:SIR, MY SENSORS SHOW MASE"...
CODE:54A3 11 A7	62			      ld      de, #aFirstOfficer_1
CODE:54A6 C5				      push    bc
CODE:54A7 CD 39	5D			      call    print_string_last_line
CODE:54AA C1				      pop     bc
CODE:54AB C3 C9	54			      jp      wipe_maser
CODE:54AE	      ;	---------------------------------------------------------------------------
CODE:54AE
CODE:54AE	      maser_hit_jovian:
CODE:54AE CD 00	5D			      call    rand_0_9
CODE:54B1 FE 07				      cp      #7			      ;	less than 7?
CODE:54B3 FA C9	54			      jp      M, wipe_maser		      ;	yes, go
CODE:54B6 36 AE				      ld      (hl), #0xAE ; 'Æ'
CODE:54B8 3E 2E				      ld      a, #0x2E ; '.'                  ; empty sector
CODE:54BA 32 F3	67			      ld      (tmp_sector_contents), a
CODE:54BD C5				      push    bc
CODE:54BE CD 1E	5F			      call    dec_jovians
CODE:54C1 C1				      pop     bc
CODE:54C2 3A C5	3C			      ld      a, (VIDEO+0xC5)		      ;	warships in current quadrant of	LR sensor
CODE:54C5 3D				      dec     a				      ;	adjust
CODE:54C6 32 C5	3C			      ld      (VIDEO+0xC5), a		      ;	update
CODE:54C9
CODE:54C9	      wipe_maser:
CODE:54C9 CD 4B	5D			      call    update_chaser_pods_cmd_entry
CODE:54CC D1				      pop     de
CODE:54CD 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:54D0
CODE:54D0	      loc_54D0:							      ;	add delta
CODE:54D0 19				      add     hl, de
CODE:54D1 7E				      ld      a, (hl)			      ;	get sector contents
CODE:54D2 3E 2E				      ld      a, #0x2E ; '.'                  ; empty
CODE:54D4 77				      ld      (hl), a			      ;	write to video
CODE:54D5 C5				      push    bc
CODE:54D6 06 01				      ld      b, #1
CODE:54D8 CD 48	5D			      call    delay_B_and_update_all
CODE:54DB C1				      pop     bc
CODE:54DC 05				      dec     b				      ;	done path?
CODE:54DD C2 D0	54			      jp      NZ, loc_54D0		      ;	no, loop
CODE:54E0 3A F3	67			      ld      a, (tmp_sector_contents)
CODE:54E3 77				      ld      (hl), a			      ;	write to video
CODE:54E4 3A F1	67			      ld      a, (tmp_delay_cycle)
CODE:54E7 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:54EA C9				      ret
CODE:54EA	      ;	End of function	fire_maser
CODE:54EA
CODE:54EB	      ;	---------------------------------------------------------------------------
CODE:54EB
CODE:54EB	      triton_missile:
CODE:54EB CD C0	5E			      call    clear_last_2_lines
CODE:54EE CD 75	5F			      call    dec_triton_misls_and_print
CODE:54F1 DA 76	56			      jp      C, print_no_more_triton_misls   ;	no missiles, exit
CODE:54F4 3A 99	69			      ld      a, (pwr_trt_missl)
CODE:54F7 FE 0A				      cp      #10			      ;	less than 10%?
CODE:54F9 F2 02	55			      jp      P, titron_pwr_ok		      ;	no, skip
CODE:54FC
CODE:54FC	      loc_54FC:							      ;	"ENGINEER:COMMANDER, THE MISSILE TUBES A"...
CODE:54FC 11 DE	62			      ld      de, #aEngineerComm_1
CODE:54FF C3 39	5D			      jp      print_string_last_line
CODE:5502	      ;	---------------------------------------------------------------------------
CODE:5502
CODE:5502	      titron_pwr_ok:						      ;	direction
CODE:5502 CD A7	5C			      call    get_next_cmd_char
CODE:5505 D6 30				      sub     #0x30 ; '0'                     ; digit?
CODE:5507 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	no, exit
CODE:550A FE 08				      cp      #8			      ;	greater	than 7?
CODE:550C F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:550F
CODE:550F	      ;	===============	S U B R	O U T I	N E =======================================
CODE:550F
CODE:550F
CODE:550F	      move_triton_missile:
CODE:550F
CODE:550F	      ;	FUNCTION CHUNK AT CODE:5585 SIZE 00000017 BYTES
CODE:550F	      ;	FUNCTION CHUNK AT CODE:5662 SIZE 00000014 BYTES
CODE:550F	      ;	FUNCTION CHUNK AT CODE:5842 SIZE 0000000F BYTES
CODE:550F
CODE:550F 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5512 A7				      and     a				      ;	up?
CODE:5513 CA 1C	55			      jp      Z, loc_551C		      ;	yes, skip
CODE:5516
CODE:5516	      loc_5516:
CODE:5516 23				      inc     hl
CODE:5517 23				      inc     hl			      ;	next tbl entry
CODE:5518 3D				      dec     a				      ;	done?
CODE:5519 C2 16	55			      jp      NZ, loc_5516		      ;	no, loop
CODE:551C
CODE:551C	      loc_551C:
CODE:551C 5E				      ld      e, (hl)
CODE:551D 23				      inc     hl
CODE:551E 56				      ld      d, (hl)			      ;	DE = delta
CODE:551F 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:5522
CODE:5522	      loc_5522:							      ;	add delta
CODE:5522 19				      add     hl, de
CODE:5523 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5524 E6 7F				      and     #0x7F ; ''
CODE:5526 FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5528 C2 3F	55			      jp      NZ, loc_553F		      ;	no, skip
CODE:552B 36 2B				      ld      (hl), #0x2B ; '+'               ; write missile graphic to video
CODE:552D 06 06				      ld      b, #6
CODE:552F CD 48	5D			      call    delay_B_and_update_all
CODE:5532 36 2E				      ld      (hl), #0x2E ; '.'               ; write empty sector to video
CODE:5534 CD B6	51			      call    keyboard_scan		      ;	any key?
CODE:5537 CA 22	55			      jp      Z, loc_5522		      ;	no, loop
CODE:553A FE 09				      cp      #9			      ;	<TAB>?
CODE:553C C2 22	55			      jp      NZ, loc_5522		      ;	no, loop
CODE:553F
CODE:553F	      loc_553F:							      ;	get sector contents
CODE:553F 7E				      ld      a, (hl)
CODE:5540 32 F3	67			      ld      (tmp_sector_contents), a
CODE:5543 F6 80				      or      #0x80 ; 'Ä'
CODE:5545 77				      ld      (hl), a			      ;	animate
CODE:5546 06 06				      ld      b, #6
CODE:5548 CD 48	5D			      call    delay_B_and_update_all
CODE:554B 7E				      ld      a, (hl)			      ;	*** dead code
CODE:554C 3A F3	67			      ld      a, (tmp_sector_contents)
CODE:554F 77				      ld      (hl), a			      ;	restore	contents
CODE:5550 FE 30				      cp      #0x30 ; '0'                     ; space station?
CODE:5552 CA 6E	56			      jp      Z, missile_destroyed_object     ;	yes, go
CODE:5555 FE 26				      cp      #0x26 ; '&'                     ; jovian battle cruiser?
CODE:5557 CA 62	56			      jp      Z, missile_hit_jovian	      ;	yes, go
CODE:555A FE 25				      cp      #0x25 ; '%'                     ; triton mine?
CODE:555C CA 88	53			      jp      Z, hit_triton_mine	      ;	yes, go
CODE:555F FE 58				      cp      #0x58 ; 'X'                     ; unknown?
CODE:5561 CA 6F	55			      jp      Z, shot_hit_unknown	      ;	yes, go
CODE:5564 FE 5B				      cp      #0x5B ; '['                     ; USS Hephaestus?
CODE:5566 CA 42	58			      jp      Z, power_minus_2_and_update     ;	yes, go
CODE:5569 11 04	66			      ld      de, #aComputerTriton	      ;	"COMPUTER:TRITON MISSILE HAS NO	EFFECT"
CODE:556C C3 39	5D			      jp      print_string_last_line
CODE:556F	      ;	---------------------------------------------------------------------------
CODE:556F
CODE:556F	      shot_hit_unknown:						      ;	sector video address
CODE:556F E5				      push    hl
CODE:5570
CODE:5570	      loc_5570:							      ;	random entry
CODE:5570 CD 00	5D			      call    rand_0_9
CODE:5573 A7				      and     a				      ;	zero?
CODE:5574 CA 85	55			      jp      Z, finish_shot		      ;	yes, go
CODE:5577 21 2A	68			      ld      hl, #engine_explode_countdown   ;	2 bytes	before table
CODE:557A
CODE:557A	      loc_557A:							      ;	found entry?
CODE:557A 3D				      dec     a
CODE:557B 23				      inc     hl
CODE:557C 23				      inc     hl
CODE:557D C2 7A	55			      jp      NZ, loc_557A		      ;	no, loop
CODE:557D	      ;	End of function	move_triton_missile
CODE:557D
CODE:5580	      ;	START OF FUNCTION CHUNK	FOR update_chaser_pods_cmd_entry
CODE:5580
CODE:5580	      jump_HL_vector:
CODE:5580 7E				      ld      a, (hl)
CODE:5581 23				      inc     hl
CODE:5582 66				      ld      h, (hl)
CODE:5583 6F				      ld      l, a			      ;	HL=vector address
CODE:5584 E9				      jp      (hl)
CODE:5584	      ;	END OF FUNCTION	CHUNK FOR update_chaser_pods_cmd_entry
CODE:5585	      ;	---------------------------------------------------------------------------
CODE:5585	      ;	START OF FUNCTION CHUNK	FOR move_triton_missile
CODE:5585
CODE:5585	      finish_shot:
CODE:5585 E1				      pop     hl
CODE:5586 3A 55	68			      ld      a, (blocked_by_unknown)
CODE:5589 A7				      and     a				      ;	blocked?
CODE:558A F2 92	55			      jp      P, loc_5592		      ;	no, skip
CODE:558D AF				      xor     a				      ;	flag OK
CODE:558E 32 55	68			      ld      (blocked_by_unknown), a
CODE:5591 C9				      ret
CODE:5592	      ;	---------------------------------------------------------------------------
CODE:5592
CODE:5592	      loc_5592:							      ;	*** dead code
CODE:5592 3A B4	6F			      ld      a, (maser_fired)
CODE:5595 97				      sub     a				      ;	flag not fired
CODE:5596 32 B4	6F			      ld      (maser_fired), a
CODE:5599 C3 6E	56			      jp      missile_destroyed_object
CODE:5599	      ;	END OF FUNCTION	CHUNK FOR move_triton_missile
CODE:559C	      ;	---------------------------------------------------------------------------
CODE:559C	      ;	Either
CODE:559C	      ;	* maser	fired, rebounds	in random direction, or
CODE:559C	      ;	* if blocked, removes Hephaestus & object from display,	or
CODE:559C	      ;	* fires	triton missile in random direction
CODE:559C
CODE:559C
CODE:559C	      missile_hit_unk_079:
CODE:559C 3A B4	6F			      ld      a, (maser_fired)
CODE:559F A7				      and     a				      ;	fired?
CODE:55A0 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:55A3 E3				      ex      (sp), hl			      ;	swap with sector video address
CODE:55A4 22 28	68			      ld      (hephaestus_video_addr), hl     ;	store as hephaestrus address (for fire)
CODE:55A7 F2 B8	55			      jp      P, loc_55B8		      ;	not fired, skip
CODE:55AA
CODE:55AA	      loc_55AA:							      ;	dir
CODE:55AA CD 00	5D			      call    rand_0_9
CODE:55AD FE 08				      cp      #8			      ;	greater	than 7?
CODE:55AF F2 AA	55			      jp      P, loc_55AA		      ;	yes, regenerate
CODE:55B2 CD 4D	54			      call    fire_maser		      ;	A=dir from unknown object
CODE:55B5 C3 D0	55			      jp      loc_55D0
CODE:55B8	      ;	---------------------------------------------------------------------------
CODE:55B8
CODE:55B8	      loc_55B8:
CODE:55B8 3A 55	68			      ld      a, (blocked_by_unknown)
CODE:55BB B7				      or      a				      ;	blocked?
CODE:55BC F2 C5	55			      jp      P, loc_55C5		      ;	no, go
CODE:55BF 36 2E				      ld      (hl), #0x2E ; '.'               ; write empty sector to video (unknown object)
CODE:55C1 E1				      pop     hl			      ;	hephaestus video address
CODE:55C2 36 2E				      ld      (hl), #0x2E ; '.'               ; write empty sector to video
CODE:55C4 C9				      ret
CODE:55C5	      ;	---------------------------------------------------------------------------
CODE:55C5
CODE:55C5	      loc_55C5:							      ;	dir
CODE:55C5 CD 00	5D			      call    rand_0_9
CODE:55C8 FE 08				      cp      #8			      ;	greater	than 7?
CODE:55CA F2 C5	55			      jp      P, loc_55C5		      ;	yes, regenerate
CODE:55CD CD 0F	55			      call    move_triton_missile
CODE:55D0
CODE:55D0	      loc_55D0:							      ;	hephaestus video address
CODE:55D0 E1				      pop     hl
CODE:55D1 22 28	68			      ld      (hephaestus_video_addr), hl     ;	restore
CODE:55D4 C9				      ret
CODE:55D5	      ;	---------------------------------------------------------------------------
CODE:55D5	      ;	* sets all objects to unknown
CODE:55D5	      ;	* randomly disables hyperdrive
CODE:55D5
CODE:55D5	      missile_hit_unk_1:					      ;	unknown	graphic
CODE:55D5 3E 58				      ld      a, #0x58 ; 'X'
CODE:55D7 32 EB	55			      ld      (loc_55EA+1), a		      ;	patch!
CODE:55DA
CODE:55DA	      loc_55DA:							      ;	top-left '.' in quadrant display
CODE:55DA 21 57	3C			      ld      hl, # VIDEO+0x57
CODE:55DD 11 2B	00			      ld      de, #0x2B	; '+'                 ; offset to next line of quadrant display
CODE:55E0 06 0A				      ld      b, #10			      ;	10 rows	to update
CODE:55E2
CODE:55E2	      loc_55E2:							      ;	21 columns to update
CODE:55E2 0E 15				      ld      c, #21
CODE:55E4
CODE:55E4	      loc_55E4:							      ;	get sector contents
CODE:55E4 7E				      ld      a, (hl)
CODE:55E5 FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:55E7 C2 EC	55			      jp      NZ, loc_55EC		      ;	no, skip
CODE:55EA	      ;	the object graphic is patched (X/%)
CODE:55EA
CODE:55EA	      loc_55EA:							      ;	write object graphic to	video
CODE:55EA 36 58				      ld      (hl), #0x58 ; 'X'
CODE:55EC
CODE:55EC	      loc_55EC:							      ;	done all columns?
CODE:55EC 0D				      dec     c
CODE:55ED 23				      inc     hl			      ;	next video address
CODE:55EE C2 E4	55			      jp      NZ, loc_55E4		      ;	no, loop
CODE:55F1 19				      add     hl, de			      ;	next row video address
CODE:55F2 05				      dec     b				      ;	done all rows?
CODE:55F3 C2 E2	55			      jp      NZ, loc_55E2		      ;	no, loop
CODE:55F6 CD 00	5D			      call    rand_0_9
CODE:55F9 FE 05				      cp      #5			      ;	greater	than 4?
CODE:55FB D2 03	56			      jp      NC, loc_5603		      ;	yes, skip
CODE:55FE 3E FF				      ld      a, #0xFF			      ;	flag disabled
CODE:5600 32 B3	6F			      ld      (hyperdrive_disabled), a
CODE:5603
CODE:5603	      loc_5603:
CODE:5603 E1				      pop     hl
CODE:5604 C9				      ret
CODE:5605	      ;	---------------------------------------------------------------------------
CODE:5605	      ;	sets all objects to triton mines
CODE:5605	      *	randomly disables hyperdrive
CODE:5605
CODE:5605	      missile_hit_unk_2:					      ;	triton mine
CODE:5605 3E 25				      ld      a, #0x25 ; '%'
CODE:5607 32 EB	55			      ld      (loc_55EA+1), a		      ;	patch
CODE:560A C3 DA	55			      jp      loc_55DA
CODE:560D	      ;	---------------------------------------------------------------------------
CODE:560D	      ;	randomly either:
CODE:560D	      ;	* changes unknown to space station, or
CODE:560D	      ;	* jumps	to option 4
CODE:560D
CODE:560D	      missile_hit_unk_6:
CODE:560D CD 00	5D			      call    rand_0_9
CODE:5610 FE 05				      cp      #5			      ;	less than 5?
CODE:5612 DA 3D	56			      jp      C, missile_hit_unk_4	      ;	yes, go
CODE:5615 E1				      pop     hl			      ;	unknown	object address
CODE:5616 36 30				      ld      (hl), #0x30 ; '0'               ; is now a space station!
CODE:5618 C9				      ret
CODE:5619	      ;	---------------------------------------------------------------------------
CODE:5619	      ;	warps to a random quadrant
CODE:5619
CODE:5619	      missile_hit_unk_3:
CODE:5619 CD 00	5D			      call    rand_0_9
CODE:561C 07				      rlca
CODE:561D 07				      rlca
CODE:561E 07				      rlca
CODE:561F 07				      rlca
CODE:5620 47				      ld      b, a
CODE:5621 CD 00	5D			      call    rand_0_9
CODE:5624 80				      add     a, b			      ;	random quadrant
CODE:5625 32 61	68			      ld      (quadrant), a		      ;	store as current
CODE:5628 3E 03				      ld      a, #3			      ;	direction=SE
CODE:562A 0E 01				      ld      c, #1			      ;	1 quadrant
CODE:562C CD 18	5B			      call    move_quadrant
CODE:562F 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant LR sensor
CODE:5632 CD CC	5B			      call    init_quadrant
CODE:5635 CD 81	5B			      call    print_quadrant
CODE:5638 CD E3	5E			      call    print_sector
CODE:563B E1				      pop     hl			      ;	discard
CODE:563C C9				      ret
CODE:563D	      ;	---------------------------------------------------------------------------
CODE:563D	      ;	rolls the dice again!?!
CODE:563D
CODE:563D	      missile_hit_unk_4:					      ;	*** dead code
CODE:563D CD 00	5D			      call    rand_0_9
CODE:5640 CD BA	5C			      call    rnd_delay
CODE:5643 C3 70	55			      jp      loc_5570			      ;	roll the dice again!
CODE:5646	      ;	---------------------------------------------------------------------------
CODE:5646	      ;	randomly decrement power, or bug?
CODE:5646
CODE:5646	      missile_hit_unk_58:					      ;	"FIRST OFFICER:	THE UNKNOWN IS STEALING	"...
CODE:5646 11 BA	67			      ld      de, #aFirstOfficer_2
CODE:5649 CD 39	5D			      call    print_string_last_line
CODE:564C E1				      pop     hl			      ;	discard
CODE:564D
CODE:564D	      loc_564D:
CODE:564D CD 00	5D			      call    rand_0_9
CODE:5650 FE 04				      cp      #4			      ;	less than 4?
CODE:5652 DA 5D	56			      jp      C, loc_565D		      ;	yes, go
CODE:5655 06 12				      ld      b, #18			      ;	*** dead code
CODE:5657 CD 66	5A			      call    jovian_attack_and_move
CODE:565A C3 4D	56			      jp      loc_564D			      ;	again
CODE:565D	      ;	---------------------------------------------------------------------------
CODE:565D
CODE:565D	      loc_565D:							      ;	*** dead code
CODE:565D 06 19				      ld      b, #25
CODE:565F C3 C0	5E			      jp      clear_last_2_lines	      ;	wipe the message
CODE:5662	      ;	---------------------------------------------------------------------------
CODE:5662	      ;	START OF FUNCTION CHUNK	FOR move_triton_missile
CODE:5662
CODE:5662	      missile_hit_jovian:
CODE:5662 E5				      push    hl
CODE:5663 CD 1E	5F			      call    dec_jovians
CODE:5666 3A C5	3C			      ld      a, (VIDEO+0xC5)		      ;	warships in quadrant, LR sensor
CODE:5669 3D				      dec     a				      ;	adjust
CODE:566A 32 C5	3C			      ld      (VIDEO+0xC5), a		      ;	update
CODE:566D E1				      pop     hl			      ;	object video address
CODE:566E	      ;	the object is not removed from any data	table???
CODE:566E
CODE:566E	      missile_destroyed_object:					      ;	write empty sector to video
CODE:566E 36 2E				      ld      (hl), #0x2E ; '.'
CODE:5670 11 18	63			      ld      de, #aComputerObject	      ;	"COMPUTER:OBJECT DESTROYED"
CODE:5673 C3 39	5D			      jp      print_string_last_line
CODE:5673	      ;	END OF FUNCTION	CHUNK FOR move_triton_missile
CODE:5676	      ;	---------------------------------------------------------------------------
CODE:5676
CODE:5676	      print_no_more_triton_misls:				      ;	"WEAPONRY:SIR, WE HAVE NO MORE TRITON MI"...
CODE:5676 11 4B	64			      ld      de, #aWeaponrySirWeH
CODE:5679 C3 39	5D			      jp      print_string_last_line
CODE:567C	      ;	---------------------------------------------------------------------------
CODE:567C
CODE:567C	      power_distrib:						      ;	flag OK
CODE:567C 97				      sub     a
CODE:567D 32 B9	6F			      ld      (critical), a
CODE:5680 CD C0	5E			      call    clear_last_2_lines
CODE:5683 CD A7	5C			      call    get_next_cmd_char		      ;	get subcmd
CODE:5686 21 21	68			      ld      hl, #pwr_subcmd_tbl	      ;	"HLSDMT"
CODE:5689 11 94	69			      ld      de, #pwr_hypr_ion
CODE:568C 47				      ld      b, a			      ;	subcmd
CODE:568D
CODE:568D	      loc_568D:							      ;	subcmd entry from table
CODE:568D 7E				      ld      a, (hl)
CODE:568E A7				      and     a				      ;	end of table?
CODE:568F CA 05	5B			      jp      Z, print_no_sense_and_ret	      ;	yes, exit
CODE:5692 B8				      cp      b				      ;	found it?
CODE:5693 CA 9B	56			      jp      Z, pwr_subcmd_ok		      ;	yes, go
CODE:5696 23				      inc     hl			      ;	next entry in tbl
CODE:5697 13				      inc     de			      ;	next power value
CODE:5698 C3 8D	56			      jp      loc_568D			      ;	loop
CODE:569B	      ;	---------------------------------------------------------------------------
CODE:569B
CODE:569B	      pwr_subcmd_ok:						      ;	get next char
CODE:569B CD A7	5C			      call    get_next_cmd_char
CODE:569E CA A3	56			      jp      Z, loc_56A3		      ;	none, skip
CODE:56A1 D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:56A3
CODE:56A3	      loc_56A3:
CODE:56A3 47				      ld      b, a
CODE:56A4 CD A7	5C			      call    get_next_cmd_char		      ;	get next char
CODE:56A7 C2 B0	56			      jp      NZ, loc_56B0		      ;	non-zero, skip
CODE:56AA 48				      ld      c, b
CODE:56AB 06 00				      ld      b, #0			      ;	B,C=value
CODE:56AD C3 B3	56			      jp      loc_56B3
CODE:56B0	      ;	---------------------------------------------------------------------------
CODE:56B0
CODE:56B0	      loc_56B0:							      ;	convert	to binary
CODE:56B0 D6 30				      sub     #0x30 ; '0'
CODE:56B2 4F				      ld      c, a
CODE:56B3
CODE:56B3	      loc_56B3:
CODE:56B3 78				      ld      a, b
CODE:56B4 0F				      rrca
CODE:56B5 0F				      rrca
CODE:56B6 0F				      rrca
CODE:56B7 0F				      rrca
CODE:56B8 B1				      or      c				      ;	convert	to BCD byte
CODE:56B9 12				      ld      (de), a			      ;	store in power settings
CODE:56BA
CODE:56BA	      ;	===============	S U B R	O U T I	N E =======================================
CODE:56BA
CODE:56BA
CODE:56BA	      update_power_distribution:
CODE:56BA 06 06				      ld      b, #6			      ;	6 power	values
CODE:56BC 11 CD	3D			      ld      de, # VIDEO+0x1CD		      ;	HYPR&ION value
CODE:56BF 97				      sub     a				      ;	flag OK
CODE:56C0 32 B0	6F			      ld      (power_overflow),	a
CODE:56C3 21 94	69			      ld      hl, #pwr_hypr_ion
CODE:56C6
CODE:56C6	      loc_56C6:							      ;	add power value
CODE:56C6 86				      add     a, (hl)
CODE:56C7 27				      daa
CODE:56C8 D2 D0	56			      jp      NC, loc_56D0		      ;	skip if	no overflow
CODE:56CB 3E FF				      ld      a, #0xFF			      ;	flag overflow
CODE:56CD 32 B0	6F			      ld      (power_overflow),	a
CODE:56D0
CODE:56D0	      loc_56D0:							      ;	store total
CODE:56D0 4F				      ld      c, a
CODE:56D1 7E				      ld      a, (hl)			      ;	get power value
CODE:56D2 0F				      rrca
CODE:56D3 0F				      rrca
CODE:56D4 0F				      rrca
CODE:56D5 0F				      rrca				      ;	high->low nibble
CODE:56D6 E6 0F				      and     #0xF			      ;	nibble only
CODE:56D8 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:56DA 12				      ld      (de), a			      ;	write to video
CODE:56DB 13				      inc     de			      ;	next video address
CODE:56DC 7E				      ld      a, (hl)
CODE:56DD E6 0F				      and     #0xF			      ;	low nibble only
CODE:56DF C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:56E1 12				      ld      (de), a			      ;	write to video
CODE:56E2 E5				      push    hl
CODE:56E3 21 3F	00			      ld      hl, #0x3F	; '?'
CODE:56E6 19				      add     hl, de			      ;	next line
CODE:56E7 EB				      ex      de, hl			      ;	DE = video address
CODE:56E8 E1				      pop     hl
CODE:56E9 05				      dec     b				      ;	done all power values?
CODE:56EA 23				      inc     hl			      ;	next power value
CODE:56EB 79				      ld      a, c			      ;	restore	total
CODE:56EC C2 C6	56			      jp      NZ, loc_56C6		      ;	no, loop
CODE:56EF 47				      ld      b, a			      ;	get total
CODE:56F0 3A B0	6F			      ld      a, (power_overflow)
CODE:56F3 A7				      and     a				      ;	overflow?
CODE:56F4 FA FC	56			      jp      M, loc_56FC		      ;	yes, go
CODE:56F7 3A B8	69			      ld      a, (power_avail)
CODE:56FA B8				      cp      b				      ;	more than available power?
CODE:56FB D0				      ret     NC			      ;	no, return
CODE:56FC
CODE:56FC	      loc_56FC:							      ;	"ENGINEER:COMMANDER, THE ENGINES ARE OVE"...
CODE:56FC 11 56	63			      ld      de, #aEngineerComm_2
CODE:56FF 21 80	3F			      ld      hl, # VIDEO+0x380
CODE:5702 CD 3C	5D			      call    clear_last_2_lines_print_string
CODE:5705 06 10				      ld      b, #16
CODE:5707 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:570A 3A B9	6F			      ld      a, (critical)
CODE:570D A7				      and     a				      ;	exploding?
CODE:570E F8				      ret     M				      ;	yes, return
CODE:570F
CODE:570F	      loc_570F:
CODE:570F CD 00	5D			      call    rand_0_9
CODE:5712 FE 04				      cp      #4			      ;	less than 4?
CODE:5714 DA 0F	57			      jp      C, loc_570F		      ;	yes, regenerate
CODE:5717 32 2A	68			      ld      (engine_explode_countdown), a
CODE:571A 3E FF				      ld      a, #0xFF			      ;	flag exploding
CODE:571C 32 B9	6F			      ld      (critical), a
CODE:571F 3E 03				      ld      a, #3
CODE:5721 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5724 21 BB	3C			      ld      hl, # VIDEO+0xBB		      ;	ptr to condition value
CODE:5727 11 B8	61			      ld      de, #aCrtcl		      ;	"CRTCL"
CODE:572A CD 3C	5D			      call    clear_last_2_lines_print_string
CODE:572D C3 4B	5D			      jp      update_chaser_pods_cmd_entry
CODE:572D	      ;	End of function	update_power_distribution
CODE:572D
CODE:5730	      ;	---------------------------------------------------------------------------
CODE:5730
CODE:5730	      self_destruct:						      ;	"COMPUTER:SELF DESTRUCT	SEQUENCE INITIAT"...
CODE:5730 11 A6	63			      ld      de, #aComputerSelfDe
CODE:5733 CD 39	5D			      call    print_string_last_line
CODE:5736 1E 15				      ld      e, #0x15			      ;	15 sec countdown
CODE:5738 21 EB	3F			      ld      hl, # VIDEO+0x3EB		      ;	self destruct countdown	video address
CODE:573B
CODE:573B	      loc_573B:
CODE:573B 06 10				      ld      b, #16
CODE:573D CD 48	5D			      call    delay_B_and_update_all
CODE:5740 7B				      ld      a, e			      ;	countdown
CODE:5741 C6 99				      add     a, #0x99 ; 'ô'
CODE:5743 27				      daa				      ;	decrement
CODE:5744 5F				      ld      e, a			      ;	update
CODE:5745 0F				      rrca
CODE:5746 0F				      rrca
CODE:5747 0F				      rrca
CODE:5748 0F				      rrca
CODE:5749 E6 0F				      and     #0xF			      ;	high->low nibble
CODE:574B C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII
CODE:574D 77				      ld      (hl), a			      ;	write to video
CODE:574E 23				      inc     hl			      ;	next video address
CODE:574F 7B				      ld      a, e
CODE:5750 E6 0F				      and     #0xF			      ;	low nibble only
CODE:5752 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII
CODE:5754 77				      ld      (hl), a			      ;	write to video
CODE:5755 2B				      dec     hl			      ;	restore	video address
CODE:5756 7B				      ld      a, e
CODE:5757 A7				      and     a				      ;	done countdown?
CODE:5758 CA 8E	53			      jp      Z, print_game_over_screen	      ;	yes, exit
CODE:575B FE 06				      cp      #6			      ;	less than 6s left?
CODE:575D FA 3B	57			      jp      M, loc_573B		      ;	yes, loop
CODE:5760 CD B6	51			      call    keyboard_scan		      ;	any key?
CODE:5763 CA 3B	57			      jp      Z, loc_573B		      ;	no, loop
CODE:5766 FE 09				      cp      #9			      ;	<TAB>?
CODE:5768 C2 3B	57			      jp      NZ, loc_573B		      ;	no, loop
CODE:576B 11 E3	63			      ld      de, #aComputerSelf_0	      ;	"COMPUTER:SELF DESTRUCT	SEQUENCE ABORTED"
CODE:576E C3 39	5D			      jp      print_string_last_line
CODE:5771	      ;	---------------------------------------------------------------------------
CODE:5771
CODE:5771	      experimental_ray:
CODE:5771 3A B7	6F			      ld      a, (experimental_ray_disabled)
CODE:5774 A7				      and     a				      ;	disabled?
CODE:5775 F2 7E	57			      jp      P, loc_577E		      ;	no, go
CODE:5778 11 C9	66			      ld      de, #aIsPermanentlyD	      ;	"IS PERMANENTLY	DISABLED"
CODE:577B C3 29	5D			      jp      print_experimental_ray_outcome
CODE:577E	      ;	---------------------------------------------------------------------------
CODE:577E
CODE:577E	      loc_577E:
CODE:577E CD 00	5D			      call    rand_0_9
CODE:5781 A7				      and     a				      ;	zero?
CODE:5782 CA 92	57			      jp      Z, expr_9			      ;	yes, go
CODE:5785 11 3F	68			      ld      de, # off_683E+1		      ;	2 bytes	before table
CODE:5788
CODE:5788	      loc_5788:							      ;	found vector?
CODE:5788 3D				      dec     a
CODE:5789 13				      inc     de
CODE:578A 13				      inc     de			      ;	next vector entry
CODE:578B C2 88	57			      jp      NZ, loc_5788		      ;	no, loop
CODE:578E EB				      ex      de, hl
CODE:578F C3 80	55			      jp      jump_HL_vector		      ;	go
CODE:5792	      ;	---------------------------------------------------------------------------
CODE:5792	      ;	launches a triton missile in a circle
CODE:5792
CODE:5792	      expr_9:							      ;	"IS FIRING TRITON MISSILES"
CODE:5792 11 6A	65			      ld      de, #aIsFiringTriton
CODE:5795 CD 29	5D			      call    print_experimental_ray_outcome
CODE:5798 3E 07				      ld      a, #7			      ;	dir=NW
CODE:579A
CODE:579A	      loc_579A:
CODE:579A F5				      push    af
CODE:579B CD 0F	55			      call    move_triton_missile
CODE:579E F1				      pop     af
CODE:579F 3D				      dec     a				      ;	next direction
CODE:57A0 C2 9A	57			      jp      NZ, loc_579A		      ;	loop all directions
CODE:57A3 C3 0F	55			      jp      move_triton_missile
CODE:57A6	      ;	---------------------------------------------------------------------------
CODE:57A6	      ;	converts all characters	to graphics (distort)
CODE:57A6
CODE:57A6	      expr_0:							      ;	"CAUSED	A CHANGE IN SPACIAL	STRUCTUR"...
CODE:57A6 11 84	65			      ld      de, #aCausedAChangeI
CODE:57A9 CD 29	5D			      call    print_experimental_ray_outcome
CODE:57AC 3E 01				      ld      a, #1			      ;	flag disabled
CODE:57AE 32 B8	6F			      ld      (disable_pod_update), a
CODE:57B1 11 2B	00			      ld      de, #0x2B	; '+'                 ; offset to next row in quadrant display
CODE:57B4 21 57	3C			      ld      hl, # VIDEO+0x57		      ;	ptr first sector in quadrant display
CODE:57B7 06 0A				      ld      b, #10			      ;	10 rows
CODE:57B9
CODE:57B9	      loc_57B9:							      ;	21 columns
CODE:57B9 0E 15				      ld      c, #21
CODE:57BB
CODE:57BB	      loc_57BB:							      ;	get sector contents
CODE:57BB 7E				      ld      a, (hl)
CODE:57BC C6 80				      add     a, #0x80 ; 'Ä'                  ; make graphic
CODE:57BE 77				      ld      (hl), a			      ;	write to video
CODE:57BF 23				      inc     hl			      ;	next video address
CODE:57C0 0D				      dec     c				      ;	done all columns?
CODE:57C1 C2 BB	57			      jp      NZ, loc_57BB		      ;	no, loop
CODE:57C4 19				      add     hl, de			      ;	ptr next row
CODE:57C5 05				      dec     b				      ;	done all rows?
CODE:57C6 C2 B9	57			      jp      NZ, loc_57B9		      ;	no, loop
CODE:57C9 C9				      ret
CODE:57CA	      ;	---------------------------------------------------------------------------
CODE:57CA	      ;	freezes	time for jovians in this quadrant
CODE:57CA
CODE:57CA	      expr_1:							      ;	"HAS FROZEN TIME FOR THE	JOVIANS"
CODE:57CA 11 AD	65			      ld      de, #aHasFrozenTimeF
CODE:57CD 3E FF				      ld      a, #0xFF			      ;	flag frozen
CODE:57CF 32 B6	6F			      ld      (jovian_time_frozen), a
CODE:57D2 C3 29	5D			      jp      print_experimental_ray_outcome
CODE:57D5	      ;	---------------------------------------------------------------------------
CODE:57D5	      ;	this is	supposed to make jovians invisible
CODE:57D5	      ;	- but it looks like it makes space stations invisible???
CODE:57D5
CODE:57D5	      expr_2:							      ;	"HAS CAUSED THE	JOVIANS	TO	BECOME I"...
CODE:57D5 11 D4	65			      ld      de, #aHasCausedTheJo
CODE:57D8 CD 29	5D			      call    print_experimental_ray_outcome
CODE:57DB 21 57	3C			      ld      hl, # VIDEO+0x57		      ;	first sector in	quadrant video address
CODE:57DE 11 2B	00			      ld      de, #0x2B	; '+'                 ; offset to next quadrant row
CODE:57E1 06 0A				      ld      b, #10			      ;	10 rows
CODE:57E3
CODE:57E3	      loc_57E3:							      ;	21 columns
CODE:57E3 0E 15				      ld      c, #21
CODE:57E5
CODE:57E5	      loc_57E5:							      ;	get object from	video
CODE:57E5 7E				      ld      a, (hl)
CODE:57E6 FE 30				      cp      #0x30 ; '0'                     ; space station?
CODE:57E8 C2 ED	57			      jp      NZ, loc_57ED		      ;	no, skip
CODE:57EB 36 2E				      ld      (hl), #0x2E ; '.'               ; write empty sector to video
CODE:57ED
CODE:57ED	      loc_57ED:							      ;	next video address
CODE:57ED 23				      inc     hl
CODE:57EE 0D				      dec     c				      ;	done all columns?
CODE:57EF C2 E5	57			      jp      NZ, loc_57E5		      ;	no, loop
CODE:57F2 19				      add     hl, de			      ;	next quadrant row video	address
CODE:57F3 05				      dec     b				      ;	done all rows?
CODE:57F4 C2 E3	57			      jp      NZ, loc_57E3		      ;	no, loop
CODE:57F7 C9				      ret
CODE:57F8	      ;	---------------------------------------------------------------------------
CODE:57F8	      ;	re-randomises the quadrant
CODE:57F8
CODE:57F8	      expr_3:							      ;	"HAS JUMBLED THE QUADRANT"
CODE:57F8 11 2A	66			      ld      de, #aHasJumbledTheQ
CODE:57FB CD 29	5D			      call    print_experimental_ray_outcome
CODE:57FE 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant in LR sensor
CODE:5801 C3 CC	5B			      jp      init_quadrant
CODE:5804	      ;	---------------------------------------------------------------------------
CODE:5804	      ;	destroys all Jovians in	quadrant
CODE:5804
CODE:5804	      expr_4:
CODE:5804 21 80	3F			      ld      hl, # VIDEO+0x380
CODE:5807 11 43	66			      ld      de, #aHasDestroyedAl	      ;	"HAS DESTROYED ALL THE		JOVIANS	"...
CODE:580A CD 29	5D			      call    print_experimental_ray_outcome
CODE:580D 3A 61	68			      ld      a, (quadrant)
CODE:5810 CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:5813 46				      ld      b, (hl)			      ;	warships in quadrant
CODE:5814 05				      dec     b				      ;	adjust for call	below
CODE:5815 3E 99				      ld      a, #0x99 ; 'ô'
CODE:5817 90				      sub     b
CODE:5818 47				      ld      b, a			      ;	negative
CODE:5819 3A 58	68			      ld      a, (jovians_left)
CODE:581C 80				      add     a, b
CODE:581D 27				      daa				      ;	adjust jovians left
CODE:581E 32 58	68			      ld      (jovians_left), a		      ;	update
CODE:5821 36 01				      ld      (hl), #1			      ;	fudge to 1 for call below
CODE:5823 3E 30				      ld      a, #0x30 ; '0'                  ; 0 warships
CODE:5825 32 C5	3C			      ld      (VIDEO+0xC5), a		      ;	write to LR sensor video
CODE:5828 CD 1E	5F			      call    dec_jovians		      ;	handle decrement of jovians
CODE:582B 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant in LR sensor
CODE:582E C3 CC	5B			      jp      init_quadrant
CODE:5831	      ;	---------------------------------------------------------------------------
CODE:5831	      ;	destroys itself
CODE:5831
CODE:5831	      expr_5:							      ;	"DESTROYS ITSELF"
CODE:5831 11 7A	66			      ld      de, #aDestroysItself
CODE:5834 3E FF				      ld      a, #0xFF
CODE:5836 32 B7	6F			      ld      (experimental_ray_disabled), a
CODE:5839 C3 29	5D			      jp      print_experimental_ray_outcome
CODE:583C	      ;	---------------------------------------------------------------------------
CODE:583C	      ;	backfires, subtracts 2 from power
CODE:583C
CODE:583C	      expr_6:							      ;	"HAS BACKFIRED ON US"
CODE:583C 11 8A	66			      ld      de, #aHasBackfiredOn
CODE:583F CD 29	5D			      call    print_experimental_ray_outcome
CODE:5842	      ;	START OF FUNCTION CHUNK	FOR move_triton_missile
CODE:5842
CODE:5842	      power_minus_2_and_update:
CODE:5842 3A B8	69			      ld      a, (power_avail)
CODE:5845 C6 98				      add     a, #0x98 ; 'ò'
CODE:5847 27				      daa				      ;	decrement power
CODE:5848 32 B8	69			      ld      (power_avail), a
CODE:584B CD 5D	5F			      call    print_power_avail
CODE:584E C3 BA	56			      jp      update_power_distribution
CODE:584E	      ;	END OF FUNCTION	CHUNK FOR move_triton_missile
CODE:5851	      ;	---------------------------------------------------------------------------
CODE:5851	      ;	causes computer	malfunction
CODE:5851
CODE:5851	      expr_7:							      ;	"HAS CAUSED A COMPUTER		MALFUNCT"...
CODE:5851 11 9E	66			      ld      de, #aHasCausedAComp
CODE:5854 3E FF				      ld      a, #0xFF
CODE:5856 32 B5	6F			      ld      (computer_malfunction), a
CODE:5859 C3 29	5D			      jp      print_experimental_ray_outcome
CODE:585C	      ;	---------------------------------------------------------------------------
CODE:585C	      ;	not allowed to fire
CODE:585C
CODE:585C	      expr_8:							      ;	"MEDICAL OFFICER:I CAN'T ALLOW YOU TO FI"...
CODE:585C 11 0B	64			      ld      de, #aMedicalOfficer
CODE:585F C3 39	5D			      jp      print_string_last_line
CODE:5862	      ;	---------------------------------------------------------------------------
CODE:5862
CODE:5862	      launch_antimatter:
CODE:5862 3A 2B	68			      ld      a, (antimatter_pods)
CODE:5865 A7				      and     a				      ;	none left?
CODE:5866 11 5E	67			      ld      de, #aWeaponryWeReOu	      ;	"WEAPONRY: WE'RE OUT OF PODS"
CODE:5869 CA 39	5D			      jp      Z, print_string_last_line	      ;	yes, exit
CODE:586C 3A 99	69			      ld      a, (pwr_trt_missl)
CODE:586F FE 08				      cp      #8			      ;	less than 8%?
CODE:5871 FA FC	54			      jp      M, loc_54FC		      ;	yes, exit
CODE:5874 CD A7	5C			      call    get_next_cmd_char		      ;	pod #
CODE:5877 CA 05	5B			      jp      Z, print_no_sense_and_ret	      ;	none, exit
CODE:587A D6 31				      sub     #0x31 ; '1'                     ; less than '1'?
CODE:587C FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	yes, exit
CODE:587F FE 03				      cp      #3			      ;	greater	than 3?
CODE:5881 F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:5884 21 9B	6F			      ld      hl, #antimatter_pod_tbl
CODE:5887 47				      ld      b, a			      ;	zero-based pod #
CODE:5888 07				      rlca				      ;	x2
CODE:5889 80				      add     a, b			      ;	x3
CODE:588A 07				      rlca				      ;	x6
CODE:588B 85				      add     a, l
CODE:588C 6F				      ld      l, a
CODE:588D 7C				      ld      a, h
CODE:588E CE 00				      adc     a, #0
CODE:5890 67				      ld      h, a			      ;	ptr pod	entry
CODE:5891 7E				      ld      a, (hl)			      ;	get pod	status
CODE:5892 A7				      and     a				      ;	used?
CODE:5893 11 7A	67			      ld      de, #aComputerThePod	      ;	"COMPUTER: THE POD HAS BEEN USED"
CODE:5896 C2 39	5D			      jp      NZ, print_string_last_line      ;	yes, exit
CODE:5899 CD A7	5C			      call    get_next_cmd_char		      ;	direction
CODE:589C CA 05	5B			      jp      Z, print_no_sense_and_ret	      ;	none, exit
CODE:589F D6 30				      sub     #0x30 ; '0'                     ; less than '0'?
CODE:58A1 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	yes, exit
CODE:58A4 FE 08				      cp      #8			      ;	greater	than 7?
CODE:58A6 F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:58A9 F5				      push    af			      ;	tmp store direction
CODE:58AA CD A7	5C			      call    get_next_cmd_char		      ;	speed
CODE:58AD CA BF	58			      jp      Z, loc_58BF		      ;	none, skip
CODE:58B0 D6 30				      sub     #0x30 ; '0'                     ; less than '0'?
CODE:58B2 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	yes, exit
CODE:58B5 FE 0A				      cp      #10			      ;	greater	than 9?
CODE:58B7 F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes, exit
CODE:58BA 3C				      inc     a
CODE:58BB 07				      rlca				      ;	scale
CODE:58BC 32 40	68			      ld      (pod_speed), a
CODE:58BF
CODE:58BF	      loc_58BF:							      ;	flag pod launched
CODE:58BF 36 01				      ld      (hl), #1
CODE:58C1 F1				      pop     af			      ;	direction
CODE:58C2 E5				      push    hl			      ;	tmp store pod status
CODE:58C3 23				      inc     hl			      ;	ptr pod	address	delta
CODE:58C4 EB				      ex      de, hl
CODE:58C5 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:58C8 07				      rlca
CODE:58C9 85				      add     a, l
CODE:58CA 6F				      ld      l, a
CODE:58CB 7C				      ld      a, h
CODE:58CC CE 00				      adc     a, #0
CODE:58CE 67				      ld      h, a			      ;	ptr tbl	entry
CODE:58CF 7E				      ld      a, (hl)			      ;	delta lsb
CODE:58D0 12				      ld      (de), a			      ;	store in pod delta lsb
CODE:58D1 23				      inc     hl
CODE:58D2 13				      inc     de
CODE:58D3 7E				      ld      a, (hl)			      ;	delta msb
CODE:58D4 12				      ld      (de), a			      ;	store in pod delta msb
CODE:58D5 D5				      push    de
CODE:58D6 1B				      dec     de			      ;	ptr pod	delta lsb
CODE:58D7 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:58DA 1A				      ld      a, (de)
CODE:58DB 85				      add     a, l
CODE:58DC 6F				      ld      l, a			      ;	calc video address lsb
CODE:58DD 13				      inc     de			      ;	ptr pod	delta msb
CODE:58DE 1A				      ld      a, (de)
CODE:58DF 8C				      adc     a, h
CODE:58E0 67				      ld      h, a			      ;	calc video address msb
CODE:58E1 D1				      pop     de
CODE:58E2 13				      inc     de			      ;	ptr pod	video address lsb
CODE:58E3 7D				      ld      a, l
CODE:58E4 12				      ld      (de), a			      ;	store pod video	address	lsb
CODE:58E5 13				      inc     de
CODE:58E6 7C				      ld      a, h
CODE:58E7 12				      ld      (de), a			      ;	store pod video	address	msb
CODE:58E8 7E				      ld      a, (hl)			      ;	get sector contents
CODE:58E9 FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:58EB C2 03	59			      jp      NZ, print_pod_blocked	      ;	no, exit
CODE:58EE 36 23				      ld      (hl), #0x23 ; '#'               ; write pod graphic to video
CODE:58F0 13				      inc     de
CODE:58F1 3A 40	68			      ld      a, (pod_speed)
CODE:58F4 12				      ld      (de), a			      ;	store pod speed
CODE:58F5 3A 2B	68			      ld      a, (antimatter_pods)
CODE:58F8 3D				      dec     a				      ;	update
CODE:58F9 32 2B	68			      ld      (antimatter_pods), a
CODE:58FC E1				      pop     hl			      ;	discard	tmp store
CODE:58FD 21 3E	3E			      ld      hl, # VIDEO+0x23E		      ;	antimatter pods	value video address
CODE:5900 C3 63	5F			      jp      print_BCD_byte
CODE:5903	      ;	---------------------------------------------------------------------------
CODE:5903
CODE:5903	      print_pod_blocked:					      ;	"COMPUTER: POD LAUNCH IS BLOCKED"
CODE:5903 11 9A	67			      ld      de, #aComputerPodLau
CODE:5906 E1				      pop     hl			      ;	ptr pod	status
CODE:5907 36 00				      ld      (hl), #0			      ;	flag unused again
CODE:5909 C3 39	5D			      jp      print_string_last_line
CODE:590C	      ;	---------------------------------------------------------------------------
CODE:590C
CODE:590C	      explode_pod:						      ;	pod #
CODE:590C CD A7	5C			      call    get_next_cmd_char
CODE:590F CA 05	5B			      jp      Z, print_no_sense_and_ret	      ;	none, exit
CODE:5912 D6 31				      sub     #0x31 ; '1'                     ; less than 1?
CODE:5914 FA 05	5B			      jp      M, print_no_sense_and_ret	      ;	yes, exit
CODE:5917 FE 03				      cp      #3			      ;	greater	than 3?
CODE:5919 F2 05	5B			      jp      P, print_no_sense_and_ret	      ;	yes exit
CODE:591C 47				      ld      b, a			      ;	0-based	pod #
CODE:591D 07				      rlca				      ;	x2
CODE:591E 80				      add     a, b			      ;	x3
CODE:591F 07				      rlca				      ;	x6
CODE:5920 21 9B	6F			      ld      hl, #antimatter_pod_tbl
CODE:5923 85				      add     a, l
CODE:5924 6F				      ld      l, a
CODE:5925 7C				      ld      a, h
CODE:5926 CE 00				      adc     a, #0
CODE:5928 67				      ld      h, a			      ;	get ptr	pod entry
CODE:5929 7E				      ld      a, (hl)			      ;	pod status
CODE:592A A7				      and     a				      ;	used?
CODE:592B CA 05	5B			      jp      Z, print_no_sense_and_ret	      ;	no, exit
CODE:592E FE 01				      cp      #1			      ;	launched?
CODE:5930 CA 39	59			      jp      Z, explode_pod_ok		      ;	yes, skip
CODE:5933 11 7A	67			      ld      de, #aComputerThePod	      ;	"COMPUTER: THE POD HAS BEEN USED"
CODE:5936 C3 39	5D			      jp      print_string_last_line
CODE:5939	      ;	---------------------------------------------------------------------------
CODE:5939
CODE:5939	      explode_pod_ok:						      ;	flag exploded
CODE:5939 36 02				      ld      (hl), #2
CODE:593B 23				      inc     hl
CODE:593C 23				      inc     hl
CODE:593D 23				      inc     hl
CODE:593E 7E				      ld      a, (hl)
CODE:593F 23				      inc     hl
CODE:5940 66				      ld      h, (hl)
CODE:5941 6F				      ld      l, a			      ;	get pod	video address
CODE:5942 36 8F				      ld      (hl), #0x8F ; 'è'               ; animate
CODE:5944 EB				      ex      de, hl
CODE:5945 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5948 06 08				      ld      b, #8			      ;	8 directions to	iterate
CODE:594A
CODE:594A	      loc_594A:
CODE:594A E5				      push    hl
CODE:594B 7E				      ld      a, (hl)
CODE:594C 23				      inc     hl
CODE:594D 66				      ld      h, (hl)
CODE:594E 6F				      ld      l, a			      ;	get delta
CODE:594F 19				      add     hl, de			      ;	add delta to pod video address
CODE:5950 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5951 FE 26				      cp      #0x26 ; '&'                     ; jovian battle cruiser?
CODE:5953 CA 8D	59			      jp      Z, pod_hit_jovian		      ;	yes, go
CODE:5956 FE 40				      cp      #0x40 ; '@'                     ; command cruiser?
CODE:5958 CA 8D	59			      jp      Z, pod_hit_jovian		      ;	yes, go
CODE:595B FE 25				      cp      #0x25 ; '%'                     ; triton mine?
CODE:595D CA 88	53			      jp      Z, hit_triton_mine	      ;	yes, go
CODE:5960 FE 5B				      cp      #0x5B ; '['                     ; USS Hephaestus?
CODE:5962 CA 8E	53			      jp      Z, print_game_over_screen	      ;	yes, go	(oops)
CODE:5965 FE 23				      cp      #0x23 ; '#'                     ; antimatter pod?
CODE:5967 CA 8E	53			      jp      Z, print_game_over_screen	      ;	yes, go	(oops)
CODE:596A FE 30				      cp      #0x30 ; '0'                     ; space station?
CODE:596C CA 83	59			      jp      Z, pod_animate_object	      ;	yes, go
CODE:596F FE 2A				      cp      #0x2A ; '*'                     ; star?
CODE:5971 CA 83	59			      jp      Z, pod_animate_object	      ;	yes, go
CODE:5974 FE 2B				      cp      #0x2B ; '+'                     ; triton missile?
CODE:5976 CA 83	59			      jp      Z, pod_animate_object	      ;	yes, go
CODE:5979 FE 58				      cp      #0x58 ; 'X'                     ; unknown?
CODE:597B CA 83	59			      jp      Z, pod_animate_object	      ;	yes, go
CODE:597E FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5980 C2 85	59			      jp      NZ, loc_5985		      ;	no, skip
CODE:5983
CODE:5983	      pod_animate_object:					      ;	animate
CODE:5983 36 8F				      ld      (hl), #0x8F ; 'è'
CODE:5985
CODE:5985	      loc_5985:							      ;	direction address delta	table ptr
CODE:5985 E1				      pop     hl
CODE:5986 23				      inc     hl
CODE:5987 23				      inc     hl			      ;	next entry
CODE:5988 05				      dec     b				      ;	done all directions?
CODE:5989 C2 4A	59			      jp      NZ, loc_594A		      ;	no, loop
CODE:598C C9				      ret
CODE:598D	      ;	---------------------------------------------------------------------------
CODE:598D
CODE:598D	      pod_hit_jovian:
CODE:598D E5				      push    hl
CODE:598E 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant LR sensor
CODE:5991 7E				      ld      a, (hl)			      ;	get warships
CODE:5992 C6 99				      add     a, #0x99 ; 'ô'
CODE:5994 27				      daa				      ;	decrement
CODE:5995 77				      ld      (hl), a			      ;	write to video
CODE:5996 C5				      push    bc
CODE:5997 D5				      push    de
CODE:5998 CD 1E	5F			      call    dec_jovians
CODE:599B D1				      pop     de
CODE:599C C1				      pop     bc
CODE:599D E1				      pop     hl
CODE:599E C3 83	59			      jp      pod_animate_object
CODE:59A1
CODE:59A1	      ;	===============	S U B R	O U T I	N E =======================================
CODE:59A1
CODE:59A1
CODE:59A1	      handle_low_power:
CODE:59A1
CODE:59A1	      ;	FUNCTION CHUNK AT CODE:5001 SIZE 000001B5 BYTES
CODE:59A1	      ;	FUNCTION CHUNK AT CODE:51BD SIZE 00000017 BYTES
CODE:59A1	      ;	FUNCTION CHUNK AT CODE:538E SIZE 00000032 BYTES
CODE:59A1
CODE:59A1 3A 95	69			      ld      a, (pwr_lr_sensor)	      ;	get power to LR	sensor
CODE:59A4 FE 05				      cp      #5			      ;	greater	than 4%?
CODE:59A6 F2 D4	59			      jp      P, check_sr_sensor	      ;	yes, skip
CODE:59A9 21 41	3C			      ld      hl, # VIDEO+0x41		      ;	1st row
CODE:59AC 11 C1	3C			      ld      de, # VIDEO+0xC1		      ;	2nd row
CODE:59AF 01 41	3D			      ld      bc, # VIDEO+0x141		      ;	3rd row
CODE:59B2 3E 0B				      ld      a, #11			      ;	11 bytes/row to	wipe
CODE:59B4
CODE:59B4	      loc_59B4:
CODE:59B4 F5				      push    af
CODE:59B5 3E 20				      ld      a, #0x20 ; ' '
CODE:59B7 02				      ld      (bc), a			      ;	space over 3rd row digit
CODE:59B8 77				      ld      (hl), a			      ;	space over 1st row digit
CODE:59B9 7B				      ld      a, e
CODE:59BA FE C5				      cp      #0xC5 ; '≈'                     ; 1st digit current quadrant?
CODE:59BC CA CC	59			      jp      Z, loc_59CC		      ;	yes, skip
CODE:59BF FE C6				      cp      #0xC6 ; '∆'                     ; 2nd digit current quadrant?
CODE:59C1 CA CC	59			      jp      Z, loc_59CC		      ;	yes, skip
CODE:59C4 FE C7				      cp      #0xC7 ; '«'                     ; 3rd digit current quadrant?
CODE:59C6 CA CC	59			      jp      Z, loc_59CC		      ;	yes, skip
CODE:59C9 3E 20				      ld      a, #0x20 ; ' '
CODE:59CB 12				      ld      (de), a			      ;	space over 2nd row digit
CODE:59CC
CODE:59CC	      loc_59CC:
CODE:59CC 13				      inc     de
CODE:59CD 23				      inc     hl
CODE:59CE 03				      inc     bc
CODE:59CF F1				      pop     af
CODE:59D0 3D				      dec     a				      ;	done row?
CODE:59D1 C2 B4	59			      jp      NZ, loc_59B4		      ;	no, loop
CODE:59D4
CODE:59D4	      check_sr_sensor:
CODE:59D4 3A 96	69			      ld      a, (pwr_sr_sensor)
CODE:59D7 FE 03				      cp      #3			      ;	greater	than 2%?
CODE:59D9 F2 F9	59			      jp      P, check_jovian_threat	      ;	yes, skip
CODE:59DC 3E 01				      ld      a, #1			      ;	flag disabled
CODE:59DE 32 B8	6F			      ld      (disable_pod_update), a
CODE:59E1 21 57	3C			      ld      hl, # VIDEO+0x57		      ;	SR sensor display
CODE:59E4 11 2C	00			      ld      de, #0x2C	; ','                 ; offset to next sector row
CODE:59E7 06 0A				      ld      b, #10			      ;	10 rows	to overwrite
CODE:59E9
CODE:59E9	      loc_59E9:							      ;	20 bytes to overwrite
CODE:59E9 0E 14				      ld      c, #20
CODE:59EB
CODE:59EB	      loc_59EB:							      ;	space over sector
CODE:59EB 36 20				      ld      (hl), #0x20 ; ' '
CODE:59ED 23				      inc     hl			      ;	next video address
CODE:59EE 0D				      dec     c				      ;	done row?
CODE:59EF C2 EB	59			      jp      NZ, loc_59EB		      ;	no, loop
CODE:59F2 36 20				      ld      (hl), #0x20 ; ' '               ; space
CODE:59F4 19				      add     hl, de			      ;	next sector row
CODE:59F5 05				      dec     b				      ;	done all rows?
CODE:59F6 C2 E9	59			      jp      NZ, loc_59E9		      ;	no, loop
CODE:59F9
CODE:59F9	      check_jovian_threat:
CODE:59F9 3A B6	6F			      ld      a, (jovian_time_frozen)
CODE:59FC A7				      and     a				      ;	frozen?
CODE:59FD FA 09	5A			      jp      M, condition_green	      ;	yes, skip
CODE:5A00 3A C5	3C			      ld      a, (VIDEO+0xC5)		      ;	#jovian	warships
CODE:5A03 D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:5A05 A7				      and     a				      ;	zero?
CODE:5A06 C2 1D	5A			      jp      NZ, condition_red		      ;	no, go
CODE:5A09
CODE:5A09	      condition_green:
CODE:5A09 3A B9	6F			      ld      a, (critical)
CODE:5A0C A7				      and     a				      ;	exploding?
CODE:5A0D F8				      ret     M				      ;	yes, return
CODE:5A0E 3A AE	6F			      ld      a, (always_zero)
CODE:5A11 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5A14 21 BB	3C			      ld      hl, # VIDEO+0xBB		      ;	ptr to condition value
CODE:5A17 11 AC	61			      ld      de, #aGreen		      ;	"GREEN"
CODE:5A1A C3 3F	5D			      jp      print_string
CODE:5A1D	      ;	---------------------------------------------------------------------------
CODE:5A1D
CODE:5A1D	      condition_red:
CODE:5A1D 3A B9	6F			      ld      a, (critical)
CODE:5A20 A7				      and     a				      ;	exploding?
CODE:5A21 FA 32	5A			      jp      M, loc_5A32		      ;	yes, go
CODE:5A24 3E 01				      ld      a, #1
CODE:5A26 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5A29 21 BB	3C			      ld      hl, # VIDEO+0xBB		      ;	ptr to condition value
CODE:5A2C 11 B2	61			      ld      de, #aRed			      ;	" RED "
CODE:5A2F CD 3F	5D			      call    print_string
CODE:5A32
CODE:5A32	      loc_5A32:
CODE:5A32 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:5A35 7E				      ld      a, (hl)			      ;	get Hephaestus graphic
CODE:5A36 F6 80				      or      #0x80 ; 'Ä'                     ; animate
CODE:5A38 77				      ld      (hl), a			      ;	write to video
CODE:5A39 3A AA	69			      ld      a, (game_delay_factor)
CODE:5A3C 0F				      rrca				      ;	/2
CODE:5A3D 3C				      inc     a				      ;	/2+1
CODE:5A3E 47				      ld      b, a
CODE:5A3F CD 48	5D			      call    delay_B_and_update_all
CODE:5A42 7E				      ld      a, (hl)			      ;	get Hephaestus graphic
CODE:5A43 E6 7F				      and     #0x7F ; ''                     ; animate
CODE:5A45 77				      ld      (hl), a			      ;	write to video
CODE:5A46 3A C5	3C			      ld      a, (VIDEO+0xC5)		      ;	#jovian	warships
CODE:5A49 D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:5A4B FE 04				      cp      #4			      ;	more than 3?
CODE:5A4D F4 DE	5A			      call    P, lose_power_crystal	      ;	yes, go
CODE:5A50 3A 97	69			      ld      a, (pwr_deflectors)
CODE:5A53 FE 05				      cp      #5			      ;	less than 5%?
CODE:5A55 FC FC	5A			      call    M, print_shields_failing	      ;	yes, go
CODE:5A58 0E 00				      ld      c, #0
CODE:5A5A 21 97	69			      ld      hl, #pwr_deflectors
CODE:5A5D 7E				      ld      a, (hl)
CODE:5A5E A7				      and     a				      ;	pwr zero?
CODE:5A5F CA 66	5A			      jp      Z, jovian_attack_and_move	      ;	yes, skip
CODE:5A62 C6 99				      add     a, #0x99 ; 'ô'
CODE:5A64 27				      daa				      ;	decrement power
CODE:5A65 77				      ld      (hl), a			      ;	update pwr_deflectors
CODE:5A66
CODE:5A66	      jovian_attack_and_move:
CODE:5A66 3A B8	69			      ld      a, (power_avail)
CODE:5A69 C6 99				      add     a, #0x99 ; 'ô'
CODE:5A6B 27				      daa				      ;	decrement power
CODE:5A6C 32 B8	69			      ld      (power_avail), a
CODE:5A6F CD BA	56			      call    update_power_distribution
CODE:5A72 CD 5D	5F			      call    print_power_avail
CODE:5A75 3A 58	68			      ld      a, (jovians_left)
CODE:5A78 A7				      and     a				      ;	any left?
CODE:5A79 CA 8E	53			      jp      Z, print_game_over_screen	      ;	no, go
CODE:5A7C 3A AB	69			      ld      a, (time_to_jovian_fire)
CODE:5A7F 3D				      dec     a				      ;	zero?
CODE:5A80 32 AB	69			      ld      (time_to_jovian_fire), a
CODE:5A83 C0				      ret     NZ			      ;	no, return
CODE:5A84
CODE:5A84	      loc_5A84:
CODE:5A84 CD 00	5D			      call    rand_0_9
CODE:5A87 FE 01				      cp      #1			      ;	less than 1?
CODE:5A89 FA 84	5A			      jp      M, loc_5A84		      ;	yes, regenerate
CODE:5A8C FE 05				      cp      #5			      ;	greater	than 4?
CODE:5A8E F2 84	5A			      jp      P, loc_5A84		      ;	yes, regenerate
CODE:5A91 32 AB	69			      ld      (time_to_jovian_fire), a	      ;	update with new	random value
CODE:5A94 16 04				      ld      d, #4			      ;	*** dead code
CODE:5A96 21 AE	69			      ld      hl, #jovian_tbl
CODE:5A99
CODE:5A99	      get_jovian_address:
CODE:5A99 7E				      ld      a, (hl)
CODE:5A9A A7				      and     a
CODE:5A9B C8				      ret     Z
CODE:5A9C 4E				      ld      c, (hl)
CODE:5A9D 23				      inc     hl
CODE:5A9E 46				      ld      b, (hl)
CODE:5A9F E5				      push    hl
CODE:5AA0
CODE:5AA0	      move_jovian:
CODE:5AA0 CD 00	5D			      call    rand_0_9
CODE:5AA3 FE 08				      cp      #8			      ;	greater	than 7?
CODE:5AA5 F2 A0	5A			      jp      P, move_jovian		      ;	yes, regenerate
CODE:5AA8 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5AAB A7				      and     a
CODE:5AAC
CODE:5AAC	      loc_5AAC:
CODE:5AAC CA B5	5A			      jp      Z, loc_5AB5
CODE:5AAF 23				      inc     hl
CODE:5AB0 23				      inc     hl
CODE:5AB1 3D				      dec     a				      ;	found direction	entry?
CODE:5AB2 C3 AC	5A			      jp      loc_5AAC			      ;	no, loop
CODE:5AB5	      ;	---------------------------------------------------------------------------
CODE:5AB5
CODE:5AB5	      loc_5AB5:
CODE:5AB5 5E				      ld      e, (hl)
CODE:5AB6 23				      inc     hl
CODE:5AB7 56				      ld      d, (hl)			      ;	DE=delta
CODE:5AB8 60				      ld      h, b
CODE:5AB9 69				      ld      l, c
CODE:5ABA 19				      add     hl, de			      ;	add delta to jovian address
CODE:5ABB 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5ABC FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5ABE C2 DA	5A			      jp      NZ, next_jovian		      ;	no, go
CODE:5AC1 0A				      ld      a, (bc)			      ;	get jovian ship	type
CODE:5AC2 FE 26				      cp      #0x26 ; '&'                     ; battle cruiser?
CODE:5AC4 CA CC	5A			      jp      Z, loc_5ACC		      ;	yes, skip
CODE:5AC7 FE 40				      cp      #0x40 ; '@'                     ; command cruiser?
CODE:5AC9 C2 DA	5A			      jp      NZ, next_jovian		      ;	no, go
CODE:5ACC
CODE:5ACC	      loc_5ACC:							      ;	update sector with jovian vessel
CODE:5ACC 77				      ld      (hl), a
CODE:5ACD 3E 2E				      ld      a, #0x2E ; '.'                  ; empty sector
CODE:5ACF 02				      ld      (bc), a			      ;	update original	jovian vessel location
CODE:5AD0 D1				      pop     de			      ;	jovain tbl ptr
CODE:5AD1 1B				      dec     de			      ;	lsb
CODE:5AD2 7D				      ld      a, l
CODE:5AD3 12				      ld      (de), a			      ;	update lsb of address
CODE:5AD4 7C				      ld      a, h
CODE:5AD5 13				      inc     de
CODE:5AD6 12				      ld      (de), a			      ;	update msb of address
CODE:5AD7 EB				      ex      de, hl
CODE:5AD8 23				      inc     hl			      ;	adjust
CODE:5AD9 E5				      push    hl
CODE:5ADA
CODE:5ADA	      next_jovian:
CODE:5ADA E1				      pop     hl
CODE:5ADB C3 99	5A			      jp      get_jovian_address
CODE:5ADB	      ;	End of function	handle_low_power
CODE:5ADB
CODE:5ADE
CODE:5ADE	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5ADE
CODE:5ADE
CODE:5ADE	      lose_power_crystal:
CODE:5ADE 11 79	64			      ld      de, #aEngineerThereG	      ;	"ENGINEER:THERE	GOES A POWER CRYSTAL, CO"...
CODE:5AE1 CD 39	5D			      call    print_string_last_line
CODE:5AE4
CODE:5AE4	      dec_power_by_5:
CODE:5AE4 3A B8	69			      ld      a, (power_avail)
CODE:5AE7 06 05				      ld      b, #5			      ;	decrement by 5%
CODE:5AE9
CODE:5AE9	      loc_5AE9:
CODE:5AE9 C6 99				      add     a, #0x99 ; 'ô'
CODE:5AEB 27				      daa				      ;	dec power
CODE:5AEC CA 8E	53			      jp      Z, print_game_over_screen	      ;	no power, game over
CODE:5AEF 05				      dec     b				      ;	done decrementing?
CODE:5AF0 C2 E9	5A			      jp      NZ, loc_5AE9		      ;	no, loop
CODE:5AF3 32 B8	69			      ld      (power_avail), a		      ;	update
CODE:5AF6 CD 5D	5F			      call    print_power_avail
CODE:5AF9 C3 BA	56			      jp      update_power_distribution
CODE:5AF9	      ;	End of function	lose_power_crystal
CODE:5AF9
CODE:5AFC
CODE:5AFC	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5AFC
CODE:5AFC
CODE:5AFC	      print_shields_failing:
CODE:5AFC 11 A8	64			      ld      de, #aEngineerComm_3	      ;	"ENGINEER:COMMANDER, THE SHIELDS ARE FAL"...
CODE:5AFF CD 39	5D			      call    print_string_last_line
CODE:5B02 C3 E4	5A			      jp      dec_power_by_5
CODE:5B02	      ;	End of function	print_shields_failing
CODE:5B02
CODE:5B05	      ;	---------------------------------------------------------------------------
CODE:5B05
CODE:5B05	      print_no_sense_and_ret:					      ;	"FIRST OFFICER:CAPTAIN,	YOUR LAST COMMAN"...
CODE:5B05 11 E9	60			      ld      de, #aFirstOfficerCa
CODE:5B08 CD 39	5D			      call    print_string_last_line
CODE:5B0B 31 FB	6F			      ld      sp, #STACK_WATERMARK	      ;	reset stack
CODE:5B0E 11 97	51			      ld      de, #game_loop		      ;	set return address
CODE:5B11 D5				      push    de
CODE:5B12 E5				      push    hl
CODE:5B13 D5				      push    de
CODE:5B14 C5				      push    bc
CODE:5B15 C3 5F	5E			      jp      clear_cmd_buffer
CODE:5B18	      ;	move quadrant
CODE:5B18	      ;	- A = direction	(0-7), C = # quadrants
CODE:5B18
CODE:5B18	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5B18
CODE:5B18
CODE:5B18	      move_quadrant:
CODE:5B18 21 58	68			      ld      hl, #jovians_left		      ;	byte before quadrant_delta_tbl
CODE:5B1B 3C				      inc     a				      ;	direction (1-8)???
CODE:5B1C 06 03				      ld      b, #3			      ;	3 rows to print
CODE:5B1E C5				      push    bc
CODE:5B1F
CODE:5B1F	      loc_5B1F:							      ;	ptr next entry
CODE:5B1F 23				      inc     hl
CODE:5B20 3D				      dec     a				      ;	found entry for	direction?
CODE:5B21 C2 1F	5B			      jp      NZ, loc_5B1F		      ;	no, loop
CODE:5B24 3A 61	68			      ld      a, (quadrant)		      ;	current
CODE:5B27
CODE:5B27	      loc_5B27:
CODE:5B27 86				      add     a, (hl)
CODE:5B28 27				      daa				      ;	calculate new quadrant
CODE:5B29 0D				      dec     c				      ;	done move?
CODE:5B2A C2 27	5B			      jp      NZ, loc_5B27		      ;	no, loop
CODE:5B2D 32 61	68			      ld      (quadrant), a
CODE:5B30	      ;	print LR sensor
CODE:5B30 C6 89				      add     a, #0x89 ; 'â'                  ; NW quadrant
CODE:5B32 27				      daa
CODE:5B33 11 41	3C			      ld      de, # VIDEO+0x41		      ;	video address
CODE:5B36
CODE:5B36	      loc_5B36:
CODE:5B36 F5				      push    af
CODE:5B37 D5				      push    de
CODE:5B38 CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:5B3B D1				      pop     de
CODE:5B3C 0E 03				      ld      c, #3			      ;	3 values / row
CODE:5B3E
CODE:5B3E	      loc_5B3E:							      ;	3 digits / value
CODE:5B3E 06 03				      ld      b, #3
CODE:5B40
CODE:5B40	      loc_5B40:
CODE:5B40 7E				      ld      a, (hl)
CODE:5B41 E6 0F				      and     #0xF			      ;	low nibble only
CODE:5B43 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:5B45 12				      ld      (de), a			      ;	write to video
CODE:5B46 13				      inc     de			      ;	next video address
CODE:5B47 23				      inc     hl			      ;	next data address
CODE:5B48 05				      dec     b				      ;	done all digits?
CODE:5B49 C2 40	5B			      jp      NZ, loc_5B40		      ;	no, loop
CODE:5B4C 13				      inc     de			      ;	skip (space)
CODE:5B4D 0D				      dec     c				      ;	done a row?
CODE:5B4E C2 3E	5B			      jp      NZ, loc_5B3E		      ;	no, loop
CODE:5B51 F1				      pop     af			      ;	left quadrant
CODE:5B52 C6 10				      add     a, #0x10			      ;	down a quadrant
CODE:5B54 27				      daa
CODE:5B55 C1				      pop     bc
CODE:5B56 05				      dec     b				      ;	done all rows?
CODE:5B57 CA 63	5B			      jp      Z, loc_5B63		      ;	yes, exit
CODE:5B5A C5				      push    bc
CODE:5B5B 21 74	00			      ld      hl, #0x74	; 't'                 ; offset for next row
CODE:5B5E 19				      add     hl, de			      ;	update video address
CODE:5B5F EB				      ex      de, hl
CODE:5B60 C3 36	5B			      jp      loc_5B36			      ;	loop
CODE:5B63	      ;	---------------------------------------------------------------------------
CODE:5B63	      ;	why do we need to do current quadrant again???
CODE:5B63
CODE:5B63	      loc_5B63:
CODE:5B63 3A 61	68			      ld      a, (quadrant)
CODE:5B66 0E 01				      ld      c, #1			      ;	*** dead code
CODE:5B68 CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:5B6B 06 03				      ld      b, #3			      ;	3 bytes	to print
CODE:5B6D 11 C5	3C			      ld      de, # VIDEO+0xC5		      ;	current	quadrant on LR display
CODE:5B70
CODE:5B70	      loc_5B70:							      ;	byte from tbl
CODE:5B70 7E				      ld      a, (hl)
CODE:5B71 E6 0F				      and     #0xF			      ;	low nibble only
CODE:5B73 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII
CODE:5B75 12				      ld      (de), a			      ;	warships/space stations/stars
CODE:5B76 13				      inc     de			      ;	next byte in table
CODE:5B77 23				      inc     hl			      ;	next video address
CODE:5B78 05				      dec     b				      ;	done all bytes?
CODE:5B79 C2 70	5B			      jp      NZ, loc_5B70		      ;	no, loop
CODE:5B7C 97				      sub     a				      ;	flag normal
CODE:5B7D 32 B6	6F			      ld      (jovian_time_frozen), a
CODE:5B80 C9				      ret
CODE:5B80	      ;	End of function	move_quadrant
CODE:5B80
CODE:5B81
CODE:5B81	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5B81
CODE:5B81
CODE:5B81	      print_quadrant:
CODE:5B81 3A 61	68			      ld      a, (quadrant)
CODE:5B84 21 FC	3C			      ld      hl, # VIDEO+0xFC		      ;	video address
CODE:5B87 4F				      ld      c, a
CODE:5B88 E6 F0				      and     #0xF0 ; ''                     ; high nibble only
CODE:5B8A 0F				      rrca
CODE:5B8B 0F				      rrca
CODE:5B8C 0F				      rrca
CODE:5B8D 0F				      rrca				      ;	high->low nibble
CODE:5B8E C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:5B90 77				      ld      (hl), a			      ;	write to video
CODE:5B91 23				      inc     hl
CODE:5B92 23				      inc     hl			      ;	video address += 2
CODE:5B93 79				      ld      a, c
CODE:5B94 E6 0F				      and     #0xF			      ;	low nibble only
CODE:5B96 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:5B98 77				      ld      (hl), a			      ;	write to video
CODE:5B99 C9				      ret
CODE:5B99	      ;	End of function	print_quadrant
CODE:5B99
CODE:5B9A
CODE:5B9A	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5B9A
CODE:5B9A
CODE:5B9A	      get_ptr_quadrant_A_data:
CODE:5B9A 4F				      ld      c, a
CODE:5B9B E6 F0				      and     #0xF0 ; ''                     ; high nibble only
CODE:5B9D 0F				      rrca
CODE:5B9E 0F				      rrca
CODE:5B9F 0F				      rrca
CODE:5BA0 0F				      rrca				      ;	high->low nibble
CODE:5BA1	      ;	fast multiply HL=A(7:4)*30
CODE:5BA1 21 00	00			      ld      hl, #0
CODE:5BA4 11 1E	00			      ld      de, #30
CODE:5BA7 06 08				      ld      b, #8			      ;	8 bits
CODE:5BA9
CODE:5BA9	      loc_5BA9:
CODE:5BA9 29				      add     hl, hl
CODE:5BAA 17				      rla
CODE:5BAB D2 B1	5B			      jp      NC, loc_5BB1
CODE:5BAE 19				      add     hl, de
CODE:5BAF CE 00				      adc     a, #0
CODE:5BB1
CODE:5BB1	      loc_5BB1:							      ;	done all bits?
CODE:5BB1 05				      dec     b
CODE:5BB2 C2 A9	5B			      jp      NZ, loc_5BA9		      ;	no, loop
CODE:5BB5 EB				      ex      de, hl			      ;	DE=result
CODE:5BB6	      ;	add A(3:0)*3 to	the result
CODE:5BB6 79				      ld      a, c
CODE:5BB7 E6 0F				      and     #0xF			      ;	low nibble only
CODE:5BB9 6F				      ld      l, a			      ;	L=low nibble
CODE:5BBA 06 03				      ld      b, #3			      ;	multiplier=3
CODE:5BBC
CODE:5BBC	      loc_5BBC:
CODE:5BBC 83				      add     a, e
CODE:5BBD 5F				      ld      e, a
CODE:5BBE 3E 00				      ld      a, #0
CODE:5BC0 8A				      adc     a, d
CODE:5BC1 57				      ld      d, a
CODE:5BC2 7D				      ld      a, l
CODE:5BC3 05				      dec     b				      ;	done multiplication?
CODE:5BC4 C2 BC	5B			      jp      NZ, loc_5BBC		      ;	no, loop
CODE:5BC7 21 62	68			      ld      hl, #quadrant_tbl
CODE:5BCA 19				      add     hl, de			      ;	get ptr	to quadrant data
CODE:5BCB C9				      ret
CODE:5BCB	      ;	End of function	get_ptr_quadrant_A_data
CODE:5BCB
CODE:5BCC
CODE:5BCC	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5BCC
CODE:5BCC
CODE:5BCC	      init_quadrant:
CODE:5BCC E5				      push    hl			      ;	ptr current quadrant on	LR sensor
CODE:5BCD 97				      sub     a				      ;	flag enabled
CODE:5BCE 32 B8	6F			      ld      (disable_pod_update), a
CODE:5BD1	      ;	init quadrant with all '.'
CODE:5BD1 11 2C	00			      ld      de, #0x2C	; ','                 ; offset to next line of quadrant display
CODE:5BD4 21 57	3C			      ld      hl, # VIDEO+0x57		      ;	quadrant display video address
CODE:5BD7 06 0A				      ld      b, #10			      ;	10 rows
CODE:5BD9
CODE:5BD9	      loc_5BD9:							      ;	10 columns
CODE:5BD9 0E 0A				      ld      c, #10
CODE:5BDB
CODE:5BDB	      loc_5BDB:							      ;	<SPACE>
CODE:5BDB 36 20				      ld      (hl), #0x20 ; ' '
CODE:5BDD 23				      inc     hl			      ;	next video address
CODE:5BDE 36 2E				      ld      (hl), #0x2E ; '.'               ; '.'
CODE:5BE0 23				      inc     hl			      ;	next video address
CODE:5BE1 0D				      dec     c				      ;	done all columns?
CODE:5BE2 C2 DB	5B			      jp      NZ, loc_5BDB		      ;	no, loop
CODE:5BE5 36 20				      ld      (hl), #0x20 ; ' '               ; <SPACE>
CODE:5BE7 19				      add     hl, de			      ;	next line of quadrant display
CODE:5BE8 05				      dec     b				      ;	done all rows?
CODE:5BE9 C2 D9	5B			      jp      NZ, loc_5BD9		      ;	no, loop
CODE:5BEC	      ;	init warships
CODE:5BEC E1				      pop     hl			      ;	ptr current quadrant on	LR sensor
CODE:5BED 7E				      ld      a, (hl)			      ;	get warships
CODE:5BEE 23				      inc     hl			      ;	ptr space stations
CODE:5BEF E5				      push    hl
CODE:5BF0 D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:5BF2 CA 12	5C			      jp      Z, loc_5C12		      ;	no warships, skip
CODE:5BF5 21 AE	69			      ld      hl, #jovian_tbl		      ;	ptr table of warships
CODE:5BF8 22 AC	69			      ld      (tmp_jovian_tbl_ptr), hl	      ;	save copy
CODE:5BFB 57				      ld      d, a			      ;	D=warships
CODE:5BFC
CODE:5BFC	      loc_5BFC:
CODE:5BFC CD 00	5D			      call    rand_0_9
CODE:5BFF FE 01				      cp      #1			      ;	zero?
CODE:5C01 F2 09	5C			      jp      P, loc_5C09		      ;	no, skip
CODE:5C04 1E 40				      ld      e, #0x40 ; '@'                  ; Command Cruiser
CODE:5C06 C3 0B	5C			      jp      loc_5C0B
CODE:5C09	      ;	---------------------------------------------------------------------------
CODE:5C09
CODE:5C09	      loc_5C09:							      ;	Battle Cruiser
CODE:5C09 1E 26				      ld      e, #0x26 ; '&'
CODE:5C0B
CODE:5C0B	      loc_5C0B:
CODE:5C0B CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C0E 15				      dec     d				      ;	done all warships in quadrant?
CODE:5C0F C2 FC	5B			      jp      NZ, loc_5BFC		      ;	no, loop
CODE:5C12	      ;	init space stations
CODE:5C12
CODE:5C12	      loc_5C12:							      ;	get current ptr
CODE:5C12 2A AC	69			      ld      hl, (tmp_jovian_tbl_ptr)
CODE:5C15 36 00				      ld      (hl), #0			      ;	terminate
CODE:5C17 E1				      pop     hl			      ;	ptr space stations
CODE:5C18 7E				      ld      a, (hl)			      ;	get space stations
CODE:5C19 23				      inc     hl			      ;	ptr stars
CODE:5C1A E5				      push    hl
CODE:5C1B D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:5C1D CA 2A	5C			      jp      Z, loc_5C2A		      ;	none, skip
CODE:5C20 57				      ld      d, a			      ;	number of space	stations
CODE:5C21 1E 30				      ld      e, #0x30 ; '0'                  ; space station graphic
CODE:5C23
CODE:5C23	      loc_5C23:
CODE:5C23 CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C26 15				      dec     d				      ;	done all space stations?
CODE:5C27 C2 23	5C			      jp      NZ, loc_5C23		      ;	no, loop
CODE:5C2A	      ;	init stars
CODE:5C2A
CODE:5C2A	      loc_5C2A:							      ;	ptr stars in quadrant
CODE:5C2A E1				      pop     hl
CODE:5C2B 7E				      ld      a, (hl)			      ;	get stars
CODE:5C2C D6 30				      sub     #0x30 ; '0'                     ; convert to binary
CODE:5C2E CA 3B	5C			      jp      Z, loc_5C3B		      ;	none, skip
CODE:5C31 57				      ld      d, a			      ;	number of stars
CODE:5C32 1E 2A				      ld      e, #0x2A ; '*'                  ; star graphic
CODE:5C34
CODE:5C34	      loc_5C34:
CODE:5C34 CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C37 15				      dec     d				      ;	done all stars?
CODE:5C38 C2 34	5C			      jp      NZ, loc_5C34		      ;	no, loop
CODE:5C3B	      ;	init USS Hephaestus
CODE:5C3B
CODE:5C3B	      loc_5C3B:							      ;	USS Hephaestus graphic
CODE:5C3B 1E 5B				      ld      e, #0x5B ; '['
CODE:5C3D CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C40 22 28	68			      ld      (hephaestus_video_addr), hl
CODE:5C43	      ;	init mines
CODE:5C43
CODE:5C43	      loc_5C43:
CODE:5C43 CD 00	5D			      call    rand_0_9
CODE:5C46 FE 03				      cp      #3			      ;	more than 2?
CODE:5C48 F2 43	5C			      jp      P, loc_5C43		      ;	yes, regenerate
CODE:5C4B A7				      and     a				      ;	zero?
CODE:5C4C CA 59	5C			      jp      Z, loc_5C59		      ;	yes, skip
CODE:5C4F 57				      ld      d, a			      ;	(1-2)
CODE:5C50 1E 25				      ld      e, #0x25 ; '%'                  ; mine graphic
CODE:5C52
CODE:5C52	      loc_5C52:
CODE:5C52 CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C55 15				      dec     d				      ;	done all mines?
CODE:5C56 C2 52	5C			      jp      NZ, loc_5C52		      ;	no, loop
CODE:5C59	      ;	init unknowns
CODE:5C59
CODE:5C59	      loc_5C59:
CODE:5C59 CD 00	5D			      call    rand_0_9
CODE:5C5C FE 04				      cp      #4			      ;	more than 3?
CODE:5C5E F2 59	5C			      jp      P, loc_5C59		      ;	yes, regenerate
CODE:5C61 A7				      and     a				      ;	zero?
CODE:5C62 57				      ld      d, a
CODE:5C63
CODE:5C63	      loc_5C63:							      ;	yes, skip
CODE:5C63 CA E3	5E			      jp      Z, print_sector
CODE:5C66 1E 58				      ld      e, #0x58 ; 'X'                  ; Unknown graphic
CODE:5C68 CD 6F	5C			      call    add_obj_to_quadrant
CODE:5C6B 15				      dec     d				      ;	done all unknowns?
CODE:5C6C C3 63	5C			      jp      loc_5C63			      ;	no, loop
CODE:5C6C	      ;	End of function	init_quadrant
CODE:5C6C
CODE:5C6F	      ;	D=num of (this)	object in quadrant, E=object (graphic)
CODE:5C6F
CODE:5C6F	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5C6F
CODE:5C6F
CODE:5C6F	      add_obj_to_quadrant:
CODE:5C6F CD 00	5D			      call    rand_0_9			      ;	rand Y coord
CODE:5C72 21 58	3C			      ld      hl, # VIDEO+0x58		      ;	first '.' in quadrant display
CODE:5C75 01 40	00			      ld      bc, #0x40	; '@'                 ; offset to next line
CODE:5C78 A7				      and     a				      ;	zero?
CODE:5C79 CA 81	5C			      jp      Z, loc_5C81		      ;	yes, skip
CODE:5C7C
CODE:5C7C	      loc_5C7C:							      ;	next line
CODE:5C7C 09				      add     hl, bc
CODE:5C7D 3D				      dec     a				      ;	at random line?
CODE:5C7E C2 7C	5C			      jp      NZ, loc_5C7C		      ;	no, loop
CODE:5C81
CODE:5C81	      loc_5C81:							      ;	rand X coord
CODE:5C81 CD 00	5D			      call    rand_0_9
CODE:5C84 07				      rlca				      ;	x2 for display offset
CODE:5C85 4F				      ld      c, a
CODE:5C86 06 00				      ld      b, #0
CODE:5C88 09				      add     hl, bc			      ;	offset to X coord
CODE:5C89 7E				      ld      a, (hl)			      ;	get current contents
CODE:5C8A FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5C8C C2 6F	5C			      jp      NZ, add_obj_to_quadrant	      ;	no, regenerate
CODE:5C8F 73				      ld      (hl), e			      ;	store object
CODE:5C90 7B				      ld      a, e
CODE:5C91 FE 40				      cp      #0x40 ; '@'                     ; Jovian Command Cruiser?
CODE:5C93 CA 99	5C			      jp      Z, loc_5C99		      ;	yes, skip
CODE:5C96 FE 26				      cp      #0x26 ; '&'                     ; Jovian Battle Cruiser?
CODE:5C98 C0				      ret     NZ			      ;	no, return
CODE:5C99
CODE:5C99	      loc_5C99:
CODE:5C99 D5				      push    de
CODE:5C9A EB				      ex      de, hl
CODE:5C9B 2A AC	69			      ld      hl, (tmp_jovian_tbl_ptr)
CODE:5C9E 73				      ld      (hl), e			      ;	warship	video address lsb
CODE:5C9F 23				      inc     hl
CODE:5CA0 72				      ld      (hl), d			      ;	warship	video address msb
CODE:5CA1 23				      inc     hl			      ;	next entry
CODE:5CA2 22 AC	69			      ld      (tmp_jovian_tbl_ptr), hl	      ;	update
CODE:5CA5 D1				      pop     de
CODE:5CA6 C9				      ret
CODE:5CA6	      ;	End of function	add_obj_to_quadrant
CODE:5CA6
CODE:5CA7
CODE:5CA7	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5CA7
CODE:5CA7
CODE:5CA7	      get_next_cmd_char:
CODE:5CA7 E5				      push    hl
CODE:5CA8 2A 00	68			      ld      hl, (cmd_entry_addr)
CODE:5CAB 7E				      ld      a, (hl)			      ;	get next cmd char
CODE:5CAC FE 80				      cp      #0x80 ; 'Ä'                     ; graphic space?
CODE:5CAE CA B7	5C			      jp      Z, loc_5CB7		      ;	yes, skip
CODE:5CB1 23				      inc     hl			      ;	next cmd char
CODE:5CB2 22 00	68			      ld      (cmd_entry_addr),	hl	      ;	update
CODE:5CB5 E1				      pop     hl
CODE:5CB6 C9				      ret
CODE:5CB7	      ;	---------------------------------------------------------------------------
CODE:5CB7
CODE:5CB7	      loc_5CB7:							      ;	zero char
CODE:5CB7 97				      sub     a
CODE:5CB8 E1				      pop     hl
CODE:5CB9 C9				      ret
CODE:5CB9	      ;	End of function	get_next_cmd_char
CODE:5CB9
CODE:5CBA
CODE:5CBA	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5CBA
CODE:5CBA
CODE:5CBA	      rnd_delay:
CODE:5CBA CD 00	5D			      call    rand_0_9
CODE:5CBD 3C				      inc     a				      ;	1-10
CODE:5CBE 47				      ld      b, a
CODE:5CBE	      ;	End of function	rnd_delay
CODE:5CBE
CODE:5CBF	      ;	some sort of random time delay loop
CODE:5CBF	      ;	- which	calls update_chaser_pods_cmd_entry
CODE:5CBF	      ;	B=out loop counter
CODE:5CBF	      ;	E,C=inner loop counters	(random?)
CODE:5CBF
CODE:5CBF	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5CBF
CODE:5CBF
CODE:5CBF	      delay_B_with_duty_cycle:
CODE:5CBF E5				      push    hl
CODE:5CC0 D5				      push    de
CODE:5CC1
CODE:5CC1	      loc_5CC1:
CODE:5CC1 21 F6	67			      ld      hl, #delay_duty_cycle_tbl
CODE:5CC4 3A AF	6F			      ld      a, (delay_duty_cycle_i)
CODE:5CC7 07				      rlca				      ;	x2
CODE:5CC8 85				      add     a, l
CODE:5CC9 6F				      ld      l, a			      ;	get ptr	entry
CODE:5CCA 3E 01				      ld      a, #1
CODE:5CCC
CODE:5CCC	      loc_5CCC:
CODE:5CCC 32 F2	67			      ld      (delay_cycle), a
CODE:5CCF 16 10				      ld      d, #16
CODE:5CD1
CODE:5CD1	      loc_5CD1:							      ;	e=0-duty (not initialised)
CODE:5CD1 1D				      dec     e
CODE:5CD2 C2 D6	5C			      jp      NZ, loc_5CD6
CODE:5CD5 5E				      ld      e, (hl)			      ;	reload duty
CODE:5CD6
CODE:5CD6	      loc_5CD6:							      ;	c=0-255	(not initialised)
CODE:5CD6 0D				      dec     c
CODE:5CD7 C2 D1	5C			      jp      NZ, loc_5CD1
CODE:5CDA 15				      dec     d
CODE:5CDB C2 D1	5C			      jp      NZ, loc_5CD1
CODE:5CDE 23				      inc     hl			      ;	next cycle entry
CODE:5CDF CD 4B	5D			      call    update_chaser_pods_cmd_entry
CODE:5CE2 05				      dec     b				      ;	done all iterations?
CODE:5CE3 CA F1	5C			      jp      Z, delay_exit		      ;	yes, exit
CODE:5CE6 3A F2	67			      ld      a, (delay_cycle)
CODE:5CE9 EE 01				      xor     #1			      ;	toggle
CODE:5CEB CA CC	5C			      jp      Z, loc_5CCC
CODE:5CEE C3 C1	5C			      jp      loc_5CC1
CODE:5CF1	      ;	---------------------------------------------------------------------------
CODE:5CF1
CODE:5CF1	      delay_exit:
CODE:5CF1 D1				      pop     de
CODE:5CF2 E1				      pop     hl
CODE:5CF3 C9				      ret
CODE:5CF3	      ;	End of function	delay_B_with_duty_cycle
CODE:5CF3
CODE:5CF4
CODE:5CF4	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5CF4
CODE:5CF4
CODE:5CF4	      clear_video_with_B:
CODE:5CF4 21 00	3C			      ld      hl, #VIDEO
CODE:5CF7
CODE:5CF7	      loc_5CF7:							      ;	set char
CODE:5CF7 70				      ld      (hl), b
CODE:5CF8 23				      inc     hl			      ;	next video location
CODE:5CF9 7C				      ld      a, h
CODE:5CFA FE 40				      cp      #0x40 ; '@'                     ; end of video?
CODE:5CFC C2 F7	5C			      jp      NZ, loc_5CF7		      ;	no, loop
CODE:5CFF C9				      ret
CODE:5CFF	      ;	End of function	clear_video_with_B
CODE:5CFF
CODE:5D00
CODE:5D00	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D00
CODE:5D00
CODE:5D00	      rand_0_9:
CODE:5D00 C5				      push    bc
CODE:5D01 E5				      push    hl
CODE:5D02 2A FB	6F			      ld      hl, (STACK_WATERMARK)
CODE:5D05
CODE:5D05	      loc_5D05:
CODE:5D05 06 17				      ld      b, #23
CODE:5D07 7D				      ld      a, l
CODE:5D08
CODE:5D08	      loc_5D08:
CODE:5D08 E6 06				      and     #6
CODE:5D0A 37				      scf
CODE:5D0B EA 0F	5D			      jp      PE, loc_5D0F
CODE:5D0E 3F				      ccf
CODE:5D0F
CODE:5D0F	      loc_5D0F:
CODE:5D0F 7C				      ld      a, h
CODE:5D10 1F				      rra
CODE:5D11 67				      ld      h, a
CODE:5D12 7D				      ld      a, l
CODE:5D13 1F				      rra
CODE:5D14 E6 FE				      and     #0xFE ; '˛'
CODE:5D16 6F				      ld      l, a
CODE:5D17 05				      dec     b
CODE:5D18 C2 08	5D			      jp      NZ, loc_5D08
CODE:5D1B 22 FB	6F			      ld      (STACK_WATERMARK), hl
CODE:5D1E 7C				      ld      a, h
CODE:5D1F E6 0F				      and     #0xF			      ;	low nibble only
CODE:5D21 FE 0A				      cp      #0xA			      ;	greater	than 9?
CODE:5D23 D2 05	5D			      jp      NC, loc_5D05		      ;	yes, regenerate
CODE:5D26 E1				      pop     hl
CODE:5D27 C1				      pop     bc
CODE:5D28 C9				      ret
CODE:5D28	      ;	End of function	rand_0_9
CODE:5D28
CODE:5D29
CODE:5D29	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D29
CODE:5D29
CODE:5D29	      print_experimental_ray_outcome:
CODE:5D29 D5				      push    de
CODE:5D2A 11 46	65			      ld      de, #aFirstOfficerTh	      ;	"FIRST OFFICER:	THE EXPERIMENTAL RAY"
CODE:5D2D 21 80	3F			      ld      hl, # VIDEO+0x380
CODE:5D30 CD 3C	5D			      call    clear_last_2_lines_print_string
CODE:5D33 D1				      pop     de
CODE:5D34 23				      inc     hl
CODE:5D35 CD 3F	5D			      call    print_string
CODE:5D38 C9				      ret
CODE:5D38	      ;	End of function	print_experimental_ray_outcome
CODE:5D38
CODE:5D39
CODE:5D39	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D39
CODE:5D39
CODE:5D39	      print_string_last_line:
CODE:5D39 21 C0	3F			      ld      hl, # VIDEO+0x3C0		      ;	last line
CODE:5D39	      ;	End of function	print_string_last_line
CODE:5D39
CODE:5D3C
CODE:5D3C	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D3C
CODE:5D3C
CODE:5D3C	      clear_last_2_lines_print_string:
CODE:5D3C CD C0	5E			      call    clear_last_2_lines
CODE:5D3C	      ;	End of function	clear_last_2_lines_print_string
CODE:5D3C
CODE:5D3F	      ;	HL=video address, DE=string (null-terminated)
CODE:5D3F
CODE:5D3F	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D3F
CODE:5D3F
CODE:5D3F	      print_string:
CODE:5D3F 1A				      ld      a, (de)			      ;	get character
CODE:5D40 B7				      or      a				      ;	end of string?
CODE:5D41 C8				      ret     Z				      ;	yes, return
CODE:5D42 77				      ld      (hl), a			      ;	write to video
CODE:5D43 13				      inc     de			      ;	next string char
CODE:5D44 23				      inc     hl			      ;	next video address
CODE:5D45 C3 3F	5D			      jp      print_string		      ;	loop
CODE:5D45	      ;	End of function	print_string
CODE:5D45
CODE:5D48
CODE:5D48	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D48
CODE:5D48
CODE:5D48	      delay_B_and_update_all:
CODE:5D48 CD BF	5C			      call    delay_B_with_duty_cycle
CODE:5D48	      ;	End of function	delay_B_and_update_all
CODE:5D48
CODE:5D4B
CODE:5D4B	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5D4B
CODE:5D4B
CODE:5D4B	      update_chaser_pods_cmd_entry:
CODE:5D4B
CODE:5D4B	      ;	FUNCTION CHUNK AT CODE:5580 SIZE 00000005 BYTES
CODE:5D4B
CODE:5D4B E5				      push    hl
CODE:5D4C D5				      push    de
CODE:5D4D C5				      push    bc
CODE:5D4E	      ;	update chaser
CODE:5D4E 2A EF	67			      ld      hl, (chaser_addr)
CODE:5D51 7E				      ld      a, (hl)
CODE:5D52 CD 00	5D			      call    rand_0_9
CODE:5D55 C6 80				      add     a, #0x80 ; 'Ä'
CODE:5D57 36 20				      ld      (hl), #0x20 ; ' '               ; wipe chaser
CODE:5D59 23				      inc     hl
CODE:5D5A 23				      inc     hl			      ;	next chaser_addr
CODE:5D5B 7D				      ld      a, l
CODE:5D5C FE 2B				      cp      #0x2B ; '+'                     ; end? (right)
CODE:5D5E FA 63	5D			      jp      M, loc_5D63		      ;	no, skip
CODE:5D61 2E 19				      ld      l, #0x19			      ;	reset to start (left)
CODE:5D63
CODE:5D63	      loc_5D63:							      ;	read char (why?)
CODE:5D63 7E				      ld      a, (hl)
CODE:5D64 3E 8F				      ld      a, #0x8F ; 'è'                  ; chaser graphic
CODE:5D66 77				      ld      (hl), a			      ;	write to video
CODE:5D67 22 EF	67			      ld      (chaser_addr), hl		      ;	save new chaser	address
CODE:5D6A 3A B9	6F			      ld      a, (critical)
CODE:5D6D A7				      and     a				      ;	condition critical?
CODE:5D6E CA 7F	5D			      jp      Z, loc_5D7F		      ;	no, skip
CODE:5D71	      ;	toggles	"CONDITION" value w/graphics
CODE:5D71 06 05				      ld      b, #5			      ;	5 chars	to toggle
CODE:5D73 21 BB	3C			      ld      hl, # VIDEO+0xBB		      ;	ptr to condition value
CODE:5D76
CODE:5D76	      loc_5D76:							      ;	get char
CODE:5D76 7E				      ld      a, (hl)
CODE:5D77 C6 80				      add     a, #0x80 ; 'Ä'                  ; toggle graphics
CODE:5D79 77				      ld      (hl), a			      ;	write back to video
CODE:5D7A 23				      inc     hl			      ;	next address
CODE:5D7B 05				      dec     b				      ;	done?
CODE:5D7C C2 76	5D			      jp      NZ, loc_5D76		      ;	no, loop
CODE:5D7F
CODE:5D7F	      loc_5D7F:
CODE:5D7F 3A B8	6F			      ld      a, (disable_pod_update)
CODE:5D82 A7				      and     a				      ;	disabled?
CODE:5D83 C2 00	5E			      jp      NZ, handle_cmd_entry	      ;	yes, skip
CODE:5D86 11 06	00			      ld      de, #6			      ;	6 bytes	per pod	entry
CODE:5D89 21 9B	6F			      ld      hl, #antimatter_pod_tbl
CODE:5D8C
CODE:5D8C	      loc_5D8C:							      ;	pod status
CODE:5D8C 7E				      ld      a, (hl)
CODE:5D8D FE FF				      cp      #0xFF			      ;	end of table?
CODE:5D8F CA 00	5E			      jp      Z, handle_cmd_entry	      ;	yes, exit
CODE:5D92 A7				      and     a				      ;	unused?
CODE:5D93 C2 9A	5D			      jp      NZ, get_pod_data		      ;	no, exit
CODE:5D96
CODE:5D96	      next_pod:							      ;	next pod entry
CODE:5D96 19				      add     hl, de
CODE:5D97 C3 8C	5D			      jp      loc_5D8C			      ;	loop
CODE:5D9A	      ;	---------------------------------------------------------------------------
CODE:5D9A
CODE:5D9A	      get_pod_data:						      ;	pod launched?
CODE:5D9A FE 01				      cp      #1
CODE:5D9C C2 96	5D			      jp      NZ, next_pod		      ;	no, return
CODE:5D9F E5				      push    hl			      ;	pod table entry
CODE:5DA0 23				      inc     hl
CODE:5DA1 4E				      ld      c, (hl)
CODE:5DA2 23				      inc     hl
CODE:5DA3 46				      ld      b, (hl)			      ;	BC = video address delta
CODE:5DA4 23				      inc     hl
CODE:5DA5 5E				      ld      e, (hl)
CODE:5DA6 23				      inc     hl
CODE:5DA7 56				      ld      d, (hl)			      ;	DE = video address
CODE:5DA8 23				      inc     hl
CODE:5DA9 7E				      ld      a, (hl)			      ;	speed countdown
CODE:5DAA A7				      and     a				      ;	zero?
CODE:5DAB CA B7	5D			      jp      Z, move_pod		      ;	yes, go
CODE:5DAE 3D				      dec     a				      ;	decrement speed	countdown
CODE:5DAF 77				      ld      (hl), a			      ;	update
CODE:5DB0 E1				      pop     hl
CODE:5DB1
CODE:5DB1	      offset_for_next_pod:					      ;	offset to next pod entry
CODE:5DB1 11 06	00			      ld      de, #6
CODE:5DB4 C3 96	5D			      jp      next_pod
CODE:5DB7	      ;	---------------------------------------------------------------------------
CODE:5DB7
CODE:5DB7	      move_pod:							      ;	reinit speed countdown
CODE:5DB7 3A 40	68			      ld      a, (pod_speed)
CODE:5DBA 77				      ld      (hl), a			      ;	update pod speed
CODE:5DBB 62				      ld      h, d
CODE:5DBC 6B				      ld      l, e			      ;	HL = video address
CODE:5DBD 36 2E				      ld      (hl), #0x2E ; '.'               ; write empty sector to video
CODE:5DBF 09				      add     hl, bc			      ;	add delta to address
CODE:5DC0 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5DC1 FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5DC3 C2 D5	5D			      jp      NZ, change_pod_dir	      ;	no, go
CODE:5DC6 36 23				      ld      (hl), #0x23 ; '#'               ; write pod graphic to video
CODE:5DC8 D1				      pop     de			      ;	pod table entry
CODE:5DC9 D5				      push    de
CODE:5DCA 13				      inc     de
CODE:5DCB 13				      inc     de
CODE:5DCC EB				      ex      de, hl			      ;	HL = pod table entry+2
CODE:5DCD
CODE:5DCD	      update_pod_address:					      ;	next entry address
CODE:5DCD 23				      inc     hl
CODE:5DCE 73				      ld      (hl), e			      ;	video address lsb
CODE:5DCF 23				      inc     hl
CODE:5DD0 72				      ld      (hl), d			      ;	video address msb
CODE:5DD1 E1				      pop     hl
CODE:5DD2 C3 B1	5D			      jp      offset_for_next_pod
CODE:5DD5	      ;	---------------------------------------------------------------------------
CODE:5DD5
CODE:5DD5	      change_pod_dir:						      ;	direction
CODE:5DD5 CD 00	5D			      call    rand_0_9
CODE:5DD8 FE 08				      cp      #8			      ;	greater	than 7?
CODE:5DDA F2 D5	5D			      jp      P, change_pod_dir		      ;	regenerate
CODE:5DDD 21 9A	69			      ld      hl, #dir_addr_delta_tbl
CODE:5DE0 07				      rlca				      ;	x2
CODE:5DE1 85				      add     a, l
CODE:5DE2 6F				      ld      l, a
CODE:5DE3 7C				      ld      a, h
CODE:5DE4 CE 00				      adc     a, #0
CODE:5DE6 67				      ld      h, a			      ;	ptr direction delta address entry
CODE:5DE7 7E				      ld      a, (hl)
CODE:5DE8 23				      inc     hl
CODE:5DE9 66				      ld      h, (hl)
CODE:5DEA 6F				      ld      l, a			      ;	HL = delta
CODE:5DEB 44				      ld      b, h
CODE:5DEC 4D				      ld      c, l			      ;	BC = delta
CODE:5DED 19				      add     hl, de			      ;	add delta to video address
CODE:5DEE 7E				      ld      a, (hl)			      ;	get sector contents
CODE:5DEF FE 2E				      cp      #0x2E ; '.'                     ; empty?
CODE:5DF1 C2 D5	5D			      jp      NZ, change_pod_dir	      ;	no, regenerate
CODE:5DF4 36 23				      ld      (hl), #0x23 ; '#'               ; write pod graphic to video
CODE:5DF6 D1				      pop     de			      ;	pod table entry
CODE:5DF7 D5				      push    de
CODE:5DF8 13				      inc     de
CODE:5DF9 EB				      ex      de, hl
CODE:5DFA 71				      ld      (hl), c			      ;	new delta lsb
CODE:5DFB 23				      inc     hl
CODE:5DFC 70				      ld      (hl), b			      ;	new delta msb
CODE:5DFD C3 CD	5D			      jp      update_pod_address
CODE:5E00	      ;	---------------------------------------------------------------------------
CODE:5E00
CODE:5E00	      handle_cmd_entry:
CODE:5E00 3A B1	6F			      ld      a, (cmd_flag)
CODE:5E03 A7				      and     a				      ;	new command already?
CODE:5E04 CA 78	5E			      jp      Z, loc_5E78		      ;	yes, exit
CODE:5E07 CD B6	51			      call    keyboard_scan
CODE:5E0A CA 78	5E			      jp      Z, loc_5E78		      ;	no key,	exit
CODE:5E0D FE 09				      cp      #9			      ;	<TAB>? (cancel command)
CODE:5E0F CA 5F	5E			      jp      Z, clear_cmd_buffer	      ;	yes, go
CODE:5E12 2A 00	68			      ld      hl, (cmd_entry_addr)
CODE:5E15 77				      ld      (hl), a			      ;	display	key
CODE:5E16 23				      inc     hl			      ;	next address
CODE:5E17 22 00	68			      ld      (cmd_entry_addr),	hl	      ;	save
CODE:5E1A FE 0D				      cp      #0xD			      ;	<ENTER>?
CODE:5E1C CA 2E	5E			      jp      Z, cmd_entered		      ;	yes, go
CODE:5E1F 3A B2	6F			      ld      a, (cmd_len)
CODE:5E22 3C				      inc     a
CODE:5E23 FE 07				      cp      #7			      ;	buffer full?
CODE:5E25 F2 5F	5E			      jp      P, clear_cmd_buffer	      ;	yes, skip
CODE:5E28 32 B2	6F			      ld      (cmd_len), a		      ;	save new length
CODE:5E2B C3 78	5E			      jp      loc_5E78			      ;	exit
CODE:5E2E	      ;	---------------------------------------------------------------------------
CODE:5E2E
CODE:5E2E	      cmd_entered:						      ;	zero
CODE:5E2E 97				      sub     a
CODE:5E2F 32 B1	6F			      ld      (cmd_flag), a		      ;	flag new command
CODE:5E32 2B				      dec     hl			      ;	back to	<ENTER>
CODE:5E33 36 80				      ld      (hl), #0x80 ; 'Ä'               ; overwrite with graphical space
CODE:5E35 21 37	3F			      ld      hl, # VIDEO+0x337		      ;	cmd entry
CODE:5E38 46				      ld      b, (hl)			      ;	get 1st	char
CODE:5E39 3A B5	6F			      ld      a, (computer_malfunction)
CODE:5E3C A7				      and     a
CODE:5E3D CA 46	5E			      jp      Z, loc_5E46
CODE:5E40 78				      ld      a, b			      ;	1st char of command
CODE:5E41 FE 49				      cp      #0x49 ; 'I'                     ; ???
CODE:5E43 C2 5F	5E			      jp      NZ, clear_cmd_buffer	      ;	no, skip
CODE:5E46
CODE:5E46	      loc_5E46:
CODE:5E46 23				      inc     hl
CODE:5E47 22 00	68			      ld      (cmd_entry_addr),	hl
CODE:5E4A 21 16	68			      ld      hl, #cmd_tbl		      ;	"HIMTDSEXAL"
CODE:5E4D 11 02	68			      ld      de, #cmd_jmp_vectors
CODE:5E50
CODE:5E50	      lookup_cmd:						      ;	get cmd	entry
CODE:5E50 7E				      ld      a, (hl)
CODE:5E51 A7				      and     a				      ;	end of table?
CODE:5E52 CA 5F	5E			      jp      Z, clear_cmd_buffer	      ;	yes, exit
CODE:5E55 B8				      cp      b				      ;	found cmd?
CODE:5E56 CA 7C	5E			      jp      Z, found_cmd		      ;	yes, go
CODE:5E59 23				      inc     hl			      ;	next table entry
CODE:5E5A 13				      inc     de
CODE:5E5B 13				      inc     de			      ;	next vector entry
CODE:5E5C C3 50	5E			      jp      lookup_cmd		      ;	loop
CODE:5E5F	      ;	---------------------------------------------------------------------------
CODE:5E5F
CODE:5E5F	      clear_cmd_buffer:
CODE:5E5F 21 37	3F			      ld      hl, # VIDEO+0x337
CODE:5E62 22 00	68			      ld      (cmd_entry_addr),	hl	      ;	reset cmd entry
CODE:5E65 3E FF				      ld      a, #0xFF
CODE:5E67 32 B1	6F			      ld      (cmd_flag), a		      ;	flag no	command
CODE:5E6A
CODE:5E6A	      loc_5E6A:
CODE:5E6A 3E 20				      ld      a, #0x20 ; ' '
CODE:5E6C 77				      ld      (hl), a			      ;	write space
CODE:5E6D 23				      inc     hl			      ;	next video address
CODE:5E6E 7E				      ld      a, (hl)			      ;	get char
CODE:5E6F FE 20				      cp      #0x20 ; ' '                     ; space?
CODE:5E71 C2 6A	5E			      jp      NZ, loc_5E6A		      ;	no, loop
CODE:5E74 97				      sub     a				      ;	zero cmd_len
CODE:5E75 32 B2	6F			      ld      (cmd_len), a
CODE:5E78
CODE:5E78	      loc_5E78:
CODE:5E78 C1				      pop     bc
CODE:5E79 D1				      pop     de
CODE:5E7A E1				      pop     hl
CODE:5E7B C9				      ret
CODE:5E7C	      ;	---------------------------------------------------------------------------
CODE:5E7C
CODE:5E7C	      found_cmd:						      ;	HL = jump vector
CODE:5E7C EB				      ex      de, hl
CODE:5E7D 11 5F	5E			      ld      de, #clear_cmd_buffer
CODE:5E80 D5				      push    de			      ;	set return address
CODE:5E81 C3 80	55			      jp      jump_HL_vector
CODE:5E81	      ;	End of function	update_chaser_pods_cmd_entry
CODE:5E81
CODE:5E84
CODE:5E84	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5E84
CODE:5E84
CODE:5E84	      animate_destruction:
CODE:5E84 3E 01				      ld      a, #1			      ;	flag disabled
CODE:5E86 32 B8	6F			      ld      (disable_pod_update), a
CODE:5E89 3E 01				      ld      a, #1			      ;	flag critical (self-destruct)
CODE:5E8B 32 B9	6F			      ld      (critical), a
CODE:5E8E 3E 03				      ld      a, #3
CODE:5E90 32 AF	6F			      ld      (delay_duty_cycle_i), a
CODE:5E93 21 BB	3C			      ld      hl, # VIDEO+0xBB		      ;	condition value	video address
CODE:5E96 11 B8	61			      ld      de, #aCrtcl		      ;	"CRTCL"
CODE:5E99 CD 3F	5D			      call    print_string
CODE:5E9C 06 32				      ld      b, #50
CODE:5E9E CD BF	5C			      call    delay_B_with_duty_cycle
CODE:5EA1 0E 1E				      ld      c, #30			      ;	loop 30	times
CODE:5EA3
CODE:5EA3	      loc_5EA3:
CODE:5EA3 06 2B				      ld      b, #0x2B ; '+'
CODE:5EA5 CD F4	5C			      call    clear_video_with_B
CODE:5EA8 06 23				      ld      b, #0x23 ; '#'
CODE:5EAA CD F4	5C			      call    clear_video_with_B
CODE:5EAD 06 2A				      ld      b, #0x2A ; '*'
CODE:5EAF CD F4	5C			      call    clear_video_with_B
CODE:5EB2 06 BF				      ld      b, #0xBF ; 'ø'
CODE:5EB4 CD F4	5C			      call    clear_video_with_B
CODE:5EB7 0D				      dec     c				      ;	done?
CODE:5EB8 C2 A3	5E			      jp      NZ, loc_5EA3		      ;	no, loop
CODE:5EBB 97				      sub     a				      ;	flag enabled
CODE:5EBC 32 B8	6F			      ld      (disable_pod_update), a
CODE:5EBF C9				      ret
CODE:5EBF	      ;	End of function	animate_destruction
CODE:5EBF
CODE:5EC0
CODE:5EC0	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5EC0
CODE:5EC0
CODE:5EC0	      clear_last_2_lines:
CODE:5EC0 E5				      push    hl			      ;	save video address
CODE:5EC1 3E 80				      ld      a, #0x80 ; 'Ä'                  ; 2 lines to clear
CODE:5EC3 21 80	3F			      ld      hl, # VIDEO+0x380		      ;	2nd-last line
CODE:5EC6
CODE:5EC6	      loc_5EC6:							      ;	<SPACE>
CODE:5EC6 36 20				      ld      (hl), #0x20 ; ' '
CODE:5EC8 3D				      dec     a				      ;	done 2 lines?
CODE:5EC9 23				      inc     hl			      ;	next video location
CODE:5ECA C2 C6	5E			      jp      NZ, loc_5EC6		      ;	no, loop
CODE:5ECD E1				      pop     hl			      ;	restore	video location
CODE:5ECE C9				      ret
CODE:5ECE	      ;	End of function	clear_last_2_lines
CODE:5ECE
CODE:5ECF
CODE:5ECF	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5ECF
CODE:5ECF
CODE:5ECF	      print_10_lines:
CODE:5ECF 21 57	3C			      ld      hl, # VIDEO+0x57
CODE:5ED2 3E 0A				      ld      a, #10			      ;	# lines	to print
CODE:5ED4
CODE:5ED4	      loc_5ED4:
CODE:5ED4 F5				      push    af
CODE:5ED5 CD 3F	5D			      call    print_string
CODE:5ED8 F1				      pop     af
CODE:5ED9 01 2B	00			      ld      bc, #0x2B	; '+'                 ; offset to next line
CODE:5EDC 09				      add     hl, bc			      ;	next video address
CODE:5EDD 3D				      dec     a				      ;	done all lines?
CODE:5EDE 13				      inc     de			      ;	skip null
CODE:5EDF C2 D4	5E			      jp      NZ, loc_5ED4		      ;	no, loop
CODE:5EE2 C9				      ret
CODE:5EE2	      ;	End of function	print_10_lines
CODE:5EE2
CODE:5EE3
CODE:5EE3	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5EE3
CODE:5EE3
CODE:5EE3	      print_sector:
CODE:5EE3 2A 28	68			      ld      hl, (hephaestus_video_addr)
CODE:5EE6 11 A9	C3			      ld      de, #0xC3A9		      ;	$3C58+$C3A9=$10001
CODE:5EE9 19				      add     hl, de
CODE:5EEA 11 C0	FF			      ld      de, #0xFFC0		      ;	-64 (1 line)
CODE:5EED 06 00				      ld      b, #0
CODE:5EEF
CODE:5EEF	      loc_5EEF:							      ;	subtract a line
CODE:5EEF 19				      add     hl, de
CODE:5EF0 7C				      ld      a, h
CODE:5EF1 A7				      and     a				      ;	negative?
CODE:5EF2 FA F9	5E			      jp      M, loc_5EF9		      ;	yes, exit
CODE:5EF5 04				      inc     b				      ;	inc Y coord
CODE:5EF6 C3 EF	5E			      jp      loc_5EEF			      ;	loop
CODE:5EF9	      ;	---------------------------------------------------------------------------
CODE:5EF9
CODE:5EF9	      loc_5EF9:
CODE:5EF9 11 40	00			      ld      de, #0x40	; '@'
CODE:5EFC 19				      add     hl, de			      ;	re-adjust
CODE:5EFD 7D				      ld      a, l
CODE:5EFE 0F				      rrca				      ;	X coord
CODE:5EFF E6 0F				      and     #0xF
CODE:5F01 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII
CODE:5F03 21 3E	3D			      ld      hl, # VIDEO+0x13E		      ;	sector X video address
CODE:5F06 77				      ld      (hl), a			      ;	write to video
CODE:5F07 21 3C	3D			      ld      hl, # VIDEO+0x13C		      ;	sector Y video address
CODE:5F0A 78				      ld      a, b
CODE:5F0B C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII
CODE:5F0D 77				      ld      (hl), a			      ;	write to video
CODE:5F0E C9				      ret
CODE:5F0E	      ;	End of function	print_sector
CODE:5F0E
CODE:5F0F
CODE:5F0F	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F0F
CODE:5F0F
CODE:5F0F	      update_star_time:
CODE:5F0F 21 7F	3C			      ld      hl, # VIDEO+0x7F		      ;	last digit STAR-TIME
CODE:5F12
CODE:5F12	      loc_5F12:							      ;	get digit
CODE:5F12 7E				      ld      a, (hl)
CODE:5F13 3C				      inc     a
CODE:5F14 77				      ld      (hl), a			      ;	write back to video
CODE:5F15 FE 3A				      cp      #0x3A ; ':'                     ; ASCII '9'+1?
CODE:5F17 C0				      ret     NZ			      ;	no, return
CODE:5F18 36 30				      ld      (hl), #0x30 ; '0'               ; write '0' to video
CODE:5F1A 2B				      dec     hl			      ;	previous digit
CODE:5F1B C3 12	5F			      jp      loc_5F12			      ;	loop
CODE:5F1B	      ;	End of function	update_star_time
CODE:5F1B
CODE:5F1E
CODE:5F1E	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F1E
CODE:5F1E
CODE:5F1E	      dec_jovians:
CODE:5F1E 3A 61	68			      ld      a, (quadrant)
CODE:5F21 CD 9A	5B			      call    get_ptr_quadrant_A_data
CODE:5F24 35				      dec     (hl)			      ;	dec warships
CODE:5F25 3A 58	68			      ld      a, (jovians_left)
CODE:5F28 C6 99				      add     a, #0x99 ; 'ô'
CODE:5F2A 27				      daa				      ;	dec jovians left
CODE:5F2B 32 58	68			      ld      (jovians_left), a		      ;	update
CODE:5F2B	      ;	End of function	dec_jovians
CODE:5F2B
CODE:5F2E
CODE:5F2E	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F2E
CODE:5F2E
CODE:5F2E	      print_jovians_left:
CODE:5F2E 3A 58	68			      ld      a, (jovians_left)
CODE:5F31 21 FE	3D			      ld      hl, # VIDEO+0x1FE		      ;	video address
CODE:5F34 A7				      and     a				      ;	any left?
CODE:5F35 C2 63	5F			      jp      NZ, print_BCD_byte	      ;	yes, go
CODE:5F38 CD 63	5F			      call    print_BCD_byte		      ;	display	Jovians	left
CODE:5F3B 21 80	3F			      ld      hl, # VIDEO+0x380		      ;	2nd-last line
CODE:5F3E 11 DB	64			      ld      de, #aCommandHeadq_0	      ;	"COMMAND HEADQUARTERS:	CONGRATULATIONS,"...
CODE:5F41 CD 3C	5D			      call    clear_last_2_lines_print_string
CODE:5F44 21 C5	3C			      ld      hl, # VIDEO+0xC5		      ;	current	quadrant in LR sensor
CODE:5F47 36 30				      ld      (hl), #0x30 ; '0'               ; write '0' to warships
CODE:5F49	      ;	display	officer	from HQ
CODE:5F49 11 97	6A			      ld      de, #hq_officer		      ;	"		      "
CODE:5F4C CD CF	5E			      call    print_10_lines
CODE:5F4F 97				      sub     a				      ;	flag no	command
CODE:5F50 32 B1	6F			      ld      (cmd_flag), a
CODE:5F53 3E 01				      ld      a, #1			      ;	flag disabled
CODE:5F55 32 B8	6F			      ld      (disable_pod_update), a
CODE:5F58 06 0C				      ld      b, #0xC
CODE:5F5A C3 AB	53			      jp      loc_53AB
CODE:5F5A	      ;	End of function	print_jovians_left
CODE:5F5A
CODE:5F5D
CODE:5F5D	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F5D
CODE:5F5D
CODE:5F5D	      print_power_avail:
CODE:5F5D 21 BD	3D			      ld      hl, # VIDEO+0x1BD		      ;	POWER AVAIL value
CODE:5F60 3A B8	69			      ld      a, (power_avail)
CODE:5F60	      ;	End of function	print_power_avail
CODE:5F60
CODE:5F63
CODE:5F63	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F63
CODE:5F63
CODE:5F63	      print_BCD_byte:
CODE:5F63 5F				      ld      e, a
CODE:5F64 0F				      rrca
CODE:5F65 0F				      rrca
CODE:5F66 0F				      rrca
CODE:5F67 0F				      rrca				      ;	high->low nibble
CODE:5F68 E6 0F				      and     #0xF			      ;	nibble only
CODE:5F6A C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:5F6C 77				      ld      (hl), a			      ;	write to video
CODE:5F6D 23				      inc     hl			      ;	next video address
CODE:5F6E 7B				      ld      a, e
CODE:5F6F E6 0F				      and     #0xF			      ;	low nibble only
CODE:5F71 C6 30				      add     a, #0x30 ; '0'                  ; convert to ASCII digit
CODE:5F73 77				      ld      (hl), a			      ;	write to video
CODE:5F74 C9				      ret
CODE:5F74	      ;	End of function	print_BCD_byte
CODE:5F74
CODE:5F75
CODE:5F75	      ;	===============	S U B R	O U T I	N E =======================================
CODE:5F75
CODE:5F75
CODE:5F75	      dec_triton_misls_and_print:
CODE:5F75 21 7D	3D			      ld      hl, # VIDEO+0x17D		      ;	triton msls value video	address
CODE:5F78 3A B9	69			      ld      a, (triton_misls)
CODE:5F7B A7				      and     a				      ;	none?
CODE:5F7C C2 81	5F			      jp      NZ, loc_5F81		      ;	no, skip
CODE:5F7F 37				      scf
CODE:5F80 C9				      ret
CODE:5F81	      ;	---------------------------------------------------------------------------
CODE:5F81
CODE:5F81	      loc_5F81:
CODE:5F81 C6 99				      add     a, #0x99 ; 'ô'
CODE:5F83 27				      daa				      ;	decrement
CODE:5F84 32 B9	69			      ld      (triton_misls), a		      ;	update
CODE:5F87 C3 63	5F			      jp      print_BCD_byte
CODE:5F87	      ;	End of function	dec_triton_misls_and_print
CODE:5F87
CODE:5F87	      ;	---------------------------------------------------------------------------
CODE:5F8A 43 4F	4D 4D+aCommandHeadqua:	      .ascii 'COMMAND HEADQUARTERS: THE JOVIANS HAVE INVADED EARTH SPACE.     YOUR OR'
CODE:5F8A 41 4E	44 20+			      .ascii 'DERS ARE TO SEARCH FOR AND DESTROY ALL JOVIAN WAR        VESSELS IN EAR'
CODE:5F8A 48 45	41 44+			      .ascii 'TH'
CODE:5F8A 51 55	41 52+			      .db 0x27
CODE:5F8A 54 45	52 53+			      .ascii 'S 100 QUADRANTS OF SPACE'
CODE:5F8A 3A 20	54 48+			      .db 0
CODE:6034 48 59	50 52+aHyprHIonIMsrMT:	      .ascii 'HYPR=H,ION=I,MSR=M,TRM=T,PWRDST=D,SELFD=S,EXPRAY=E,POD=A,XPOD=X '
CODE:6034 3D 48	2C 49+			      .db 0
CODE:6075 45 4E	47 49+aEngineerComman:	      .ascii 'ENGINEER:COMMANDER, THE ENGINES HAVEN'
CODE:6075 4E 45	45 52+			      .db 0x27
CODE:6075 3A 43	4F 4D+			      .ascii 'T THE POWER TO OPERATE'
CODE:6075 4D 41	4E 44+			      .db 0
CODE:60B2 45 4E	47 49+aEngineerTheUnk:	      .ascii 'ENGINEER:THE UNKNOWN WE SHOT DISABLED THE HYPERDRIVE. '
CODE:60B2 4E 45	45 52+			      .db 0
CODE:60E9 46 49	52 53+aFirstOfficerCa:	      .ascii 'FIRST OFFICER:CAPTAIN, YOUR LAST COMMAND MADE NO SENSE'
CODE:60E9 54 20	4F 46+			      .db 0
CODE:6120 46 49	52 53+aFirstOfficer_0:	      .ascii 'FIRST OFFICER:CAPTAIN, WE HAVE BEEN BLOCKED BY AN UNKNOWN       OBJECT'
CODE:6120 54 20	4F 46+			      .db 0
CODE:6167 43 4F	4D 4D+aCommunications:	      .ascii 'COMMUNICATIONS:THE SPACE STATION HAS ACKNOWLEDGED OUR DOCKING.'
CODE:6167 55 4E	49 43+			      .db 0
CODE:61A6 20 44	4F 43+aDock:		      .ascii ' DOCK'
CODE:61A6 4B 00				      .db 0
CODE:61AC 47 52	45 45+aGreen:		      .ascii 'GREEN'
CODE:61AC 4E 00				      .db 0
CODE:61B2 20 52	45 44+aRed:		      .ascii ' RED '
CODE:61B2 20 00				      .db 0
CODE:61B8 43 52	54 43+aCrtcl:		      .ascii 'CRTCL'
CODE:61B8 4C 00				      .db 0
CODE:61BE 46 49	52 53+aFirstOfficerSi:	      .ascii 'FIRST OFFICER: SIR, WE HAVE HIT A TRITON MINE'
CODE:61BE 54 20	4F 46+			      .db 0
CODE:61EC 43 4F	4D 4D+aCommunicatio_0:	      .ascii 'COMMUNICATIONS:SIR, WE MADE CONTACT WITH A JOVIAN VESSEL'
CODE:61EC 55 4E	49 43+			      .db 0
CODE:6225 4A 4F	56 49+aJovianWatchWhe:	      .ascii 'JOVIAN: WATCH WHERE YOU ARE GOING YOU TURKEY!!'
CODE:6225 41 4E	3A 20+			      .db 0
CODE:6254 4E 41	56 49+aNavigatorWeHit:	      .ascii 'NAVIGATOR:WE HIT A STAR!?!'
CODE:6254 47 41	54 4F+			      .db 0
CODE:626F 45 4E	47 49+aEngineerComm_0:	      .ascii 'ENGINEER:COMMANDER, WE HAVEN'
CODE:626F 4E 45	45 52+			      .db 0x27
CODE:626F 3A 43	4F 4D+			      .ascii 'T THE POWER TO FIRE MASERS'
CODE:626F 4D 41	4E 44+			      .db 0
CODE:62A7 46 49	52 53+aFirstOfficer_1:	      .ascii 'FIRST OFFICER:SIR, MY SENSORS SHOW MASER HAD NO EFFECT'
CODE:62A7 54 20	4F 46+			      .db 0
CODE:62DE 45 4E	47 49+aEngineerComm_1:	      .ascii 'ENGINEER:COMMANDER, THE MISSILE TUBES ARE POWER DEFICIENT'
CODE:62DE 4E 45	45 52+			      .db 0
CODE:6318 43 4F	4D 50+aComputerObject:	      .ascii 'COMPUTER:OBJECT DESTROYED'
CODE:6318 55 54	45 52+			      .db 0
CODE:6332 4E 41	56 49+aNavigatorTheEn:	      .ascii 'NAVIGATOR:THE ENGINES ARE EXPLODING'
CODE:6332 47 41	54 4F+			      .db 0
CODE:6356 45 4E	47 49+aEngineerComm_2:	      .ascii 'ENGINEER:COMMANDER, THE ENGINES ARE OVERLOADED, THEY CAN'
CODE:6356 4E 45	45 52+			      .db 0x27
CODE:6356 3A 43	4F 4D+			      .ascii 'T LAST    AT THAT RATE'
CODE:6356 4D 41	4E 44+			      .db 0
CODE:63A6 43 4F	4D 50+aComputerSelfDe:	      .ascii 'COMPUTER:SELF DESTRUCT SEQUENCE INITIATED. 15 SECONDS REMAIN'
CODE:63A6 55 54	45 52+			      .db 0
CODE:63E3 43 4F	4D 50+aComputerSelf_0:	      .ascii 'COMPUTER:SELF DESTRUCT SEQUENCE ABORTED'
CODE:63E3 55 54	45 52+			      .db 0
CODE:640B 4D 45	44 49+aMedicalOfficer:	      .ascii 'MEDICAL OFFICER:I CAN'
CODE:640B 43 41	4C 20+			      .db 0x27
CODE:640B 4F 46	46 49+			      .ascii 'T ALLOW YOU TO FIRE THE EXPERIMENTAL RAY!'
CODE:640B 43 45	52 3A+			      .db 0
CODE:644B 57 45	41 50+aWeaponrySirWeH:	      .ascii 'WEAPONRY:SIR, WE HAVE NO MORE TRITON MISSILES'
CODE:644B 4F 4E	52 59+			      .db 0
CODE:6479 45 4E	47 49+aEngineerThereG:	      .ascii 'ENGINEER:THERE GOES A POWER CRYSTAL, COMMANDER'
CODE:6479 4E 45	45 52+			      .db 0
CODE:64A8 45 4E	47 49+aEngineerComm_3:	      .ascii 'ENGINEER:COMMANDER, THE SHIELDS ARE FALLING APART!'
CODE:64A8 4E 45	45 52+			      .db 0
CODE:64DB 43 4F	4D 4D+aCommandHeadq_0:	      .ascii 'COMMAND HEADQUARTERS:  CONGRATULATIONS, YOU HAVE DESTROYED ALL    THE J'
CODE:64DB 41 4E	44 20+			      .ascii 'OVIANS. YOU ARE PROMOTED TO ADMIRAL'
CODE:64DB 48 45	41 44+			      .db 0
CODE:6546 46 49	52 53+aFirstOfficerTh:	      .ascii 'FIRST OFFICER: THE EXPERIMENTAL RAY'
CODE:6546 54 20	4F 46+			      .db 0
CODE:656A 49 53	20 46+aIsFiringTriton:	      .ascii 'IS FIRING TRITON MISSILES'
CODE:656A 49 52	49 4E+			      .db 0
CODE:6584 43 41	55 53+aCausedAChangeI:	      .ascii 'CAUSED A CHANGE IN SPACIAL     STRUCTURE'
CODE:6584 45 44	20 41+			      .db 0
CODE:65AD 48 41	53 20+aHasFrozenTimeF:	      .ascii 'HAS FROZEN TIME FOR THE        JOVIANS'
CODE:65AD 46 52	4F 5A+			      .db 0
CODE:65D4 48 41	53 20+aHasCausedTheJo:	      .ascii 'HAS CAUSED THE JOVIANS TO      BECOME INVISIBLE'
CODE:65D4 43 41	55 53+			      .db 0
CODE:6604 43 4F	4D 50+aComputerTriton:	      .ascii 'COMPUTER:TRITON MISSILE HAS NO EFFECT'
CODE:6604 55 54	45 52+			      .db 0
CODE:662A 48 41	53 20+aHasJumbledTheQ:	      .ascii 'HAS JUMBLED THE QUADRANT'
CODE:662A 4A 55	4D 42+			      .db 0
CODE:6643 48 41	53 20+aHasDestroyedAl:	      .ascii 'HAS DESTROYED ALL THE          JOVIANS IN THE QUADRANT'
CODE:6643 44 45	53 54+			      .db 0
CODE:667A 44 45	53 54+aDestroysItself:	      .ascii 'DESTROYS ITSELF'
CODE:667A 52 4F	59 53+			      .db 0
CODE:668A 48 41	53 20+aHasBackfiredOn:	      .ascii 'HAS BACKFIRED ON US'
CODE:668A 42 41	43 4B+			      .db 0
CODE:669E 48 41	53 20+aHasCausedAComp:	      .ascii 'HAS CAUSED A COMPUTER          MALFUNCTION'
CODE:669E 43 41	55 53+			      .db 0
CODE:66C9 49 53	20 50+aIsPermanentlyD:	      .ascii 'IS PERMANENTLY DISABLED'
CODE:66C9 45 52	4D 41+			      .db 0
CODE:66E1 53 48	49 50+aShipLogUssPhae:	      .ascii 'SHIP LOG-USS PHAETON-CAPTAIN DAR: SENSORS FOUND DEBRIS BELIEVED THAT OF'
CODE:66E1 20 4C	4F 47+			      .ascii ' USS HEPHAESTUS.'
CODE:66E1 2D 55	53 53+			      .db 0
CODE:6739 45 4E	54 45+aEnterSpeedFact:	      .ascii 'ENTER SPEED FACTOR (0(FAST)-9(SLOW))'
CODE:6739 52 20	53 50+			      .db 0
CODE:675E 57 45	41 50+aWeaponryWeReOu:	      .ascii 'WEAPONRY: WE'
CODE:675E 4F 4E	52 59+			      .db 0x27
CODE:675E 3A 20	57 45+			      .ascii 'RE OUT OF PODS'
CODE:675E 27 52	45 20+			      .db 0
CODE:677A 43 4F	4D 50+aComputerThePod:	      .ascii 'COMPUTER: THE POD HAS BEEN USED'
CODE:677A 55 54	45 52+			      .db 0
CODE:679A 43 4F	4D 50+aComputerPodLau:	      .ascii 'COMPUTER: POD LAUNCH IS BLOCKED'
CODE:679A 55 54	45 52+			      .db 0
CODE:67BA 46 49	52 53+aFirstOfficer_2:	      .ascii 'FIRST OFFICER: THE UNKNOWN IS STEALING POWER CAPTAIN'
CODE:67BA 54 20	4F 46+			      .db 0
CODE:67EF 19 3F	      chaser_addr:	      .dw VIDEO+0x319
CODE:67F1 00	      tmp_delay_cycle:	      .db 0
CODE:67F2 00	      delay_cycle:	      .db 0
CODE:67F3 00	      tmp_sector_contents:    .db 0
CODE:67F4 00				      .db 0
CODE:67F5 00				      .db 0
CODE:67F6	      ;	table used in delay routine
CODE:67F6	      ;	- scaling factors for duty cycle
CODE:67F6 02 02	      delay_duty_cycle_tbl:   .db 2, 2
CODE:67F8 55 02				      .db 85, 2
CODE:67FA 18 18				      .db 24, 24
CODE:67FC 50 22				      .db 80, 34
CODE:67FE 00				      .db 0
CODE:67FF 08	      ion_speed:	      .db 8
CODE:6800 37 3F	      cmd_entry_addr:	      .dw VIDEO+0x337
CODE:6802 D4 51	      cmd_jmp_vectors:	      .dw hyperdrive
CODE:6804 46 52				      .dw ion_engine
CODE:6806 2A 54				      .dw maser
CODE:6808 EB 54				      .dw triton_missile
CODE:680A 7C 56				      .dw power_distrib
CODE:680C 30 57				      .dw self_destruct
CODE:680E 71 57				      .dw experimental_ray
CODE:6810 0C 59				      .dw explode_pod
CODE:6812 62 58				      .dw launch_antimatter
CODE:6814 19 1A	      cmd_l_vector:	      .dw 0x1A19			      ;	BASIC ENTRY POINT
CODE:6816 48 49	4D 54+cmd_tbl:		      .ascii 'HIMTDSEXAL'
CODE:6816 44 53	45 58+			      .db 0
CODE:6821 48 4C	53 44+pwr_subcmd_tbl:	      .ascii 'HLSDMT'
CODE:6821 4D 54	00			      .db 0
CODE:6828 02 00	      hephaestus_video_addr:  .dw 2
CODE:682A 00	      engine_explode_countdown:.db 0
CODE:682B 03	      antimatter_pods:	      .db 3
CODE:682C	      ;	when a triton missile hits an unknown object
CODE:682C	      ;	randomly vector	to one of these	locations
CODE:682C 9C 55	      missile_hit_unknown_tbl:.dw missile_hit_unk_079
CODE:682E D5 55				      .dw missile_hit_unk_1
CODE:6830 05 56				      .dw missile_hit_unk_2
CODE:6832 19 56				      .dw missile_hit_unk_3
CODE:6834 3D 56				      .dw missile_hit_unk_4
CODE:6836 46 56				      .dw missile_hit_unk_58
CODE:6838 0D 56				      .dw missile_hit_unk_6
CODE:683A 9C 55				      .dw missile_hit_unk_079
CODE:683C 46 56				      .dw missile_hit_unk_58
CODE:683E 9C 55	      off_683E:		      .dw missile_hit_unk_079
CODE:6840 06	      pod_speed:	      .db 6
CODE:6841 A6 57				      .dw expr_0
CODE:6843 CA 57				      .dw expr_1
CODE:6845 D5 57				      .dw expr_2
CODE:6847 F8 57				      .dw expr_3
CODE:6849 04 58				      .dw expr_4
CODE:684B 31 58				      .dw expr_5
CODE:684D 3C 58				      .dw expr_6
CODE:684F 51 58				      .dw expr_7
CODE:6851 5C 58				      .dw expr_8
CODE:6853 92 57				      .dw expr_9
CODE:6855 00	      blocked_by_unknown:     .db 0				      ;	$00=OK,	$FF=blocked
CODE:6856 00	      ion_dir:		      .db 0
CODE:6857 00				      .db    0
CODE:6858 00	      jovians_left:	      .db 0
CODE:6859 90 91	01 11+quadrant_delta_tbl:     .db 0x90,	0x91, 1, 0x11, 0x10, 9,	0x99, 0x89
CODE:6861 00	      quadrant:		      .db 0
CODE:6862	      ;	300 bytes cleared at startup
CODE:6862	      ;	- quadrant data, 3 bytes
CODE:6862	      ;	  +$00 - (3:0)=warships
CODE:6862	      ;	  +$01 - (3:0)=space stations
CODE:6862	      ;	  +$02 - (3:0)=stars
CODE:6862 4C 4F	54 20+quadrant_tbl:	      .db 0x4C,	0x4F, 0x54, 0x20, 0x44,	0x57, 0x20, 0x30, 0xD
CODE:6862 44 57	20 30+			      .db 0x19,	0x31, 0x33, 0x38, 0x32,	0x20, 0x43, 0x4C, 0x45
CODE:6862 0D 19	31 33+			      .db 0x41,	0x52, 0x20, 0x41, 0x53,	0x43, 0x20, 0x27, 0x20
CODE:6862 38 32	20 43+			      .db 0x20,	0x20, 0x20, 0x20, 0x20,	0x27, 0xD, 0xC,	0x31, 0x33
CODE:6862 4C 45	41 52+			      .db 0x38,	0x33, 0x20, 0x20, 0x44,	0x42, 0x20, 0x30, 0xD
CODE:6862 20 41	53 43+			      .db 0x14,	0x31, 0x33, 0x38, 0x34,	0x20, 0x20, 0x41, 0x53
CODE:6862 20 27	20 20+			      .db 0x43,	0x20, 0x27, 0x20, 0x20,	0x20, 0x20, 0x20, 0x20
CODE:6862 20 20	20 20+			      .db 0x27,	0xD, 0xC, 0x31,	0x33, 0x38, 0x35, 0x20,	0x20, 0x44
CODE:6862 27 0D	0C 31+			      .db 0x42,	0x20, 0x30, 0xD, 0x13, 0x31, 0x33, 0x38, 0x36
CODE:6862 33 38	33 20+			      .db 0x20,	0x53, 0x57, 0x54, 0x31,	0x20, 0x45, 0x51, 0x55
CODE:6862 20 44	42 20+			      .db 0x20,	0x27, 0x30, 0x27, 0xD, 0x13, 0x31, 0x33, 0x38
CODE:6862 30 0D	14 31+			      .db 0x37,	0x20, 0x53, 0x57, 0x54,	0x32, 0x20, 0x45, 0x51
CODE:6862 33 38	34 20+			      .db 0x55,	0x20, 0x27, 0x21, 0x27,	0xD, 0x11, 0x31, 0x33
CODE:6862 20 41	53 43+			      .db 0x38,	0x38, 0x20, 0x58, 0x46,	0x4C, 0x41, 0x47, 0x20
CODE:6862 20 27	20 20+			      .db 0x44,	0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x38
CODE:6862 20 20	20 20+			      .db 0x39,	0x20, 0x5A, 0x46, 0x4C,	0x41, 0x47, 0x20, 0x44
CODE:6862 27 0D	0C 31+			      .db 0x42,	0x20, 0x30, 0xD, 0xF, 0x31, 0x33, 0x39,	0x30, 0x20
CODE:6862 33 38	35 20+			      .db 0x57,	0x48, 0x31, 0x20, 0x44,	0x42, 0x20, 0x30, 0xD
CODE:6862 20 44	42 20+			      .db 0xF, 0x31, 0x33, 0x39, 0x31, 0x20, 0x57, 0x48, 0x32
CODE:6862 30 0D	13 31+			      .db 0x20,	0x44, 0x42, 0x20, 0x30,	0xD, 0x11, 0x31, 0x33
CODE:6862 33 38	36 20+			      .db 0x39,	0x32, 0x20, 0x44, 0x44,	0x45, 0x4D, 0x4F, 0x20
CODE:6862 53 57	54 31+			      .db 0x44,	0x42, 0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x39
CODE:6862 20 45	51 55+			      .db 0x33,	0x20, 0x42, 0x54, 0x59,	0x50, 0x45, 0x20, 0x44
CODE:6862 20 27	30 27+			      .db 0x42,	0x20, 0x30, 0xD, 0x11, 0x31, 0x33, 0x39, 0x34
CODE:6862 0D 13	31 33+			      .db 0x20,	0x4E, 0x53, 0x48, 0x54,	0x53, 0x20, 0x44, 0x57
CODE:6862 38 37	20 53+			      .db 0x20,	0x30, 0xD, 0x11, 0x31, 0x33, 0x39, 0x35, 0x20
CODE:6862 57 54	32 20+			      .db 0x4E,	0x48, 0x49, 0x54, 0x53,	0x20, 0x44, 0x57, 0x20
CODE:6862 45 51	55 20+			      .db 0x30,	0xD, 0x27, 0x31, 0x33, 0x39, 0x36, 0x20, 0x58
CODE:6862 27 21	27 0D+			      .db 0x50,	0x4C, 0x4F, 0x31, 0x20,	0x44, 0x42, 0x20, 0x30
CODE:6862 11 31	33 38+			      .db 0x32,	0x30, 0x48, 0x2C, 0x27,	0x2A, 0x27, 0x2C, 0x31
CODE:6862 38 20	58 46+			      .db 0x39,	0x31, 0x2C, 0x27, 0x2A,	0x27, 0x2C, 0x30, 0x32
CODE:6862 4C 41	47 20+			      .db 0x30,	0x48, 0x2C, 0x30, 0xD, 0x20, 0x31, 0x33, 0x39
CODE:6862 44 42	20 30+			      .db 0x37,	0x20, 0x20, 0x44, 0x42,	0x20, 0x27, 0x2A, 0x27
CODE:698E 3F				      .db 0x3F ; ?
CODE:698F 3F				      .db 0x3F ; ?
CODE:6990 3F				      .db 0x3F ; ?
CODE:6991 3F				      .db 0x3F ; ?
CODE:6992 3F				      .db 0x3F ; ?
CODE:6993 3F				      .db 0x3F ; ?
CODE:6994 20	      pwr_hypr_ion:	      .db 0x20
CODE:6995 20	      pwr_lr_sensor:	      .db 0x20
CODE:6996 10	      pwr_sr_sensor:	      .db 0x10
CODE:6997 20	      pwr_deflectors:	      .db 0x20
CODE:6998 09	      pwr_masers:	      .db 9
CODE:6999 11	      pwr_trt_missl:	      .db 0x11
CODE:699A C0 FF	      dir_addr_delta_tbl:     .dw 0xFFC0
CODE:699C C2 FF				      .dw 0xFFC2
CODE:699E 02 00				      .dw 2
CODE:69A0 42 00				      .dw 0x42
CODE:69A2 40 00				      .dw 0x40
CODE:69A4 3E 00				      .dw 0x3E
CODE:69A6 FE FF				      .dw 0xFFFE
CODE:69A8 BE FF				      .dw 0xFFBE
CODE:69AA 00	      game_delay_factor:      .db 0				      ;	(0-9)x4+16
CODE:69AB 00	      time_to_jovian_fire:    .db 0
CODE:69AC 00 00	      tmp_jovian_tbl_ptr:     .dw 0
CODE:69AE	      ;	table of jovian	vessel video addresses
CODE:69AE	      ;	- maximum of 4 vessels,	zero-terminated
CODE:69AE 48 2C	      jovian_tbl:	      .dw 0x2C48
CODE:69B0 27 2A				      .dw 0x2A27
CODE:69B2 27 2C				      .dw 0x2C27
CODE:69B4 31 39				      .dw 0x3931
CODE:69B6 31 2C				      .dw 0x2C31
CODE:69B8 99	      power_avail:	      .db 0x99
CODE:69B9 10	      triton_misls:	      .db 0x10
CODE:69BA 03	      unused_69BA:	      .db 3
CODE:69BB 20 20	20 20+jovian_officer:	      .ascii '                     '
CODE:69BB 20 20	20 20+			      .db 0
CODE:69D1 20 20	20 20+aSgggd:		      .ascii '        '
CODE:69D1 20 20	20 20+			      .db 0x98,	0x83, 0x83, 0x83, 0xA4
CODE:69D1 98 83	83 83+			      .ascii '        '
CODE:69D1 A4 20	20 20+			      .db 0
CODE:69E7 20 20	20 20+aCaRi:		      .ascii '       '
CODE:69E7 20 20	20 96+			      .db 0x96,	0xA0
CODE:69E7 A0 20	20 20+			      .ascii '   '
CODE:69E7 90 A9	20 20+			      .db 0x90,	0xA9
CODE:69E7 20 20	20 20+			      .ascii '       '
CODE:69E7 20 00				      .db 0
CODE:69FD 20 20	20 20+aXIJK:		      .ascii '       '
CODE:69FD 20 20	20 95+			      .db 0x95
CODE:69FD 20 89	20 86+			      .ascii ' '
CODE:69FD 20 AA	20 20+			      .db 0x89
CODE:69FD 20 20	20 20+			      .ascii ' '
CODE:69FD 20 00				      .db 0x86
CODE:69FD				      .ascii ' '
CODE:69FD				      .db 0xAA
CODE:69FD				      .ascii '       '
CODE:69FD				      .db 0
CODE:6A13 20 20	20 20+aXXKK_0:		      .ascii '       '
CODE:6A13 20 20	20 95+			      .db 0x95,	0xB7, 0x95
CODE:6A13 B7 95	20 AA+			      .ascii ' '
CODE:6A13 BB AA	20 20+			      .db 0xAA,	0xBB, 0xAA
CODE:6A13 20 20	20 20+			      .ascii '       '
CODE:6A13 20 00				      .db 0
CODE:6A29 20 20	20 20+aX@K:		      .ascii '       '
CODE:6A29 20 20	20 95+			      .db 0x95
CODE:6A29 20 20	40 20+			      .ascii '  @  '
CODE:6A29 20 AA	20 20+			      .db 0xAA
CODE:6A29 20 20	20 20+			      .ascii '       '
CODE:6A29 20 00				      .db 0
CODE:6A3F 20 20	20 20+aO:		      .ascii '       '
CODE:6A3F 20 20	20 B5+			      .db 0xB5,	0xB0
CODE:6A3F B0 20	4F 20+			      .ascii ' O '
CODE:6A3F B0 BA	20 20+			      .db 0xB0,	0xBA
CODE:6A3F 20 20	20 20+			      .ascii '       '
CODE:6A3F 20 00				      .db 0
CODE:6A55 20 20	20 20+aJbmmmvi:		      .ascii '       '
CODE:6A55 20 20	20 86+			      .db 0x86,	0x81, 0x8C, 0x8C, 0x8C,	0x82, 0x89
CODE:6A55 81 8C	8C 8C+			      .ascii '       '
CODE:6A55 82 89	20 20+			      .db 0
CODE:6A6B 20 20	20 20+aJIJI:		      .ascii '      '
CODE:6A6B 20 20	86 20+			      .db 0x86
CODE:6A6B 20 89	20 86+			      .ascii '  '
CODE:6A6B 20 20	89 20+			      .db 0x89
CODE:6A6B 20 20	20 20+			      .ascii ' '
CODE:6A6B 20 00				      .db 0x86
CODE:6A6B				      .ascii '  '
CODE:6A6B				      .db 0x89
CODE:6A6B				      .ascii '      '
CODE:6A6B				      .db 0
CODE:6A81 20 20	20 20+aJI:		      .ascii '     '
CODE:6A81 20 86	20 21+			      .db 0x86
CODE:6A81 3E 3E	20 3C+			      .ascii ' !>> <<! '
CODE:6A81 3C 21	20 89+			      .db 0x89
CODE:6A81 20 20	20 20+			      .ascii '     '
CODE:6A81 20 00				      .db 0
CODE:6A97 20 20	20 20+hq_officer:	      .ascii '                     '
CODE:6A97 20 20	20 20+			      .db 0
CODE:6AAD 20 20	20 20+aMpm:		      .ascii '        '
CODE:6AAD 20 20	20 20+			      .db 0xB0,	0x8C, 0x8F, 0x8C, 0xB0
CODE:6AAD B0 8C	8F 8C+			      .ascii '        '
CODE:6AAD B0 20	20 20+			      .db 0
CODE:6AC3 20 20	20 20+aGgqgggggpgg:	      .ascii '     '
CODE:6AC3 20 83	83 9F+			      .db 0x83,	0x83, 0x9F, 0x83, 0x83,	0x83, 0x83, 0x83, 0xAF
CODE:6AC3 83 83	83 83+			      .db 0x83,	0x83
CODE:6AC3 83 AF	83 83+			      .ascii '     '
CODE:6AC3 20 20	20 20+			      .db 0
CODE:6AD9 20 20	20 20+aXXKK:		      .ascii '       '
CODE:6AD9 20 20	20 95+			      .db 0x95,	0xB7, 0x95
CODE:6AD9 B7 95	20 AA+			      .ascii ' '
CODE:6AD9 BB AA	20 20+			      .db 0xAA,	0xBB, 0xAA
CODE:6AD9 20 20	20 20+			      .ascii '       '
CODE:6AD9 20 00				      .db 0
CODE:6AEF 20 20	20 20+aXK:		      .ascii '       '
CODE:6AEF 20 20	20 95+			      .db 0x95
CODE:6AEF 20 20	B0 20+			      .ascii '  '
CODE:6AEF 20 AA	20 20+			      .db 0xB0
CODE:6AEF 20 20	20 20+			      .ascii '  '
CODE:6AEF 20 00				      .db 0xAA
CODE:6AEF				      .ascii '       '
CODE:6AEF				      .db 0
CODE:6B05 20 20	20 20+aXMpmK:		      .ascii '       '
CODE:6B05 20 20	20 95+			      .db 0x95
CODE:6B05 20 8C	8F 8C+			      .ascii ' '
CODE:6B05 20 AA	20 20+			      .db 0x8C,	0x8F, 0x8C
CODE:6B05 20 20	20 20+			      .ascii ' '
CODE:6B05 20 00				      .db 0xAA
CODE:6B05				      .ascii '       '
CODE:6B05				      .db 0
CODE:6B1B 20 20	20 20+aEO:		      .ascii '       '
CODE:6B1B 20 20	20 A5+			      .db 0xA5
CODE:6B1B 20 20	4F 20+			      .ascii '  O  '
CODE:6B1B 20 9A	20 20+			      .db 0x9A
CODE:6B1B 20 20	20 20+			      .ascii '       '
CODE:6B1B 20 00				      .db 0
CODE:6B31 20 20	20 20+aIJ:		      .ascii '        '
CODE:6B31 20 20	20 20+			      .db 0x89,	0xB0, 0xB0, 0xB0, 0x86
CODE:6B31 89 B0	B0 B0+			      .ascii '        '
CODE:6B31 86 20	20 20+			      .db 0
CODE:6B47 20 20	20 20+			      .ascii '    ((** < > **))    '
CODE:6B47 28 28	2A 2A+			      .db 0
CODE:6B5D 20 20	20 20+			      .ascii '    ((  !! !!  ))    '
CODE:6B5D 28 28	20 20+			      .db 0
CODE:6B73 20 20	49 4E+aInvasionForceR:	      .ascii '  INVASION FORCE  -------  RADIO SHACK '
CODE:6B73 56 41	53 49+			      .db 0
CODE:6B9B 20 4C	2D 52+aLRSensorMineRa:	      .ascii ' L-R SENSOR  %-MINE   ------RADIO SHACK------ [ USS HEPHAESTUS ['
CODE:6BDB 20 30	30 30+a000000000Hephs:	      .ascii ' 000 000 000 [-HEPHS 0I                     I STAR-TIME   300200'
CODE:6C1B 20 2D	2D 2D+a0Sstn1iICondit:	      .ascii ' ----------- 0-SSTN  1I                     I CONDITION    STDBY'
CODE:6C5B 20 30	30 30+a000000000@Jcc2:	      .ascii ' 000 000 000 @-JCC   2I                     I QUADRANT      0-0 '
CODE:6C9B 20 2D	2D 2D+aJbc3iISector00:	      .ascii ' ----------- &-JBC   3I                     I SECTOR        0-0 '
CODE:6CDB 20 30	30 30+a000000000XUnkn:	      .ascii ' 000 000 000 X-UNKN  4I                     I TRITON MISLS   10 '
CODE:6D1B 20 20	50 57+aPwrDist5iIPowe:	      .ascii '  PWR DIST   %       5I                     I POWER AVAIL    99%'
CODE:6D5B 20 20	48 59+aHyprIon206iIJo:	      .ascii '  HYPR&ION   20      6I                     I JOVIANS LEFT   000'
CODE:6D9B 20 20	4C 52+aLrSensor107iIA:	      .ascii '  LR SENSOR  10      7I                     I ANTIMATTER PODS 03'
CODE:6DDB 20 20	53 52+aSrSensor208iI7:	      .ascii '  SR SENSOR  20      8I                     I          7  0  1  '
CODE:6E1B 20 20	44 45+aDeflectors209i:	      .ascii '  DEFLECTORS 20      9I                     I   SCDM:  6  -  2  '
CODE:6E5B 20 20	4D 41+aMasers09II543:	      .ascii '  MASERS     09       I---------------------I          5  4  3  '
CODE:6E9B 20 20	54 52+aTrtMissl11I012:	      .ascii '  TRT MISSL  11       I 0 1 2 3 4 5 6 7 8 9 I  COMMAND:         '
CODE:6EDB 20 20	20 20+			      .ascii '                                                                '
CODE:6F1B 20 20	20 20+			      .ascii '                                                                '
CODE:6F5B 20 20	20 20+			      .ascii '                                                                '
CODE:6F9B	      ;	$45 bytes cleared at startup
CODE:6F9B
CODE:6F9B	      ;	- antimatter pod table
CODE:6F9B	      ;	  - 3x 6-byte entries
CODE:6F9B	      ;	    +$0	= pod status (0=used, 1=launched, 2=exploded)
CODE:6F9B	      ;	    +$1/2 = pod	video address delta
CODE:6F9B	      ;	    +$3/4 = pod	video address
CODE:6F9B	      ;	    +$5	= pod speed countdown
CODE:6F9B 23 C3	BD 6F+antimatter_pod_tbl:     .db 0x23,	0xC3, 0xBD, 0x6F, 1, 0xCB
CODE:6FA1 21 7E	FE C3+			      .db 0x21,	0x7E, 0xFE, 0xC3, 0xC2,	0xE0
CODE:6FA7 6F 2B	7E B7+			      .db 0x6F,	0x2B, 0x7E, 0xB7, 0xCA,	0xBD
CODE:6FAD	      ;
CODE:6FAD 6F	      eot:		      .db 0x6F
CODE:6FAE FE	      always_zero:	      .db 0xFE
CODE:6FAF 7F	      delay_duty_cycle_i:     .db 0x7F
CODE:6FB0 C2	      power_overflow:	      .db 0xC2				      ;	$00=OK,	$FF=overflow
CODE:6FB1 E0	      cmd_flag:		      .db 0xE0				      ;	00=new,	$FF=none
CODE:6FB2 6F	      cmd_len:		      .db 0x6F
CODE:6FB3 2E	      hyperdrive_disabled:    .db 0x2E				      ;	$00=OK,	$FF=disabled
CODE:6FB4 1F	      maser_fired:	      .db 0x1F				      ;	$00=NO,	$FF=fired
CODE:6FB5 22	      computer_malfunction:   .db 0x22				      ;	$00=OK,	$FF=malfunctioned
CODE:6FB6 06	      jovian_time_frozen:     .db 6				      ;	$00=normal, $FF=frozen
CODE:6FB7 70	      experimental_ray_disabled:.db 0x70			      ;	$00=OK,	$FF=disabled
CODE:6FB8 2E	      disable_pod_update:     .db 0x2E				      ;	$00=OK,	$XX=disabled
CODE:6FB9 04	      critical:		      .db 4				      ;	$00=OK,	$01=SELF-DESTRUCT, $FF=EXPLODING
CODE:6FBA 22				      .db 0x22 ; "
CODE:6FBB 14				      .db 0x14
CODE:6FBC 68				      .db 0x68 ; h
CODE:6FBD	      ;	looks like this	had some debug code
CODE:6FBD	      ;	hooked at $7036
CODE:6FBD 21	      unk_6FBD:		      .db 0x21 ; !
CODE:6FBE 00				      .db    0
CODE:6FBF 00				      .db    0
CODE:6FC0 0A				      .db  0xA
CODE:6FC1 22				      .db 0x22 ; "
CODE:6FC2 00				      .db    0
CODE:6FC3 00				      .db    0
CODE:6FC4 22				      .db 0x22 ; "
CODE:6FC5 02				      .db    2
CODE:6FC6 00				      .db    0
CODE:6FC7 21				      .db 0x21 ; !
CODE:6FC8 73				      .db 0x73 ; s
CODE:6FC9 6B				      .db 0x6B ; k
CODE:6FCA 11				      .db 0x11
CODE:6FCB 42				      .db 0x42 ; B
CODE:6FCC 70				      .db 0x70 ; p
CODE:6FCD C3				      .db 0xC3 ; √
CODE:6FCE 01				      .db    1
CODE:6FCF 50				      .db 0x50 ; P
CODE:6FD0 91				      .db 0x91 ; ë
CODE:6FD1 96				      .db 0x96 ; ñ
CODE:6FD2 E3				      .db 0xE3 ; „
CODE:6FD3 C2				      .db 0xC2 ; ¬
CODE:6FD4 0E				      .db  0xE
CODE:6FD5 70				      .db 0x70 ; p
CODE:6FD6 E3				      .db 0xE3 ; „
CODE:6FD7 23				      .db 0x23 ; #
CODE:6FD8 05				      .db    5
CODE:6FD9 13				      .db 0x13
CODE:6FDA C2				      .db 0xC2 ; ¬
CODE:6FDB CD				      .db 0xCD ; Õ
CODE:6FDC 6F				      .db 0x6F ; o
CODE:6FDD C3				      .db 0xC3 ; √
CODE:6FDE 01				      .db    1
CODE:6FDF 50				      .db 0x50 ; P
CODE:6FE0	      ;
CODE:6FE0	      ;	--- end	of area	cleared	at startup ---
CODE:6FE0	      ;
CODE:6FE0 3A				      .db 0x3A ; :
CODE:6FE1 00				      .db    0
CODE:6FE2 E0				      .db 0xE0 ; ‡
CODE:6FE3 B7				      .db 0xB7 ; ∑
CODE:6FE4 C2				      .db 0xC2 ; ¬
CODE:6FE5 1C				      .db 0x1C
CODE:6FE6 70				      .db 0x70 ; p
CODE:6FE7 3A				      .db 0x3A ; :
CODE:6FE8 01				      .db    1
CODE:6FE9 E0				      .db 0xE0 ; ‡
CODE:6FEA FE				      .db 0xFE ; ˛
CODE:6FEB C3				      .db 0xC3 ; √
CODE:6FEC C2				      .db 0xC2 ; ¬
CODE:6FED 1C				      .db 0x1C
CODE:6FEE 70				      .db 0x70 ; p
CODE:6FEF 3E				      .db 0x3E ; >
CODE:6FF0 CD				      .db 0xCD ; Õ
CODE:6FF1 32				      .db 0x32 ; 2
CODE:6FF2 B6				      .db 0xB6 ; ∂
CODE:6FF3 51				      .db 0x51 ; Q
CODE:6FF4 21				      .db 0x21 ; !
CODE:6FF5 A4				      .db 0xA4 ; §
CODE:6FF6 D0				      .db 0xD0 ; –
CODE:6FF7 22				      .db 0x22 ; "
CODE:6FF8 06				      .db    6
CODE:6FF9 70				      .db 0x70 ; p
CODE:6FFA 21				      .db 0x21 ; !
CODE:6FFB 60 E0	      STACK_WATERMARK:	      .dw 0xE060
CODE:6FFD 22				      .db 0x22 ; "
CODE:6FFE 14				      .db 0x14
CODE:6FFF 68				      .db 0x68 ; h
CODE:7000 21				      .db 0x21 ; !
CODE:7001 CC				      .db 0xCC ; Ã
CODE:7002 D0				      .db 0xD0 ; –
CODE:7003 22				      .db 0x22 ; "
CODE:7004 08				      .db    8
CODE:7005 70				      .db 0x70 ; p
CODE:7006 3E				      .db 0x3E ; >
CODE:7007 CD				      .db 0xCD ; Õ
CODE:7008 32				      .db 0x32 ; 2
CODE:7009 0B				      .db  0xB
CODE:700A 70				      .db 0x70 ; p
CODE:700B C3				      .db 0xC3 ; √
CODE:700C BD				      .db 0xBD ; Ω
CODE:700D 6F				      .db 0x6F ; o
CODE:700E 2A				      .db 0x2A ; *
CODE:700F 2E				      .db 0x2E ; .
CODE:7010 70				      .db 0x70 ; p
CODE:7011 77				      .db 0x77 ; w
CODE:7012 23				      .db 0x23 ; #
CODE:7013 1A				      .db 0x1A
CODE:7014 77				      .db 0x77 ; w
CODE:7015 23				      .db 0x23 ; #
CODE:7016 22				      .db 0x22 ; "
CODE:7017 2E				      .db 0x2E ; .
CODE:7018 70				      .db 0x70 ; p
CODE:7019 C3				      .db 0xC3 ; √
CODE:701A D6				      .db 0xD6 ; ÷
CODE:701B 6F				      .db 0x6F ; o
CODE:701C 21				      .db 0x21 ; !
CODE:701D 39				      .db 0x39 ; 9
CODE:701E 70				      .db 0x70 ; p
CODE:701F 11				      .db 0x11
CODE:7020 B6				      .db 0xB6 ; ∂
CODE:7021 51				      .db 0x51 ; Q
CODE:7022	      ;	---------------------------------------------------------------------------
CODE:7022
CODE:7022	      loc_7022:
CODE:7022 7E				      ld      a, (hl)
CODE:7023 FE FF				      cp      #0xFF
CODE:7025 CA 30	70			      jp      Z, loc_7030
CODE:7028 12				      ld      (de), a
CODE:7029 23				      inc     hl
CODE:702A 13				      inc     de
CODE:702B C3 22	70			      jp      loc_7022
CODE:702B	      ;	---------------------------------------------------------------------------
CODE:702E 0C				      .db  0xC
CODE:702F 5B				      .db 0x5B ; [
CODE:7030	      ;	---------------------------------------------------------------------------
CODE:7030
CODE:7030	      loc_7030:
CODE:7030 21 03	00			      ld      hl, #3
CODE:7033 22 14	68			      ld      (cmd_l_vector), hl	      ;	hook "L" cmd
CODE:7036 C3 BD	6F			      jp      unk_6FBD			      ;	debug code???
CODE:7036	      ;	---------------------------------------------------------------------------
CODE:7039 DB 00	00 E6+			      .db 0xDB,	0, 0, 0xE6, 0x40, 0xC8,	0xDB, 1, 0xFF, 0, 0x27
CODE:7039 40 C8	DB 01+			      .db 0x5A,	0x2E, 0x2C, 0x5A, 0x27,	0xD, 0xD, 0x31,	0x34, 0x37
CODE:7039 FF 00	27 5A+			      .db 0x31,	0x20, 0x20, 0x44, 0x53,	0x20, 0x33, 0x32, 0xD
CODE:7039 2E 2C	5A 27+			      .db 0x11,	0x31, 0x34, 0x37, 0x32,	0x20, 0x53, 0x54, 0x41
CODE:7039 0D 0D	31 34+			      .db 0x43,	0x4B, 0x20, 0x44, 0x42,	0x20, 0x30, 0xD, 1, 0x20
CODE:7039 37 31	20 20+			      .db 0x33,	0x38, 0xD, 0x34, 0x31, 0x32, 0x38, 0x30, 0x20
CODE:7039 44 53	20 33+			      .db 0x20,	0x41, 0x53, 0x43, 0x20,	0x2F, 0x41, 0x52, 0x45
CODE:7039 32 0D	11 31+			      .db 0x20,	0x53, 0x55, 0x43, 0x48,	0x20, 0x51, 0x55, 0x45
CODE:7039 34 37	32 20+			      .db 0x53,	0x54, 0x49, 0x4F, 0x4E,	0x53, 0x20, 0x4F, 0x4E
CODE:7039 53 54	41 43+			      .db 0x20,	0x59, 0x4F, 0x55, 0x52,	0x20, 0x4D, 0x49, 0x4E
CODE:7039 4B 20	44 42+			      .db 0x44,	0x20, 0x4F, 0x46, 0x54,	0x45, 0x4E, 0x3F, 0x2F
CODE:7039 20 30	0D 01+			      .db 0xD, 0xD, 0x31, 0x32,	0x38, 0x31, 0x20, 0x20,	0x44, 0x42
CODE:7039 20 33	38 0D+			      .db 0x20,	0x34, 0x30, 0xD, 0x36, 0x31, 0x32, 0x38, 0x32
CODE:7039 34 31	32 38+			      .db 0x20,	0x20, 0x41, 0x53, 0x43,	0x20, 0x2F, 0x57, 0x48
CODE:7039 30 20	20 41+			      .db 0x41,	0x54, 0x20, 0x49, 0x53,	0x20, 0x49, 0x54, 0x20
CODE:7039 53 43	20 2F+			      .db 0x54,	0x48, 0x41, 0x54, 0x20,	0x59, 0x4F, 0x55, 0x20
CODE:7039 41 52	45 20+			      .db 0x52,	0x45, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0
CODE:7039 53 55	43 48+			      .db 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0
CODE:7039 20 51	55 45+			      .db 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0xF1
CODE:7039 53 54	49 4F+;	end of 'CODE'
CODE:7039 4E 53	20 4F+
CODE:7039 4E 20	59 4F+;	end of file
